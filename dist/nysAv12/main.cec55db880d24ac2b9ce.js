(self.webpackChunknys_av12=self.webpackChunknys_av12||[]).push([[179],{8255:me=>{function we(v){return Promise.resolve().then(()=>{var O=new Error("Cannot find module '"+v+"'");throw O.code="MODULE_NOT_FOUND",O})}we.keys=()=>[],we.resolve=we,we.id=8255,me.exports=we},8583:(me,we,v)=>{"use strict";v.r(we),v.d(we,{APP_BASE_HREF:()=>ht,AsyncPipe:()=>Vl,CommonModule:()=>Rc,CurrencyPipe:()=>Hs,DOCUMENT:()=>_e,DatePipe:()=>Ul,DecimalPipe:()=>pu,FormStyle:()=>Lt,FormatWidth:()=>Zt,HashLocationStrategy:()=>St,I18nPluralPipe:()=>xa,I18nSelectPipe:()=>yl,JsonPipe:()=>vl,KeyValuePipe:()=>Us,LOCATION_INITIALIZED:()=>ce,Location:()=>$t,LocationStrategy:()=>Se,LowerCasePipe:()=>va,NgClass:()=>Sn,NgComponentOutlet:()=>vr,NgForOf:()=>or,NgForOfContext:()=>Br,NgIf:()=>ss,NgIfContext:()=>qi,NgLocaleLocalization:()=>Ne,NgLocalization:()=>_t,NgPlural:()=>Be,NgPluralCase:()=>rt,NgStyle:()=>Mt,NgSwitch:()=>Ms,NgSwitchCase:()=>ms,NgSwitchDefault:()=>Et,NgTemplateOutlet:()=>Ln,NumberFormatStyle:()=>xt,NumberSymbol:()=>cn,PathLocationStrategy:()=>yt,PercentPipe:()=>Ja,PlatformLocation:()=>se,Plural:()=>jt,SlicePipe:()=>Xi,TitleCasePipe:()=>Di,TranslationWidth:()=>Xt,UpperCasePipe:()=>ba,VERSION:()=>mo,ViewportScroller:()=>Ea,WeekDay:()=>mn,XhrFactory:()=>Ta,formatCurrency:()=>ai,formatDate:()=>Pt,formatNumber:()=>ut,formatPercent:()=>qn,getCurrencySymbol:()=>ii,getLocaleCurrencyCode:()=>Oi,getLocaleCurrencyName:()=>Zn,getLocaleCurrencySymbol:()=>vi,getLocaleDateFormat:()=>Pi,getLocaleDateTimeFormat:()=>An,getLocaleDayNames:()=>fr,getLocaleDayPeriods:()=>Jn,getLocaleDirection:()=>_o,getLocaleEraNames:()=>si,getLocaleExtraDayPeriodRules:()=>bi,getLocaleExtraDayPeriods:()=>pr,getLocaleFirstDayOfWeek:()=>yi,getLocaleId:()=>Lr,getLocaleMonthNames:()=>Fr,getLocaleNumberFormat:()=>ui,getLocaleNumberSymbol:()=>ni,getLocalePluralCase:()=>gr,getLocaleTimeFormat:()=>Nt,getLocaleWeekEndRange:()=>Ti,getNumberOfCurrencyDigits:()=>nr,isPlatformBrowser:()=>gu,isPlatformServer:()=>hc,isPlatformWorkerApp:()=>Lc,isPlatformWorkerUi:()=>ls,registerLocaleData:()=>We,\u0275BrowserPlatformLocation:()=>ie,\u0275DomAdapter:()=>de,\u0275NullViewportScroller:()=>cs,\u0275PLATFORM_BROWSER_ID:()=>mu,\u0275PLATFORM_SERVER_ID:()=>wa,\u0275PLATFORM_WORKER_APP_ID:()=>Gs,\u0275PLATFORM_WORKER_UI_ID:()=>uc,\u0275angular_packages_common_common_a:()=>he,\u0275angular_packages_common_common_b:()=>be,\u0275angular_packages_common_common_c:()=>Tt,\u0275angular_packages_common_common_d:()=>Je,\u0275angular_packages_common_common_e:()=>Yn,\u0275angular_packages_common_common_f:()=>$s,\u0275getDOM:()=>te,\u0275parseCookieValue:()=>bt,\u0275setRootDomAdapter:()=>J});var O=v(3018);let d=null;function te(){return d}function J(Q){d||(d=Q)}class de{}const _e=new O.InjectionToken("DocumentToken");let se=(()=>{class Q{historyGo(ee){throw new Error("Not implemented")}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275prov=(0,O.\u0275\u0275defineInjectable)({factory:he,token:Q,providedIn:"platform"}),Q})();function he(){return(0,O.\u0275\u0275inject)(ie)}const ce=new O.InjectionToken("Location Initialized");let ie=(()=>{class Q extends se{constructor(ee){super(),this._doc=ee,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(ee){const Me=te().getGlobalEventTarget(this._doc,"window");return Me.addEventListener("popstate",ee,!1),()=>Me.removeEventListener("popstate",ee)}onHashChange(ee){const Me=te().getGlobalEventTarget(this._doc,"window");return Me.addEventListener("hashchange",ee,!1),()=>Me.removeEventListener("hashchange",ee)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(ee){this.location.pathname=ee}pushState(ee,Me,mt){fe()?this._history.pushState(ee,Me,mt):this.location.hash=mt}replaceState(ee,Me,mt){fe()?this._history.replaceState(ee,Me,mt):this.location.hash=mt}forward(){this._history.forward()}back(){this._history.back()}historyGo(ee=0){this._history.go(ee)}getState(){return this._history.state}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275inject(_e))},Q.\u0275prov=(0,O.\u0275\u0275defineInjectable)({factory:be,token:Q,providedIn:"platform"}),Q})();function fe(){return!!window.history.pushState}function be(){return new ie((0,O.\u0275\u0275inject)(_e))}function xe(Q,ve){if(0==Q.length)return ve;if(0==ve.length)return Q;let ee=0;return Q.endsWith("/")&&ee++,ve.startsWith("/")&&ee++,2==ee?Q+ve.substring(1):1==ee?Q+ve:Q+"/"+ve}function Fe(Q){const ve=Q.match(/#|\?|$/),ee=ve&&ve.index||Q.length;return Q.slice(0,ee-("/"===Q[ee-1]?1:0))+Q.slice(ee)}function Ye(Q){return Q&&"?"!==Q[0]?"?"+Q:Q}let Se=(()=>{class Q{historyGo(ee){throw new Error("Not implemented")}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275prov=(0,O.\u0275\u0275defineInjectable)({factory:Je,token:Q,providedIn:"root"}),Q})();function Je(Q){const ve=(0,O.\u0275\u0275inject)(_e).location;return new yt((0,O.\u0275\u0275inject)(se),ve&&ve.origin||"")}const ht=new O.InjectionToken("appBaseHref");let yt=(()=>{class Q extends Se{constructor(ee,Me){if(super(),this._platformLocation=ee,this._removeListenerFns=[],null==Me&&(Me=this._platformLocation.getBaseHrefFromDOM()),null==Me)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Me}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ee){this._removeListenerFns.push(this._platformLocation.onPopState(ee),this._platformLocation.onHashChange(ee))}getBaseHref(){return this._baseHref}prepareExternalUrl(ee){return xe(this._baseHref,ee)}path(ee=!1){const Me=this._platformLocation.pathname+Ye(this._platformLocation.search),mt=this._platformLocation.hash;return mt&&ee?`${Me}${mt}`:Me}pushState(ee,Me,mt,Vt){const on=this.prepareExternalUrl(mt+Ye(Vt));this._platformLocation.pushState(ee,Me,on)}replaceState(ee,Me,mt,Vt){const on=this.prepareExternalUrl(mt+Ye(Vt));this._platformLocation.replaceState(ee,Me,on)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ee=0){var Me,mt;null===(mt=(Me=this._platformLocation).historyGo)||void 0===mt||mt.call(Me,ee)}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275inject(se),O.\u0275\u0275inject(ht,8))},Q.\u0275prov=O.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac}),Q})(),St=(()=>{class Q extends Se{constructor(ee,Me){super(),this._platformLocation=ee,this._baseHref="",this._removeListenerFns=[],null!=Me&&(this._baseHref=Me)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ee){this._removeListenerFns.push(this._platformLocation.onPopState(ee),this._platformLocation.onHashChange(ee))}getBaseHref(){return this._baseHref}path(ee=!1){let Me=this._platformLocation.hash;return null==Me&&(Me="#"),Me.length>0?Me.substring(1):Me}prepareExternalUrl(ee){const Me=xe(this._baseHref,ee);return Me.length>0?"#"+Me:Me}pushState(ee,Me,mt,Vt){let on=this.prepareExternalUrl(mt+Ye(Vt));0==on.length&&(on=this._platformLocation.pathname),this._platformLocation.pushState(ee,Me,on)}replaceState(ee,Me,mt,Vt){let on=this.prepareExternalUrl(mt+Ye(Vt));0==on.length&&(on=this._platformLocation.pathname),this._platformLocation.replaceState(ee,Me,on)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ee=0){var Me,mt;null===(mt=(Me=this._platformLocation).historyGo)||void 0===mt||mt.call(Me,ee)}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275inject(se),O.\u0275\u0275inject(ht,8))},Q.\u0275prov=O.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac}),Q})(),$t=(()=>{class Q{constructor(ee,Me){this._subject=new O.EventEmitter,this._urlChangeListeners=[],this._platformStrategy=ee;const mt=this._platformStrategy.getBaseHref();this._platformLocation=Me,this._baseHref=Fe(Bt(mt)),this._platformStrategy.onPopState(Vt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Vt.state,type:Vt.type})})}path(ee=!1){return this.normalize(this._platformStrategy.path(ee))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(ee,Me=""){return this.path()==this.normalize(ee+Ye(Me))}normalize(ee){return Q.stripTrailingSlash(function(Q,ve){return Q&&ve.startsWith(Q)?ve.substring(Q.length):ve}(this._baseHref,Bt(ee)))}prepareExternalUrl(ee){return ee&&"/"!==ee[0]&&(ee="/"+ee),this._platformStrategy.prepareExternalUrl(ee)}go(ee,Me="",mt=null){this._platformStrategy.pushState(mt,"",ee,Me),this._notifyUrlChangeListeners(this.prepareExternalUrl(ee+Ye(Me)),mt)}replaceState(ee,Me="",mt=null){this._platformStrategy.replaceState(mt,"",ee,Me),this._notifyUrlChangeListeners(this.prepareExternalUrl(ee+Ye(Me)),mt)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(ee=0){var Me,mt;null===(mt=(Me=this._platformStrategy).historyGo)||void 0===mt||mt.call(Me,ee)}onUrlChange(ee){this._urlChangeListeners.push(ee),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Me=>{this._notifyUrlChangeListeners(Me.url,Me.state)}))}_notifyUrlChangeListeners(ee="",Me){this._urlChangeListeners.forEach(mt=>mt(ee,Me))}subscribe(ee,Me,mt){return this._subject.subscribe({next:ee,error:Me,complete:mt})}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275inject(Se),O.\u0275\u0275inject(se))},Q.normalizeQueryParams=Ye,Q.joinWithSlash=xe,Q.stripTrailingSlash=Fe,Q.\u0275prov=(0,O.\u0275\u0275defineInjectable)({factory:Tt,token:Q,providedIn:"root"}),Q})();function Tt(){return new $t((0,O.\u0275\u0275inject)(Se),(0,O.\u0275\u0275inject)(se))}function Bt(Q){return Q.replace(/\/index.html$/,"")}const Kt={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var xt=(()=>((xt=xt||{})[xt.Decimal=0]="Decimal",xt[xt.Percent=1]="Percent",xt[xt.Currency=2]="Currency",xt[xt.Scientific=3]="Scientific",xt))(),jt=(()=>((jt=jt||{})[jt.Zero=0]="Zero",jt[jt.One=1]="One",jt[jt.Two=2]="Two",jt[jt.Few=3]="Few",jt[jt.Many=4]="Many",jt[jt.Other=5]="Other",jt))(),Lt=(()=>((Lt=Lt||{})[Lt.Format=0]="Format",Lt[Lt.Standalone=1]="Standalone",Lt))(),Xt=(()=>((Xt=Xt||{})[Xt.Narrow=0]="Narrow",Xt[Xt.Abbreviated=1]="Abbreviated",Xt[Xt.Wide=2]="Wide",Xt[Xt.Short=3]="Short",Xt))(),Zt=(()=>((Zt=Zt||{})[Zt.Short=0]="Short",Zt[Zt.Medium=1]="Medium",Zt[Zt.Long=2]="Long",Zt[Zt.Full=3]="Full",Zt))(),cn=(()=>((cn=cn||{})[cn.Decimal=0]="Decimal",cn[cn.Group=1]="Group",cn[cn.List=2]="List",cn[cn.PercentSign=3]="PercentSign",cn[cn.PlusSign=4]="PlusSign",cn[cn.MinusSign=5]="MinusSign",cn[cn.Exponential=6]="Exponential",cn[cn.SuperscriptingExponent=7]="SuperscriptingExponent",cn[cn.PerMille=8]="PerMille",cn[cn.Infinity=9]="Infinity",cn[cn.NaN=10]="NaN",cn[cn.TimeSeparator=11]="TimeSeparator",cn[cn.CurrencyDecimal=12]="CurrencyDecimal",cn[cn.CurrencyGroup=13]="CurrencyGroup",cn))(),mn=(()=>((mn=mn||{})[mn.Sunday=0]="Sunday",mn[mn.Monday=1]="Monday",mn[mn.Tuesday=2]="Tuesday",mn[mn.Wednesday=3]="Wednesday",mn[mn.Thursday=4]="Thursday",mn[mn.Friday=5]="Friday",mn[mn.Saturday=6]="Saturday",mn))();function Lr(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.LocaleId]}function Jn(Q,ve,ee){const Me=(0,O.\u0275findLocaleData)(Q),Vt=fi([Me[O.\u0275LocaleDataIndex.DayPeriodsFormat],Me[O.\u0275LocaleDataIndex.DayPeriodsStandalone]],ve);return fi(Vt,ee)}function fr(Q,ve,ee){const Me=(0,O.\u0275findLocaleData)(Q),Vt=fi([Me[O.\u0275LocaleDataIndex.DaysFormat],Me[O.\u0275LocaleDataIndex.DaysStandalone]],ve);return fi(Vt,ee)}function Fr(Q,ve,ee){const Me=(0,O.\u0275findLocaleData)(Q),Vt=fi([Me[O.\u0275LocaleDataIndex.MonthsFormat],Me[O.\u0275LocaleDataIndex.MonthsStandalone]],ve);return fi(Vt,ee)}function si(Q,ve){return fi((0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.Eras],ve)}function yi(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.FirstDayOfWeek]}function Ti(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.WeekendRange]}function Pi(Q,ve){return fi((0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.DateFormat],ve)}function Nt(Q,ve){return fi((0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.TimeFormat],ve)}function An(Q,ve){return fi((0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.DateTimeFormat],ve)}function ni(Q,ve){const ee=(0,O.\u0275findLocaleData)(Q),Me=ee[O.\u0275LocaleDataIndex.NumberSymbols][ve];if(void 0===Me){if(ve===cn.CurrencyDecimal)return ee[O.\u0275LocaleDataIndex.NumberSymbols][cn.Decimal];if(ve===cn.CurrencyGroup)return ee[O.\u0275LocaleDataIndex.NumberSymbols][cn.Group]}return Me}function ui(Q,ve){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.NumberFormats][ve]}function vi(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.CurrencySymbol]||null}function Zn(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.CurrencyName]||null}function Oi(Q){return(0,O.\u0275getLocaleCurrencyCode)(Q)}const gr=O.\u0275getLocalePluralCase;function ri(Q){if(!Q[O.\u0275LocaleDataIndex.ExtraData])throw new Error(`Missing extra locale data for the locale "${Q[O.\u0275LocaleDataIndex.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bi(Q){const ve=(0,O.\u0275findLocaleData)(Q);return ri(ve),(ve[O.\u0275LocaleDataIndex.ExtraData][2]||[]).map(Me=>"string"==typeof Me?pi(Me):[pi(Me[0]),pi(Me[1])])}function pr(Q,ve,ee){const Me=(0,O.\u0275findLocaleData)(Q);ri(Me);const Vt=fi([Me[O.\u0275LocaleDataIndex.ExtraData][0],Me[O.\u0275LocaleDataIndex.ExtraData][1]],ve)||[];return fi(Vt,ee)||[]}function _o(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.Directionality]}function fi(Q,ve){for(let ee=ve;ee>-1;ee--)if(void 0!==Q[ee])return Q[ee];throw new Error("Locale data API: locale data undefined")}function pi(Q){const[ve,ee]=Q.split(":");return{hours:+ve,minutes:+ee}}function ii(Q,ve,ee="en"){const Me=function(Q){return(0,O.\u0275findLocaleData)(Q)[O.\u0275LocaleDataIndex.Currencies]}(ee)[Q]||Kt[Q]||[],mt=Me[1];return"narrow"===ve&&"string"==typeof mt?mt:Me[0]||Q}function nr(Q){let ve;const ee=Kt[Q];return ee&&(ve=ee[2]),"number"==typeof ve?ve:2}const Hr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gr={},Er=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Cr=(()=>((Cr=Cr||{})[Cr.Short=0]="Short",Cr[Cr.ShortGMT=1]="ShortGMT",Cr[Cr.Long=2]="Long",Cr[Cr.Extended=3]="Extended",Cr))(),lr=(()=>((lr=lr||{})[lr.FullYear=0]="FullYear",lr[lr.Month=1]="Month",lr[lr.Date=2]="Date",lr[lr.Hours=3]="Hours",lr[lr.Minutes=4]="Minutes",lr[lr.Seconds=5]="Seconds",lr[lr.FractionalSeconds=6]="FractionalSeconds",lr[lr.Day=7]="Day",lr))(),ir=(()=>((ir=ir||{})[ir.DayPeriods=0]="DayPeriods",ir[ir.Days=1]="Days",ir[ir.Months=2]="Months",ir[ir.Eras=3]="Eras",ir))();function Pt(Q,ve,ee,Me){let mt=function(Q){if(It(Q))return Q;if("number"==typeof Q&&!isNaN(Q))return new Date(Q);if("string"==typeof Q){if(Q=Q.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(Q)){const[mt,Vt=1,on=1]=Q.split("-").map(br=>+br);return qe(mt,Vt-1,on)}const ee=parseFloat(Q);if(!isNaN(Q-ee))return new Date(ee);let Me;if(Me=Q.match(Hr))return function(Q){const ve=new Date(0);let ee=0,Me=0;const mt=Q[8]?ve.setUTCFullYear:ve.setFullYear,Vt=Q[8]?ve.setUTCHours:ve.setHours;Q[9]&&(ee=Number(Q[9]+Q[10]),Me=Number(Q[9]+Q[11])),mt.call(ve,Number(Q[1]),Number(Q[2])-1,Number(Q[3]));const on=Number(Q[4]||0)-ee,br=Number(Q[5]||0)-Me,Fi=Number(Q[6]||0),Pr=Math.floor(1e3*parseFloat("0."+(Q[7]||0)));return Vt.call(ve,on,br,Fi,Pr),ve}(Me)}const ve=new Date(Q);if(!It(ve))throw new Error(`Unable to convert "${Q}" into a date`);return ve}(Q);ve=Xe(ee,ve)||ve;let br,on=[];for(;ve;){if(br=Er.exec(ve),!br){on.push(ve);break}{on=on.concat(br.slice(1));const ur=on.pop();if(!ur)break;ve=ur}}let Fi=mt.getTimezoneOffset();Me&&(Fi=Ge(Me,Fi),mt=function(Q,ve,ee){const mt=Q.getTimezoneOffset();return function(Q,ve){return(Q=new Date(Q.getTime())).setMinutes(Q.getMinutes()+ve),Q}(Q,-1*(Ge(ve,mt)-mt))}(mt,Me));let Pr="";return on.forEach(ur=>{const gi=function(Q){if(ue[Q])return ue[Q];let ve;switch(Q){case"G":case"GG":case"GGG":ve=fn(ir.Eras,Xt.Abbreviated);break;case"GGGG":ve=fn(ir.Eras,Xt.Wide);break;case"GGGGG":ve=fn(ir.Eras,Xt.Narrow);break;case"y":ve=Wt(lr.FullYear,1,0,!1,!0);break;case"yy":ve=Wt(lr.FullYear,2,0,!0,!0);break;case"yyy":ve=Wt(lr.FullYear,3,0,!1,!0);break;case"yyyy":ve=Wt(lr.FullYear,4,0,!1,!0);break;case"Y":ve=ne(1);break;case"YY":ve=ne(2,!0);break;case"YYY":ve=ne(3);break;case"YYYY":ve=ne(4);break;case"M":case"L":ve=Wt(lr.Month,1,1);break;case"MM":case"LL":ve=Wt(lr.Month,2,1);break;case"MMM":ve=fn(ir.Months,Xt.Abbreviated);break;case"MMMM":ve=fn(ir.Months,Xt.Wide);break;case"MMMMM":ve=fn(ir.Months,Xt.Narrow);break;case"LLL":ve=fn(ir.Months,Xt.Abbreviated,Lt.Standalone);break;case"LLLL":ve=fn(ir.Months,Xt.Wide,Lt.Standalone);break;case"LLLLL":ve=fn(ir.Months,Xt.Narrow,Lt.Standalone);break;case"w":ve=ke(1);break;case"ww":ve=ke(2);break;case"W":ve=ke(1,!0);break;case"d":ve=Wt(lr.Date,1);break;case"dd":ve=Wt(lr.Date,2);break;case"c":case"cc":ve=Wt(lr.Day,1);break;case"ccc":ve=fn(ir.Days,Xt.Abbreviated,Lt.Standalone);break;case"cccc":ve=fn(ir.Days,Xt.Wide,Lt.Standalone);break;case"ccccc":ve=fn(ir.Days,Xt.Narrow,Lt.Standalone);break;case"cccccc":ve=fn(ir.Days,Xt.Short,Lt.Standalone);break;case"E":case"EE":case"EEE":ve=fn(ir.Days,Xt.Abbreviated);break;case"EEEE":ve=fn(ir.Days,Xt.Wide);break;case"EEEEE":ve=fn(ir.Days,Xt.Narrow);break;case"EEEEEE":ve=fn(ir.Days,Xt.Short);break;case"a":case"aa":case"aaa":ve=fn(ir.DayPeriods,Xt.Abbreviated);break;case"aaaa":ve=fn(ir.DayPeriods,Xt.Wide);break;case"aaaaa":ve=fn(ir.DayPeriods,Xt.Narrow);break;case"b":case"bb":case"bbb":ve=fn(ir.DayPeriods,Xt.Abbreviated,Lt.Standalone,!0);break;case"bbbb":ve=fn(ir.DayPeriods,Xt.Wide,Lt.Standalone,!0);break;case"bbbbb":ve=fn(ir.DayPeriods,Xt.Narrow,Lt.Standalone,!0);break;case"B":case"BB":case"BBB":ve=fn(ir.DayPeriods,Xt.Abbreviated,Lt.Format,!0);break;case"BBBB":ve=fn(ir.DayPeriods,Xt.Wide,Lt.Format,!0);break;case"BBBBB":ve=fn(ir.DayPeriods,Xt.Narrow,Lt.Format,!0);break;case"h":ve=Wt(lr.Hours,1,-12);break;case"hh":ve=Wt(lr.Hours,2,-12);break;case"H":ve=Wt(lr.Hours,1);break;case"HH":ve=Wt(lr.Hours,2);break;case"m":ve=Wt(lr.Minutes,1);break;case"mm":ve=Wt(lr.Minutes,2);break;case"s":ve=Wt(lr.Seconds,1);break;case"ss":ve=Wt(lr.Seconds,2);break;case"S":ve=Wt(lr.FractionalSeconds,1);break;case"SS":ve=Wt(lr.FractionalSeconds,2);break;case"SSS":ve=Wt(lr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ve=Vi(Cr.Short);break;case"ZZZZZ":ve=Vi(Cr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ve=Vi(Cr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ve=Vi(Cr.Long);break;default:return null}return ue[Q]=ve,ve}(ur);Pr+=gi?gi(mt,ee,Fi):"''"===ur?"'":ur.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Pr}function qe(Q,ve,ee){const Me=new Date(0);return Me.setFullYear(Q,ve,ee),Me.setHours(0,0,0),Me}function Xe(Q,ve){const ee=Lr(Q);if(Gr[ee]=Gr[ee]||{},Gr[ee][ve])return Gr[ee][ve];let Me="";switch(ve){case"shortDate":Me=Pi(Q,Zt.Short);break;case"mediumDate":Me=Pi(Q,Zt.Medium);break;case"longDate":Me=Pi(Q,Zt.Long);break;case"fullDate":Me=Pi(Q,Zt.Full);break;case"shortTime":Me=Nt(Q,Zt.Short);break;case"mediumTime":Me=Nt(Q,Zt.Medium);break;case"longTime":Me=Nt(Q,Zt.Long);break;case"fullTime":Me=Nt(Q,Zt.Full);break;case"short":const mt=Xe(Q,"shortTime"),Vt=Xe(Q,"shortDate");Me=zt(An(Q,Zt.Short),[mt,Vt]);break;case"medium":const on=Xe(Q,"mediumTime"),br=Xe(Q,"mediumDate");Me=zt(An(Q,Zt.Medium),[on,br]);break;case"long":const Fi=Xe(Q,"longTime"),Pr=Xe(Q,"longDate");Me=zt(An(Q,Zt.Long),[Fi,Pr]);break;case"full":const ur=Xe(Q,"fullTime"),gi=Xe(Q,"fullDate");Me=zt(An(Q,Zt.Full),[ur,gi])}return Me&&(Gr[ee][ve]=Me),Me}function zt(Q,ve){return ve&&(Q=Q.replace(/\{([^}]+)}/g,function(ee,Me){return null!=ve&&Me in ve?ve[Me]:ee})),Q}function Qt(Q,ve,ee="-",Me,mt){let Vt="";(Q<0||mt&&Q<=0)&&(mt?Q=1-Q:(Q=-Q,Vt=ee));let on=String(Q);for(;on.length<ve;)on="0"+on;return Me&&(on=on.substr(on.length-ve)),Vt+on}function Wt(Q,ve,ee=0,Me=!1,mt=!1){return function(Vt,on){let br=function(Q,ve){switch(Q){case lr.FullYear:return ve.getFullYear();case lr.Month:return ve.getMonth();case lr.Date:return ve.getDate();case lr.Hours:return ve.getHours();case lr.Minutes:return ve.getMinutes();case lr.Seconds:return ve.getSeconds();case lr.FractionalSeconds:return ve.getMilliseconds();case lr.Day:return ve.getDay();default:throw new Error(`Unknown DateType value "${Q}".`)}}(Q,Vt);if((ee>0||br>-ee)&&(br+=ee),Q===lr.Hours)0===br&&-12===ee&&(br=12);else if(Q===lr.FractionalSeconds)return function(Q,ve){return Qt(Q,3).substr(0,ve)}(br,ve);const Fi=ni(on,cn.MinusSign);return Qt(br,ve,Fi,Me,mt)}}function fn(Q,ve,ee=Lt.Format,Me=!1){return function(mt,Vt){return function(Q,ve,ee,Me,mt,Vt){switch(ee){case ir.Months:return Fr(ve,mt,Me)[Q.getMonth()];case ir.Days:return fr(ve,mt,Me)[Q.getDay()];case ir.DayPeriods:const on=Q.getHours(),br=Q.getMinutes();if(Vt){const Pr=bi(ve),ur=pr(ve,mt,Me),gi=Pr.findIndex(no=>{if(Array.isArray(no)){const[hi,Zo]=no,Ps=on>=hi.hours&&br>=hi.minutes,Hi=on<Zo.hours||on===Zo.hours&&br<Zo.minutes;if(hi.hours<Zo.hours){if(Ps&&Hi)return!0}else if(Ps||Hi)return!0}else if(no.hours===on&&no.minutes===br)return!0;return!1});if(-1!==gi)return ur[gi]}return Jn(ve,mt,Me)[on<12?0:1];case ir.Eras:return si(ve,Me)[Q.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${ee}`)}}(mt,Vt,Q,ve,ee,Me)}}function Vi(Q){return function(ve,ee,Me){const mt=-1*Me,Vt=ni(ee,cn.MinusSign),on=mt>0?Math.floor(mt/60):Math.ceil(mt/60);switch(Q){case Cr.Short:return(mt>=0?"+":"")+Qt(on,2,Vt)+Qt(Math.abs(mt%60),2,Vt);case Cr.ShortGMT:return"GMT"+(mt>=0?"+":"")+Qt(on,1,Vt);case Cr.Long:return"GMT"+(mt>=0?"+":"")+Qt(on,2,Vt)+":"+Qt(Math.abs(mt%60),2,Vt);case Cr.Extended:return 0===Me?"Z":(mt>=0?"+":"")+Qt(on,2,Vt)+":"+Qt(Math.abs(mt%60),2,Vt);default:throw new Error(`Unknown zone width "${Q}"`)}}}function mi(Q){return qe(Q.getFullYear(),Q.getMonth(),Q.getDate()+(4-Q.getDay()))}function ke(Q,ve=!1){return function(ee,Me){let mt;if(ve){const Vt=new Date(ee.getFullYear(),ee.getMonth(),1).getDay()-1,on=ee.getDate();mt=1+Math.floor((on+Vt)/7)}else{const Vt=mi(ee),on=function(Q){const ve=qe(Q,0,1).getDay();return qe(Q,0,1+(ve<=4?4:11)-ve)}(Vt.getFullYear()),br=Vt.getTime()-on.getTime();mt=1+Math.round(br/6048e5)}return Qt(mt,Q,ni(Me,cn.MinusSign))}}function ne(Q,ve=!1){return function(ee,Me){return Qt(mi(ee).getFullYear(),Q,ni(Me,cn.MinusSign),ve)}}const ue={};function Ge(Q,ve){Q=Q.replace(/:/g,"");const ee=Date.parse("Jan 01, 1970 00:00:00 "+Q)/6e4;return isNaN(ee)?ve:ee}function It(Q){return Q instanceof Date&&!isNaN(Q.valueOf())}const an=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Mr(Q,ve,ee,Me,mt,Vt,on=!1){let br="",Fi=!1;if(isFinite(Q)){let Pr=function(Q){let Me,mt,Vt,on,br,ve=Math.abs(Q)+"",ee=0;for((mt=ve.indexOf("."))>-1&&(ve=ve.replace(".","")),(Vt=ve.search(/e/i))>0?(mt<0&&(mt=Vt),mt+=+ve.slice(Vt+1),ve=ve.substring(0,Vt)):mt<0&&(mt=ve.length),Vt=0;"0"===ve.charAt(Vt);Vt++);if(Vt===(br=ve.length))Me=[0],mt=1;else{for(br--;"0"===ve.charAt(br);)br--;for(mt-=Vt,Me=[],on=0;Vt<=br;Vt++,on++)Me[on]=Number(ve.charAt(Vt))}return mt>22&&(Me=Me.splice(0,21),ee=mt-1,mt=1),{digits:Me,exponent:ee,integerLen:mt}}(Q);on&&(Pr=function(Q){if(0===Q.digits[0])return Q;const ve=Q.digits.length-Q.integerLen;return Q.exponent?Q.exponent+=2:(0===ve?Q.digits.push(0,0):1===ve&&Q.digits.push(0),Q.integerLen+=2),Q}(Pr));let ur=ve.minInt,gi=ve.minFrac,no=ve.maxFrac;if(Vt){const tl=Vt.match(an);if(null===tl)throw new Error(`${Vt} is not a valid digit info`);const Da=tl[1],Sa=tl[3],ws=tl[5];null!=Da&&(ur=Zr(Da)),null!=Sa&&(gi=Zr(Sa)),null!=ws?no=Zr(ws):null!=Sa&&gi>no&&(no=gi)}!function(Q,ve,ee){if(ve>ee)throw new Error(`The minimum number of digits after fraction (${ve}) is higher than the maximum (${ee}).`);let Me=Q.digits,mt=Me.length-Q.integerLen;const Vt=Math.min(Math.max(ve,mt),ee);let on=Vt+Q.integerLen,br=Me[on];if(on>0){Me.splice(Math.max(Q.integerLen,on));for(let gi=on;gi<Me.length;gi++)Me[gi]=0}else{mt=Math.max(0,mt),Q.integerLen=1,Me.length=Math.max(1,on=Vt+1),Me[0]=0;for(let gi=1;gi<on;gi++)Me[gi]=0}if(br>=5)if(on-1<0){for(let gi=0;gi>on;gi--)Me.unshift(0),Q.integerLen++;Me.unshift(1),Q.integerLen++}else Me[on-1]++;for(;mt<Math.max(0,Vt);mt++)Me.push(0);let Fi=0!==Vt;const Pr=ve+Q.integerLen,ur=Me.reduceRight(function(gi,no,hi,Zo){return Zo[hi]=(no+=gi)<10?no:no-10,Fi&&(0===Zo[hi]&&hi>=Pr?Zo.pop():Fi=!1),no>=10?1:0},0);ur&&(Me.unshift(ur),Q.integerLen++)}(Pr,gi,no);let hi=Pr.digits,Zo=Pr.integerLen;const Ps=Pr.exponent;let Hi=[];for(Fi=hi.every(tl=>!tl);Zo<ur;Zo++)hi.unshift(0);for(;Zo<0;Zo++)hi.unshift(0);Zo>0?Hi=hi.splice(Zo,hi.length):(Hi=hi,hi=[0]);const Co=[];for(hi.length>=ve.lgSize&&Co.unshift(hi.splice(-ve.lgSize,hi.length).join(""));hi.length>ve.gSize;)Co.unshift(hi.splice(-ve.gSize,hi.length).join(""));hi.length&&Co.unshift(hi.join("")),br=Co.join(ni(ee,Me)),Hi.length&&(br+=ni(ee,mt)+Hi.join("")),Ps&&(br+=ni(ee,cn.Exponential)+"+"+Ps)}else br=ni(ee,cn.Infinity);return br=Q<0&&!Fi?ve.negPre+br+ve.negSuf:ve.posPre+br+ve.posSuf,br}function ai(Q,ve,ee,Me,mt){const on=hr(ui(ve,xt.Currency),ni(ve,cn.MinusSign));return on.minFrac=nr(Me),on.maxFrac=on.minFrac,Mr(Q,on,ve,cn.CurrencyGroup,cn.CurrencyDecimal,mt).replace("\xa4",ee).replace("\xa4","").trim()}function qn(Q,ve,ee){return Mr(Q,hr(ui(ve,xt.Percent),ni(ve,cn.MinusSign)),ve,cn.Group,cn.Decimal,ee,!0).replace(new RegExp("%","g"),ni(ve,cn.PercentSign))}function ut(Q,ve,ee){return Mr(Q,hr(ui(ve,xt.Decimal),ni(ve,cn.MinusSign)),ve,cn.Group,cn.Decimal,ee)}function hr(Q,ve="-"){const ee={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Me=Q.split(";"),mt=Me[0],Vt=Me[1],on=-1!==mt.indexOf(".")?mt.split("."):[mt.substring(0,mt.lastIndexOf("0")+1),mt.substring(mt.lastIndexOf("0")+1)],br=on[0],Fi=on[1]||"";ee.posPre=br.substr(0,br.indexOf("#"));for(let ur=0;ur<Fi.length;ur++){const gi=Fi.charAt(ur);"0"===gi?ee.minFrac=ee.maxFrac=ur+1:"#"===gi?ee.maxFrac=ur+1:ee.posSuf+=gi}const Pr=br.split(",");if(ee.gSize=Pr[1]?Pr[1].length:0,ee.lgSize=Pr[2]||Pr[1]?(Pr[2]||Pr[1]).length:0,Vt){const ur=mt.length-ee.posPre.length-ee.posSuf.length,gi=Vt.indexOf("#");ee.negPre=Vt.substr(0,gi).replace(/'/g,""),ee.negSuf=Vt.substr(gi+ur).replace(/'/g,"")}else ee.negPre=ve+ee.posPre,ee.negSuf=ee.posSuf;return ee}function Zr(Q){const ve=parseInt(Q);if(isNaN(ve))throw new Error("Invalid integer literal when parsing "+Q);return ve}class _t{}function dt(Q,ve,ee,Me){let mt=`=${Q}`;if(ve.indexOf(mt)>-1||(mt=ee.getPluralCategory(Q,Me),ve.indexOf(mt)>-1))return mt;if(ve.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${Q}"`)}let Ne=(()=>{class Q extends _t{constructor(ee){super(),this.locale=ee}getPluralCategory(ee,Me){switch(gr(Me||this.locale)(ee)){case jt.Zero:return"zero";case jt.One:return"one";case jt.Two:return"two";case jt.Few:return"few";case jt.Many:return"many";default:return"other"}}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275inject(O.LOCALE_ID))},Q.\u0275prov=O.\u0275\u0275defineInjectable({token:Q,factory:Q.\u0275fac}),Q})();function We(Q,ve,ee){return(0,O.\u0275registerLocaleData)(Q,ve,ee)}function bt(Q,ve){ve=encodeURIComponent(ve);for(const ee of Q.split(";")){const Me=ee.indexOf("="),[mt,Vt]=-1==Me?[ee,""]:[ee.slice(0,Me),ee.slice(Me+1)];if(mt.trim()===ve)return decodeURIComponent(Vt)}return null}let Sn=(()=>{class Q{constructor(ee,Me,mt,Vt){this._iterableDiffers=ee,this._keyValueDiffers=Me,this._ngEl=mt,this._renderer=Vt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(ee){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof ee?ee.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(ee){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof ee?ee.split(/\s+/):ee,this._rawClass&&((0,O.\u0275isListLikeIterable)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const ee=this._iterableDiffer.diff(this._rawClass);ee&&this._applyIterableChanges(ee)}else if(this._keyValueDiffer){const ee=this._keyValueDiffer.diff(this._rawClass);ee&&this._applyKeyValueChanges(ee)}}_applyKeyValueChanges(ee){ee.forEachAddedItem(Me=>this._toggleClass(Me.key,Me.currentValue)),ee.forEachChangedItem(Me=>this._toggleClass(Me.key,Me.currentValue)),ee.forEachRemovedItem(Me=>{Me.previousValue&&this._toggleClass(Me.key,!1)})}_applyIterableChanges(ee){ee.forEachAddedItem(Me=>{if("string"!=typeof Me.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,O.\u0275stringify)(Me.item)}`);this._toggleClass(Me.item,!0)}),ee.forEachRemovedItem(Me=>this._toggleClass(Me.item,!1))}_applyClasses(ee){ee&&(Array.isArray(ee)||ee instanceof Set?ee.forEach(Me=>this._toggleClass(Me,!0)):Object.keys(ee).forEach(Me=>this._toggleClass(Me,!!ee[Me])))}_removeClasses(ee){ee&&(Array.isArray(ee)||ee instanceof Set?ee.forEach(Me=>this._toggleClass(Me,!1)):Object.keys(ee).forEach(Me=>this._toggleClass(Me,!1)))}_toggleClass(ee,Me){(ee=ee.trim())&&ee.split(/\s+/g).forEach(mt=>{Me?this._renderer.addClass(this._ngEl.nativeElement,mt):this._renderer.removeClass(this._ngEl.nativeElement,mt)})}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.IterableDiffers),O.\u0275\u0275directiveInject(O.KeyValueDiffers),O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(O.Renderer2))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Q})(),vr=(()=>{class Q{constructor(ee){this._viewContainerRef=ee,this._componentRef=null,this._moduleRef=null}ngOnChanges(ee){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){const Me=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(ee.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){const on=Me.get(O.NgModuleRef);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(on.injector)}else this._moduleRef=null;const Vt=(this._moduleRef?this._moduleRef.componentFactoryResolver:Me.get(O.ComponentFactoryResolver)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(Vt,this._viewContainerRef.length,Me,this.ngComponentOutletContent)}}ngOnDestroy(){this._moduleRef&&this._moduleRef.destroy()}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},features:[O.\u0275\u0275NgOnChangesFeature]}),Q})();class Br{constructor(ve,ee,Me,mt){this.$implicit=ve,this.ngForOf=ee,this.index=Me,this.count=mt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let or=(()=>{class Q{constructor(ee,Me,mt){this._viewContainer=ee,this._template=Me,this._differs=mt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ee){this._ngForOf=ee,this._ngForOfDirty=!0}set ngForTrackBy(ee){this._trackByFn=ee}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(ee){ee&&(this._template=ee)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ee=this._ngForOf;if(!this._differ&&ee)try{this._differ=this._differs.find(ee).create(this.ngForTrackBy)}catch(Me){throw new Error(`Cannot find a differ supporting object '${ee}' of type '${function(Q){return Q.name||typeof Q}(ee)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const ee=this._differ.diff(this._ngForOf);ee&&this._applyChanges(ee)}}_applyChanges(ee){const Me=[];ee.forEachOperation((mt,Vt,on)=>{if(null==mt.previousIndex){const br=this._viewContainer.createEmbeddedView(this._template,new Br(null,this._ngForOf,-1,-1),null===on?void 0:on),Fi=new Ui(mt,br);Me.push(Fi)}else if(null==on)this._viewContainer.remove(null===Vt?void 0:Vt);else if(null!==Vt){const br=this._viewContainer.get(Vt);this._viewContainer.move(br,on);const Fi=new Ui(mt,br);Me.push(Fi)}});for(let mt=0;mt<Me.length;mt++)this._perViewChange(Me[mt].view,Me[mt].record);for(let mt=0,Vt=this._viewContainer.length;mt<Vt;mt++){const on=this._viewContainer.get(mt);on.context.index=mt,on.context.count=Vt,on.context.ngForOf=this._ngForOf}ee.forEachIdentityChange(mt=>{this._viewContainer.get(mt.currentIndex).context.$implicit=mt.item})}_perViewChange(ee,Me){ee.context.$implicit=Me.item}static ngTemplateContextGuard(ee,Me){return!0}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef),O.\u0275\u0275directiveInject(O.TemplateRef),O.\u0275\u0275directiveInject(O.IterableDiffers))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Q})();class Ui{constructor(ve,ee){this.record=ve,this.view=ee}}let ss=(()=>{class Q{constructor(ee,Me){this._viewContainer=ee,this._context=new qi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Me}set ngIf(ee){this._context.$implicit=this._context.ngIf=ee,this._updateView()}set ngIfThen(ee){Sr("ngIfThen",ee),this._thenTemplateRef=ee,this._thenViewRef=null,this._updateView()}set ngIfElse(ee){Sr("ngIfElse",ee),this._elseTemplateRef=ee,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ee,Me){return!0}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef),O.\u0275\u0275directiveInject(O.TemplateRef))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Q})();class qi{constructor(){this.$implicit=null,this.ngIf=null}}function Sr(Q,ve){if(ve&&!ve.createEmbeddedView)throw new Error(`${Q} must be a TemplateRef, but received '${(0,O.\u0275stringify)(ve)}'.`)}class Vs{constructor(ve,ee){this._viewContainerRef=ve,this._templateRef=ee,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ve){ve&&!this._created?this.create():!ve&&this._created&&this.destroy()}}let Ms=(()=>{class Q{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(ee){this._ngSwitch=ee,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(ee){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(ee)}_matchCase(ee){const Me=ee==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||Me,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Me}_updateDefaultCases(ee){if(this._defaultViews&&ee!==this._defaultUsed){this._defaultUsed=ee;for(let Me=0;Me<this._defaultViews.length;Me++)this._defaultViews[Me].enforceState(ee)}}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Q})(),ms=(()=>{class Q{constructor(ee,Me,mt){this.ngSwitch=mt,mt._addCase(),this._view=new Vs(ee,Me)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef),O.\u0275\u0275directiveInject(O.TemplateRef),O.\u0275\u0275directiveInject(Ms,9))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Q})(),Et=(()=>{class Q{constructor(ee,Me,mt){mt._addDefault(new Vs(ee,Me))}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef),O.\u0275\u0275directiveInject(O.TemplateRef),O.\u0275\u0275directiveInject(Ms,9))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngSwitchDefault",""]]}),Q})(),Be=(()=>{class Q{constructor(ee){this._localization=ee,this._caseViews={}}set ngPlural(ee){this._switchValue=ee,this._updateView()}addCase(ee,Me){this._caseViews[ee]=Me}_updateView(){this._clearViews();const ee=Object.keys(this._caseViews),Me=dt(this._switchValue,ee,this._localization);this._activateView(this._caseViews[Me])}_clearViews(){this._activeView&&this._activeView.destroy()}_activateView(ee){ee&&(this._activeView=ee,this._activeView.create())}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(_t))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"}}),Q})(),rt=(()=>{class Q{constructor(ee,Me,mt,Vt){this.value=ee;const on=!isNaN(Number(ee));Vt.addCase(on?`=${ee}`:ee,new Vs(mt,Me))}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275injectAttribute("ngPluralCase"),O.\u0275\u0275directiveInject(O.TemplateRef),O.\u0275\u0275directiveInject(O.ViewContainerRef),O.\u0275\u0275directiveInject(Be,1))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngPluralCase",""]]}),Q})(),Mt=(()=>{class Q{constructor(ee,Me,mt){this._ngEl=ee,this._differs=Me,this._renderer=mt,this._ngStyle=null,this._differ=null}set ngStyle(ee){this._ngStyle=ee,!this._differ&&ee&&(this._differ=this._differs.find(ee).create())}ngDoCheck(){if(this._differ){const ee=this._differ.diff(this._ngStyle);ee&&this._applyChanges(ee)}}_setStyle(ee,Me){const[mt,Vt]=ee.split(".");null!=(Me=null!=Me&&Vt?`${Me}${Vt}`:Me)?this._renderer.setStyle(this._ngEl.nativeElement,mt,Me):this._renderer.removeStyle(this._ngEl.nativeElement,mt)}_applyChanges(ee){ee.forEachRemovedItem(Me=>this._setStyle(Me.key,null)),ee.forEachAddedItem(Me=>this._setStyle(Me.key,Me.currentValue)),ee.forEachChangedItem(Me=>this._setStyle(Me.key,Me.currentValue))}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(O.KeyValueDiffers),O.\u0275\u0275directiveInject(O.Renderer2))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Q})(),Ln=(()=>{class Q{constructor(ee){this._viewContainerRef=ee,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(ee){if(ee.ngTemplateOutlet){const Me=this._viewContainerRef;this._viewRef&&Me.remove(Me.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?Me.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&ee.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ViewContainerRef))},Q.\u0275dir=O.\u0275\u0275defineDirective({type:Q,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[O.\u0275\u0275NgOnChangesFeature]}),Q})();const Yn=[Sn,vr,or,ss,Ln,Mt,Ms,ms,Et,Be,rt];function Fn(Q,ve){return Error(`InvalidPipeArgument: '${ve}' for pipe '${(0,O.\u0275stringify)(Q)}'`)}class Ar{createSubscription(ve,ee){return ve.subscribe({next:ee,error:Me=>{throw Me}})}dispose(ve){ve.unsubscribe()}onDestroy(ve){ve.unsubscribe()}}class oi{createSubscription(ve,ee){return ve.then(ee,Me=>{throw Me})}dispose(ve){}onDestroy(ve){}}const zi=new oi,Wr=new Ar;let Vl=(()=>{class Q{constructor(ee){this._ref=ee,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(ee){return this._obj?ee!==this._obj?(this._dispose(),this.transform(ee)):this._latestValue:(ee&&this._subscribe(ee),this._latestValue)}_subscribe(ee){this._obj=ee,this._strategy=this._selectStrategy(ee),this._subscription=this._strategy.createSubscription(ee,Me=>this._updateLatestValue(ee,Me))}_selectStrategy(ee){if((0,O.\u0275isPromise)(ee))return zi;if((0,O.\u0275isSubscribable)(ee))return Wr;throw Fn(Q,ee)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(ee,Me){ee===this._obj&&(this._latestValue=Me,this._ref.markForCheck())}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.ChangeDetectorRef,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"async",type:Q,pure:!1}),Q})(),va=(()=>{class Q{transform(ee){if(null==ee)return null;if("string"!=typeof ee)throw Fn(Q,ee);return ee.toLowerCase()}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"lowercase",type:Q,pure:!0}),Q})();const Qa=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Di=(()=>{class Q{transform(ee){if(null==ee)return null;if("string"!=typeof ee)throw Fn(Q,ee);return ee.replace(Qa,Me=>Me[0].toUpperCase()+Me.substr(1).toLowerCase())}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"titlecase",type:Q,pure:!0}),Q})(),ba=(()=>{class Q{transform(ee){if(null==ee)return null;if("string"!=typeof ee)throw Fn(Q,ee);return ee.toUpperCase()}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"uppercase",type:Q,pure:!0}),Q})(),Ul=(()=>{class Q{constructor(ee){this.locale=ee}transform(ee,Me="mediumDate",mt,Vt){if(null==ee||""===ee||ee!=ee)return null;try{return Pt(ee,Me,Vt||this.locale,mt)}catch(on){throw Fn(Q,on.message)}}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.LOCALE_ID,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"date",type:Q,pure:!0}),Q})();const xr=/#/g;let xa=(()=>{class Q{constructor(ee){this._localization=ee}transform(ee,Me,mt){if(null==ee)return"";if("object"!=typeof Me||null===Me)throw Fn(Q,Me);return Me[dt(ee,Object.keys(Me),this._localization,mt)].replace(xr,ee.toString())}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(_t,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"i18nPlural",type:Q,pure:!0}),Q})(),yl=(()=>{class Q{transform(ee,Me){if(null==ee)return"";if("object"!=typeof Me||"string"!=typeof ee)throw Fn(Q,Me);return Me.hasOwnProperty(ee)?Me[ee]:Me.hasOwnProperty("other")?Me.other:""}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"i18nSelect",type:Q,pure:!0}),Q})(),vl=(()=>{class Q{transform(ee){return JSON.stringify(ee,null,2)}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"json",type:Q,pure:!1}),Q})(),Us=(()=>{class Q{constructor(ee){this.differs=ee,this.keyValues=[],this.compareFn=fu}transform(ee,Me=fu){if(!ee||!(ee instanceof Map)&&"object"!=typeof ee)return null;this.differ||(this.differ=this.differs.find(ee).create());const mt=this.differ.diff(ee),Vt=Me!==this.compareFn;return mt&&(this.keyValues=[],mt.forEachItem(on=>{this.keyValues.push(function(Q,ve){return{key:Q,value:ve}}(on.key,on.currentValue))})),(mt||Vt)&&(this.keyValues.sort(Me),this.compareFn=Me),this.keyValues}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.KeyValueDiffers,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"keyvalue",type:Q,pure:!1}),Q})();function fu(Q,ve){const ee=Q.key,Me=ve.key;if(ee===Me)return 0;if(void 0===ee)return 1;if(void 0===Me)return-1;if(null===ee)return 1;if(null===Me)return-1;if("string"==typeof ee&&"string"==typeof Me)return ee<Me?-1:1;if("number"==typeof ee&&"number"==typeof Me)return ee-Me;if("boolean"==typeof ee&&"boolean"==typeof Me)return ee<Me?-1:1;const mt=String(ee),Vt=String(Me);return mt==Vt?0:mt<Vt?-1:1}let pu=(()=>{class Q{constructor(ee){this._locale=ee}transform(ee,Me,mt){if(!As(ee))return null;mt=mt||this._locale;try{return ut(as(ee),mt,Me)}catch(Vt){throw Fn(Q,Vt.message)}}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.LOCALE_ID,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"number",type:Q,pure:!0}),Q})(),Ja=(()=>{class Q{constructor(ee){this._locale=ee}transform(ee,Me,mt){if(!As(ee))return null;mt=mt||this._locale;try{return qn(as(ee),mt,Me)}catch(Vt){throw Fn(Q,Vt.message)}}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.LOCALE_ID,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"percent",type:Q,pure:!0}),Q})(),Hs=(()=>{class Q{constructor(ee,Me="USD"){this._locale=ee,this._defaultCurrencyCode=Me}transform(ee,Me=this._defaultCurrencyCode,mt="symbol",Vt,on){if(!As(ee))return null;on=on||this._locale,"boolean"==typeof mt&&(mt=mt?"symbol":"code");let br=Me||this._defaultCurrencyCode;"code"!==mt&&(br="symbol"===mt||"symbol-narrow"===mt?ii(br,"symbol"===mt?"wide":"narrow",on):mt);try{return ai(as(ee),on,br,Me,Vt)}catch(Fi){throw Fn(Q,Fi.message)}}}return Q.\u0275fac=function(ee){return new(ee||Q)(O.\u0275\u0275directiveInject(O.LOCALE_ID,16),O.\u0275\u0275directiveInject(O.DEFAULT_CURRENCY_CODE,16))},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"currency",type:Q,pure:!0}),Q})();function As(Q){return!(null==Q||""===Q||Q!=Q)}function as(Q){if("string"==typeof Q&&!isNaN(Number(Q)-parseFloat(Q)))return Number(Q);if("number"!=typeof Q)throw new Error(`${Q} is not a number`);return Q}let Xi=(()=>{class Q{transform(ee,Me,mt){if(null==ee)return null;if(!this.supports(ee))throw Fn(Q,ee);return ee.slice(Me,mt)}supports(ee){return"string"==typeof ee||Array.isArray(ee)}}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275pipe=O.\u0275\u0275definePipe({name:"slice",type:Q,pure:!1}),Q})();const $s=[Vl,ba,va,vl,Xi,pu,Ja,Di,Hs,Ul,xa,yl,Us];let Rc=(()=>{class Q{}return Q.\u0275fac=function(ee){return new(ee||Q)},Q.\u0275mod=O.\u0275\u0275defineNgModule({type:Q}),Q.\u0275inj=O.\u0275\u0275defineInjector({providers:[{provide:_t,useClass:Ne}]}),Q})();const mu="browser",wa="server",Gs="browserWorkerApp",uc="browserWorkerUi";function gu(Q){return Q===mu}function hc(Q){return Q===wa}function Lc(Q){return Q===Gs}function ls(Q){return Q===uc}const mo=new O.Version("12.2.16");let Ea=(()=>{class Q{}return Q.\u0275prov=(0,O.\u0275\u0275defineInjectable)({token:Q,providedIn:"root",factory:()=>new el((0,O.\u0275\u0275inject)(_e),window)}),Q})();class el{constructor(ve,ee){this.document=ve,this.window=ee,this.offset=()=>[0,0]}setOffset(ve){this.offset=Array.isArray(ve)?()=>ve:ve}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ve){this.supportsScrolling()&&this.window.scrollTo(ve[0],ve[1])}scrollToAnchor(ve){if(!this.supportsScrolling())return;const ee=function(Q,ve){const ee=Q.getElementById(ve)||Q.getElementsByName(ve)[0];if(ee)return ee;if("function"==typeof Q.createTreeWalker&&Q.body&&(Q.body.createShadowRoot||Q.body.attachShadow)){const Me=Q.createTreeWalker(Q.body,NodeFilter.SHOW_ELEMENT);let mt=Me.currentNode;for(;mt;){const Vt=mt.shadowRoot;if(Vt){const on=Vt.getElementById(ve)||Vt.querySelector(`[name="${ve}"]`);if(on)return on}mt=Me.nextNode()}}return null}(this.document,ve);ee&&(this.scrollToElement(ee),this.attemptFocus(ee))}setHistoryScrollRestoration(ve){if(this.supportScrollRestoration()){const ee=this.window.history;ee&&ee.scrollRestoration&&(ee.scrollRestoration=ve)}}scrollToElement(ve){const ee=ve.getBoundingClientRect(),Me=ee.left+this.window.pageXOffset,mt=ee.top+this.window.pageYOffset,Vt=this.offset();this.window.scrollTo(Me-Vt[0],mt-Vt[1])}attemptFocus(ve){return ve.focus(),this.document.activeElement===ve}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ve=Ca(this.window.history)||Ca(Object.getPrototypeOf(this.window.history));return!(!ve||!ve.writable&&!ve.set)}catch(ve){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ve){return!1}}}function Ca(Q){return Object.getOwnPropertyDescriptor(Q,"scrollRestoration")}class cs{setOffset(ve){}getScrollPosition(){return[0,0]}scrollToPosition(ve){}scrollToAnchor(ve){}setHistoryScrollRestoration(ve){}}class Ta{}},3018:(me,we,v)=>{"use strict";v.r(we),v.d(we,{ANALYZE_FOR_ENTRY_COMPONENTS:()=>al,APP_BOOTSTRAP_LISTENER:()=>bw,APP_ID:()=>mw,APP_INITIALIZER:()=>A0,ApplicationInitStatus:()=>Mm,ApplicationModule:()=>AD,ApplicationRef:()=>n_,Attribute:()=>Ku,COMPILER_OPTIONS:()=>Sw,CUSTOM_ELEMENTS_SCHEMA:()=>iu,ChangeDetectionStrategy:()=>Pt,ChangeDetectorRef:()=>Yv,Compiler:()=>t_,CompilerFactory:()=>Iw,Component:()=>MT,ComponentFactory:()=>wm,ComponentFactoryResolver:()=>Em,ComponentRef:()=>Hv,ContentChild:()=>Iu,ContentChildren:()=>Jl,DEFAULT_CURRENCY_CODE:()=>ww,DebugElement:()=>SD,DebugEventListener:()=>qw,DebugNode:()=>DD,DefaultIterableDiffer:()=>Mb,Directive:()=>uw,ElementRef:()=>sd,EmbeddedViewRef:()=>gD,ErrorHandler:()=>ru,EventEmitter:()=>jd,Host:()=>qr,HostBinding:()=>kT,HostListener:()=>RT,INJECTOR:()=>ed,Inject:()=>Rn,InjectFlags:()=>nr,Injectable:()=>K_,InjectionToken:()=>Ki,Injector:()=>Mo,Input:()=>PT,IterableDiffers:()=>dy,KeyValueDiffers:()=>fy,LOCALE_ID:()=>wy,MissingTranslationStrategy:()=>Vd,ModuleWithComponentFactories:()=>Cw,NO_ERRORS_SCHEMA:()=>xf,NgModule:()=>BT,NgModuleFactory:()=>Qv,NgModuleFactoryLoader:()=>uD,NgModuleRef:()=>ip,NgProbeToken:()=>oD,NgZone:()=>Vu,Optional:()=>Qn,Output:()=>OT,PACKAGE_ROOT_URL:()=>jT,PLATFORM_ID:()=>vw,PLATFORM_INITIALIZER:()=>yw,Pipe:()=>AT,PlatformRef:()=>V0,Query:()=>go,QueryList:()=>Yg,ReflectiveInjector:()=>Gt,ReflectiveKey:()=>h,Renderer2:()=>Tb,RendererFactory2:()=>hy,RendererStyleFlags2:()=>$r,ResolvedReflectiveFactory:()=>G,Sanitizer:()=>Gv,SecurityContext:()=>Fo,Self:()=>ar,SimpleChange:()=>uc,SkipSelf:()=>dr,SystemJsNgModuleLoader:()=>mD,SystemJsNgModuleLoaderConfig:()=>Gw,TRANSLATIONS:()=>VT,TRANSLATIONS_FORMAT:()=>UT,TemplateRef:()=>Op,Testability:()=>Ow,TestabilityRegistry:()=>F0,Type:()=>la,VERSION:()=>Wv,Version:()=>Ib,ViewChild:()=>uo,ViewChildren:()=>ec,ViewContainerRef:()=>jg,ViewEncapsulation:()=>zt,ViewRef:()=>Zw,WrappedValue:()=>uu,asNativeElements:()=>_D,assertPlatform:()=>zw,createPlatform:()=>Nw,createPlatformFactory:()=>Bw,defineInjectable:()=>Oi,destroyPlatform:()=>sD,enableProdMode:()=>eD,forwardRef:()=>Ye,getDebugNode:()=>Ka,getModuleFactory:()=>dD,getPlatform:()=>j0,inject:()=>sn,isDevMode:()=>B0,platformCore:()=>ID,resolveForwardRef:()=>Se,setTestabilityGetter:()=>JT,\u02750:()=>Vn,\u0275ALLOW_MULTIPLE_PLATFORMS:()=>z0,\u0275APP_ID_RANDOM_PROVIDER:()=>_w,\u0275CREATE_ATTRIBUTE_DECORATOR__POST_R3__:()=>Ph,\u0275ChangeDetectorStatus:()=>qe,\u0275CodegenComponentFactoryResolver:()=>IC,\u0275Compiler_compileModuleAndAllComponentsAsync__POST_R3__:()=>Dw,\u0275Compiler_compileModuleAndAllComponentsSync__POST_R3__:()=>O0,\u0275Compiler_compileModuleAsync__POST_R3__:()=>Tw,\u0275Compiler_compileModuleSync__POST_R3__:()=>Ey,\u0275ComponentFactory:()=>wm,\u0275Console:()=>xw,\u0275DEFAULT_LOCALE_ID:()=>kg,\u0275EMPTY_ARRAY:()=>Tr,\u0275EMPTY_MAP:()=>c2,\u0275INJECTOR_IMPL__POST_R3__:()=>Uf,\u0275INJECTOR_SCOPE:()=>Rd,\u0275LifecycleHooksFeature:()=>U_,\u0275LocaleDataIndex:()=>Qr,\u0275NG_COMP_DEF:()=>Nn,\u0275NG_DIR_DEF:()=>mi,\u0275NG_ELEMENT_ID:()=>Ge,\u0275NG_INJ_DEF:()=>pi,\u0275NG_MOD_DEF:()=>ne,\u0275NG_PIPE_DEF:()=>ke,\u0275NG_PROV_DEF:()=>fi,\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>Rp,\u0275NO_CHANGE:()=>Dn,\u0275NgModuleFactory:()=>by,\u0275NoopNgZone:()=>Pw,\u0275ReflectionCapabilities:()=>ae,\u0275Render3ComponentFactory:()=>h0,\u0275Render3ComponentRef:()=>dx,\u0275Render3NgModuleRef:()=>_x,\u0275RuntimeError:()=>yt,\u0275SWITCH_CHANGE_DETECTOR_REF_FACTORY__POST_R3__:()=>Ob,\u0275SWITCH_COMPILE_COMPONENT__POST_R3__:()=>hw,\u0275SWITCH_COMPILE_DIRECTIVE__POST_R3__:()=>dw,\u0275SWITCH_COMPILE_INJECTABLE__POST_R3__:()=>tp,\u0275SWITCH_COMPILE_NGMODULE__POST_R3__:()=>pw,\u0275SWITCH_COMPILE_PIPE__POST_R3__:()=>fw,\u0275SWITCH_ELEMENT_REF_FACTORY__POST_R3__:()=>Eb,\u0275SWITCH_IVY_ENABLED__POST_R3__:()=>Ew,\u0275SWITCH_RENDERER2_FACTORY__POST_R3__:()=>Db,\u0275SWITCH_TEMPLATE_REF_FACTORY__POST_R3__:()=>Fb,\u0275SWITCH_VIEW_CONTAINER_REF_FACTORY__POST_R3__:()=>Bb,\u0275_sanitizeHtml:()=>vo,\u0275_sanitizeUrl:()=>nc,\u0275allowSanitizationBypassAndThrow:()=>Cc,\u0275and:()=>PD,\u0275angular_packages_core_core_a:()=>Je,\u0275angular_packages_core_core_b:()=>kt,\u0275angular_packages_core_core_ba:()=>rE,\u0275angular_packages_core_core_bb:()=>G1,\u0275angular_packages_core_core_bc:()=>vy,\u0275angular_packages_core_core_bd:()=>YC,\u0275angular_packages_core_core_be:()=>hc,\u0275angular_packages_core_core_bf:()=>hx,\u0275angular_packages_core_core_bg:()=>$c,\u0275angular_packages_core_core_bh:()=>En,\u0275angular_packages_core_core_bi:()=>co,\u0275angular_packages_core_core_bj:()=>Zu,\u0275angular_packages_core_core_bl:()=>d0,\u0275angular_packages_core_core_bm:()=>f0,\u0275angular_packages_core_core_bn:()=>p0,\u0275angular_packages_core_core_bo:()=>m0,\u0275angular_packages_core_core_bp:()=>g0,\u0275angular_packages_core_core_bq:()=>Ri,\u0275angular_packages_core_core_br:()=>Es,\u0275angular_packages_core_core_bs:()=>To,\u0275angular_packages_core_core_bv:()=>ie,\u0275angular_packages_core_core_bw:()=>jf,\u0275angular_packages_core_core_bx:()=>Gr,\u0275angular_packages_core_core_bz:()=>hi,\u0275angular_packages_core_core_c:()=>kn,\u0275angular_packages_core_core_cb:()=>su,\u0275angular_packages_core_core_cc:()=>fb,\u0275angular_packages_core_core_d:()=>Ht,\u0275angular_packages_core_core_e:()=>k,\u0275angular_packages_core_core_f:()=>pe,\u0275angular_packages_core_core_g:()=>gw,\u0275angular_packages_core_core_h:()=>Sb,\u0275angular_packages_core_core_i:()=>wb,\u0275angular_packages_core_core_j:()=>Pp,\u0275angular_packages_core_core_k:()=>hD,\u0275angular_packages_core_core_l:()=>Nb,\u0275angular_packages_core_core_m:()=>zg,\u0275angular_packages_core_core_n:()=>zb,\u0275angular_packages_core_core_o:()=>r_,\u0275angular_packages_core_core_p:()=>Xa,\u0275angular_packages_core_core_q:()=>wD,\u0275angular_packages_core_core_r:()=>kb,\u0275angular_packages_core_core_s:()=>Zv,\u0275angular_packages_core_core_t:()=>qv,\u0275angular_packages_core_core_u:()=>Xv,\u0275angular_packages_core_core_v:()=>Kv,\u0275angular_packages_core_core_w:()=>Jw,\u0275angular_packages_core_core_x:()=>eE,\u0275angular_packages_core_core_y:()=>tE,\u0275angular_packages_core_core_z:()=>nE,\u0275bypassSanitizationTrustHtml:()=>pf,\u0275bypassSanitizationTrustResourceUrl:()=>Ju,\u0275bypassSanitizationTrustScript:()=>Lh,\u0275bypassSanitizationTrustStyle:()=>Np,\u0275bypassSanitizationTrustUrl:()=>mf,\u0275ccf:()=>S2,\u0275clearOverrides:()=>LS,\u0275clearResolutionOfComponentResourcesQueue:()=>jr,\u0275cmf:()=>FS,\u0275compileComponent:()=>Qx,\u0275compileDirective:()=>M0,\u0275compileNgModule:()=>Wx,\u0275compileNgModuleDefs:()=>Zx,\u0275compileNgModuleFactory__POST_R3__:()=>Lw,\u0275compilePipe:()=>lw,\u0275createInjector:()=>O_,\u0275crt:()=>JC,\u0275defaultIterableDiffers:()=>Rb,\u0275defaultKeyValueDiffers:()=>Lb,\u0275detectChanges:()=>tf,\u0275devModeEqual:()=>gh,\u0275did:()=>H2,\u0275eld:()=>OD,\u0275findLocaleData:()=>kv,\u0275flushModuleScopingQueueAsMuchAsPossible:()=>$x,\u0275getComponentViewDefinitionFactory:()=>nx,\u0275getDebugNodeR2:()=>CD,\u0275getDebugNode__POST_R3__:()=>Ty,\u0275getDirectives:()=>Gf,\u0275getHostElement:()=>dg,\u0275getInjectableDef:()=>gr,\u0275getLContext:()=>Ko,\u0275getLocaleCurrencyCode:()=>kE,\u0275getLocalePluralCase:()=>H1,\u0275getModuleFactory__POST_R3__:()=>Uw,\u0275getSanitizationBypassType:()=>_d,\u0275global:()=>fn,\u0275initServicesIfNeeded:()=>a_,\u0275inlineInterpolate:()=>l2,\u0275interpolate:()=>a2,\u0275isBoundToModule__POST_R3__:()=>Fw,\u0275isDefaultChangeDetectionStrategy:()=>Xe,\u0275isListLikeIterable:()=>lf,\u0275isObservable:()=>so,\u0275isPromise:()=>Kn,\u0275isSubscribable:()=>fo,\u0275ivyEnabled:()=>e_,\u0275makeDecorator:()=>sl,\u0275markDirty:()=>eg,\u0275mod:()=>p2,\u0275mpd:()=>f2,\u0275ncd:()=>WD,\u0275noSideEffects:()=>ir,\u0275nov:()=>L2,\u0275overrideComponentView:()=>RS,\u0275overrideProvider:()=>kS,\u0275pad:()=>XD,\u0275patchComponentDefWithScope:()=>D0,\u0275pid:()=>$2,\u0275pod:()=>KD,\u0275ppd:()=>qD,\u0275prd:()=>G2,\u0275publishDefaultGlobalUtils:()=>em,\u0275publishGlobalUtil:()=>cu,\u0275qud:()=>UD,\u0275registerLocaleData:()=>OE,\u0275registerModuleFactory:()=>rT,\u0275registerNgModuleType:()=>mx,\u0275renderComponent:()=>tm,\u0275resetCompiledComponents:()=>vT,\u0275resetJitOptions:()=>_T,\u0275resolveComponentResources:()=>ki,\u0275setClassMetadata:()=>fx,\u0275setCurrentInjector:()=>gt,\u0275setDocument:()=>ee,\u0275setLocaleId:()=>ay,\u0275store:()=>vg,\u0275stringify:()=>be,\u0275ted:()=>eS,\u0275transitiveScopesFor:()=>Jg,\u0275unregisterLocaleData:()=>RE,\u0275unv:()=>QC,\u0275unwrapSafeValue:()=>Al,\u0275vid:()=>iS,\u0275whenRendered:()=>H_,\u0275\u0275CopyDefinitionFeature:()=>G_,\u0275\u0275FactoryTarget:()=>Lo,\u0275\u0275InheritDefinitionFeature:()=>nm,\u0275\u0275NgOnChangesFeature:()=>gu,\u0275\u0275ProvidersFeature:()=>vb,\u0275\u0275advance:()=>wi,\u0275\u0275attribute:()=>Ip,\u0275\u0275attributeInterpolate1:()=>yh,\u0275\u0275attributeInterpolate2:()=>Qf,\u0275\u0275attributeInterpolate3:()=>cm,\u0275\u0275attributeInterpolate4:()=>um,\u0275\u0275attributeInterpolate5:()=>hm,\u0275\u0275attributeInterpolate6:()=>Mp,\u0275\u0275attributeInterpolate7:()=>_g,\u0275\u0275attributeInterpolate8:()=>dm,\u0275\u0275attributeInterpolateV:()=>fm,\u0275\u0275classMap:()=>Pg,\u0275\u0275classMapInterpolate1:()=>T1,\u0275\u0275classMapInterpolate2:()=>D1,\u0275\u0275classMapInterpolate3:()=>S1,\u0275\u0275classMapInterpolate4:()=>I1,\u0275\u0275classMapInterpolate5:()=>M1,\u0275\u0275classMapInterpolate6:()=>A1,\u0275\u0275classMapInterpolate7:()=>P1,\u0275\u0275classMapInterpolate8:()=>O1,\u0275\u0275classMapInterpolateV:()=>k1,\u0275\u0275classProp:()=>gl,\u0275\u0275contentQuery:()=>Bx,\u0275\u0275defineComponent:()=>vt,\u0275\u0275defineDirective:()=>sr,\u0275\u0275defineInjectable:()=>Zn,\u0275\u0275defineInjector:()=>Ur,\u0275\u0275defineNgModule:()=>wn,\u0275\u0275definePipe:()=>tr,\u0275\u0275directiveInject:()=>Pn,\u0275\u0275disableBindings:()=>Gl,\u0275\u0275element:()=>Wn,\u0275\u0275elementContainer:()=>_i,\u0275\u0275elementContainerEnd:()=>zn,\u0275\u0275elementContainerStart:()=>yr,\u0275\u0275elementEnd:()=>bn,\u0275\u0275elementStart:()=>Mn,\u0275\u0275enableBindings:()=>nl,\u0275\u0275getCurrentView:()=>Nr,\u0275\u0275getInheritedFactory:()=>Na,\u0275\u0275hostProperty:()=>Pv,\u0275\u0275i18n:()=>pb,\u0275\u0275i18nApply:()=>gb,\u0275\u0275i18nAttributes:()=>mb,\u0275\u0275i18nEnd:()=>Nv,\u0275\u0275i18nExp:()=>Bv,\u0275\u0275i18nPostprocess:()=>_b,\u0275\u0275i18nStart:()=>Fv,\u0275\u0275inject:()=>ln,\u0275\u0275injectAttribute:()=>Il,\u0275\u0275invalidFactory:()=>Yt,\u0275\u0275invalidFactoryDep:()=>At,\u0275\u0275listener:()=>xo,\u0275\u0275loadQuery:()=>zx,\u0275\u0275namespaceHTML:()=>qu,\u0275\u0275namespaceMathML:()=>mc,\u0275\u0275namespaceSVG:()=>di,\u0275\u0275nextContext:()=>wo,\u0275\u0275ngDeclareClassMetadata:()=>jS,\u0275\u0275ngDeclareComponent:()=>VS,\u0275\u0275ngDeclareDirective:()=>zS,\u0275\u0275ngDeclareFactory:()=>US,\u0275\u0275ngDeclareInjectable:()=>$S,\u0275\u0275ngDeclareInjector:()=>GS,\u0275\u0275ngDeclareNgModule:()=>WS,\u0275\u0275ngDeclarePipe:()=>ZS,\u0275\u0275pipe:()=>Ix,\u0275\u0275pipeBind1:()=>Mx,\u0275\u0275pipeBind2:()=>Ax,\u0275\u0275pipeBind3:()=>Px,\u0275\u0275pipeBind4:()=>Ox,\u0275\u0275pipeBindV:()=>kx,\u0275\u0275projection:()=>fl,\u0275\u0275projectionDef:()=>Bs,\u0275\u0275property:()=>pn,\u0275\u0275propertyInterpolate:()=>Mi,\u0275\u0275propertyInterpolate1:()=>zo,\u0275\u0275propertyInterpolate2:()=>ta,\u0275\u0275propertyInterpolate3:()=>$i,\u0275\u0275propertyInterpolate4:()=>Ao,\u0275\u0275propertyInterpolate5:()=>ya,\u0275\u0275propertyInterpolate6:()=>Eo,\u0275\u0275propertyInterpolate7:()=>Yo,\u0275\u0275propertyInterpolate8:()=>Ss,\u0275\u0275propertyInterpolateV:()=>xs,\u0275\u0275pureFunction0:()=>yx,\u0275\u0275pureFunction1:()=>vx,\u0275\u0275pureFunction2:()=>bx,\u0275\u0275pureFunction3:()=>xx,\u0275\u0275pureFunction4:()=>wx,\u0275\u0275pureFunction5:()=>Ex,\u0275\u0275pureFunction6:()=>Cx,\u0275\u0275pureFunction7:()=>Tx,\u0275\u0275pureFunction8:()=>Dx,\u0275\u0275pureFunctionV:()=>Sx,\u0275\u0275queryRefresh:()=>Fx,\u0275\u0275reference:()=>bg,\u0275\u0275resolveBody:()=>Ze,\u0275\u0275resolveDocument:()=>le,\u0275\u0275resolveWindow:()=>W,\u0275\u0275restoreView:()=>Uu,\u0275\u0275sanitizeHtml:()=>li,\u0275\u0275sanitizeResourceUrl:()=>ha,\u0275\u0275sanitizeScript:()=>qo,\u0275\u0275sanitizeStyle:()=>xd,\u0275\u0275sanitizeUrl:()=>rh,\u0275\u0275sanitizeUrlOrResourceUrl:()=>Bh,\u0275\u0275setComponentScope:()=>wt,\u0275\u0275setNgModuleScope:()=>Jt,\u0275\u0275styleMap:()=>zl,\u0275\u0275styleMapInterpolate1:()=>R1,\u0275\u0275styleMapInterpolate2:()=>L1,\u0275\u0275styleMapInterpolate3:()=>F1,\u0275\u0275styleMapInterpolate4:()=>N1,\u0275\u0275styleMapInterpolate5:()=>B1,\u0275\u0275styleMapInterpolate6:()=>z1,\u0275\u0275styleMapInterpolate7:()=>j1,\u0275\u0275styleMapInterpolate8:()=>V1,\u0275\u0275styleMapInterpolateV:()=>U1,\u0275\u0275styleProp:()=>ml,\u0275\u0275stylePropInterpolate1:()=>wv,\u0275\u0275stylePropInterpolate2:()=>Ev,\u0275\u0275stylePropInterpolate3:()=>Cv,\u0275\u0275stylePropInterpolate4:()=>Tv,\u0275\u0275stylePropInterpolate5:()=>Dv,\u0275\u0275stylePropInterpolate6:()=>Sv,\u0275\u0275stylePropInterpolate7:()=>Iv,\u0275\u0275stylePropInterpolate8:()=>Mv,\u0275\u0275stylePropInterpolateV:()=>Av,\u0275\u0275syntheticHostListener:()=>ti,\u0275\u0275syntheticHostProperty:()=>Ov,\u0275\u0275template:()=>yg,\u0275\u0275templateRefExtractor:()=>Hx,\u0275\u0275text:()=>C1,\u0275\u0275textInterpolate:()=>fv,\u0275\u0275textInterpolate1:()=>iy,\u0275\u0275textInterpolate2:()=>pv,\u0275\u0275textInterpolate3:()=>mv,\u0275\u0275textInterpolate4:()=>gv,\u0275\u0275textInterpolate5:()=>_v,\u0275\u0275textInterpolate6:()=>yv,\u0275\u0275textInterpolate7:()=>vv,\u0275\u0275textInterpolate8:()=>bv,\u0275\u0275textInterpolateV:()=>xv,\u0275\u0275trustConstantHtml:()=>Cs,\u0275\u0275trustConstantResourceUrl:()=>bo,\u0275\u0275viewQuery:()=>Nx});var O=v(9765),d=v(826),te=v(9897),l=v(6682),J=v(2441);var se=v(1307);function he(){return new O.xQ}function ie(t){for(let n in t)if(t[n]===ie)return n;throw Error("Could not find renamed property on target object.")}function fe(t,n){for(const s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=n[s])}function be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const s=n.indexOf("\n");return-1===s?n:n.substring(0,s)}function xe(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Fe=ie({__forward_ref__:ie});function Ye(t){return t.__forward_ref__=Ye,t.toString=function(){return be(this())},t}function Se(t){return Je(t)?t():t}function Je(t){return"function"==typeof t&&t.hasOwnProperty(Fe)&&t.__forward_ref__===Ye}class yt extends Error{constructor(n,s){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,s)),this.code=n}}function Tt(t){return"string"==typeof t?t:null==t?"":String(t)}function Ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Tt(t)}function jt(t,n){const s=n?` in ${n}`:"";throw new yt("201",`No provider for ${Ct(t)} found${s}`)}function An(t,n,s,c){throw new Error(`ASSERTION ERROR: ${t}`+(null==c?"":` [Expected=> ${s} ${c} ${n} <=Actual]`))}function Zn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}const Oi=Zn;function Ur(t){return{providers:t.providers||[],imports:t.imports||[]}}function gr(t){return ri(t,fi)||ri(t,ii)}function ri(t,n){return t.hasOwnProperty(n)?t[n]:null}function _o(t){return t&&(t.hasOwnProperty(pi)||t.hasOwnProperty(Li))?t[pi]:null}const fi=ie({\u0275prov:ie}),pi=ie({\u0275inj:ie}),ii=ie({ngInjectableDef:ie}),Li=ie({ngInjectorDef:ie});var nr=(()=>((nr=nr||{})[nr.Default=0]="Default",nr[nr.Host=1]="Host",nr[nr.Self=2]="Self",nr[nr.SkipSelf=4]="SkipSelf",nr[nr.Optional=8]="Optional",nr))();let Hr;function Gr(){return Hr}function Er(t){const n=Hr;return Hr=t,n}function Cr(t,n,s){const c=gr(t);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&nr.Optional?null:void 0!==n?n:void jt(be(t),"Injector")}function ir(t){return{toString:t}.toString()}var Pt=(()=>((Pt=Pt||{})[Pt.OnPush=0]="OnPush",Pt[Pt.Default=1]="Default",Pt))(),qe=(()=>((qe=qe||{})[qe.CheckOnce=0]="CheckOnce",qe[qe.Checked=1]="Checked",qe[qe.CheckAlways=2]="CheckAlways",qe[qe.Detached=3]="Detached",qe[qe.Errored=4]="Errored",qe[qe.Destroyed=5]="Destroyed",qe))();function Xe(t){return null==t||t===Pt.Default}var zt=(()=>((zt=zt||{})[zt.Emulated=0]="Emulated",zt[zt.None=2]="None",zt[zt.ShadowDom=3]="ShadowDom",zt))();const Qt="undefined"!=typeof globalThis&&globalThis,jn="undefined"!=typeof window&&window,Wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=Qt||"undefined"!=typeof global&&global||jn||Wt,ao={},Tr=[],Nn=ie({\u0275cmp:ie}),mi=ie({\u0275dir:ie}),ke=ie({\u0275pipe:ie}),ne=ie({\u0275mod:ie}),ue=ie({\u0275loc:ie}),Re=ie({\u0275fac:ie}),Ge=ie({__NG_ELEMENT_ID__:ie});let it=0;function vt(t){return ir(()=>{const s={},c={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Pt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Tr,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||zt.Emulated,id:"c",styles:t.styles||Tr,_:null,setInput:null,schemas:t.schemas||null,tView:null},f=t.directives,b=t.features,A=t.pipes;return c.id+=it++,c.inputs=er(t.inputs,s),c.outputs=er(t.outputs),b&&b.forEach(F=>F(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(at):null,c.pipeDefs=A?()=>("function"==typeof A?A():A).map(It):null,c})}function wt(t,n,s){const c=t.\u0275cmp;c.directiveDefs=()=>n.map(at),c.pipeDefs=()=>s.map(It)}function at(t){return Xn(t)||mr(t)}function It(t){return Vr(t)}const an={};function wn(t){return ir(()=>{const n={type:t.type,bootstrap:t.bootstrap||Tr,declarations:t.declarations||Tr,imports:t.imports||Tr,exports:t.exports||Tr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(an[t.id]=t.type),n})}function Jt(t,n){return ir(()=>{const s=Mr(t,!0);s.declarations=n.declarations||Tr,s.imports=n.imports||Tr,s.exports=n.exports||Tr})}function er(t,n){if(null==t)return ao;const s={};for(const c in t)if(t.hasOwnProperty(c)){let f=t[c],b=f;Array.isArray(f)&&(b=f[1],f=f[0]),s[f]=c,n&&(n[f]=b)}return s}const sr=vt;function tr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Xn(t){return t[Nn]||null}function mr(t){return t[mi]||null}function Vr(t){return t[ke]||null}function Mr(t,n){const s=t[ne]||null;if(!s&&!0===n)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return s}function Yn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Fn(t){return Array.isArray(t)&&!0===t[1]}function Ar(t){return 0!=(8&t.flags)}function oi(t){return 2==(2&t.flags)}function zi(t){return 1==(1&t.flags)}function Wr(t){return null!==t.template}function Vl(t){return 0!=(512&t[2])}function Gs(t,n){return t.hasOwnProperty(Re)?t[Re]:null}class uc{constructor(n,s,c){this.previousValue=n,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function gu(){return hc}function hc(t){return t.type.prototype.ngOnChanges&&(t.setInput=ls),Lc}function Lc(){const t=Ea(this),n=null==t?void 0:t.current;if(n){const s=t.previous;if(s===ao)t.previous=n;else for(let c in n)s[c]=n[c];t.current=null,this.ngOnChanges(n)}}function ls(t,n,s,c){const f=Ea(t)||function(t,n){return t[mo]=n}(t,{previous:ao,current:null}),b=f.current||(f.current={}),A=f.previous,F=this.declaredInputs[s],V=A[F];b[F]=new uc(V&&V.currentValue,n,A===ao),t[c]=n}gu.ngInherit=!0;const mo="__ngSimpleChanges__";function Ea(t){return t[mo]||null}let Ca=null;const Hl=t=>{Ca=t},cs=function(t,n,s){null!=Ca&&Ca(t,n,s)},Ta="http://www.w3.org/2000/svg",Q="http://www.w3.org/1998/MathML/";let ve;function ee(t){ve=t}function Me(){return void 0!==ve?ve:"undefined"!=typeof document?document:void 0}function Vt(t){return!!t.listen}const br={createRenderer:(t,n)=>Me()};function Pr(t){for(;Array.isArray(t);)t=t[0];return t}function no(t,n){return Pr(n[t])}function hi(t,n){return Pr(n[t.index])}function Ps(t,n){return t.data[n]}function Hi(t,n){return t[n]}function Co(t,n){const s=n[t];return Yn(s)?s:s[0]}function tl(t){return 4==(4&t[2])}function Da(t){return 128==(128&t[2])}function ws(t,n){return null==n?null:t[n]}function bl(t){t[18]=0}function xl(t,n){t[5]+=n;let s=t,c=t[3];for(;null!==c&&(1===n&&1===s[5]||-1===n&&0===s[5]);)c[5]+=n,s=c,c=c[3]}const zr={lFrame:xi(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function yu(){return zr.bindingsEnabled}function nl(){zr.bindingsEnabled=!0}function Gl(){zr.bindingsEnabled=!1}function En(){return zr.lFrame.lView}function Si(){return zr.lFrame.tView}function Uu(t){return zr.lFrame.contextLView=t,t[8]}function Po(){let t=Ch();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ch(){return zr.lFrame.currentTNode}function wl(){const t=zr.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function ra(t,n){const s=zr.lFrame;s.currentTNode=t,s.isParent=n}function dc(){return zr.lFrame.isParent}function fc(){zr.lFrame.isParent=!1}function Ma(){return zr.isInCheckNoChangesMode}function Nc(t){zr.isInCheckNoChangesMode=t}function co(){const t=zr.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function rl(){return zr.lFrame.bindingIndex}function vu(t){return zr.lFrame.bindingIndex=t}function Os(){return zr.lFrame.bindingIndex++}function Aa(t){const n=zr.lFrame,s=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,s}function Wl(t){zr.lFrame.inI18n=t}function fd(t,n){const s=zr.lFrame;s.bindingIndex=s.bindingRootIndex=t,$u(n)}function $u(t){zr.lFrame.currentDirectiveIndex=t}function Zl(t){const n=zr.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Gu(){return zr.lFrame.currentQueryIndex}function bu(t){zr.lFrame.currentQueryIndex=t}function xu(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Wu(t,n,s){if(s&nr.SkipSelf){let f=n,b=t;for(;!(f=f.parent,null!==f||s&nr.Host||(f=xu(b),null===f||(b=b[15],10&f.type))););if(null===f)return!1;n=f,t=b}const c=zr.lFrame=wu();return c.currentTNode=n,c.lView=t,!0}function El(t){const n=wu(),s=t[1];zr.lFrame=n,n.currentTNode=s.firstChild,n.lView=t,n.tView=s,n.contextLView=t,n.bindingIndex=s.bindingStartIndex,n.inI18n=!1}function wu(){const t=zr.lFrame,n=null===t?null:t.child;return null===n?xi(t):n}function xi(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Bc(){const t=zr.lFrame;return zr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Pa=Bc;function ql(){const t=Bc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zu(t){return(zr.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,zr.lFrame.contextLView))[8]}function Uo(){return zr.lFrame.selectedIndex}function Oa(t){zr.lFrame.selectedIndex=t}function yo(){const t=zr.lFrame;return Ps(t.tView,t.selectedIndex)}function di(){zr.lFrame.currentNamespace=Ta}function mc(){zr.lFrame.currentNamespace=Q}function qu(){zr.lFrame.currentNamespace=null}function ka(t,n){for(let s=n.directiveStart,c=n.directiveEnd;s<c;s++){const b=t.data[s].type.prototype,{ngAfterContentInit:A,ngAfterContentChecked:F,ngAfterViewInit:V,ngAfterViewChecked:q,ngOnDestroy:oe}=b;A&&(t.contentHooks||(t.contentHooks=[])).push(-s,A),F&&((t.contentHooks||(t.contentHooks=[])).push(s,F),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,F)),V&&(t.viewHooks||(t.viewHooks=[])).push(-s,V),q&&((t.viewHooks||(t.viewHooks=[])).push(s,q),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,q)),null!=oe&&(t.destroyHooks||(t.destroyHooks=[])).push(s,oe)}}function jc(t,n,s){Ra(t,n,3,s)}function ks(t,n,s,c){(3&t[2])===s&&Ra(t,n,s,c)}function _c(t,n){let s=t[2];(3&s)===n&&(s&=2047,s+=1,t[2]=s)}function Ra(t,n,s,c){const b=null!=c?c:-1,A=n.length-1;let F=0;for(let V=void 0!==c?65535&t[18]:0;V<A;V++)if("number"==typeof n[V+1]){if(F=n[V],null!=c&&F>=c)break}else n[V]<0&&(t[18]+=65536),(F<b||-1==b)&&(ia(t,s,n,V),t[18]=(4294901760&t[18])+V+2),V++}function ia(t,n,s,c){const f=s[c]<0,b=s[c+1],F=t[f?-s[c]:s[c]];if(f){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048,cs(4,F,b);try{b.call(F)}finally{cs(5,F,b)}}}else{cs(4,F,b);try{b.call(F)}finally{cs(5,F,b)}}}class Cl{constructor(n,s,c){this.factory=n,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function Oo(t,n,s){const c=Vt(t);let f=0;for(;f<s.length;){const b=s[f];if("number"==typeof b){if(0!==b)break;f++;const A=s[f++],F=s[f++],V=s[f++];c?t.setAttribute(n,F,V,A):n.setAttributeNS(A,F,V)}else{const A=b,F=s[++f];sa(A)?c&&t.setProperty(n,A,F):c?t.setAttribute(n,A,F):n.setAttribute(A,F),f++}}return f}function _s(t){return 3===t||4===t||6===t}function sa(t){return 64===t.charCodeAt(0)}function Tl(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let s=-1;for(let c=0;c<n.length;c++){const f=n[c];"number"==typeof f?s=f:0===s||yc(t,s,f,null,-1===s||2===s?n[++c]:null)}}return t}function yc(t,n,s,c,f){let b=0,A=t.length;if(-1===n)A=-1;else for(;b<t.length;){const F=t[b++];if("number"==typeof F){if(F===n){A=-1;break}if(F>n){A=b-1;break}}}for(;b<t.length;){const F=t[b];if("number"==typeof F)break;if(F===s){if(null===c)return void(null!==f&&(t[b+1]=f));if(c===t[b+1])return void(t[b+2]=f)}b++,null!==c&&b++,null!==f&&b++}-1!==A&&(t.splice(A,0,n),b=A+1),t.splice(b++,0,s),null!==c&&t.splice(b++,0,c),null!==f&&t.splice(b++,0,f)}function Cu(t){return-1!==t}function Yl(t){return 32767&t}function Vc(t,n){let s=function(t){return t>>16}(t),c=n;for(;s>0;)c=c[15],s--;return c}let Xu=!0;function Uc(t){const n=Xu;return Xu=t,n}let Fa=0;function Zs(t,n){const s=vc(t,n);if(-1!==s)return s;const c=n[1];c.firstCreatePass&&(t.injectorIndex=n.length,Ql(c.data,t),Ql(n,null),Ql(c.blueprint,null));const f=Hc(t,n),b=t.injectorIndex;if(Cu(f)){const A=Yl(f),F=Vc(f,n),V=F[1].data;for(let q=0;q<8;q++)n[b+q]=F[A+q]|V[A+q]}return n[b+8]=f,b}function Ql(t,n){t.push(0,0,0,0,0,0,0,0,n)}function vc(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Hc(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,c=null,f=n;for(;null!==f;){const b=f[1],A=b.type;if(c=2===A?b.declTNode:1===A?f[6]:null,null===c)return-1;if(s++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function bc(t,n,s){!function(t,n,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(Ge)&&(c=s[Ge]),null==c&&(c=s[Ge]=Fa++);const f=255&c;n.data[t+(f>>5)]|=1<<f}(t,n,s)}function $c(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const s=t.attrs;if(s){const c=s.length;let f=0;for(;f<c;){const b=s[f];if(_s(b))break;if(0===b)f+=2;else if("number"==typeof b)for(f++;f<c&&"string"==typeof s[f];)f++;else{if(b===n)return s[f+1];f+=2}}}return null}function Dl(t,n,s){if(s&nr.Optional)return t;jt(n,"NodeInjector")}function Gc(t,n,s,c){if(s&nr.Optional&&void 0===c&&(c=null),0==(s&(nr.Self|nr.Host))){const f=t[9],b=Er(void 0);try{return f?f.get(n,c,s&nr.Optional):Cr(n,c,s&nr.Optional)}finally{Er(b)}}return Dl(c,n,s)}function Mh(t,n,s,c=nr.Default,f){if(null!==t){const b=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ge)?t[Ge]:void 0;return"number"==typeof n?n>=0?255&n:us:n}(s);if("function"==typeof b){if(!Wu(n,t,c))return c&nr.Host?Dl(f,s,c):Gc(n,s,c,f);try{const A=b(c);if(null!=A||c&nr.Optional)return A;jt(s)}finally{Pa()}}else if("number"==typeof b){let A=null,F=vc(t,n),V=-1,q=c&nr.Host?n[16][6]:null;for((-1===F||c&nr.SkipSelf)&&(V=-1===F?Hc(t,n):n[F+8],-1!==V&&Su(c,!1)?(A=n[1],F=Yl(V),n=Vc(V,n)):F=-1);-1!==F;){const oe=n[1];if(Du(b,F,oe.data)){const Pe=Ah(F,n,s,A,c,q);if(Pe!==xc)return Pe}V=n[F+8],-1!==V&&Su(c,n[1].data[F+8]===q)&&Du(b,F,n)?(A=oe,F=Yl(V),n=Vc(V,n)):F=-1}}}return Gc(n,s,c,f)}const xc={};function us(){return new wc(Po(),En())}function Ah(t,n,s,c,f,b){const A=n[1],F=A.data[t+8],oe=Wc(F,A,s,null==c?oi(F)&&Xu:c!=A&&0!=(3&F.type),f&nr.Host&&b===F);return null!==oe?Ro(n,A,oe,F):xc}function Wc(t,n,s,c,f){const b=t.providerIndexes,A=n.data,F=1048575&b,V=t.directiveStart,oe=b>>20,je=f?F+oe:t.directiveEnd;for(let ct=c?F:F+oe;ct<je;ct++){const Dt=A[ct];if(ct<V&&s===Dt||ct>=V&&Dt.type===s)return ct}if(f){const ct=A[V];if(ct&&Wr(ct)&&ct.type===s)return V}return null}function Ro(t,n,s,c){let f=t[s];const b=n.data;if(function(t){return t instanceof Cl}(f)){const A=f;A.resolving&&function(t,n){throw new yt("200",`Circular dependency in DI detected for ${t}`)}(Ct(b[s]));const F=Uc(A.canSeeViewProviders);A.resolving=!0;const V=A.injectImpl?Er(A.injectImpl):null;Wu(t,c,nr.Default);try{f=t[s]=A.factory(void 0,b,t,c),n.firstCreatePass&&s>=c.directiveStart&&function(t,n,s){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:b}=n.type.prototype;if(c){const A=hc(n);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,A),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,A)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,f),b&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,b))}(s,b[s],n)}finally{null!==V&&Er(V),Uc(F),A.resolving=!1,Pa()}}return f}function Du(t,n,s){return!!(s[n+(t>>5)]&1<<t)}function Su(t,n){return!(t&nr.Self||t&nr.Host&&n)}class wc{constructor(n,s){this._tNode=n,this._lView=s}get(n,s,c){return Mh(this._tNode,this._lView,n,c,s)}}function Na(t){return ir(()=>{const n=t.prototype.constructor,s=n[Re]||Sl(n),c=Object.prototype;let f=Object.getPrototypeOf(t.prototype).constructor;for(;f&&f!==c;){const b=f[Re]||Sl(f);if(b&&b!==s)return b;f=Object.getPrototypeOf(f)}return b=>new b})}function Sl(t){return Je(t)?()=>{const n=Sl(Se(t));return n&&n()}:Gs(t)}function Il(t){return $c(Po(),t)}const hs="__annotations__",ol="__parameters__",$n="__prop__metadata__";function sl(t,n,s,c,f){return ir(()=>{const b=Ls(n);function A(...F){if(this instanceof A)return b.call(this,...F),this;const V=new A(...F);return function(oe){return f&&f(oe,...F),(oe.hasOwnProperty(hs)?oe[hs]:Object.defineProperty(oe,hs,{value:[]})[hs]).push(V),c&&c(oe),oe}}return s&&(A.prototype=Object.create(s.prototype)),A.prototype.ngMetadataName=t,A.annotationCls=A,A})}function Ls(t){return function(...s){if(t){const c=t(...s);for(const f in c)this[f]=c[f]}}}function To(t,n,s){return ir(()=>{const c=Ls(n);function f(...b){if(this instanceof f)return c.apply(this,b),this;const A=new f(...b);return F.annotation=A,F;function F(V,q,oe){const Pe=V.hasOwnProperty(ol)?V[ol]:Object.defineProperty(V,ol,{value:[]})[ol];for(;Pe.length<=oe;)Pe.push(null);return(Pe[oe]=Pe[oe]||[]).push(A),V}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function Es(t,n,s,c){return ir(()=>{const f=Ls(n);function b(...A){if(this instanceof b)return f.apply(this,A),this;const F=new b(...A);return function(q,oe){const Pe=q.constructor,je=Pe.hasOwnProperty($n)?Pe[$n]:Object.defineProperty(Pe,$n,{value:{}})[$n];je[oe]=je.hasOwnProperty(oe)&&je[oe]||[],je[oe].unshift(F),c&&c(q,oe,...A)}}return s&&(b.prototype=Object.create(s.prototype)),b.prototype.ngMetadataName=t,b.annotationCls=b,b})}function Ph(){return To("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>Il(t)}))}const Ku=Ph();class Ki{constructor(n,s){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Zn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const al=new Ki("AnalyzeForEntryComponents");class go{}const Jl=Es("ContentChildren",(t,n={})=>Object.assign({selector:t,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0},n),go),Iu=Es("ContentChild",(t,n={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},n),go),ec=Es("ViewChildren",(t,n={})=>Object.assign({selector:t,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0},n),go),uo=Es("ViewChild",(t,n)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},n),go);var Lo=(()=>((Lo=Lo||{})[Lo.Directive=0]="Directive",Lo[Lo.Component=1]="Component",Lo[Lo.Injectable=2]="Injectable",Lo[Lo.Pipe=3]="Pipe",Lo[Lo.NgModule=4]="NgModule",Lo))();function Do(t){const n=fn.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const la=Function;function Zc(t){return"function"==typeof t}function ns(t,n){void 0===n&&(n=t);for(let s=0;s<t.length;s++){let c=t[s];Array.isArray(c)?(n===t&&(n=t.slice(0,s)),ns(c,n)):n!==t&&n.push(c)}return n}function Xs(t,n){t.forEach(s=>Array.isArray(s)?Xs(s,n):n(s))}function Ec(t,n,s){n>=t.length?t.push(s):t.splice(n,0,s)}function za(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function ys(t,n){const s=[];for(let c=0;c<t;c++)s.push(n);return s}function o(t,n,s){let c=g(t,n);return c>=0?t[1|c]=s:(c=~c,function(t,n,s,c){let f=t.length;if(f==n)t.push(s,c);else if(1===f)t.push(c,t[0]),t[0]=s;else{for(f--,t.push(t[f-1],t[f]);f>n;)t[f]=t[f-2],f--;t[n]=s,t[n+1]=c}}(t,c,n,s)),c}function u(t,n){const s=g(t,n);if(s>=0)return t[1|s]}function g(t,n){return function(t,n,s){let c=0,f=t.length>>s;for(;f!==c;){const b=c+(f-c>>1),A=t[b<<s];if(n===A)return b<<s;A>n?f=b:c=b+1}return~(f<<s)}(t,n,1)}const B=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,z=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,U=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Z=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class ae{constructor(n){this._reflect=n||fn.Reflect}isReflectionEnabled(){return!0}factory(n){return(...s)=>new n(...s)}_zipTypesAndAnnotations(n,s){let c;c=ys(void 0===n?s.length:n.length);for(let f=0;f<c.length;f++)c[f]=void 0===n?[]:n[f]&&n[f]!=Object?[n[f]]:[],s&&null!=s[f]&&(c[f]=c[f].concat(s[f]));return c}_ownParameters(n,s){const c=n.toString();if(B.test(t=c)||Z.test(t)||z.test(t)&&!U.test(t))return null;var t;if(n.parameters&&n.parameters!==s.parameters)return n.parameters;const f=n.ctorParameters;if(f&&f!==s.ctorParameters){const F="function"==typeof f?f():f,V=F.map(oe=>oe&&oe.type),q=F.map(oe=>oe&&ye(oe.decorators));return this._zipTypesAndAnnotations(V,q)}const b=n.hasOwnProperty(ol)&&n[ol],A=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",n);return A||b?this._zipTypesAndAnnotations(A,b):ys(n.length)}parameters(n){if(!Zc(n))return[];const s=Le(n);let c=this._ownParameters(n,s);return!c&&s!==Object&&(c=this.parameters(s)),c||[]}_ownAnnotations(n,s){if(n.annotations&&n.annotations!==s.annotations){let c=n.annotations;return"function"==typeof c&&c.annotations&&(c=c.annotations),c}return n.decorators&&n.decorators!==s.decorators?ye(n.decorators):n.hasOwnProperty(hs)?n[hs]:null}annotations(n){if(!Zc(n))return[];const s=Le(n),c=this._ownAnnotations(n,s)||[];return(s!==Object?this.annotations(s):[]).concat(c)}_ownPropMetadata(n,s){if(n.propMetadata&&n.propMetadata!==s.propMetadata){let c=n.propMetadata;return"function"==typeof c&&c.propMetadata&&(c=c.propMetadata),c}if(n.propDecorators&&n.propDecorators!==s.propDecorators){const c=n.propDecorators,f={};return Object.keys(c).forEach(b=>{f[b]=ye(c[b])}),f}return n.hasOwnProperty($n)?n[$n]:null}propMetadata(n){if(!Zc(n))return{};const s=Le(n),c={};if(s!==Object){const b=this.propMetadata(s);Object.keys(b).forEach(A=>{c[A]=b[A]})}const f=this._ownPropMetadata(n,s);return f&&Object.keys(f).forEach(b=>{const A=[];c.hasOwnProperty(b)&&A.push(...c[b]),A.push(...f[b]),c[b]=A}),c}ownPropMetadata(n){return Zc(n)&&this._ownPropMetadata(n,Le(n))||{}}hasLifecycleHook(n,s){return n instanceof la&&s in n.prototype}guards(n){return{}}getter(n){return new Function("o","return o."+n+";")}setter(n){return new Function("o","v","return o."+n+" = v;")}method(n){return new Function("o","args",`if (!o.${n}) throw new Error('"${n}" is undefined');\n        return o.${n}.apply(o, args);`)}importUri(n){return"object"==typeof n&&n.filePath?n.filePath:`./${be(n)}`}resourceUri(n){return`./${be(n)}`}resolveIdentifier(n,s,c,f){return f}resolveEnum(n,s){return n[s]}}function ye(t){return t?t.map(n=>new(0,n.type.annotationCls)(...n.args?n.args:[])):[]}function Le(t){const n=t.prototype?Object.getPrototypeOf(t.prototype):null;return(n?n.constructor:null)||Object}const De={},Oe="__NG_DI_FLAG__",Ce="ngTempTokenPath",ze=/\n/gm,ot="__source",st=ie({provide:String,useValue:ie});let tt;function gt(t){const n=tt;return tt=t,n}function kt(t,n=nr.Default){if(void 0===tt)throw new Error("inject() must be called from an injection context");return null===tt?Cr(t,void 0,n):tt.get(t,n&nr.Optional?null:void 0,n)}function ln(t,n=nr.Default){return(Gr()||kt)(Se(t),n)}function At(t){throw new Error("invalid")}const sn=ln;function rn(t){const n=[];for(let s=0;s<t.length;s++){const c=Se(t[s]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let f,b=nr.Default;for(let A=0;A<c.length;A++){const F=c[A],V=qt(F);"number"==typeof V?-1===V?f=F.token:b|=V:f=F}n.push(ln(f,b))}else n.push(ln(c))}return n}function kn(t,n){return t[Oe]=n,t.prototype[Oe]=n,t}function qt(t){return t[Oe]}function _n(t,n,s,c){const f=t[Ce];throw n[ot]&&f.unshift(n[ot]),t.message=function(t,n,s,c=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let f=be(n);if(Array.isArray(n))f=n.map(be).join(" -> ");else if("object"==typeof n){let b=[];for(let A in n)if(n.hasOwnProperty(A)){let F=n[A];b.push(A+":"+("string"==typeof F?JSON.stringify(F):be(F)))}f=`{${b.join(", ")}}`}return`${s}${c?"("+c+")":""}[${f}]: ${t.replace(ze,"\n  ")}`}("\n"+t.message,f,s,c),t.ngTokenPath=f,t[Ce]=null,t}const Vn=t=>({token:t}),Rn=kn(To("Inject",Vn),-1),Qn=kn(To("Optional"),8),ar=kn(To("Self"),2),dr=kn(To("SkipSelf"),4),qr=kn(To("Host"),1);let rr=null;function Ir(){return rr=rr||new ae}function Xr(t){return Yi(Ir().parameters(t))}function Yi(t){return t.map(n=>function(t){const n={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(t)&&t.length>0)for(let s=0;s<t.length;s++){const c=t[s];if(void 0===c)continue;const f=Object.getPrototypeOf(c);if(c instanceof Qn||"Optional"===f.ngMetadataName)n.optional=!0;else if(c instanceof dr||"SkipSelf"===f.ngMetadataName)n.skipSelf=!0;else if(c instanceof ar||"Self"===f.ngMetadataName)n.self=!0;else if(c instanceof qr||"Host"===f.ngMetadataName)n.host=!0;else if(c instanceof Rn)n.token=c.token;else if(c instanceof Ku){if(void 0===c.attributeName)throw new Error("Attribute name must be defined.");n.attribute=c.attributeName}else n.token=c}else n.token=void 0===t||Array.isArray(t)&&0===t.length?null:t;return n}(n))}function ki(t){const n=[],s=new Map;function c(f){let b=s.get(f);if(!b){const A=t(f);s.set(f,b=A.then(Ni))}return b}return ro.forEach((f,b)=>{const A=[];f.templateUrl&&A.push(c(f.templateUrl).then(Pe=>{f.template=Pe}));const F=f.styleUrls,V=f.styles||(f.styles=[]),q=f.styles.length;F&&F.forEach((Pe,je)=>{V.push(""),A.push(c(Pe).then(ct=>{V[q+je]=ct,F.splice(F.indexOf(Pe),1),0==F.length&&(f.styleUrls=void 0)}))});const oe=Promise.all(A).then(()=>function(t){Qo.delete(t)}(b));n.push(oe)}),jr(),Promise.all(n).then(()=>{})}let ro=new Map;const Qo=new Set;function Gi(t){return!!(t.templateUrl&&!t.hasOwnProperty("template")||t.styleUrls&&t.styleUrls.length)}function jr(){const t=ro;return ro=new Map,t}function Ni(t){return"string"==typeof t?t:t.text()}let Io,Va;function ds(){if(void 0===Io&&(Io=null,fn.trustedTypes))try{Io=fn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Io}function ca(t){var n;return(null===(n=ds())||void 0===n?void 0:n.createHTML(t))||t}function Ml(){if(void 0===Va&&(Va=null,fn.trustedTypes))try{Va=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Va}function Ou(t){var n;return(null===(n=Ml())||void 0===n?void 0:n.createHTML(t))||t}function Qu(t){var n;return(null===(n=Ml())||void 0===n?void 0:n.createScript(t))||t}function kh(t){var n;return(null===(n=Ml())||void 0===n?void 0:n.createScriptURL(t))||t}class Yc{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gd extends Yc{getTypeName(){return"HTML"}}class ff extends Yc{getTypeName(){return"Style"}}class Gd extends Yc{getTypeName(){return"Script"}}class Ys extends Yc{getTypeName(){return"URL"}}class Rh extends Yc{getTypeName(){return"ResourceURL"}}function Al(t){return t instanceof Yc?t.changingThisBreaksApplicationSecurity:t}function Cc(t,n){const s=_d(t);if(null!=s&&s!==n){if("ResourceURL"===s&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===n}function _d(t){return t instanceof Yc&&t.getTypeName()||null}function pf(t){return new gd(t)}function Np(t){return new ff(t)}function Lh(t){return new Gd(t)}function mf(t){return new Ys(t)}function Ju(t){return new Rh(t)}function Wd(t){const n=new Fh(t);return function(){try{return!!(new window.DOMParser).parseFromString(ca(""),"text/html")}catch(t){return!1}}()?new eh(n):n}class eh{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const s=(new window.DOMParser).parseFromString(ca(n),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(n):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class Fh{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const c=this.inertDocument.createElement("body");s.appendChild(c)}}getInertBodyElement(n){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=ca(n),s;const c=this.inertDocument.createElement("body");return c.innerHTML=ca(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(n){const s=n.attributes;for(let f=s.length-1;0<f;f--){const A=s.item(f).name;("xmlns:ns1"===A||0===A.indexOf("ns1:"))&&n.removeAttribute(A)}let c=n.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const th=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function nc(t){return(t=String(t)).match(th)||t.match(Qc)?t:"unsafe:"+t}function Dc(t){return(t=String(t)).split(",").map(n=>nc(n.trim())).join(", ")}function rc(t){const n={};for(const s of t.split(","))n[s]=!0;return n}function _r(...t){const n={};for(const s of t)for(const c in s)s.hasOwnProperty(c)&&(n[c]=!0);return n}const vd=rc("area,br,col,hr,img,wbr"),bd=rc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Jc=rc("rp,rt"),ua=_r(vd,_r(bd,rc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_r(Jc,rc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_r(Jc,bd)),Tn=rc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ic=rc("srcset"),yf=_r(Tn,ic,rc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Sc=rc("script,style,template");class Nh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let s=n.firstChild,c=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?c=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,c&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(n){const s=n.nodeName.toLowerCase();if(!ua.hasOwnProperty(s))return this.sanitizedSomething=!0,!Sc.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const c=n.attributes;for(let f=0;f<c.length;f++){const b=c.item(f),A=b.name,F=A.toLowerCase();if(!yf.hasOwnProperty(F)){this.sanitizedSomething=!0;continue}let V=b.value;Tn[F]&&(V=nc(V)),ic[F]&&(V=Dc(V)),this.buf.push(" ",A,'="',Zd(V),'"')}return this.buf.push(">"),!0}endElement(n){const s=n.nodeName.toLowerCase();ua.hasOwnProperty(s)&&!vd.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(n){this.buf.push(Zd(n))}checkClobberedElement(n,s){if(s&&(n.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return s}}const Ol=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ua=/([^\#-~ |!])/g;function Zd(t){return t.replace(/&/g,"&amp;").replace(Ol,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Ua,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nh;function vo(t,n){let s=null;try{nh=nh||Wd(t);let c=n?String(n):"";s=nh.getInertBodyElement(c);let f=5,b=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=b,b=s.innerHTML,s=nh.getInertBodyElement(c)}while(c!==b);return ca((new Nh).sanitizeChildren(wr(s)||s))}finally{if(s){const c=wr(s)||s;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function wr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Fo=(()=>((Fo=Fo||{})[Fo.NONE=0]="NONE",Fo[Fo.HTML=1]="HTML",Fo[Fo.STYLE=2]="STYLE",Fo[Fo.SCRIPT=3]="SCRIPT",Fo[Fo.URL=4]="URL",Fo[Fo.RESOURCE_URL=5]="RESOURCE_URL",Fo))();function li(t){const n=Xo();return n?Ou(n.sanitize(Fo.HTML,t)||""):Cc(t,"HTML")?Ou(Al(t)):vo(Me(),Tt(t))}function xd(t){const n=Xo();return n?n.sanitize(Fo.STYLE,t)||"":Cc(t,"Style")?Al(t):Tt(t)}function rh(t){const n=Xo();return n?n.sanitize(Fo.URL,t)||"":Cc(t,"URL")?Al(t):nc(Tt(t))}function ha(t){const n=Xo();if(n)return kh(n.sanitize(Fo.RESOURCE_URL,t)||"");if(Cc(t,"ResourceURL"))return kh(Al(t));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function qo(t){const n=Xo();if(n)return Qu(n.sanitize(Fo.SCRIPT,t)||"");if(Cc(t,"Script"))return Qu(Al(t));throw new Error("unsafe value used in a script context")}function Cs(t){return ca(t[0])}function bo(t){return function(t){var n;return(null===(n=ds())||void 0===n?void 0:n.createScriptURL(t))||t}(t[0])}function Ri(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?ha:rh}function Bh(t,n,s){return Ri(n,s)(t)}function Xo(){const t=En();return t&&t[12]}function Ko(t){let n=Lu(t);if(n){if(Array.isArray(n)){const s=n;let c,f,b;if(function(t){return t&&t.constructor&&t.constructor.\u0275cmp}(t)){if(c=Vh(s,t),-1==c)throw new Error("The provided component was not found in the application");f=t}else if(function(t){return t&&t.constructor&&t.constructor.\u0275dir}(t)){if(c=function(t,n){let s=t[1].firstChild;for(;s;){const f=s.directiveEnd;for(let b=s.directiveStart;b<f;b++)if(t[b]===n)return s.index;s=jh(s)}return-1}(s,t),-1==c)throw new Error("The provided directive was not found in the application");b=qd(c,s,!1)}else if(c=tu(s,t),-1==c)return null;const A=Pr(s[c]),F=Lu(A),V=F&&!Array.isArray(F)?F:fa(s,c,A);if(f&&void 0===V.component&&(V.component=f,rs(V.component,V)),b&&void 0===V.directives){V.directives=b;for(let q=0;q<b.length;q++)rs(b[q],V)}rs(V.native,V),n=V}}else{const s=t;let c=s;for(;c=c.parentNode;){const f=Lu(c);if(f){let b;if(b=Array.isArray(f)?f:f.lView,!b)return null;const A=tu(b,s);if(A>=0){const F=Pr(b[A]),V=fa(b,A,F);rs(F,V),n=V;break}}}}return n||null}function fa(t,n,s){return{lView:t,nodeIndex:n,native:s,component:void 0,directives:void 0,localRefs:void 0}}function zh(t){let s,n=Lu(t);if(Array.isArray(n)){const c=Vh(n,t);s=Co(c,n);const f=fa(n,c,s[0]);f.component=t,rs(t,f),rs(f.native,f)}else s=Co(n.nodeIndex,n.lView);return s}const Ru="__ngContext__";function rs(t,n){t[Ru]=n}function Lu(t){return t[Ru]||null}function vf(t){const n=Lu(t);return n?Array.isArray(n)?n:n.lView:null}function tu(t,n){const s=t[1];for(let c=20;c<s.bindingStartIndex;c++)if(Pr(t[c])===n)return c;return-1}function jh(t){if(t.child)return t.child;if(t.next)return t.next;for(;t.parent&&!t.parent.next;)t=t.parent;return t.parent&&t.parent.next}function Vh(t,n){const s=t[1].components;if(s)for(let c=0;c<s.length;c++){const f=s[c];if(Co(f,t)[8]===n)return f}else if(Co(20,t)[8]===n)return 20;return-1}function qd(t,n,s){const c=n[1].data[t];let f=c.directiveStart;return 0==f?Tr:(!s&&2&c.flags&&f++,n.slice(f,c.directiveEnd))}const bf="ngDebugContext",Uh="ngOriginalError",Fu="ngErrorLogger";function Xd(t){return t[bf]}function sh(t){return t[Uh]}function $h(t,...n){t.error(...n)}class ru{constructor(){this._console=console}handleError(n){const s=this._findOriginalError(n),c=this._findContext(n),f=(t=n)&&t[Fu]||$h;var t;f(this._console,"ERROR",n),s&&f(this._console,"ORIGINAL ERROR",s),c&&f(this._console,"ERROR CONTEXT",c)}_findContext(n){return n?Xd(n)||this._findContext(sh(n)):null}_findOriginalError(n){let s=n&&sh(n);for(;s&&sh(s);)s=sh(s);return s||null}}const iu={name:"custom-elements"},xf={name:"no-errors-schema"},$a=/^>|^->|<!--|-->|--!>|<!-$/g,Cd=/(<|>)/;function Nu(t){return t.replace($a,n=>n.replace(Cd,"\u200b$1\u200b"))}function Gh(t){return`ng-reflect-${t=function(t){return t.replace(ou,(...n)=>"-"+n[1].toLowerCase())}(t.replace(/[$@]/g,"_"))}`}const ou=/([A-Z])/g;function x(t){try{return null!=t?t.toString().slice(0,30):t}catch(n){return"[ERROR] Exception while trying to serialize the value"}}const R=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function W(t){return t.ownerDocument.defaultView}function le(t){return t.ownerDocument}function Ze(t){return t.ownerDocument.body}function nn(t){return t instanceof Function?t():t}var $r=(()=>(($r=$r||{})[$r.Important=1]="Important",$r[$r.DashCase=2]="DashCase",$r))();let Ga;function Js(t,n){return Ga(t,n)}function io(t){const n=t[3];return Fn(n)?n[3]:n}function su(t){return function(t){let n=Yn(t)?t:vf(t);for(;n&&!(512&n[2]);)n=io(n);return n}(t)[8]}function Jo(t){return Wh(t[13])}function wf(t){return Wh(t[4])}function Wh(t){for(;null!==t&&!Fn(t);)t=t[4];return t}function Zh(t,n,s,c,f){if(null!=c){let b,A=!1;Fn(c)?b=c:Yn(c)&&(A=!0,c=c[0]);const F=Pr(c);0===t&&null!==s?null==f?Xh(n,s,F):Ts(n,s,F,f||null,!0):1===t&&null!==s?Ts(n,s,F,f||null,!0):2===t?Kh(n,F,A):3===t&&n.destroyNode(F),null!=b&&function(t,n,s,c,f){const b=s[7];b!==Pr(s)&&Zh(n,t,c,b,f);for(let F=10;F<s.length;F++){const V=s[F];Jd(V[1],V,t,n,c,b)}}(n,t,b,s,f)}}function Ef(t,n){return Vt(t)?t.createText(n):t.createTextNode(n)}function Cf(t,n,s){Vt(t)?t.setValue(n,s):n.textContent=s}function qh(t,n){return t.createComment(Nu(n))}function Td(t,n,s){return Vt(t)?t.createElement(n,s):null===s?t.createElement(n):t.createElementNS(s,n)}function ma(t,n){const s=t[9],c=s.indexOf(n),f=n[3];1024&n[2]&&(n[2]&=-1025,xl(f,-1)),s.splice(c,1)}function Tf(t,n){if(t.length<=10)return;const s=10+n,c=t[s];if(c){const f=c[17];null!==f&&f!==t&&ma(f,c),n>0&&(t[s-1][4]=c[4]);const b=za(t,10+n);!function(t,n){Jd(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(c[1],c);const A=b[19];null!==A&&A.detachView(b[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Bp(t,n){if(!(256&n[2])){const s=n[11];Vt(s)&&s.destroyNode&&Jd(t,n,s,3,null,null),function(t){let n=t[13];if(!n)return Sd(t[1],t);for(;n;){let s=null;if(Yn(n))s=n[13];else{const c=n[10];c&&(s=c)}if(!s){for(;n&&!n[4]&&n!==t;)Yn(n)&&Sd(n[1],n),n=n[3];null===n&&(n=t),Yn(n)&&Sd(n[1],n),s=n&&n[4]}n=s}}(n)}}function Sd(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let c=0;c<s.length;c+=2){const f=n[s[c]];if(!(f instanceof Cl)){const b=s[c+1];if(Array.isArray(b))for(let A=0;A<b.length;A+=2){const F=f[b[A]],V=b[A+1];cs(4,F,V);try{V.call(F)}finally{cs(5,F,V)}}else{cs(4,f,b);try{b.call(f)}finally{cs(5,f,b)}}}}}(t,n),function(t,n){const s=t.cleanup,c=n[7];let f=-1;if(null!==s)for(let b=0;b<s.length-1;b+=2)if("string"==typeof s[b]){const A=s[b+1],F="function"==typeof A?A(n):Pr(n[A]),V=c[f=s[b+2]],q=s[b+3];"boolean"==typeof q?F.removeEventListener(s[b],V,q):q>=0?c[f=q]():c[f=-q].unsubscribe(),b+=2}else{const A=c[f=s[b+1]];s[b].call(A)}if(null!==c){for(let b=f+1;b<c.length;b++)c[b]();n[7]=null}}(t,n),1===n[1].type&&Vt(n[11])&&n[11].destroy();const s=n[17];if(null!==s&&Fn(n[3])){s!==n[3]&&ma(s,n);const c=n[19];null!==c&&c.detachView(t)}}}function Qd(t,n,s){return Df(t,n.parent,s)}function Df(t,n,s){let c=n;for(;null!==c&&40&c.type;)c=(n=c).parent;if(null===c)return s[0];if(2&c.flags){const f=t.data[c.directiveStart].encapsulation;if(f===zt.None||f===zt.Emulated)return null}return hi(c,s)}function Ts(t,n,s,c,f){Vt(t)?t.insertBefore(n,s,c,f):n.insertBefore(s,c,f)}function Xh(t,n,s){Vt(t)?t.appendChild(n,s):n.appendChild(s)}function Wa(t,n,s,c,f){null!==c?Ts(t,n,s,c,f):Xh(t,n,s)}function ul(t,n){return Vt(t)?t.parentNode(n):n.parentNode}function Vp(t,n,s){return cp(t,n,s)}function lp(t,n,s){return 40&t.type?hi(t,s):null}let Id,cp=lp;function up(t,n){cp=t,Id=n}function lh(t,n,s,c){const f=Qd(t,c,n),b=n[11],F=Vp(c.parent||n[6],c,n);if(null!=f)if(Array.isArray(s))for(let V=0;V<s.length;V++)Wa(b,f,s[V],F,!1);else Wa(b,f,s,F,!1);void 0!==Id&&Id(b,c,n,s,f)}function Mc(t,n){if(null!==n){const s=n.type;if(3&s)return hi(n,t);if(4&s)return Fs(-1,t[n.index]);if(8&s){const c=n.child;if(null!==c)return Mc(t,c);{const f=t[n.index];return Fn(f)?Fs(-1,f):Pr(f)}}if(32&s)return Js(n,t)()||Pr(t[n.index]);{const c=fs(t,n);return null!==c?Array.isArray(c)?c[0]:Mc(io(t[16]),c):Mc(t,n.next)}}return null}function fs(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Fs(t,n){const s=10+t+1;if(s<n.length){const c=n[s],f=c[1].firstChild;if(null!==f)return Mc(c,f)}return n[7]}function Kh(t,n,s){const c=ul(t,n);c&&function(t,n,s,c){Vt(t)?t.removeChild(n,s,c):n.removeChild(s)}(t,c,n,s)}function hp(t,n,s,c,f,b,A){for(;null!=s;){const F=c[s.index],V=s.type;if(A&&0===n&&(F&&rs(Pr(F),c),s.flags|=4),64!=(64&s.flags))if(8&V)hp(t,n,s.child,c,f,b,!1),Zh(n,t,f,F,b);else if(32&V){const q=Js(s,c);let oe;for(;oe=q();)Zh(n,t,f,oe,b);Zh(n,t,f,F,b)}else 16&V?Sf(t,n,c,s,f,b):Zh(n,t,f,F,b);s=A?s.projectionNext:s.next}}function Jd(t,n,s,c,f,b){hp(s,c,t.firstChild,n,f,b,!1)}function Sf(t,n,s,c,f,b){const A=s[16],V=A[6].projection[c.projection];if(Array.isArray(V))for(let q=0;q<V.length;q++)Zh(n,t,f,V[q],b);else hp(t,n,V,A[3],f,b,!0)}function Md(t,n,s){Vt(t)?t.setAttribute(n,"style",s):n.style.cssText=s}function M(t,n,s){Vt(t)?""===s?t.removeAttribute(n,"class"):t.setAttribute(n,"class",s):n.className=s}function D(t,n,s){let c=t.length;for(;;){const f=t.indexOf(n,s);if(-1===f)return f;if(0===f||t.charCodeAt(f-1)<=32){const b=n.length;if(f+b===c||t.charCodeAt(f+b)<=32)return f}s=f+1}}const N="ng-template";function C(t,n,s){let c=0;for(;c<t.length;){let f=t[c++];if(s&&"class"===f){if(f=t[c],-1!==D(f.toLowerCase(),n,0))return!0}else if(1===f){for(;c<t.length&&"string"==typeof(f=t[c++]);)if(f.toLowerCase()===n)return!0;return!1}}return!1}function S(t){return 4===t.type&&t.value!==N}function H(t,n,s){return n===(4!==t.type||s?t.value:N)}function K(t,n,s){let c=4;const f=t.attrs||[],b=function(t){for(let n=0;n<t.length;n++)if(_s(t[n]))return n;return t.length}(f);let A=!1;for(let F=0;F<n.length;F++){const V=n[F];if("number"!=typeof V){if(!A)if(4&c){if(c=2|1&c,""!==V&&!H(t,V,s)||""===V&&1===n.length){if(Ee(c))return!1;A=!0}}else{const q=8&c?V:n[++F];if(8&c&&null!==t.attrs){if(!C(t.attrs,q,s)){if(Ee(c))return!1;A=!0}continue}const Pe=Te(8&c?"class":V,f,S(t),s);if(-1===Pe){if(Ee(c))return!1;A=!0;continue}if(""!==q){let je;je=Pe>b?"":f[Pe+1].toLowerCase();const ct=8&c?je:null;if(ct&&-1!==D(ct,q,0)||2&c&&q!==je){if(Ee(c))return!1;A=!0}}}}else{if(!A&&!Ee(c)&&!Ee(V))return!1;if(A&&Ee(V))continue;A=!1,c=V|1&c}}return Ee(c)||A}function Ee(t){return 0==(1&t)}function Te(t,n,s,c){if(null===n)return-1;let f=0;if(c||!s){let b=!1;for(;f<n.length;){const A=n[f];if(A===t)return f;if(3===A||6===A)b=!0;else{if(1===A||2===A){let F=n[++f];for(;"string"==typeof F;)F=n[++f];continue}if(4===A)break;if(0===A){f+=4;continue}}f+=b?1:2}return-1}return function(t,n){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const c=t[s];if("number"==typeof c)return-1;if(c===n)return s;s++}return-1}(n,t)}function He(t,n,s=!1){for(let c=0;c<n.length;c++)if(K(t,n[c],s))return!0;return!1}function dn(t,n){e:for(let s=0;s<n.length;s++){const c=n[s];if(t.length===c.length){for(let f=0;f<t.length;f++)if(t[f]!==c[f])continue e;return!0}}return!1}function Gn(t,n){return t?":not("+n.trim()+")":n}function en(t){let n=t[0],s=1,c=2,f="",b=!1;for(;s<t.length;){let A=t[s];if("string"==typeof A)if(2&c){const F=t[++s];f+="["+A+(F.length>0?'="'+F+'"':"")+"]"}else 8&c?f+="."+A:4&c&&(f+=" "+A);else""!==f&&!Ee(A)&&(n+=Gn(b,f),f=""),c=A,b=b||!Ee(c);s++}return""!==f&&(n+=Gn(b,f)),n}const Dn={};function wi(t){Kr(Si(),En(),Uo()+t,Ma())}function Kr(t,n,s,c){if(!c)if(3==(3&n[2])){const b=t.preOrderCheckHooks;null!==b&&jc(n,b,s)}else{const b=t.preOrderHooks;null!==b&&ks(n,b,0,s)}Oa(s)}function Or(t,n){return t<<17|n<<2}function Yr(t){return t>>17&32767}function Ac(t){return 2|t}function Bo(t){return(131068&t)>>2}function Ei(t,n){return-131069&t|n<<2}function Rl(t){return 1|t}const jm=(()=>Promise.resolve(null))();function Vm(t,n){const s=t.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const f=s[c],b=s[c+1];if(-1!==b){const A=t.data[b];bu(f),A.contentQueries(2,n[b],b)}}}function mp(t,n,s,c,f,b,A,F,V,q){const oe=n.blueprint.slice();return oe[0]=f,oe[2]=140|c,bl(oe),oe[3]=oe[15]=t,oe[8]=s,oe[10]=A||t&&t[10],oe[11]=F||t&&t[11],oe[12]=V||t&&t[12]||null,oe[9]=q||t&&t[9]||null,oe[6]=b,oe[16]=2==n.type?t[16]:oe,oe}function Mf(t,n,s,c,f){let b=t.data[n];if(null===b)b=Um(t,n,s,c,f),zr.lFrame.inI18n&&(b.flags|=64);else if(64&b.type){b.type=s,b.value=c,b.attrs=f;const A=wl();b.injectorIndex=null===A?-1:A.injectorIndex}return ra(b,!0),b}function Um(t,n,s,c,f){const b=Ch(),A=dc(),V=t.data[n]=function(t,n,s,c,f,b){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,A?b:b&&b.parent,s,n,c,f);return null===t.firstChild&&(t.firstChild=V),null!==b&&(A?null==b.child&&null!==V.parent&&(b.child=V):null===b.next&&(b.next=V)),V}function Af(t,n,s,c){if(0===s)return-1;const f=n.length;for(let b=0;b<s;b++)n.push(c),t.blueprint.push(c),t.data.push(null);return f}function Pf(t,n,s){El(n);try{const c=t.viewQuery;null!==c&&Kp(1,c,s);const f=t.template;null!==f&&Bu(t,n,f,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Vm(t,n),t.staticViewQueries&&Kp(2,t.viewQuery,s);const b=t.components;null!==b&&function(t,n){for(let s=0;s<n.length;s++)T_(t,n[s])}(n,b)}catch(c){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),c}finally{n[2]&=-5,ql()}}function Of(t,n,s,c){const f=n[2];if(256==(256&f))return;El(n);const b=Ma();try{bl(n),vu(t.bindingStartIndex),null!==s&&Bu(t,n,s,2,c);const A=3==(3&f);if(!b)if(A){const q=t.preOrderCheckHooks;null!==q&&jc(n,q,null)}else{const q=t.preOrderHooks;null!==q&&ks(n,q,0,null),_c(n,0)}if(function(t){for(let n=Jo(t);null!==n;n=wf(n)){if(!n[2])continue;const s=n[9];for(let c=0;c<s.length;c++){const f=s[c],b=f[3];0==(1024&f[2])&&xl(b,1),f[2]|=1024}}}(n),function(t){for(let n=Jo(t);null!==n;n=wf(n))for(let s=10;s<n.length;s++){const c=n[s],f=c[1];Da(c)&&Of(f,c,f.template,c[8])}}(n),null!==t.contentQueries&&Vm(t,n),!b)if(A){const q=t.contentCheckHooks;null!==q&&jc(n,q)}else{const q=t.contentHooks;null!==q&&ks(n,q,1),_c(n,1)}!function(t,n){const s=t.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)Oa(~f);else{const b=f,A=s[++c],F=s[++c];fd(A,b),F(2,n[b])}}}finally{Oa(-1)}}(t,n);const F=t.components;null!==F&&function(t,n){for(let s=0;s<n.length;s++)C_(t,n[s])}(n,F);const V=t.viewQuery;if(null!==V&&Kp(2,V,c),!b)if(A){const q=t.viewCheckHooks;null!==q&&jc(n,q)}else{const q=t.viewHooks;null!==q&&ks(n,q,2),_c(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),b||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,xl(n[3],-1))}finally{ql()}}function _a(t,n,s,c){const f=n[10],b=!Ma(),A=tl(n);try{b&&!A&&f.begin&&f.begin(),A&&Pf(t,n,c),Of(t,n,s,c)}finally{b&&!A&&f.end&&f.end()}}function Bu(t,n,s,c,f){const b=Uo(),A=2&c;try{Oa(-1),A&&n.length>20&&Kr(t,n,20,Ma()),cs(A?2:0,f),s(c,f)}finally{Oa(b),cs(A?3:1,f)}}function Wp(t,n,s){if(Ar(n)){const f=n.directiveEnd;for(let b=n.directiveStart;b<f;b++){const A=t.data[b];A.contentQueries&&A.contentQueries(1,s[b],b)}}}function kf(t,n,s){!yu()||(function(t,n,s,c){const f=s.directiveStart,b=s.directiveEnd;t.firstCreatePass||Zs(s,n),rs(c,n);const A=s.initialInputs;for(let F=f;F<b;F++){const V=t.data[F],q=Wr(V);q&&qm(n,s,V);const oe=Ro(n,t,F,s);rs(oe,n),null!==A&&vp(0,F-f,oe,V,0,A),q&&(Co(s.index,n)[8]=oe)}}(t,n,s,hi(s,n)),128==(128&s.flags)&&function(t,n,s){const c=s.directiveStart,f=s.directiveEnd,A=s.index,F=zr.lFrame.currentDirectiveIndex;try{Oa(A);for(let V=c;V<f;V++){const q=t.data[V],oe=n[V];$u(V),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&yp(q,oe)}}finally{Oa(-1),$u(F)}}(t,n,s))}function kd(t,n,s=hi){const c=n.localNames;if(null!==c){let f=n.index+1;for(let b=0;b<c.length;b+=2){const A=c[b+1],F=-1===A?s(n,t):t[A];t[f++]=F}}}function g_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Zp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Zp(t,n,s,c,f,b,A,F,V,q){const oe=20+c,Pe=oe+f,je=function(t,n){const s=[];for(let c=0;c<n;c++)s.push(c<t?null:Dn);return s}(oe,Pe),ct="function"==typeof q?q():q;return je[1]={type:t,blueprint:je,template:s,queries:null,viewQuery:F,declTNode:n,data:je.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof A?A():A,firstChild:null,schemas:V,consts:ct,incompleteFirstPass:!1}}function Hm(t,n,s){if(Vt(t))return t.selectRootElement(n,s===zt.ShadowDom);let c="string"==typeof n?t.querySelector(n):n;return c.textContent="",c}function $m(t,n,s,c){const f=A_(n);null===s?f.push(c):(f.push(s),t.firstCreatePass&&Ym(t).push(c,f.length-1))}function ho(t,n,s){for(let c in t)if(t.hasOwnProperty(c)){const f=t[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(n,f):s[c]=[n,f]}return s}function ac(t,n,s,c,f,b,A,F){const V=hi(n,s);let oe,q=n.inputs;!F&&null!=q&&(oe=q[c])?(Jm(t,s,oe,c,f),oi(n)&&function(t,n){const s=Co(n,t);16&s[2]||(s[2]|=64)}(s,n.index)):3&n.type&&(c=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(c),f=null!=A?A(f,n.value||"",c):f,Vt(b)?b.setProperty(V,c,f):sa(c)||(V.setProperty?V.setProperty(c,f):V[c]=f))}function Wm(t,n,s,c){let f=!1;if(yu()){const b=function(t,n,s){const c=t.directiveRegistry;let f=null;if(c)for(let b=0;b<c.length;b++){const A=c[b];He(s,A.selectors,!1)&&(f||(f=[]),bc(Zs(s,n),t,A.type),Wr(A)?(Zm(t,s),f.unshift(A)):f.push(A))}return f}(t,n,s),A=null===c?null:{"":-1};if(null!==b){f=!0,x_(s,t.data.length,b.length);for(let oe=0;oe<b.length;oe++){const Pe=b[oe];Pe.providersResolver&&Pe.providersResolver(Pe)}let F=!1,V=!1,q=Af(t,n,b.length,null);for(let oe=0;oe<b.length;oe++){const Pe=b[oe];s.mergedAttrs=Tl(s.mergedAttrs,Pe.hostAttrs),qp(t,s,n,q,Pe),Ky(q,Pe,A),null!==Pe.contentQueries&&(s.flags|=8),(null!==Pe.hostBindings||null!==Pe.hostAttrs||0!==Pe.hostVars)&&(s.flags|=128);const je=Pe.type.prototype;!F&&(je.ngOnChanges||je.ngOnInit||je.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),F=!0),!V&&(je.ngOnChanges||je.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),V=!0),q++}!function(t,n){const c=n.directiveEnd,f=t.data,b=n.attrs,A=[];let F=null,V=null;for(let q=n.directiveStart;q<c;q++){const oe=f[q],Pe=oe.inputs,je=null===b||S(n)?null:Ff(Pe,b);A.push(je),F=ho(Pe,q,F),V=ho(oe.outputs,q,V)}null!==F&&(F.hasOwnProperty("class")&&(n.flags|=16),F.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=A,n.inputs=F,n.outputs=V}(t,s)}A&&function(t,n,s){if(n){const c=t.localNames=[];for(let f=0;f<n.length;f+=2){const b=s[n[f+1]];if(null==b)throw new yt("301",`Export of name '${n[f+1]}' not found!`);c.push(n[f],b)}}}(s,c,A)}return s.mergedAttrs=Tl(s.mergedAttrs,s.attrs),f}function b_(t,n,s,c,f,b){const A=b.hostBindings;if(A){let F=t.hostBindingOpCodes;null===F&&(F=t.hostBindingOpCodes=[]);const V=~n.index;(function(t){let n=t.length;for(;n>0;){const s=t[--n];if("number"==typeof s&&s<0)return s}return 0})(F)!=V&&F.push(V),F.push(c,f,A)}}function yp(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Zm(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function Ky(t,n,s){if(s){if(n.exportAs)for(let c=0;c<n.exportAs.length;c++)s[n.exportAs[c]]=t;Wr(n)&&(s[""]=t)}}function x_(t,n,s){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+s,t.providerIndexes=n}function qp(t,n,s,c,f){t.data[c]=f;const b=f.factory||(f.factory=Gs(f.type)),A=new Cl(b,Wr(f),null);t.blueprint[c]=A,s[c]=A,b_(t,n,0,c,Af(t,s,f.hostVars,Dn),f)}function qm(t,n,s){const c=hi(n,t),f=g_(s),b=t[10],A=Nf(t,mp(t,f,null,s.onPush?64:16,c,n,b,b.createRenderer(c,s),null,null));t[n.index]=A}function zu(t,n,s,c,f,b){const A=hi(t,n);Fl(n[11],A,b,t.value,s,c,f)}function Fl(t,n,s,c,f,b,A){if(null==b)Vt(t)?t.removeAttribute(n,f,s):n.removeAttribute(f);else{const F=null==A?Tt(b):A(b,c||"",f);Vt(t)?t.setAttribute(n,f,F,s):s?n.setAttributeNS(s,f,F):n.setAttribute(f,F)}}function vp(t,n,s,c,f,b){const A=b[n];if(null!==A){const F=c.setInput;for(let V=0;V<A.length;){const q=A[V++],oe=A[V++],Pe=A[V++];null!==F?c.setInput(s,Pe,q,oe):s[oe]=Pe}}}function Ff(t,n){let s=null,c=0;for(;c<n.length;){const f=n[c];if(0!==f)if(5!==f){if("number"==typeof f)break;t.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,t[f],n[c+1])),c+=2}else c+=2;else c+=4}return s}function bp(t,n,s,c){return new Array(t,!0,!1,n,null,0,c,s,null,null)}function C_(t,n){const s=Co(n,t);if(Da(s)){const c=s[1];80&s[2]?Of(c,s,c.template,s[8]):s[5]>0&&Xm(s)}}function Xm(t){for(let c=Jo(t);null!==c;c=wf(c))for(let f=10;f<c.length;f++){const b=c[f];if(1024&b[2]){const A=b[1];Of(A,b,A.template,b[8])}else b[5]>0&&Xm(b)}const s=t[1].components;if(null!==s)for(let c=0;c<s.length;c++){const f=Co(s[c],t);Da(f)&&f[5]>0&&Xm(f)}}function T_(t,n){const s=Co(n,t),c=s[1];(function(t,n){for(let s=n.length;s<t.blueprint.length;s++)n.push(t.blueprint[s])})(c,s),Pf(c,s,s[8])}function Nf(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function xp(t){for(;t;){t[2]|=64;const n=io(t);if(Vl(t)&&!n)return t;t=n}return null}function Km(t){for(let n=0;n<t.components.length;n++){const s=t.components[n],c=vf(s),f=c[1];_a(f,c,f.template,s)}}function Xp(t,n,s){const c=n[10];c.begin&&c.begin();try{Of(t,n,t.template,s)}catch(f){throw Bf(n,f),f}finally{c.end&&c.end()}}function hh(t){Km(t[8])}function Kp(t,n,s){bu(0),n(t,s)}const Jy=jm;function A_(t){return t[7]||(t[7]=[])}function Ym(t){return t.cleanup||(t.cleanup=[])}function Qm(t,n,s){return(null===t||Wr(t))&&(s=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(s[n.index])),s[11]}function Bf(t,n){const s=t[9],c=s?s.get(ru,null):null;c&&c.handleError(n)}function Jm(t,n,s,c,f){for(let b=0;b<s.length;){const A=s[b++],F=s[b++],V=n[A],q=t.data[A];null!==q.setInput?q.setInput(V,f,c,F):V[F]=f}}function dh(t,n,s){const c=no(n,t);Cf(t[11],c,s)}function zf(t,n,s){let c=s?t.styles:null,f=s?t.classes:null,b=0;if(null!==n)for(let A=0;A<n.length;A++){const F=n[A];"number"==typeof F?b=F:1==b?f=xe(f,F):2==b&&(c=xe(c,F+": "+n[++A]+";"))}s?t.styles=c:t.stylesWithoutHost=c,s?t.classes=f:t.classesWithoutHost=f}function tf(t){const n=zh(t);Xp(n[1],n,t)}function eg(t){!function(t,n){if(0===t.flags&&t.clean==jm){let c;t.flags|=1,t.clean=new Promise(f=>c=f),t.scheduler(()=>{if(1&t.flags&&(t.flags&=-2,Km(t)),2&t.flags){t.flags&=-3;const f=t.playerHandler;f&&f.flushPlayers()}t.clean=jm,c(null)})}}(xp(zh(t))[8])}const ed=new Ki("INJECTOR",-1);class jf{get(n,s=De){if(s===De){const c=new Error(`NullInjectorError: No provider for ${be(n)}!`);throw c.name="NullInjectorError",c}return s}}const Rd=new Ki("Set Injector scope."),wp={},ev={};let ng;function P_(){return void 0===ng&&(ng=new jf),ng}function O_(t,n=null,s=null,c){const f=nf(t,n,s,c);return f._resolveInjectorDefTypes(),f}function nf(t,n=null,s=null,c){return new rg(t,s,n||P_(),c)}class rg{constructor(n,s,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const b=[];s&&Xs(s,F=>this.processProvider(F,n,s)),Xs([n],F=>this.processInjectorType(F,[],b)),this.records.set(ed,Vf(void 0,this));const A=this.records.get(Rd);this.scope=null!=A?A.value:null,this.source=f||("object"==typeof n?null:be(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,s=De,c=nr.Default){this.assertNotDestroyed();const f=gt(this),b=Er(void 0);try{if(!(c&nr.SkipSelf)){let F=this.records.get(n);if(void 0===F){const V=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Ki)&&gr(n);F=V&&this.injectableDefInScope(V)?Vf(ig(n),wp):null,this.records.set(n,F)}if(null!=F)return this.hydrate(n,F)}return(c&nr.Self?P_():this.parent).get(n,s=c&nr.Optional&&s===De?null:s)}catch(A){if("NullInjectorError"===A.name){if((A[Ce]=A[Ce]||[]).unshift(be(n)),f)throw A;return _n(A,n,"R3InjectorError",this.source)}throw A}finally{Er(b),gt(f)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((c,f)=>n.push(be(f))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,s,c){if(!(n=Se(n)))return!1;let f=_o(n);const b=null==f&&n.ngModule||void 0,A=void 0===b?n:b,F=-1!==c.indexOf(A);if(void 0!==b&&(f=_o(b)),null==f)return!1;if(null!=f.imports&&!F){let oe;c.push(A);try{Xs(f.imports,Pe=>{this.processInjectorType(Pe,s,c)&&(void 0===oe&&(oe=[]),oe.push(Pe))})}finally{}if(void 0!==oe)for(let Pe=0;Pe<oe.length;Pe++){const{ngModule:je,providers:ct}=oe[Pe];Xs(ct,Dt=>this.processProvider(Dt,je,ct||Tr))}}this.injectorDefTypes.add(A);const V=Gs(A)||(()=>new A);this.records.set(A,Vf(V,wp));const q=f.providers;if(null!=q&&!F){const oe=n;Xs(q,Pe=>this.processProvider(Pe,oe,q))}return void 0!==b&&void 0!==n.providers}processProvider(n,s,c){let f=nd(n=Se(n))?n:Se(n&&n.provide);const b=(t=n,td(t)?Vf(void 0,t.useValue):Vf(Yp(t),wp));var t;if(nd(n)||!0!==n.multi)this.records.get(f);else{let A=this.records.get(f);A||(A=Vf(void 0,wp,!0),A.factory=()=>rn(A.multi),this.records.set(f,A)),f=n,A.multi.push(n)}this.records.set(f,b)}hydrate(n,s){return s.value===wp&&(s.value=ev,s.value=s.factory()),"object"==typeof s.value&&s.value&&null!==(t=s.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(s.value),s.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const s=Se(n.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function ig(t){const n=gr(t),s=null!==n?n.factory:Gs(t);if(null!==s)return s;if(t instanceof Ki)throw new Error(`Token ${be(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const c=ys(n,"?");throw new Error(`Can't resolve all parameters for ${be(t)}: (${c.join(", ")}).`)}const s=function(t){const n=t&&(t[fi]||t[ii]);if(n){const s=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),n}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Error("unreachable")}function Yp(t,n,s){let c;if(nd(t)){const f=Se(t);return Gs(f)||ig(f)}if(td(t))c=()=>Se(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))c=()=>t.useFactory(...rn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))c=()=>ln(Se(t.useExisting));else{const f=Se(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Gs(f)||ig(f);c=()=>new f(...rn(t.deps))}return c}function Vf(t,n,s=!1){return{factory:t,value:n,multi:s?[]:void 0}}function td(t){return null!==t&&"object"==typeof t&&st in t}function nd(t){return"function"==typeof t}function Uf(t,n,s){return O_({name:s},n,t,s)}const fh=Uf;let Mo=(()=>{class t{static create(s,c){return Array.isArray(s)?fh(s,c,""):fh(s.providers,s.parent,s.name||"")}}return t.THROW_IF_NOT_FOUND=De,t.NULL=new jf,t.\u0275prov=Zn({token:t,providedIn:"any",factory:()=>ln(ed)}),t.__NG_ELEMENT_ID__=-1,t})();function rf(t){af(t);const n=Ko(t);return null===n?null:(void 0===n.component&&(n.component=function(t,n){const s=n[1].data[t];return 2&s.flags?n[s.directiveStart]:null}(n.nodeIndex,n.lView)),n.component)}function Cp(t){af(t);const n=Ko(t);return null===n?null:n.lView[8]}function hg(t){const n=Ko(t);if(null===n)return null;let c,s=n.lView;for(;2===s[1].type&&(c=io(s));)s=c;return 512&s[2]?null:s[8]}function $f(t){return[...su(t).components]}function Jp(t){const n=Ko(t);return null===n?Mo.NULL:new wc(n.lView[1].data[n.nodeIndex],n.lView)}function Gf(t){if(t instanceof Text)return[];const n=Ko(t);if(null===n)return[];const s=n.lView,c=s[1],f=n.nodeIndex;return(null==c?void 0:c.data[f])?(void 0===n.directives&&(n.directives=qd(f,s,!1)),null===n.directives?[]:[...n.directives]):[]}function z_(t){const{constructor:n}=t;if(!n)throw new Error("Unable to find the instance constructor");const s=Xn(n);if(s)return{inputs:s.inputs,outputs:s.outputs,encapsulation:s.encapsulation,changeDetection:s.onPush?Pt.OnPush:Pt.Default};const c=mr(n);return c?{inputs:c.inputs,outputs:c.outputs}:null}function dg(t){return Ko(t).native}function fg(t){af(t);const n=Ko(t);if(null===n)return[];const s=n.lView,f=s[7],b=s[1].cleanup,A=[];if(b&&f)for(let F=0;F<b.length;){const V=b[F++],q=b[F++];if("string"==typeof V){const oe=V,Pe=Pr(s[q]),je=f[b[F++]],ct=b[F++],Dt="boolean"==typeof ct||ct>=0?"dom":"output",tn="boolean"==typeof ct&&ct;t==Pe&&A.push({element:t,name:oe,callback:je,useCapture:tn,type:Dt})}}return A.sort(of),A}function of(t,n){return t.name==n.name?0:t.name<n.name?-1:1}function ov(t){return void 0!==t.type&&void 0!==t.template&&void 0!==t.declaredInputs}function af(t){if("undefined"!=typeof Element&&!(t instanceof Element))throw new Error("Expecting instance of DOM Element")}function Tp(t){eg(t),$f(t).forEach(n=>tf(n))}let Zf=!1;function em(){Zf||(Zf=!0,cu("\u0275setProfiler",Hl),cu("getDirectiveMetadata",z_),cu("getComponent",rf),cu("getContext",Cp),cu("getListeners",fg),cu("getOwningComponent",hg),cu("getHostElement",dg),cu("getInjector",Jp),cu("getRootComponents",$f),cu("getDirectives",Gf),cu("applyChanges",Tp))}function cu(t,n){if("undefined"==typeof COMPILED||!COMPILED){const s=fn;if(s){let c=s.ng;c||(c=s.ng={}),c[t]=n}}}function tm(t,n={}){const s=n.rendererFactory||br,c=n.sanitizer||null,f=Xn(t);f.type!=t&&(f.type=t);const b=f.selectors[0][0],F=Hm(s.createRenderer(null,null),n.host||b,f.encapsulation),V=f.onPush?576:528,q=mg(n.scheduler,n.playerHandler),oe=s.createRenderer(F,f),Pe=Zp(0,null,null,1,0,null,null,null,null,null),je=mp(null,Pe,q,V,null,null,s,oe,null,n.injector||null);let ct;El(je);try{s.begin&&s.begin(),ct=pg(V_(F,f,je,s,oe,c),f,je,q,n.hostFeatures||null),Pf(Pe,je,null),Of(Pe,je,null,null)}finally{ql(),s.end&&s.end()}return ct}function V_(t,n,s,c,f,b){const A=s[1];s[20]=t;const V=Mf(A,20,2,"#host",null),q=V.mergedAttrs=n.hostAttrs;null!==q&&(zf(V,q,!0),null!==t&&(Oo(f,t,q),null!==V.classes&&M(f,t,V.classes),null!==V.styles&&Md(f,t,V.styles)));const oe=c.createRenderer(t,n),Pe=mp(s,g_(n),null,n.onPush?64:16,s[20],V,c,oe,b||null,null);return A.firstCreatePass&&(bc(Zs(V,s),A,n.type),Zm(A,V),x_(V,s.length,1)),Nf(s,Pe),s[20]=Pe}function pg(t,n,s,c,f){const b=s[1],A=function(t,n,s){const c=Po();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),qp(t,c,n,Af(t,n,1,null),s));const f=Ro(n,t,c.directiveStart,c);rs(f,n);const b=hi(c,n);return b&&rs(b,n),f}(b,s,n);if(c.components.push(A),t[8]=A,f&&f.forEach(V=>V(A,n)),n.contentQueries){const V=Po();n.contentQueries(1,A,V.directiveStart)}const F=Po();return!b.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Oa(F.index),b_(s[1],F,0,F.directiveStart,F.directiveEnd,n),yp(n,A)),A}function mg(t,n){return{components:[],scheduler:t||R,clean:Jy,playerHandler:n||null,flags:0}}function U_(t,n){ka(vf(t)[1],Po())}function H_(t){return su(t).clean}function $_(t){return Object.getPrototypeOf(t.prototype).constructor}function nm(t){let n=$_(t.type),s=!0;const c=[t];for(;n;){let f;if(Wr(t))f=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");f=n.\u0275dir}if(f){if(s){c.push(f);const A=t;A.inputs=rm(t.inputs),A.declaredInputs=rm(t.declaredInputs),A.outputs=rm(t.outputs);const F=f.hostBindings;F&&im(t,F);const V=f.viewQuery,q=f.contentQueries;if(V&&av(t,V),q&&lv(t,q),fe(t.inputs,f.inputs),fe(t.declaredInputs,f.declaredInputs),fe(t.outputs,f.outputs),Wr(f)&&f.data.animation){const oe=t.data;oe.animation=(oe.animation||[]).concat(f.data.animation)}}const b=f.features;if(b)for(let A=0;A<b.length;A++){const F=b[A];F&&F.ngInherit&&F(t),F===nm&&(s=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,s=null;for(let c=t.length-1;c>=0;c--){const f=t[c];f.hostVars=n+=f.hostVars,f.hostAttrs=Tl(f.hostAttrs,s=Tl(s,f.hostAttrs))}}(c)}function rm(t){return t===ao?{}:t===Tr?[]:t}function av(t,n){const s=t.viewQuery;t.viewQuery=s?(c,f)=>{n(c,f),s(c,f)}:n}function lv(t,n){const s=t.contentQueries;t.contentQueries=s?(c,f,b)=>{n(c,f,b),s(c,f,b)}:n}function im(t,n){const s=t.hostBindings;t.hostBindings=s?(c,f)=>{n(c,f),s(c,f)}:n}const om=["providersResolver"],sm=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function G_(t){let s,n=$_(t.type);s=Wr(t)?n.\u0275cmp:n.\u0275dir;const c=t;for(const f of om)c[f]=s[f];if(Wr(s))for(const f of sm)c[f]=s[f]}let qf=null;function Nd(){if(!qf){const t=fn.Symbol;if(t&&t.iterator)qf=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<n.length;++s){const c=n[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(qf=c)}}}return qf}function gh(t,n){const s=lf(t),c=lf(n);return s&&c?function(t,n,s){const c=t[Nd()](),f=n[Nd()]();for(;;){const b=c.next(),A=f.next();if(b.done&&A.done)return!0;if(b.done||A.done||!s(b.value,A.value))return!1}}(t,n,gh):!(s||!t||"object"!=typeof t&&"function"!=typeof t||c||!n||"object"!=typeof n&&"function"!=typeof n)||Object.is(t,n)}class uu{constructor(n){this.wrapped=n}static wrap(n){return new uu(n)}static unwrap(n){return uu.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof uu}}function lf(t){return!!gg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Nd()in t)}function gg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _h(t,n,s){return t[n]=s}function Sp(t,n){return t[n]}function hl(t,n,s){return!Object.is(t[n],s)&&(t[n]=s,!0)}function rd(t,n,s,c){const f=hl(t,n,s);return hl(t,n+1,c)||f}function lm(t,n,s,c,f){const b=rd(t,n,s,c);return hl(t,n+2,f)||b}function dl(t,n,s,c,f,b){const A=rd(t,n,s,c);return rd(t,n+2,f,b)||A}function Ip(t,n,s,c){const f=En();return hl(f,Os(),n)&&(Si(),zu(yo(),f,t,n,s,c)),Ip}function Xf(t,n){let s=!1,c=rl();for(let b=1;b<n.length;b+=2)s=hl(t,c++,n[b])||s;if(vu(c),!s)return Dn;let f=n[0];for(let b=1;b<n.length;b+=2)f+=Tt(n[b])+n[b+1];return f}function Kf(t,n,s,c){return hl(t,Os(),s)?n+Tt(s)+c:Dn}function cf(t,n,s,c,f,b){const F=rd(t,rl(),s,f);return Aa(2),F?n+Tt(s)+c+Tt(f)+b:Dn}function Yf(t,n,s,c,f,b,A,F){const q=lm(t,rl(),s,f,A);return Aa(3),q?n+Tt(s)+c+Tt(f)+b+Tt(A)+F:Dn}function uf(t,n,s,c,f,b,A,F,V,q){const Pe=dl(t,rl(),s,f,A,V);return Aa(4),Pe?n+Tt(s)+c+Tt(f)+b+Tt(A)+F+Tt(V)+q:Dn}function Za(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=rl();let ct=dl(t,je,s,f,A,V);return ct=hl(t,je+4,oe)||ct,Aa(5),ct?n+Tt(s)+c+Tt(f)+b+Tt(A)+F+Tt(V)+q+Tt(oe)+Pe:Dn}function Nl(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct){const Dt=rl();let tn=dl(t,Dt,s,f,A,V);return tn=rd(t,Dt+4,oe,je)||tn,Aa(6),tn?n+Tt(s)+c+Tt(f)+b+Tt(A)+F+Tt(V)+q+Tt(oe)+Pe+Tt(je)+ct:Dn}function Oc(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn){const Ut=rl();let Hn=dl(t,Ut,s,f,A,V);return Hn=lm(t,Ut+4,oe,je,Dt)||Hn,Aa(7),Hn?n+Tt(s)+c+Tt(f)+b+Tt(A)+F+Tt(V)+q+Tt(oe)+Pe+Tt(je)+ct+Tt(Dt)+tn:Dn}function Bl(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn){const Cn=rl();let kr=dl(t,Cn,s,f,A,V);return kr=dl(t,Cn+4,oe,je,Dt,Ut)||kr,Aa(8),kr?n+Tt(s)+c+Tt(f)+b+Tt(A)+F+Tt(V)+q+Tt(oe)+Pe+Tt(je)+ct+Tt(Dt)+tn+Tt(Ut)+Hn:Dn}function yh(t,n,s,c,f,b){const A=En(),F=Kf(A,n,s,c);return F!==Dn&&zu(yo(),A,t,F,f,b),yh}function Qf(t,n,s,c,f,b,A,F){const V=En(),q=cf(V,n,s,c,f,b);return q!==Dn&&zu(yo(),V,t,q,A,F),Qf}function cm(t,n,s,c,f,b,A,F,V,q){const oe=En(),Pe=Yf(oe,n,s,c,f,b,A,F);return Pe!==Dn&&zu(yo(),oe,t,Pe,V,q),cm}function um(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=En(),ct=uf(je,n,s,c,f,b,A,F,V,q);return ct!==Dn&&zu(yo(),je,t,ct,oe,Pe),um}function hm(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct){const Dt=En(),tn=Za(Dt,n,s,c,f,b,A,F,V,q,oe,Pe);return tn!==Dn&&zu(yo(),Dt,t,tn,je,ct),hm}function Mp(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn){const Ut=En(),Hn=Nl(Ut,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct);return Hn!==Dn&&zu(yo(),Ut,t,Hn,Dt,tn),Mp}function _g(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn){const Cn=En(),kr=Oc(Cn,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn);return kr!==Dn&&zu(yo(),Cn,t,kr,Ut,Hn),_g}function dm(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn,Cn,kr){const ci=En(),to=Bl(ci,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn);return to!==Dn&&zu(yo(),ci,t,to,Cn,kr),dm}function fm(t,n,s,c){const f=En(),b=Xf(f,n);return b!==Dn&&zu(yo(),f,t,b,s,c),fm}function yg(t,n,s,c,f,b,A,F){const V=En(),q=Si(),oe=t+20,Pe=q.firstCreatePass?function(t,n,s,c,f,b,A,F,V){const q=n.consts,oe=Mf(n,t,4,A||null,ws(q,F));Wm(n,s,oe,ws(q,V)),ka(n,oe);const Pe=oe.tViews=Zp(2,oe,c,f,b,n.directiveRegistry,n.pipeRegistry,null,n.schemas,q);return null!==n.queries&&(n.queries.template(n,oe),Pe.queries=n.queries.embeddedTView(oe)),oe}(oe,q,V,n,s,c,f,b,A):q.data[oe];ra(Pe,!1);const je=V[11].createComment("");lh(q,V,je,Pe),rs(je,V),Nf(V,V[oe]=bp(je,V,je,Pe)),zi(Pe)&&kf(q,V,Pe),null!=A&&kd(V,Pe,F)}function vg(t,n,s,c){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),n[s]=c}function bg(t){return Hi(zr.lFrame.contextLView,20+t)}const xg={\u0275\u0275defineInjectable:Zn,\u0275\u0275defineInjector:Ur,\u0275\u0275inject:ln,\u0275\u0275invalidFactoryDep:At,resolveForwardRef:Se},pm=ie({provide:String,useValue:ie});function q_(t){return void 0!==t.useClass}function mm(t){return void 0!==t.useFactory}const K_=sl("Injectable",void 0,void 0,void 0,(t,n)=>Y_(t,n)),tp=function(t,n){let s=null,c=null;t.hasOwnProperty(fi)||Object.defineProperty(t,fi,{get:()=>(null===s&&(s=Do().compileInjectable(xg,`ng:///${t.name}/\u0275prov.js`,function(t,n){const s=n||{providedIn:null},c={name:t.name,type:t,typeArgumentCount:0,providedIn:s.providedIn};return(q_(s)||mm(s))&&void 0!==s.deps&&(c.deps=Yi(s.deps)),q_(s)?c.useClass=s.useClass:function(t){return pm in t}(s)?c.useValue=s.useValue:mm(s)?c.useFactory=s.useFactory:function(t){return void 0!==t.useExisting}(s)&&(c.useExisting=s.useExisting),c}(t,n))),s)}),t.hasOwnProperty(Re)||Object.defineProperty(t,Re,{get:()=>{if(null===c){const f=Do();c=f.compileFactory(xg,`ng:///${t.name}/\u0275fac.js`,{name:t.name,type:t,typeArgumentCount:0,deps:Xr(t),target:f.FactoryTarget.Injectable})}return c},configurable:!0})},Y_=tp;function Tg(t){return t.length>1?" ("+function(t){const n=[];for(let s=0;s<t.length;++s){if(n.indexOf(t[s])>-1)return n.push(t[s]),n;n.push(t[s])}return n}(t.slice().reverse()).map(c=>be(c.token)).join(" -> ")+")":""}function gm(t,n,s,c){const f=[n],b=s(f),A=c?function(t,n){const s=`${t} caused by: ${n instanceof Error?n.message:n}`,c=Error(s);return c[Uh]=n,c}(b,c):Error(b);return A.addKey=hv,A.keys=f,A.injectors=[t],A.constructResolvingMessage=s,A[Uh]=c,A}function hv(t,n){this.injectors.push(t),this.keys.push(n),this.message=this.constructResolvingMessage(this.keys)}function e(t,n){const s=[];for(let c=0,f=n.length;c<f;c++){const b=n[c];s.push(b&&0!=b.length?b.map(be).join(" "):"?")}return Error("Cannot resolve all parameters for '"+be(t)+"'("+s.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+be(t)+"' is decorated with Injectable.")}function a(t,n){return Error(`Cannot mix multi providers and regular providers, got: ${t} ${n}`)}class h{constructor(n,s){if(this.token=n,this.id=s,!n)throw new Error("Token must be defined!");this.displayName=be(this.token)}static get(n){return _.get(Se(n))}static get numberOfKeys(){return _.numberOfKeys}}class m{constructor(){this._allKeys=new Map}get(n){if(n instanceof h)return n;if(this._allKeys.has(n))return this._allKeys.get(n);const s=new h(n,h.numberOfKeys);return this._allKeys.set(n,s),s}get numberOfKeys(){return this._allKeys.size}}const _=new m;class w{constructor(n){this.reflectionCapabilities=n}updateCapabilities(n){this.reflectionCapabilities=n}factory(n){return this.reflectionCapabilities.factory(n)}parameters(n){return this.reflectionCapabilities.parameters(n)}annotations(n){return this.reflectionCapabilities.annotations(n)}propMetadata(n){return this.reflectionCapabilities.propMetadata(n)}hasLifecycleHook(n,s){return this.reflectionCapabilities.hasLifecycleHook(n,s)}getter(n){return this.reflectionCapabilities.getter(n)}setter(n){return this.reflectionCapabilities.setter(n)}method(n){return this.reflectionCapabilities.method(n)}importUri(n){return this.reflectionCapabilities.importUri(n)}resourceUri(n){return this.reflectionCapabilities.resourceUri(n)}resolveIdentifier(n,s,c,f){return this.reflectionCapabilities.resolveIdentifier(n,s,c,f)}resolveEnum(n,s){return this.reflectionCapabilities.resolveEnum(n,s)}}const P=new w(new ae);class k{constructor(n,s,c){this.key=n,this.optional=s,this.visibility=c}static fromKey(n){return new k(n,!1,null)}}const j=[];class ${constructor(n,s,c){this.key=n,this.resolvedFactories=s,this.multiProvider=c,this.resolvedFactory=this.resolvedFactories[0]}}class G{constructor(n,s){this.factory=n,this.dependencies=s}}function Y(t){let n,s;if(t.useClass){const c=Se(t.useClass);n=P.factory(c),s=$e(c)}else t.useExisting?(n=c=>c,s=[k.fromKey(h.get(t.useExisting))]):t.useFactory?(n=t.useFactory,s=function(t,n){if(n){const s=n.map(c=>[c]);return n.map(c=>Qe(t,c,s))}return $e(t)}(t.useFactory,t.deps)):(n=()=>t.useValue,s=j);return new G(n,s)}function re(t){return new $(h.get(t.provide),[Y(t)],t.multi||!1)}function pe(t){const c=function(t,n){for(let s=0;s<t.length;s++){const c=t[s],f=n.get(c.key.id);if(f){if(c.multiProvider!==f.multiProvider)throw a(f,c);if(c.multiProvider)for(let b=0;b<c.resolvedFactories.length;b++)f.resolvedFactories.push(c.resolvedFactories[b]);else n.set(c.key.id,c)}else{let b;b=c.multiProvider?new $(c.key,c.resolvedFactories.slice(),c.multiProvider):c,n.set(c.key.id,b)}}return n}(Ue(t,[]).map(re),new Map);return Array.from(c.values())}function Ue(t,n){return t.forEach(s=>{if(s instanceof la)n.push({provide:s,useClass:s});else if(s&&"object"==typeof s&&void 0!==s.provide)n.push(s);else{if(!Array.isArray(s))throw function(t){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${t}`)}(s);Ue(s,n)}}),n}function $e(t){const n=P.parameters(t);if(!n)return[];if(n.some(s=>null==s))throw e(t,n);return n.map(s=>Qe(t,s,n))}function Qe(t,n,s){let c=null,f=!1;if(!Array.isArray(n))return pt(n instanceof Rn?n.token:n,f,null);let b=null;for(let A=0;A<n.length;++A){const F=n[A];F instanceof la?c=F:F instanceof Rn?c=F.token:F instanceof Qn?f=!0:F instanceof ar||F instanceof dr?b=F:F instanceof Ki&&(c=F)}if(c=Se(c),null!=c)return pt(c,f,b);throw e(t,s)}function pt(t,n,s){return new k(h.get(t),n,s)}const nt={};class Gt{static resolve(n){return pe(n)}static resolveAndCreate(n,s){const c=Gt.resolve(n);return Gt.fromResolvedProviders(c,s)}static fromResolvedProviders(n,s){return new Ht(n,s)}}let Ht=(()=>{class t{constructor(s,c){this._constructionCounter=0,this._providers=s,this.parent=c||null;const f=s.length;this.keyIds=[],this.objs=[];for(let b=0;b<f;b++)this.keyIds[b]=s[b].key.id,this.objs[b]=nt}get(s,c=De){return this._getByKey(h.get(s),null,c)}resolveAndCreateChild(s){const c=Gt.resolve(s);return this.createChildFromResolved(c)}createChildFromResolved(s){const c=new t(s);return c.parent=this,c}resolveAndInstantiate(s){return this.instantiateResolved(Gt.resolve([s])[0])}instantiateResolved(s){return this._instantiateProvider(s)}getProviderAtIndex(s){if(s<0||s>=this._providers.length)throw function(t){return Error(`Index ${t} is out-of-bounds.`)}(s);return this._providers[s]}_new(s){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function(t,n){return gm(t,n,function(s){return`Cannot instantiate cyclic dependency!${Tg(s)}`})}(this,s.key);return this._instantiateProvider(s)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(s){if(s.multiProvider){const c=[];for(let f=0;f<s.resolvedFactories.length;++f)c[f]=this._instantiate(s,s.resolvedFactories[f]);return c}return this._instantiate(s,s.resolvedFactories[0])}_instantiate(s,c){const f=c.factory;let b,A;try{b=c.dependencies.map(F=>this._getByReflectiveDependency(F))}catch(F){throw F.addKey&&F.addKey(this,s.key),F}try{A=f(...b)}catch(F){throw function(t,n,s,c){return gm(t,c,function(f){const b=be(f[0].token);return`${n.message}: Error during instantiation of ${b}!${Tg(f)}.`},n)}(this,F,0,s.key)}return A}_getByReflectiveDependency(s){return this._getByKey(s.key,s.visibility,s.optional?null:De)}_getByKey(s,c,f){return s===t.INJECTOR_KEY?this:c instanceof ar?this._getByKeySelf(s,f):this._getByKeyDefault(s,f,c)}_getObjByKeyId(s){for(let c=0;c<this.keyIds.length;c++)if(this.keyIds[c]===s)return this.objs[c]===nt&&(this.objs[c]=this._new(this._providers[c])),this.objs[c];return nt}_throwOrNull(s,c){if(c!==De)return c;throw function(t,n){return gm(t,n,function(s){return`No provider for ${be(s[0].token)}!${Tg(s)}`})}(this,s)}_getByKeySelf(s,c){const f=this._getObjByKeyId(s.id);return f!==nt?f:this._throwOrNull(s,c)}_getByKeyDefault(s,c,f){let b;for(b=f instanceof dr?this.parent:this;b instanceof t;){const A=b,F=A._getObjByKeyId(s.id);if(F!==nt)return F;b=A.parent}return null!==b?b.get(s.token,c):this._throwOrNull(s,c)}get displayName(){return`ReflectiveInjector(providers: [${function(t,n){const s=[];for(let c=0;c<t._providers.length;++c)s[c]=n(t.getProviderAtIndex(c));return s}(this,c=>' "'+c.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return t.INJECTOR_KEY=h.get(Mo),t})();function Pn(t,n=nr.Default){const s=En();return null===s?ln(t,n):Mh(Po(),s,Se(t),n)}function Yt(){throw new Error("invalid")}function pn(t,n,s){const c=En();return hl(c,Os(),n)&&ac(Si(),yo(),c,t,n,c[11],s,!1),pn}function vn(t,n,s,c,f){const A=f?"class":"style";Jm(t,s,n.inputs[A],A,c)}function Mn(t,n,s,c){const f=En(),b=Si(),A=20+t,F=f[11],V=f[A]=Td(F,n,zr.lFrame.currentNamespace),q=b.firstCreatePass?function(t,n,s,c,f,b,A){const F=n.consts,q=Mf(n,t,2,f,ws(F,b));return Wm(n,s,q,ws(F,A)),null!==q.attrs&&zf(q,q.attrs,!1),null!==q.mergedAttrs&&zf(q,q.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,q),q}(A,b,f,0,n,s,c):b.data[A];ra(q,!0);const oe=q.mergedAttrs;null!==oe&&Oo(F,V,oe);const Pe=q.classes;null!==Pe&&M(F,V,Pe);const je=q.styles;null!==je&&Md(F,V,je),64!=(64&q.flags)&&lh(b,f,V,q),0===zr.lFrame.elementDepthCount&&rs(V,f),zr.lFrame.elementDepthCount++,zi(q)&&(kf(b,f,q),Wp(b,q,f)),null!==c&&kd(f,q)}function bn(){let t=Po();dc()?fc():(t=t.parent,ra(t,!1));const n=t;zr.lFrame.elementDepthCount--;const s=Si();s.firstCreatePass&&(ka(s,t),Ar(t)&&s.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&vn(s,n,En(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&vn(s,n,En(),n.stylesWithoutHost,!1)}function Wn(t,n,s,c){Mn(t,n,s,c),bn()}function yr(t,n,s){const c=En(),f=Si(),b=t+20,A=f.firstCreatePass?function(t,n,s,c,f){const b=n.consts,A=ws(b,c),F=Mf(n,t,8,"ng-container",A);return null!==A&&zf(F,A,!0),Wm(n,s,F,ws(b,f)),null!==n.queries&&n.queries.elementStart(n,F),F}(b,f,c,n,s):f.data[b];ra(A,!0);const F=c[b]=c[11].createComment("");lh(f,c,F,A),rs(F,c),zi(A)&&(kf(f,c,A),Wp(f,A,c)),null!=s&&kd(c,A)}function zn(){let t=Po();const n=Si();dc()?fc():(t=t.parent,ra(t,!1)),n.firstCreatePass&&(ka(n,t),Ar(t)&&n.queries.elementEnd(t))}function _i(t,n,s){yr(t,n,s),zn()}function Nr(){return En()}function Kn(t){return!!t&&"function"==typeof t.then}function fo(t){return!!t&&"function"==typeof t.subscribe}const so=fo;function xo(t,n,s,c){const f=En(),b=Si(),A=Po();return po(b,f,f[11],A,t,n,!!s,c),xo}function ti(t,n){const s=Po(),c=En(),f=Si();return po(f,c,Qm(Zl(f.data),s,c),s,t,n,!1),ti}function po(t,n,s,c,f,b,A,F){const V=zi(c),oe=t.firstCreatePass&&Ym(t),Pe=n[8],je=A_(n);let ct=!0;if(3&c.type||F){const Ut=hi(c,n),Hn=F?F(Ut):Ut,Cn=je.length,kr=F?ci=>F(Pr(ci[c.index])):c.index;if(Vt(s)){let ci=null;if(!F&&V&&(ci=function(t,n,s,c){const f=t.cleanup;if(null!=f)for(let b=0;b<f.length-1;b+=2){const A=f[b];if(A===s&&f[b+1]===c){const F=n[7],V=f[b+2];return F.length>V?F[V]:null}"string"==typeof A&&(b+=2)}return null}(t,n,f,c.index)),null!==ci)(ci.__ngLastListenerFn__||ci).__ngNextListenerFn__=b,ci.__ngLastListenerFn__=b,ct=!1;else{b=eo(c,n,Pe,b,!1);const to=s.listen(Hn,f,b);je.push(b,to),oe&&oe.push(f,kr,Cn,Cn+1)}}else b=eo(c,n,Pe,b,!0),Hn.addEventListener(f,b,A),je.push(b),oe&&oe.push(f,kr,Cn,A)}else b=eo(c,n,Pe,b,!1);const Dt=c.outputs;let tn;if(ct&&null!==Dt&&(tn=Dt[f])){const Ut=tn.length;if(Ut)for(let Hn=0;Hn<Ut;Hn+=2){const Ya=n[tn[Hn]][tn[Hn+1]].subscribe(b),Eh=je.length;je.push(b,Ya),oe&&oe.push(f,c.index,Eh,-(Eh+1))}}}function lo(t,n,s,c){try{return cs(6,n,s),!1!==s(c)}catch(f){return Bf(t,f),!1}finally{cs(7,n,s)}}function eo(t,n,s,c,f){return function b(A){if(A===Function)return c;const F=2&t.flags?Co(t.index,n):n;0==(32&n[2])&&xp(F);let V=lo(n,s,c,A),q=b.__ngNextListenerFn__;for(;q;)V=lo(n,s,q,A)&&V,q=q.__ngNextListenerFn__;return f&&!1===V&&(A.preventDefault(),A.returnValue=!1),V}}function wo(t=1){return Zu(t)}function Wo(t,n){let s=null;const c=function(t){const n=t.attrs;if(null!=n){const s=n.indexOf(5);if(0==(1&s))return n[s+1]}return null}(t);for(let f=0;f<n.length;f++){const b=n[f];if("*"!==b){if(null===c?He(t,b,!0):dn(c,b))return f}else s=f}return s}function Bs(t){const n=En()[16][6];if(!n.projection){const c=n.projection=ys(t?t.length:1,null),f=c.slice();let b=n.child;for(;null!==b;){const A=t?Wo(b,t):0;null!==A&&(f[A]?f[A].projectionNext=b:c[A]=b,f[A]=b),b=b.next}}}function fl(t,n=0,s){const c=En(),f=Si(),b=Mf(f,20+t,16,null,s||null);null===b.projection&&(b.projection=n),fc(),64!=(64&b.flags)&&function(t,n,s){Sf(n[11],0,n,s,Qd(t,s,n),Vp(s.parent||n[6],s,n))}(f,c,b)}function Mi(t,n,s){return zo(t,"",n,"",s),Mi}function zo(t,n,s,c,f){const b=En(),A=Kf(b,n,s,c);return A!==Dn&&ac(Si(),yo(),b,t,A,b[11],f,!1),zo}function ta(t,n,s,c,f,b,A){const F=En(),V=cf(F,n,s,c,f,b);return V!==Dn&&ac(Si(),yo(),F,t,V,F[11],A,!1),ta}function $i(t,n,s,c,f,b,A,F,V){const q=En(),oe=Yf(q,n,s,c,f,b,A,F);return oe!==Dn&&ac(Si(),yo(),q,t,oe,q[11],V,!1),$i}function Ao(t,n,s,c,f,b,A,F,V,q,oe){const Pe=En(),je=uf(Pe,n,s,c,f,b,A,F,V,q);return je!==Dn&&ac(Si(),yo(),Pe,t,je,Pe[11],oe,!1),Ao}function ya(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){const ct=En(),Dt=Za(ct,n,s,c,f,b,A,F,V,q,oe,Pe);return Dt!==Dn&&ac(Si(),yo(),ct,t,Dt,ct[11],je,!1),ya}function Eo(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt){const tn=En(),Ut=Nl(tn,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct);return Ut!==Dn&&ac(Si(),yo(),tn,t,Ut,tn[11],Dt,!1),Eo}function Yo(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut){const Hn=En(),Cn=Oc(Hn,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn);return Cn!==Dn&&ac(Si(),yo(),Hn,t,Cn,Hn[11],Ut,!1),Yo}function Ss(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn,Cn){const kr=En(),ci=Bl(kr,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn);return ci!==Dn&&ac(Si(),yo(),kr,t,ci,kr[11],Cn,!1),Ss}function xs(t,n,s){const c=En(),f=Xf(c,n);return f!==Dn&&ac(Si(),yo(),c,t,f,c[11],s,!1),xs}function bh(t,n,s,c,f){const b=t[s+1],A=null===n;let F=c?Yr(b):Bo(b),V=!1;for(;0!==F&&(!1===V||A);){const oe=t[F+1];np(t[F],n)&&(V=!0,t[F+1]=c?Rl(oe):Ac(oe)),F=c?Yr(oe):Bo(oe)}V&&(t[s+1]=c?Ac(b):Rl(b))}function np(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&g(t,n)>=0}const ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rp(t){return t.substring(ps.key,ps.keyEnd)}function ty(t){return t.substring(ps.value,ps.valueEnd)}function Sg(t,n){const s=ps.textEnd;return s===n?-1:(n=ps.keyEnd=function(t,n,s){for(;n<s&&t.charCodeAt(n)>32;)n++;return n}(t,ps.key=n,s),hf(t,n,s))}function _m(t,n){const s=ps.textEnd;let c=ps.key=hf(t,n,s);return s===c?-1:(c=ps.keyEnd=function(t,n,s){let c;for(;n<s&&(45===(c=t.charCodeAt(n))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)n++;return n}(t,c,s),c=ym(t,c,s),c=ps.value=hf(t,c,s),c=ps.valueEnd=function(t,n,s){let c=-1,f=-1,b=-1,A=n,F=A;for(;A<s;){const V=t.charCodeAt(A++);if(59===V)return F;34===V||39===V?F=A=vm(t,V,A,s):n===A-4&&85===b&&82===f&&76===c&&40===V?F=A=vm(t,41,A,s):V>32&&(F=A),b=f,f=c,c=-33&V}return F}(t,c,s),ym(t,c,s))}function ju(t){ps.key=0,ps.keyEnd=0,ps.value=0,ps.valueEnd=0,ps.textEnd=t.length}function hf(t,n,s){for(;n<s&&t.charCodeAt(n)<=32;)n++;return n}function ym(t,n,s,c){return(n=hf(t,n,s))<s&&n++,n}function vm(t,n,s,c){let f=-1,b=s;for(;b<c;){const A=t.charCodeAt(b++);if(A==n&&92!==f)return b;f=92==A&&92===f?0:A}throw new Error}function ml(t,n,s){return id(t,n,s,!1),ml}function gl(t,n){return id(t,n,null,!0),gl}function zl(t){od(b1,Ag,t,!1)}function Ag(t,n){for(let s=function(t){return ju(t),_m(t,hf(t,0,ps.textEnd))}(n);s>=0;s=_m(n,s))b1(t,rp(n),ty(n))}function Pg(t){od(o,_l,t,!0)}function _l(t,n){for(let s=function(t){return ju(t),Sg(t,hf(t,0,ps.textEnd))}(n);s>=0;s=Sg(n,s))o(t,rp(n),!0)}function id(t,n,s,c){const f=En(),b=Si(),A=Aa(2);b.firstUpdatePass&&v1(b,t,A,c),n!==Dn&&hl(f,A,n)&&x1(b,b.data[Uo()],f,f[11],t,f[A+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=be(Al(t)))),t}(n,s),c,A)}function od(t,n,s,c){const f=Si(),b=Aa(2);f.firstUpdatePass&&v1(f,null,b,c);const A=En();if(s!==Dn&&hl(A,b,s)){const F=f.data[Uo()];if(E1(F,c)&&!y1(f,b)){let V=c?F.classesWithoutHost:F.stylesWithoutHost;null!==V&&(s=xe(V,s||"")),vn(f,F,A,s,c)}else!function(t,n,s,c,f,b,A,F){f===Dn&&(f=Tr);let V=0,q=0,oe=0<f.length?f[0]:null,Pe=0<b.length?b[0]:null;for(;null!==oe||null!==Pe;){const je=V<f.length?f[V+1]:void 0,ct=q<b.length?b[q+1]:void 0;let tn,Dt=null;oe===Pe?(V+=2,q+=2,je!==ct&&(Dt=Pe,tn=ct)):null===Pe||null!==oe&&oe<Pe?(V+=2,Dt=oe):(q+=2,Dt=Pe,tn=ct),null!==Dt&&x1(t,n,s,c,Dt,tn,A,F),oe=V<f.length?f[V]:null,Pe=q<b.length?b[q]:null}}(f,F,A,A[11],A[b+1],A[b+1]=function(t,n,s){if(null==s||""===s)return Tr;const c=[],f=Al(s);if(Array.isArray(f))for(let b=0;b<f.length;b++)t(c,f[b],!0);else if("object"==typeof f)for(const b in f)f.hasOwnProperty(b)&&t(c,b,f[b]);else"string"==typeof f&&n(c,f);return c}(t,n,s),c,b)}}function y1(t,n){return n>=t.expandoStartIndex}function v1(t,n,s,c){const f=t.data;if(null===f[s+1]){const b=f[Uo()],A=y1(t,s);E1(b,c)&&null===n&&!A&&(n=!1),n=function(t,n,s,c){const f=Zl(t);let b=c?n.residualClasses:n.residualStyles;if(null===f)0===(c?n.classBindings:n.styleBindings)&&(s=Og(s=dv(null,t,n,s,c),n.attrs,c),b=null);else{const A=n.directiveStylingLast;if(-1===A||t[A]!==f)if(s=dv(f,t,n,s,c),null===b){let V=function(t,n,s){const c=s?n.classBindings:n.styleBindings;if(0!==Bo(c))return t[Yr(c)]}(t,n,c);void 0!==V&&Array.isArray(V)&&(V=dv(null,t,n,V[1],c),V=Og(V,n.attrs,c),function(t,n,s,c){t[Yr(s?n.classBindings:n.styleBindings)]=c}(t,n,c,V))}else b=function(t,n,s){let c;const f=n.directiveEnd;for(let b=1+n.directiveStylingLast;b<f;b++)c=Og(c,t[b].hostAttrs,s);return Og(c,n.attrs,s)}(t,n,c)}return void 0!==b&&(c?n.residualClasses=b:n.residualStyles=b),s}(f,b,n,c),function(t,n,s,c,f,b){let A=b?n.classBindings:n.styleBindings,F=Yr(A),V=Bo(A);t[c]=s;let oe,q=!1;if(Array.isArray(s)){const Pe=s;oe=Pe[1],(null===oe||g(Pe,oe)>0)&&(q=!0)}else oe=s;if(f)if(0!==V){const je=Yr(t[F+1]);t[c+1]=Or(je,F),0!==je&&(t[je+1]=Ei(t[je+1],c)),t[F+1]=function(t,n){return 131071&t|n<<17}(t[F+1],c)}else t[c+1]=Or(F,0),0!==F&&(t[F+1]=Ei(t[F+1],c)),F=c;else t[c+1]=Or(V,0),0===F?F=c:t[V+1]=Ei(t[V+1],c),V=c;q&&(t[c+1]=Ac(t[c+1])),bh(t,oe,c,!0),bh(t,oe,c,!1),function(t,n,s,c,f){const b=f?t.residualClasses:t.residualStyles;null!=b&&"string"==typeof n&&g(b,n)>=0&&(s[c+1]=Rl(s[c+1]))}(n,oe,t,c,b),A=Or(F,V),b?n.classBindings=A:n.styleBindings=A}(f,b,n,s,A,c)}}function dv(t,n,s,c,f){let b=null;const A=s.directiveEnd;let F=s.directiveStylingLast;for(-1===F?F=s.directiveStart:F++;F<A&&(b=n[F],c=Og(c,b.hostAttrs,f),b!==t);)F++;return null!==t&&(s.directiveStylingLast=F),c}function Og(t,n,s){const c=s?1:2;let f=-1;if(null!==n)for(let b=0;b<n.length;b++){const A=n[b];"number"==typeof A?f=A:f===c&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),o(t,A,!!s||n[++b]))}return void 0===t?null:t}function b1(t,n,s){o(t,n,Al(s))}function x1(t,n,s,c,f,b,A,F){if(!(3&n.type))return;const V=t.data,q=V[F+1];ry(function(t){return 1==(1&t)}(q)?w1(V,n,s,f,Bo(q),A):void 0)||(ry(b)||function(t){return 2==(2&t)}(q)&&(b=w1(V,null,s,f,F,A)),function(t,n,s,c,f){const b=Vt(t);if(n)f?b?t.addClass(s,c):s.classList.add(c):b?t.removeClass(s,c):s.classList.remove(c);else{let A=-1===c.indexOf("-")?void 0:$r.DashCase;if(null==f)b?t.removeStyle(s,c,A):s.style.removeProperty(c);else{const F="string"==typeof f&&f.endsWith("!important");F&&(f=f.slice(0,-10),A|=$r.Important),b?t.setStyle(s,c,f,A):s.style.setProperty(c,f,F?"important":"")}}}(c,A,no(Uo(),s),f,b))}function w1(t,n,s,c,f,b){const A=null===n;let F;for(;f>0;){const V=t[f],q=Array.isArray(V),oe=q?V[1]:V,Pe=null===oe;let je=s[f+1];je===Dn&&(je=Pe?Tr:void 0);let ct=Pe?u(je,c):oe===c?je:void 0;if(q&&!ry(ct)&&(ct=u(V,c)),ry(ct)&&(F=ct,A))return F;const Dt=t[f+1];f=A?Yr(Dt):Bo(Dt)}if(null!==n){let V=b?n.residualClasses:n.residualStyles;null!=V&&(F=u(V,c))}return F}function ry(t){return void 0!==t}function E1(t,n){return 0!=(t.flags&(n?16:32))}function C1(t,n=""){const s=En(),c=Si(),f=t+20,b=c.firstCreatePass?Mf(c,f,1,n,null):c.data[f],A=s[f]=Ef(s[11],n);lh(c,s,A,b),ra(b,!1)}function fv(t){return iy("",t,""),fv}function iy(t,n,s){const c=En(),f=Kf(c,t,n,s);return f!==Dn&&dh(c,Uo(),f),iy}function pv(t,n,s,c,f){const b=En(),A=cf(b,t,n,s,c,f);return A!==Dn&&dh(b,Uo(),A),pv}function mv(t,n,s,c,f,b,A){const F=En(),V=Yf(F,t,n,s,c,f,b,A);return V!==Dn&&dh(F,Uo(),V),mv}function gv(t,n,s,c,f,b,A,F,V){const q=En(),oe=uf(q,t,n,s,c,f,b,A,F,V);return oe!==Dn&&dh(q,Uo(),oe),gv}function _v(t,n,s,c,f,b,A,F,V,q,oe){const Pe=En(),je=Za(Pe,t,n,s,c,f,b,A,F,V,q,oe);return je!==Dn&&dh(Pe,Uo(),je),_v}function yv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){const ct=En(),Dt=Nl(ct,t,n,s,c,f,b,A,F,V,q,oe,Pe,je);return Dt!==Dn&&dh(ct,Uo(),Dt),yv}function vv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt){const tn=En(),Ut=Oc(tn,t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt);return Ut!==Dn&&dh(tn,Uo(),Ut),vv}function bv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut){const Hn=En(),Cn=Bl(Hn,t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut);return Cn!==Dn&&dh(Hn,Uo(),Cn),bv}function xv(t){const n=En(),s=Xf(n,t);return s!==Dn&&dh(n,Uo(),s),xv}function T1(t,n,s){od(o,_l,Kf(En(),t,n,s),!0)}function D1(t,n,s,c,f){od(o,_l,cf(En(),t,n,s,c,f),!0)}function S1(t,n,s,c,f,b,A){od(o,_l,Yf(En(),t,n,s,c,f,b,A),!0)}function I1(t,n,s,c,f,b,A,F,V){od(o,_l,uf(En(),t,n,s,c,f,b,A,F,V),!0)}function M1(t,n,s,c,f,b,A,F,V,q,oe){od(o,_l,Za(En(),t,n,s,c,f,b,A,F,V,q,oe),!0)}function A1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){od(o,_l,Nl(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je),!0)}function P1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt){od(o,_l,Oc(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt),!0)}function O1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut){od(o,_l,Bl(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut),!0)}function k1(t){od(o,_l,Xf(En(),t),!0)}function R1(t,n,s){zl(Kf(En(),t,n,s))}function L1(t,n,s,c,f){zl(cf(En(),t,n,s,c,f))}function F1(t,n,s,c,f,b,A){zl(Yf(En(),t,n,s,c,f,b,A))}function N1(t,n,s,c,f,b,A,F,V){zl(uf(En(),t,n,s,c,f,b,A,F,V))}function B1(t,n,s,c,f,b,A,F,V,q,oe){zl(Za(En(),t,n,s,c,f,b,A,F,V,q,oe))}function z1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){zl(Nl(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je))}function j1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt){zl(Oc(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt))}function V1(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut){zl(Bl(En(),t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut))}function U1(t){zl(Xf(En(),t))}function wv(t,n,s,c,f){return id(t,Kf(En(),n,s,c),f,!1),wv}function Ev(t,n,s,c,f,b,A){return id(t,cf(En(),n,s,c,f,b),A,!1),Ev}function Cv(t,n,s,c,f,b,A,F,V){return id(t,Yf(En(),n,s,c,f,b,A,F),V,!1),Cv}function Tv(t,n,s,c,f,b,A,F,V,q,oe){return id(t,uf(En(),n,s,c,f,b,A,F,V,q),oe,!1),Tv}function Dv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){return id(t,Za(En(),n,s,c,f,b,A,F,V,q,oe,Pe),je,!1),Dv}function Sv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt){return id(t,Nl(En(),n,s,c,f,b,A,F,V,q,oe,Pe,je,ct),Dt,!1),Sv}function Iv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut){return id(t,Oc(En(),n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn),Ut,!1),Iv}function Mv(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn,Cn){return id(t,Bl(En(),n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn),Cn,!1),Mv}function Av(t,n,s){return id(t,Xf(En(),n),s,!1),Av}function Pv(t,n,s){const c=En();return hl(c,Os(),n)&&ac(Si(),yo(),c,t,n,c[11],s,!0),Pv}function Ov(t,n,s){const c=En();if(hl(c,Os(),n)){const b=Si(),A=yo();ac(b,A,c,t,n,Qm(Zl(b.data),A,c),s,!0)}return Ov}const Ap=void 0;var PE=["en",[["a","p"],["AM","PM"],Ap],[["AM","PM"],Ap,Ap],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ap,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ap,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ap,"{1} 'at' {0}",Ap],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),s=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===s?1:5}];let bm={};function OE(t,n,s){"string"!=typeof n&&(s=n,n=t[Qr.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),bm[n]=t,s&&(bm[n][Qr.ExtraData]=s)}function kv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=$1(n);if(s)return s;const c=n.split("-")[0];if(s=$1(c),s)return s;if("en"===c)return PE;throw new Error(`Missing locale data for the locale "${t}".`)}function kE(t){return kv(t)[Qr.CurrencyCode]||null}function H1(t){return kv(t)[Qr.PluralCase]}function $1(t){return t in bm||(bm[t]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[t]),bm[t]}function RE(){bm={}}var Qr=(()=>((Qr=Qr||{})[Qr.LocaleId=0]="LocaleId",Qr[Qr.DayPeriodsFormat=1]="DayPeriodsFormat",Qr[Qr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qr[Qr.DaysFormat=3]="DaysFormat",Qr[Qr.DaysStandalone=4]="DaysStandalone",Qr[Qr.MonthsFormat=5]="MonthsFormat",Qr[Qr.MonthsStandalone=6]="MonthsStandalone",Qr[Qr.Eras=7]="Eras",Qr[Qr.FirstDayOfWeek=8]="FirstDayOfWeek",Qr[Qr.WeekendRange=9]="WeekendRange",Qr[Qr.DateFormat=10]="DateFormat",Qr[Qr.TimeFormat=11]="TimeFormat",Qr[Qr.DateTimeFormat=12]="DateTimeFormat",Qr[Qr.NumberSymbols=13]="NumberSymbols",Qr[Qr.NumberFormats=14]="NumberFormats",Qr[Qr.CurrencyCode=15]="CurrencyCode",Qr[Qr.CurrencySymbol=16]="CurrencySymbol",Qr[Qr.CurrencyName=17]="CurrencyName",Qr[Qr.Currencies=18]="Currencies",Qr[Qr.Directionality=19]="Directionality",Qr[Qr.PluralCase=20]="PluralCase",Qr[Qr.ExtraData=21]="ExtraData",Qr))();const FE=["zero","one","two","few","many"],kg="en-US",G1="USD",oy={marker:"element"},sy={marker:"ICU"};var zs=(()=>((zs=zs||{})[zs.SHIFT=2]="SHIFT",zs[zs.APPEND_EAGERLY=1]="APPEND_EAGERLY",zs[zs.COMMENT=2]="COMMENT",zs))();let W1=kg;function ay(t){(function(t,n){null==t&&An(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(W1=t.toLowerCase().replace(/_/g,"-"))}function Z1(t,n,s){const c=n.insertBeforeIndex,f=Array.isArray(c)?c[0]:c;return null===f?lp(t,0,s):Pr(s[f])}function q1(t,n,s,c,f){const b=n.insertBeforeIndex;if(Array.isArray(b)){let A=c,F=null;if(3&n.type||(F=A,A=f),null!==A&&0==(2&n.flags))for(let V=1;V<b.length;V++)Ts(t,A,s[b[V]],F,!1)}}function X1(t,n){if(t.push(n),t.length>1)for(let s=t.length-2;s>=0;s--){const c=t[s];K1(c)||zE(c,n)&&null===jE(c)&&VE(c,n.index)}}function K1(t){return!(64&t.type)}function zE(t,n){return K1(n)||t.index>n.index}function jE(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function VE(t,n){const s=t.insertBeforeIndex;Array.isArray(s)?s[0]=n:(up(Z1,q1),t.insertBeforeIndex=n)}function Rg(t,n){const s=t.data[n];return null===s||"string"==typeof s?null:s.hasOwnProperty("currentCaseLViewIndex")?s:s.value}function $E(t,n,s){const c=Um(t,s,64,null,null);return X1(n,c),c}function ly(t,n){const s=n[t.currentCaseLViewIndex];return null===s?s:s<0?~s:s}function Y1(t){return t>>>17}function Q1(t){return(131070&t)>>>1}let Lg=0,Fg=0;function eb(t,n,s,c){const f=s[11];let A,b=null;for(let F=0;F<n.length;F++){const V=n[F];if("string"==typeof V){const q=n[++F];null===s[q]&&(s[q]=Ef(f,V))}else if("number"==typeof V)switch(1&V){case 0:const q=Y1(V);let oe,Pe;if(null===b&&(b=q,A=ul(f,c)),q===b?(oe=c,Pe=A):(oe=null,Pe=Pr(s[q])),null!==Pe){const tn=Q1(V);Ts(f,Pe,s[tn],oe,!1);const Hn=Rg(t,tn);if(null!==Hn&&"object"==typeof Hn){const Cn=ly(Hn,s);null!==Cn&&eb(t,Hn.create[Cn],s,s[Hn.anchorIdx])}}break;case 1:const ct=n[++F],Dt=n[++F];Fl(f,no(V>>>1,s),null,null,ct,Dt,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${V}"`)}else switch(V){case sy:const q=n[++F],oe=n[++F];null===s[oe]&&rs(s[oe]=qh(f,q),s);break;case oy:const Pe=n[++F],je=n[++F];null===s[je]&&rs(s[je]=Td(f,Pe,null),s)}}}function tb(t,n,s,c,f){for(let b=0;b<s.length;b++){const A=s[b],F=s[++b];if(A&f){let V="";for(let q=b+1;q<=b+F;q++){const oe=s[q];if("string"==typeof oe)V+=oe;else if("number"==typeof oe)if(oe<0)V+=Tt(n[c-oe]);else{const Pe=oe>>>2;switch(3&oe){case 1:const je=s[++q],ct=s[++q],Dt=t.data[Pe];"string"==typeof Dt?Fl(n[11],n[Pe],null,Dt,je,V,ct):ac(t,Dt,n,je,V,n[11],ct,!1);break;case 0:const tn=n[Pe];null!==tn&&Cf(n[11],tn,V);break;case 2:XE(t,Rg(t,Pe),n,V);break;case 3:nb(t,Rg(t,Pe),c,n)}}}}else{const V=s[b+1];if(V>0&&3==(3&V)){const oe=Rg(t,V>>>2);n[oe.currentCaseLViewIndex]<0&&nb(t,oe,c,n)}}b+=F}}function nb(t,n,s,c){let f=c[n.currentCaseLViewIndex];if(null!==f){let b=Lg;f<0&&(f=c[n.currentCaseLViewIndex]=~f,b=-1),tb(t,c,n.update[f],s,b)}}function XE(t,n,s,c){const f=function(t,n){let s=t.cases.indexOf(n);if(-1===s)switch(t.type){case 1:{const c=function(t,n){const s=H1(n)(parseInt(t,10)),c=FE[s];return void 0!==c?c:"other"}(n,W1);s=t.cases.indexOf(c),-1===s&&"other"!==c&&(s=t.cases.indexOf("other"));break}case 0:s=t.cases.indexOf("other")}return-1===s?null:s}(n,c);if(ly(n,s)!==f&&(rb(t,n,s),s[n.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const A=s[n.anchorIdx];A&&eb(t,n.create[f],s,A)}}function rb(t,n,s){let c=ly(n,s);if(null!==c){const f=n.remove[c];for(let b=0;b<f.length;b++){const A=f[b];if(A>0){const F=no(A,s);null!==F&&Kh(s[11],F)}else rb(t,Rg(t,~A),s)}}}function YE(){const t=[];let s,c,n=-1;function b(F,V){n=0;const q=ly(F,V);c=null!==q?F.remove[q]:Tr}function A(){if(n<c.length){const F=c[n++];return F>0?s[F]:(t.push(n,c),b(s[1].data[~F],s),A())}return 0===t.length?null:(c=t.pop(),n=t.pop(),A())}return function(F,V){for(s=V;t.length;)t.pop();return b(F.value,V),A}}const cy=/\ufffd(\d+):?\d*\ufffd/gi,QE=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,JE=/\ufffd(\d+)\ufffd/,ob=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,eC=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,tC=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,nC=/\uE500/g;function sb(t,n,s,c,f,b,A){const F=Af(t,c,1,null);let V=F<<zs.SHIFT,q=wl();n===q&&(q=null),null===q&&(V|=zs.APPEND_EAGERLY),A&&(V|=zs.COMMENT,function(t){void 0===Ga&&(Ga=t())}(YE)),f.push(V,null===b?"":b);const oe=Um(t,F,A?32:1,null===b?"":b,null);X1(s,oe);const Pe=oe.index;return ra(oe,!1),null!==q&&n!==q&&function(t,n){let s=t.insertBeforeIndex;null===s?(up(Z1,q1),s=t.insertBeforeIndex=[null,n]):(function(t,n,s){t!=n&&An(s,t,n,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(n))}(q,Pe),oe}function oC(t,n,s,c,f,b,A){const F=A.match(cy),V=sb(t,n,s,b,c,F?null:A,!1);F&&xm(f,A,V.index,null,0,null)}function xm(t,n,s,c,f,b){const A=t.length,F=A+1;t.push(null,null);const V=A+2,q=n.split(cy);let oe=0;for(let Pe=0;Pe<q.length;Pe++){const je=q[Pe];if(1&Pe){const ct=f+parseInt(je,10);t.push(-1-ct),oe|=ab(ct)}else""!==je&&t.push(je)}return t.push(s<<2|(c?1:0)),c&&t.push(c,b),t[A]=oe,t[F]=t.length-V,oe}function aC(t){let n=0;for(let s=0;s<t.length;s++){const c=t[s];"number"==typeof c&&c<0&&n++}return n}function ab(t){return 1<<Math.min(t,31)}function lb(t){let n,b,s="",c=0,f=!1;for(;null!==(n=eC.exec(t));)f?n[0]===`\ufffd/*${b}\ufffd`&&(c=n.index,f=!1):(s+=t.substring(c,n.index+n[0].length),b=n[1],f=!0);return s+=t.substr(c),s}function cb(t,n,s,c,f,b){let A=0;const F={type:f.type,currentCaseLViewIndex:Af(t,n,1,null),anchorIdx:b,cases:[],create:[],remove:[],update:[]};(function(t,n,s){t.push(ab(n.mainBinding),2,-1-n.mainBinding,s<<2|2)})(s,f,b),function(t,n,s){const c=t.data[n];null===c?t.data[n]=s:c.value=s}(t,b,F);const V=f.values;for(let q=0;q<V.length;q++){const oe=V[q],Pe=[];for(let je=0;je<oe.length;je++){const ct=oe[je];if("string"!=typeof ct){const Dt=Pe.push(ct)-1;oe[je]=`\x3c!--\ufffd${Dt}\ufffd--\x3e`}}A=hC(t,F,n,s,c,f.cases[q],oe.join(""),Pe)|A}A&&function(t,n,s){t.push(n,1,s<<2|3)}(s,A,b)}function uC(t){const n=[],s=[];let c=1,f=0;const b=Rv(t=t.replace(ob,function(A,F,V){return c="select"===V?0:1,f=parseInt(F.substr(1),10),""}));for(let A=0;A<b.length;){let F=b[A++].trim();1===c&&(F=F.replace(/\s*(?:=)?(\w+)\s*/,"$1")),F.length&&n.push(F);const V=Rv(b[A++]);n.length>s.length&&s.push(V)}return{type:c,mainBinding:f,cases:n,values:s}}function Rv(t){if(!t)return[];let n=0;const s=[],c=[],f=/[{}]/g;let b;for(f.lastIndex=0;b=f.exec(t);){const F=b.index;if("}"==b[0]){if(s.pop(),0==s.length){const V=t.substring(n,F);ob.test(V)?c.push(uC(V)):c.push(V),n=F+1}}else{if(0==s.length){const V=t.substring(n,F);c.push(V),n=F+1}s.push("{")}}const A=t.substring(n);return c.push(A),c}function hC(t,n,s,c,f,b,A,F){const V=[],q=[],oe=[];n.cases.push(b),n.create.push(V),n.remove.push(q),n.update.push(oe);const je=Wd(Me()).getInertBodyElement(A),ct=wr(je)||je;return ct?ub(t,n,s,c,V,q,oe,ct,f,F,0):0}function ub(t,n,s,c,f,b,A,F,V,q,oe){let Pe=0,je=F.firstChild;for(;je;){const ct=Af(t,s,1,null);switch(je.nodeType){case Node.ELEMENT_NODE:const Dt=je,tn=Dt.tagName.toLowerCase();if(ua.hasOwnProperty(tn)){Lv(f,oy,tn,V,ct),t.data[ct]=tn;const kr=Dt.attributes;for(let ci=0;ci<kr.length;ci++){const to=kr.item(ci),Ya=to.name.toLowerCase();to.value.match(cy)?yf.hasOwnProperty(Ya)&&xm(A,to.value,ct,to.name,0,Tn[Ya]?nc:ic[Ya]?Dc:null):mC(f,ct,to)}Pe=ub(t,n,s,c,f,b,A,je,ct,q,oe+1)|Pe,hb(b,ct,oe)}break;case Node.TEXT_NODE:const Ut=je.textContent||"",Hn=Ut.match(cy);Lv(f,null,Hn?"":Ut,V,ct),hb(b,ct,oe),Hn&&(Pe=xm(A,Ut,ct,null,0,null)|Pe);break;case Node.COMMENT_NODE:const Cn=JE.exec(je.textContent||"");if(Cn){const ci=q[parseInt(Cn[1],10)];Lv(f,sy,"",V,ct),cb(t,s,c,V,ci,ct),dC(b,ct,oe)}}je=je.nextSibling}return Pe}function hb(t,n,s){0===s&&t.push(n)}function dC(t,n,s){0===s&&(t.push(~n),t.push(n))}function Lv(t,n,s,c,f){null!==n&&t.push(n),t.push(s,f,function(t,n,s){return 0|n<<17|s<<1}(0,c,f))}function mC(t,n,s){t.push(n<<1|1,s.name,s.value)}const gC=/\[(\ufffd.+?\ufffd?)\]/,_C=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,yC=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,vC=/{([A-Z0-9_]+)}/g,bC=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,xC=/\/\*/,wC=/\d+\:(\d+)/;function fb(t,n={}){let s=t;if(gC.test(t)){const c={},f=[0];s=s.replace(_C,(b,A,F)=>{const V=A||F,q=c[V]||[];if(q.length||(V.split("|").forEach(tn=>{const Ut=tn.match(wC),Hn=Ut?parseInt(Ut[1],10):0,Cn=xC.test(tn);q.push([Hn,Cn,tn])}),c[V]=q),!q.length)throw new Error(`i18n postprocess: unmatched placeholder - ${V}`);const oe=f[f.length-1];let Pe=0;for(let tn=0;tn<q.length;tn++)if(q[tn][0]===oe){Pe=tn;break}const[je,ct,Dt]=q[Pe];return ct?f.pop():oe!==je&&f.push(je),q.splice(Pe,1),Dt})}return Object.keys(n).length&&(s=s.replace(yC,(c,f,b,A,F,V)=>n.hasOwnProperty(b)?`${f}${n[b]}${V}`:c),s=s.replace(vC,(c,f)=>n.hasOwnProperty(f)?n[f]:c),s=s.replace(bC,(c,f)=>{if(n.hasOwnProperty(f)){const b=n[f];if(!b.length)throw new Error(`i18n postprocess: unmatched ICU - ${c} with key: ${f}`);return b.shift()}return c})),s}function Fv(t,n,s=-1){const c=Si(),f=En(),b=20+t,A=ws(c.consts,n),F=wl();c.firstCreatePass&&function(t,n,s,c,f,b){const A=wl(),F=[],V=[],q=[[]];f=function(t,n){if(function(t){return-1===t}(n))return lb(t);{const s=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,c=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return lb(t.substring(s,c))}}(f,b);const oe=function(t){return t.replace(nC," ")}(f).split(tC);for(let Pe=0;Pe<oe.length;Pe++){let je=oe[Pe];if(0==(1&Pe)){const ct=Rv(je);for(let Dt=0;Dt<ct.length;Dt++){let tn=ct[Dt];if(0==(1&Dt)){const Ut=tn;""!==Ut&&oC(t,A,q[0],F,V,s,Ut)}else{const Ut=tn;if("object"!=typeof Ut)throw new Error(`Unable to parse ICU expression in "${f}" message.`);cb(t,s,V,n,Ut,sb(t,A,q[0],s,F,"",!0).index)}}}else{const ct=47===je.charCodeAt(0),tn=(je.charCodeAt(ct?1:0),20+Number.parseInt(je.substring(ct?2:1)));if(ct)q.shift(),ra(wl(),!1);else{const Ut=$E(t,q[0],tn);q.unshift([]),ra(Ut,!0)}}}t.data[c]={create:F,update:V}}(c,null===F?0:F.index,f,b,A,s);const V=c.data[b],oe=Df(c,F===f[6]?null:F,f);(function(t,n,s,c){const f=t[11];for(let b=0;b<n.length;b++){const A=n[b++],F=n[b],V=(A&zs.COMMENT)===zs.COMMENT,q=(A&zs.APPEND_EAGERLY)===zs.APPEND_EAGERLY,oe=A>>>zs.SHIFT;let Pe=t[oe];null===Pe&&(Pe=t[oe]=V?f.createComment(F):Ef(f,F)),q&&null!==s&&Ts(f,s,Pe,c,!1)}})(f,V.create,oe,F&&8&F.type?f[F.index]:null),Wl(!0)}function Nv(){Wl(!1)}function pb(t,n,s){Fv(t,n,s),Nv()}function mb(t,n){const s=Si();!function(t,n,s){const f=Po().index,b=[];if(t.firstCreatePass&&null===t.data[n]){for(let A=0;A<s.length;A+=2){const F=s[A],V=s[A+1];if(""!==V){if(QE.test(V))throw new Error(`ICU expressions are not supported in attributes. Message: "${V}".`);xm(b,V,f,F,aC(b),null)}}t.data[n]=b}}(s,t+20,ws(s.consts,n))}function Bv(t){return function(t){t&&(Lg|=1<<Math.min(Fg,31)),Fg++}(hl(En(),Os(),t)),Bv}function gb(t){!function(t,n,s){if(Fg>0){const c=t.data[s];tb(t,n,Array.isArray(c)?c:c.update,rl()-Fg-1,Lg)}Lg=0,Fg=0}(Si(),En(),t+20)}function _b(t,n={}){return fb(t,n)}function zv(t,n,s,c,f){if(t=Se(t),Array.isArray(t))for(let b=0;b<t.length;b++)zv(t[b],n,s,c,f);else{const b=Si(),A=En();let F=nd(t)?t:Se(t.provide),V=Yp(t);const q=Po(),oe=1048575&q.providerIndexes,Pe=q.directiveStart,je=q.providerIndexes>>20;if(nd(t)||!t.multi){const ct=new Cl(V,f,Pn),Dt=Vv(F,n,f?oe:oe+je,Pe);-1===Dt?(bc(Zs(q,A),b,F),jv(b,t,n.length),n.push(F),q.directiveStart++,q.directiveEnd++,f&&(q.providerIndexes+=1048576),s.push(ct),A.push(ct)):(s[Dt]=ct,A[Dt]=ct)}else{const ct=Vv(F,n,oe+je,Pe),Dt=Vv(F,n,oe,oe+je),tn=ct>=0&&s[ct],Ut=Dt>=0&&s[Dt];if(f&&!Ut||!f&&!tn){bc(Zs(q,A),b,F);const Hn=function(t,n,s,c,f){const b=new Cl(t,s,Pn);return b.multi=[],b.index=n,b.componentProviders=0,yb(b,f,c&&!s),b}(f?TC:CC,s.length,f,c,V);!f&&Ut&&(s[Dt].providerFactory=Hn),jv(b,t,n.length,0),n.push(F),q.directiveStart++,q.directiveEnd++,f&&(q.providerIndexes+=1048576),s.push(Hn),A.push(Hn)}else jv(b,t,ct>-1?ct:Dt,yb(s[f?Dt:ct],V,!f&&c));!f&&c&&Ut&&s[Dt].componentProviders++}}}function jv(t,n,s,c){const f=nd(n);if(f||function(t){return!!t.useClass}(n)){const A=(n.useClass||n).prototype.ngOnDestroy;if(A){const F=t.destroyHooks||(t.destroyHooks=[]);if(!f&&n.multi){const V=F.indexOf(s);-1===V?F.push(s,[c,A]):F[V+1].push(c,A)}else F.push(s,A)}}}function yb(t,n,s){return s&&t.componentProviders++,t.multi.push(n)-1}function Vv(t,n,s,c){for(let f=s;f<c;f++)if(n[f]===t)return f;return-1}function CC(t,n,s,c){return Uv(this.multi,[])}function TC(t,n,s,c){const f=this.multi;let b;if(this.providerFactory){const A=this.providerFactory.componentProviders,F=Ro(s,s[1],this.providerFactory.index,c);b=F.slice(0,A),Uv(f,b);for(let V=A;V<F.length;V++)b.push(F[V])}else b=[],Uv(f,b);return b}function Uv(t,n){for(let s=0;s<t.length;s++)n.push((0,t[s])());return n}function vb(t,n=[]){return s=>{s.providersResolver=(c,f)=>function(t,n,s){const c=Si();if(c.firstCreatePass){const f=Wr(t);zv(s,c.data,c.blueprint,f,!0),zv(n,c.data,c.blueprint,f,!1)}}(c,f?f(t):t,n)}}class Hv{}class wm{}function bb(t){const n=Error(`No component factory found for ${be(t)}. Did you add it to @NgModule.entryComponents?`);return n[xb]=t,n}const xb="ngComponent";class SC{resolveComponentFactory(n){throw bb(n)}}let Em=(()=>{class t{}return t.NULL=new SC,t})();class IC{constructor(n,s,c){this._parent=s,this._ngModule=c,this._factories=new Map;for(let f=0;f<n.length;f++){const b=n[f];this._factories.set(b.componentType,b)}}resolveComponentFactory(n){let s=this._factories.get(n);if(!s&&this._parent&&(s=this._parent.resolveComponentFactory(n)),!s)throw bb(n);return new $v(s,this._ngModule)}}class $v extends wm{constructor(n,s){super(),this.factory=n,this.ngModule=s,this.selector=n.selector,this.componentType=n.componentType,this.ngContentSelectors=n.ngContentSelectors,this.inputs=n.inputs,this.outputs=n.outputs}create(n,s,c,f){return this.factory.create(n,s,c,f||this.ngModule)}}function uy(...t){}function wb(){return Pp(Po(),En())}function Pp(t,n){return new sd(hi(t,n))}const Eb=wb,MC=Eb;let sd=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=MC,t})();function Cb(t){return t instanceof sd?t.nativeElement:t}class hy{}let Tb=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>AC(),t})();const Db=Sb,AC=Db;function Sb(){const t=En(),s=Co(Po().index,t);return function(t){return t[11]}(Yn(s)?s:t)}let Gv=(()=>{class t{}return t.\u0275prov=Zn({token:t,providedIn:"root",factory:()=>null}),t})();class Ib{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Wv=new Ib("12.2.16");class Zv{constructor(){}supports(n){return lf(n)}create(n){return new Mb(n)}}const OC=(t,n)=>n;class Mb{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||OC}forEachItem(n){let s;for(s=this._itHead;null!==s;s=s._next)n(s)}forEachOperation(n){let s=this._itHead,c=this._removalsHead,f=0,b=null;for(;s||c;){const A=!c||s&&s.currentIndex<Pb(c,f,b)?s:c,F=Pb(A,f,b),V=A.currentIndex;if(A===c)f--,c=c._nextRemoved;else if(s=s._next,null==A.previousIndex)f++;else{b||(b=[]);const q=F-f,oe=V-f;if(q!=oe){for(let je=0;je<q;je++){const ct=je<b.length?b[je]:b[je]=0,Dt=ct+je;oe<=Dt&&Dt<q&&(b[je]=ct+1)}b[A.previousIndex]=oe-q}}F!==V&&n(A,F,V)}}forEachPreviousItem(n){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachMovedItem(n){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}forEachIdentityChange(n){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)n(s)}diff(n){if(null==n&&(n=[]),!lf(n))throw new Error(`Error trying to diff '${be(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let f,b,A,s=this._itHead,c=!1;if(Array.isArray(n)){this.length=n.length;for(let F=0;F<this.length;F++)b=n[F],A=this._trackByFn(F,b),null!==s&&Object.is(s.trackById,A)?(c&&(s=this._verifyReinsertion(s,b,A,F)),Object.is(s.item,b)||this._addIdentityChange(s,b)):(s=this._mismatch(s,b,A,F),c=!0),s=s._next}else f=0,function(t,n){if(Array.isArray(t))for(let s=0;s<t.length;s++)n(t[s]);else{const s=t[Nd()]();let c;for(;!(c=s.next()).done;)n(c.value)}}(n,F=>{A=this._trackByFn(f,F),null!==s&&Object.is(s.trackById,A)?(c&&(s=this._verifyReinsertion(s,F,A,f)),Object.is(s.item,F)||this._addIdentityChange(s,F)):(s=this._mismatch(s,F,A,f),c=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,s,c,f){let b;return null===n?b=this._itTail:(b=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._reinsertAfter(n,b,f)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._moveAfter(n,b,f)):n=this._addAfter(new kC(s,c),b,f),n}_verifyReinsertion(n,s,c,f){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==b?n=this._reinsertAfter(b,n._prev,f):n.currentIndex!=f&&(n.currentIndex=f,this._addToMoves(n,f)),n}_truncate(n){for(;null!==n;){const s=n._next;this._addToRemovals(this._unlink(n)),n=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const f=n._prevRemoved,b=n._nextRemoved;return null===f?this._removalsHead=b:f._nextRemoved=b,null===b?this._removalsTail=f:b._prevRemoved=f,this._insertAfter(n,s,c),this._addToMoves(n,c),n}_moveAfter(n,s,c){return this._unlink(n),this._insertAfter(n,s,c),this._addToMoves(n,c),n}_addAfter(n,s,c){return this._insertAfter(n,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,s,c){const f=null===s?this._itHead:s._next;return n._next=f,n._prev=s,null===f?this._itTail=n:f._prev=n,null===s?this._itHead=n:s._next=n,null===this._linkedRecords&&(this._linkedRecords=new Ab),this._linkedRecords.put(n),n.currentIndex=c,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const s=n._prev,c=n._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,n}_addToMoves(n,s){return n.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ab),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,s){return n.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class kC{constructor(n,s){this.item=n,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,n))return c;return null}remove(n){const s=n._prevDup,c=n._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class Ab{constructor(){this.map=new Map}put(n){const s=n.trackById;let c=this.map.get(s);c||(c=new RC,this.map.set(s,c)),c.add(n)}get(n,s){const f=this.map.get(n);return f?f.get(n,s):null}remove(n){const s=n.trackById;return this.map.get(s).remove(n)&&this.map.delete(s),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pb(t,n,s){const c=t.previousIndex;if(null===c)return c;let f=0;return s&&c<s.length&&(f=s[c]),c+n+f}class qv{constructor(){}supports(n){return n instanceof Map||gg(n)}create(){return new LC}}class LC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let s;for(s=this._mapHead;null!==s;s=s._next)n(s)}forEachPreviousItem(n){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)n(s)}forEachChangedItem(n){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}diff(n){if(n){if(!(n instanceof Map||gg(n)))throw new Error(`Error trying to diff '${be(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(n,(c,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const b=this._getOrCreateRecordForKey(f,c);s=this._insertBeforeOrAppend(s,b)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,s){if(n){const c=n._prev;return s._next=n,s._prev=c,n._prev=s,c&&(c._next=s),n===this._mapHead&&(this._mapHead=s),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(n,s){if(this._records.has(n)){const f=this._records.get(n);this._maybeAddToChanges(f,s);const b=f._prev,A=f._next;return b&&(b._next=A),A&&(A._prev=b),f._next=null,f._prev=null,f}const c=new FC(n);return this._records.set(n,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,s){Object.is(s,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=s,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,s){n instanceof Map?n.forEach(s):Object.keys(n).forEach(c=>s(n[c],c))}}class FC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xv(){return new dy([new Zv])}let dy=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(null!=c){const f=c.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||Xv()),deps:[[t,new dr,new Qn]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(t){return t.name||typeof t}(s)}'`)}}return t.\u0275prov=Zn({token:t,providedIn:"root",factory:Xv}),t})();function Kv(){return new fy([new qv])}let fy=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(c){const f=c.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||Kv()),deps:[[t,new dr,new Qn]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(c)return c;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return t.\u0275prov=Zn({token:t,providedIn:"root",factory:Kv}),t})();function py(t,n,s,c,f=!1){for(;null!==s;){const b=n[s.index];if(null!==b&&c.push(Pr(b)),Fn(b))for(let F=10;F<b.length;F++){const V=b[F],q=V[1].firstChild;null!==q&&py(V[1],V,q,c)}const A=s.type;if(8&A)py(t,n,s.child,c);else if(32&A){const F=Js(s,n);let V;for(;V=F();)c.push(V)}else if(16&A){const F=fs(n,s);if(Array.isArray(F))c.push(...F);else{const V=io(n[16]);py(V[1],V,F,c,!0)}}s=f?s.projectionNext:s.next}return c}class Bg{constructor(n,s){this._lView=n,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,s=n[1];return py(s,n,s.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Fn(n)){const s=n[8],c=s?s.indexOf(this):-1;c>-1&&(Tf(n,c),za(s,c))}this._attachedToViewContainer=!1}Bp(this._lView[1],this._lView)}onDestroy(n){$m(this._lView[1],this._lView,null,n)}markForCheck(){xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,s){Nc(!0);try{Xp(t,n,s)}finally{Nc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Jd(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class BC extends Bg{constructor(n){super(n),this._view=n}detectChanges(){hh(this._view)}checkNoChanges(){!function(t){Nc(!0);try{hh(t)}finally{Nc(!1)}}(this._view)}get context(){return null}}const Ob=kb,zC=Ob;let Yv=(()=>{class t{}return t.__NG_ELEMENT_ID__=zC,t})();function kb(t){return function(t,n,s){if(oi(t)&&!s){const c=Co(t.index,n);return new Bg(c,c)}return 47&t.type?new Bg(n[16],n):null}(Po(),En(),16==(16&t))}const VC=[new qv],Rb=new dy([new Zv]),Lb=new fy(VC),Fb=Nb,HC=Fb;let Op=(()=>{class t{}return t.__NG_ELEMENT_ID__=HC,t})();const $C=Op,GC=class extends $C{constructor(n,s,c){super(),this._declarationLView=n,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(n){const s=this._declarationTContainer.tViews,c=mp(this._declarationLView,s,n,16,null,s.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(c[19]=b.createEmbeddedView(s)),Pf(s,c,n),new Bg(c)}};function Nb(){return zg(Po(),En())}function zg(t,n){return 4&t.type?new GC(n,t,Pp(t,n)):null}class ip{}class Qv{}const Bb=zb,WC=Bb;let jg=(()=>{class t{}return t.__NG_ELEMENT_ID__=WC,t})();function zb(){return Ub(Po(),En())}const ZC=jg,jb=class extends ZC{constructor(n,s,c){super(),this._lContainer=n,this._hostTNode=s,this._hostLView=c}get element(){return Pp(this._hostTNode,this._hostLView)}get injector(){return new wc(this._hostTNode,this._hostLView)}get parentInjector(){const n=Hc(this._hostTNode,this._hostLView);if(Cu(n)){const s=Vc(n,this._hostLView),c=Yl(n);return new wc(s[1].data[c+8],s)}return new wc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const s=Vb(this._lContainer);return null!==s&&s[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,s,c){const f=n.createEmbeddedView(s||{});return this.insert(f,c),f}createComponent(n,s,c,f,b){const A=c||this.parentInjector;if(!b&&null==n.ngModule&&A){const V=A.get(ip,null);V&&(b=V)}const F=n.create(A,f,void 0,b);return this.insert(F.hostView,s),F}insert(n,s){const c=n._lView,f=c[1];if(Fn(c[3])){const oe=this.indexOf(n);if(-1!==oe)this.detach(oe);else{const Pe=c[3],je=new jb(Pe,Pe[6],Pe[3]);je.detach(je.indexOf(n))}}const b=this._adjustIndex(s),A=this._lContainer;!function(t,n,s,c){const f=10+c,b=s.length;c>0&&(s[f-1][4]=n),c<b-10?(n[4]=s[f],Ec(s,10+c,n)):(s.push(n),n[4]=null),n[3]=s;const A=n[17];null!==A&&s!==A&&function(t,n){const s=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===s?t[9]=[n]:s.push(n)}(A,n);const F=n[19];null!==F&&F.insertView(t),n[2]|=128}(f,c,A,b);const F=Fs(b,A),V=c[11],q=ul(V,A[7]);return null!==q&&function(t,n,s,c,f,b){c[0]=f,c[6]=n,Jd(t,c,s,1,f,b)}(f,A[6],V,c,q,F),n.attachToViewContainerRef(),Ec(Jv(A),b,n),n}move(n,s){return this.insert(n,s)}indexOf(n){const s=Vb(this._lContainer);return null!==s?s.indexOf(n):-1}remove(n){const s=this._adjustIndex(n,-1),c=Tf(this._lContainer,s);c&&(za(Jv(this._lContainer),s),Bp(c[1],c))}detach(n){const s=this._adjustIndex(n,-1),c=Tf(this._lContainer,s);return c&&null!=za(Jv(this._lContainer),s)?new Bg(c):null}_adjustIndex(n,s=0){return null==n?this.length+s:n}};function Vb(t){return t[8]}function Jv(t){return t[8]||(t[8]=[])}function Ub(t,n){let s;const c=n[t.index];if(Fn(c))s=c;else{let f;if(8&t.type)f=Pr(c);else{const b=n[11];f=b.createComment("");const A=hi(t,n);Ts(b,ul(b,A),f,function(t,n){return Vt(t)?t.nextSibling(n):n.nextSibling}(b,A),!1)}n[t.index]=s=bp(c,n,f,t),Nf(n,s)}return new jb(s,t,n)}function Hb(t,n,s,c){let f=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${n}'. Current value: '${s}'.`;return c&&(f+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,n){const s=new Error(t);return $b(s,n),s}(f,t)}function $b(t,n){t[bf]=n,t[Fu]=n.logError.bind(n)}function Gb(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function my(t,n,s){const c=t.state,f=1792&c;return f===n?(t.state=-1793&c|s,t.initIndex=-1,!0):f===s}function gy(t,n,s){return(1792&t.state)===n&&t.initIndex<=s&&(t.initIndex=s+1,!0)}function Vg(t,n){return t.nodes[n]}function jo(t,n){return t.nodes[n]}function op(t,n){return t.nodes[n]}function Cm(t,n){return t.nodes[n]}function Ug(t,n){return t.nodes[n]}class YC{}const Ai={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},xh=()=>{},e0=new Map;function jl(t){let n=e0.get(t);return n||(n=be(t)+"_"+e0.size,e0.set(t,n)),n}function QC(t,n,s,c){if(uu.isWrapped(c)){c=uu.unwrap(c);const f=t.def.nodes[n].bindingIndex+s,b=uu.unwrap(t.oldValues[f]);t.oldValues[f]=new uu(b)}return c}const Wb="$$undefined",Zb="$$empty";function JC(t){return{id:Wb,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let e2=0;function wh(t,n,s,c){return!(!(2&t.state)&&Object.is(t.oldValues[n.bindingIndex+s],c))}function Is(t,n,s,c){return!!wh(t,n,s,c)&&(t.oldValues[n.bindingIndex+s]=c,!0)}function ad(t,n,s,c){const f=t.oldValues[n.bindingIndex+s];if(1&t.state||!gh(f,c)){const b=n.bindings[s].name;throw Hb(Ai.createDebugContext(t,n.nodeIndex),`${b}: ${f}`,`${b}: ${c}`,0!=(1&t.state))}}function qb(t){let n=t;for(;n;)2&n.def.flags&&(n.state|=8),n=n.viewContainerParent||n.parent}function n2(t,n){let s=t;for(;s&&s!==n;)s.state|=64,s=s.viewContainerParent||s.parent}function Xb(t,n,s,c){try{return qb(33554432&t.def.nodes[n].flags?jo(t,n).componentView:t),Ai.handleEvent(t,n,s,c)}catch(f){t.root.errorHandler.handleError(f)}}function t0(t){return t.parent?jo(t.parent,t.parentNodeDef.nodeIndex):null}function Tm(t){return t.parent?t.parentNodeDef.parent:null}function Hg(t,n){switch(201347067&n.flags){case 1:return jo(t,n.nodeIndex).renderElement;case 2:return Vg(t,n.nodeIndex).renderText}}function r2(t,n){return t?`${t}:${n}`:n}function kp(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function i2(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Kb(t){return 1<<t%32}function n0(t){const n={};let s=0;const c={};return t&&t.forEach(([f,b])=>{"number"==typeof f?(n[f]=b,s|=Kb(f)):c[f]=b}),{matchedQueries:n,references:c,matchedQueryIds:s}}function $g(t,n){return t.map(s=>{let c,f;return Array.isArray(s)?[f,c]=s:(f=0,c=s),c&&("function"==typeof c||"object"==typeof c)&&n&&Object.defineProperty(c,ot,{value:n,configurable:!0}),{flags:f,token:c,tokenKey:jl(c)}})}function r0(t,n,s){let c=s.renderParent;return c?0==(1&c.flags)||0==(33554432&c.flags)||c.element.componentRendererType&&(c.element.componentRendererType.encapsulation===zt.ShadowDom||1===c.element.componentRendererType.encapsulation)?jo(t,s.renderParent.nodeIndex).renderElement:void 0:n}const Yb=new WeakMap;function Dm(t){let n=Yb.get(t);return n||(n=t(()=>xh),n.factory=t,Yb.set(t,n)),n}function _y(t,n,s,c,f){3===n&&(s=t.renderer.parentNode(Hg(t,t.def.lastRenderRootNode))),Qb(t,n,0,t.def.nodes.length-1,s,c,f)}function Qb(t,n,s,c,f,b,A){for(let F=s;F<=c;F++){const V=t.def.nodes[F];11&V.flags&&ex(t,V,n,f,b,A),F+=V.childCount}}function Jb(t,n,s,c,f,b){let A=t;for(;A&&!kp(A);)A=A.parent;const F=A.parent,V=Tm(A),oe=V.nodeIndex+V.childCount;for(let Pe=V.nodeIndex+1;Pe<=oe;Pe++){const je=F.def.nodes[Pe];je.ngContentIndex===n&&ex(F,je,s,c,f,b),Pe+=je.childCount}if(!F.parent){const Pe=t.root.projectableNodes[n];if(Pe)for(let je=0;je<Pe.length;je++)yy(t,Pe[je],s,c,f,b)}}function ex(t,n,s,c,f,b){if(8&n.flags)Jb(t,n.ngContent.index,s,c,f,b);else{const A=Hg(t,n);if(3===s&&33554432&n.flags&&48&n.bindingFlags?(16&n.bindingFlags&&yy(t,A,s,c,f,b),32&n.bindingFlags&&yy(jo(t,n.nodeIndex).componentView,A,s,c,f,b)):yy(t,A,s,c,f,b),16777216&n.flags){const F=jo(t,n.nodeIndex).viewContainer._embeddedViews;for(let V=0;V<F.length;V++)_y(F[V],s,c,f,b)}1&n.flags&&!n.element.name&&Qb(t,s,n.nodeIndex+1,n.nodeIndex+n.childCount,c,f,b)}}function yy(t,n,s,c,f,b){const A=t.renderer;switch(s){case 1:A.appendChild(c,n);break;case 2:A.insertBefore(c,n,f);break;case 3:A.removeChild(c,n);break;case 0:b.push(n)}}const s2=/^:([^:]+):(.+)$/;function i0(t){if(":"===t[0]){const n=t.match(s2);return[n[1],n[2]]}return["",t]}function o0(t){let n=0;for(let s=0;s<t.length;s++)n|=t[s].flags;return n}function a2(t,n){let s="";for(let c=0;c<2*t;c+=2)s=s+n[c]+Ci(n[c+1]);return s+n[2*t]}function l2(t,n,s,c,f,b,A,F,V,q,oe,Pe,je,ct,Dt,tn,Ut,Hn,Cn,kr){switch(t){case 1:return n+Ci(s)+c;case 2:return n+Ci(s)+c+Ci(f)+b;case 3:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F;case 4:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q;case 5:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q+Ci(oe)+Pe;case 6:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q+Ci(oe)+Pe+Ci(je)+ct;case 7:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q+Ci(oe)+Pe+Ci(je)+ct+Ci(Dt)+tn;case 8:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q+Ci(oe)+Pe+Ci(je)+ct+Ci(Dt)+tn+Ci(Ut)+Hn;case 9:return n+Ci(s)+c+Ci(f)+b+Ci(A)+F+Ci(V)+q+Ci(oe)+Pe+Ci(je)+ct+Ci(Dt)+tn+Ci(Ut)+Hn+Ci(Cn)+kr;default:throw new Error("Does not support more than 9 expressions")}}function Ci(t){return null!=t?t.toString():""}const c2={},Gg={},u2=jl(Mo),h2=jl(ed),d2=jl(ip);function f2(t,n,s,c){return s=Se(s),{index:-1,deps:$g(c,be(n)),flags:t,token:n,value:s}}function p2(t){const n={},s=[];let c=null;for(let f=0;f<t.length;f++){const b=t[f];b.token===Rd&&(c=b.value),1073741824&b.flags&&s.push(b.token),b.index=f,n[jl(b.token)]=b}return{factory:null,providersByKey:n,providers:t,modules:s,scope:c}}function lc(t,n,s=Mo.THROW_IF_NOT_FOUND){const c=gt(t);try{if(8&n.flags)return n.token;if(2&n.flags&&(s=null),1&n.flags)return t._parent.get(n.token,s);const f=n.tokenKey;switch(f){case u2:case h2:case d2:return t}const b=t._def.providersByKey[f];let A;if(b){let F=t._providers[b.index];return void 0===F&&(F=t._providers[b.index]=s0(t,b)),F===Gg?void 0:F}if((A=gr(n.token))&&function(t,n){const s=Se(n.providedIn);return null!=s&&("any"===s||s===t._def.scope||function(t,n){return t._def.modules.indexOf(n)>-1}(t,s))}(t,A)){const F=t._providers.length;return t._def.providers[F]=t._def.providersByKey[n.tokenKey]={flags:5120,value:A.factory,deps:[],index:F,token:n.token},t._providers[F]=Gg,t._providers[F]=s0(t,t._def.providersByKey[n.tokenKey])}return 4&n.flags?s:t._parent.get(n.token,s)}finally{gt(c)}}function s0(t,n){let s;switch(201347067&n.flags){case 512:s=function(t,n,s){const c=s.length;switch(c){case 0:return new n;case 1:return new n(lc(t,s[0]));case 2:return new n(lc(t,s[0]),lc(t,s[1]));case 3:return new n(lc(t,s[0]),lc(t,s[1]),lc(t,s[2]));default:const f=[];for(let b=0;b<c;b++)f[b]=lc(t,s[b]);return new n(...f)}}(t,n.value,n.deps);break;case 1024:s=function(t,n,s){const c=s.length;switch(c){case 0:return n();case 1:return n(lc(t,s[0]));case 2:return n(lc(t,s[0]),lc(t,s[1]));case 3:return n(lc(t,s[0]),lc(t,s[1]),lc(t,s[2]));default:const f=[];for(let b=0;b<c;b++)f[b]=lc(t,s[b]);return n(...f)}}(t,n.value,n.deps);break;case 2048:s=lc(t,n.deps[0]);break;case 256:s=n.value}return s!==Gg&&null!==s&&"object"==typeof s&&!(131072&n.flags)&&"function"==typeof s.ngOnDestroy&&(n.flags|=131072),void 0===s?Gg:s}function a0(t,n){const s=t.viewContainer._embeddedViews;if((null==n||n>=s.length)&&(n=s.length-1),n<0)return null;const c=s[n];return c.viewContainerParent=null,za(s,n),Ai.dirtyParentQueries(c),l0(c),c}function tx(t,n,s){const c=n?Hg(n,n.def.lastRenderRootNode):t.renderElement,f=s.renderer.parentNode(c),b=s.renderer.nextSibling(c);_y(s,2,f,b,void 0)}function l0(t){_y(t,3,null,null,void 0)}const D2={};function S2(t,n,s,c,f,b){return new I2(t,n,s,c,f,b)}function nx(t){return t.viewDefFactory}class I2 extends wm{constructor(n,s,c,f,b,A){super(),this.selector=n,this.componentType=s,this._inputs=f,this._outputs=b,this.ngContentSelectors=A,this.viewDefFactory=c}get inputs(){const n=[],s=this._inputs;for(let c in s)n.push({propName:c,templateName:s[c]});return n}get outputs(){const n=[];for(let s in this._outputs)n.push({propName:s,templateName:this._outputs[s]});return n}create(n,s,c,f){if(!f)throw new Error("ngModule should be provided");const b=Dm(this.viewDefFactory),A=b.nodes[0].element.componentProvider.nodeIndex,F=Ai.createRootView(n,s||[],c,b,f,D2),V=op(F,A).instance;return c&&F.renderer.setAttribute(jo(F,0).renderElement,"ng-version",Wv.full),new M2(F,new Wg(F),V)}}class M2 extends Hv{constructor(n,s,c){super(),this._view=n,this._viewRef=s,this._component=c,this._elDef=this._view.def.nodes[0],this.hostView=s,this.changeDetectorRef=s,this.instance=c}get location(){return new sd(jo(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Zg(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(n){this._viewRef.onDestroy(n)}}function A2(t,n,s){return new P2(t,n,s)}class P2{constructor(n,s,c){this._view=n,this._elDef=s,this._data=c,this._embeddedViews=[]}get element(){return new sd(this._data.renderElement)}get injector(){return new Zg(this._view,this._elDef)}get parentInjector(){let n=this._view,s=this._elDef.parent;for(;!s&&n;)s=Tm(n),n=n.parent;return n?new Zg(n,s):new Zg(this._view,null)}clear(){for(let s=this._embeddedViews.length-1;s>=0;s--){const c=a0(this._data,s);Ai.destroyView(c)}}get(n){const s=this._embeddedViews[n];if(s){const c=new Wg(s);return c.attachToViewContainerRef(this),c}return null}get length(){return this._embeddedViews.length}createEmbeddedView(n,s,c){const f=n.createEmbeddedView(s||{});return this.insert(f,c),f}createComponent(n,s,c,f,b){const A=c||this.parentInjector;!b&&!(n instanceof $v)&&(b=A.get(ip));const F=n.create(A,f,void 0,b);return this.insert(F.hostView,s),F}insert(n,s){if(n.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const c=n;return function(t,n,s,c){let f=n.viewContainer._embeddedViews;null==s&&(s=f.length),c.viewContainerParent=t,Ec(f,s,c),function(t,n){const s=t0(n);if(!s||s===t||16&n.state)return;n.state|=16;let c=s.template._projectedViews;c||(c=s.template._projectedViews=[]),c.push(n),function(t,n){if(4&n.flags)return;t.nodeFlags|=4,n.flags|=4;let s=n.parent;for(;s;)s.childFlags|=4,s=s.parent}(n.parent.def,n.parentNodeDef)}(n,c),Ai.dirtyParentQueries(c),tx(n,s>0?f[s-1]:null,c)}(this._view,this._data,s,c._view),c.attachToViewContainerRef(this),n}move(n,s){if(n.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const c=this._embeddedViews.indexOf(n._view);return function(t,n,s){const c=t.viewContainer._embeddedViews,f=c[n];za(c,n),null==s&&(s=c.length),Ec(c,s,f),Ai.dirtyParentQueries(f),l0(f),tx(t,s>0?c[s-1]:null,f)}(this._data,c,s),n}indexOf(n){return this._embeddedViews.indexOf(n._view)}remove(n){const s=a0(this._data,n);s&&Ai.destroyView(s)}detach(n){const s=a0(this._data,n);return s?new Wg(s):null}}function O2(t){return new Wg(t)}class Wg{constructor(n){this._view=n,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const n=[];return _y(t,0,void 0,void 0,n),n}(this._view)}get context(){return this._view.context}set context(n){this._view.context=n}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){qb(this._view)}detach(){this._view.state&=-5}detectChanges(){const n=this._view.root.rendererFactory;n.begin&&n.begin();try{Ai.checkAndUpdateView(this._view)}finally{n.end&&n.end()}}checkNoChanges(){Ai.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(n){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(n)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Ai.destroyView(this._view)}detachFromAppRef(){this._appRef=null,l0(this._view),Ai.dirtyParentQueries(this._view)}attachToAppRef(n){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}attachToViewContainerRef(n){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=n}}function k2(t,n){return new R2(t,n)}class R2 extends Op{constructor(n,s){super(),this._parentView=n,this._def=s}createEmbeddedView(n){return new Wg(Ai.createEmbeddedView(this._parentView,this._def,this._def.element.template,n))}get elementRef(){return new sd(jo(this._parentView,this._def.nodeIndex).renderElement)}}function rx(t,n){return new Zg(t,n)}class Zg{constructor(n,s){this.view=n,this.elDef=s}get(n,s=Mo.THROW_IF_NOT_FOUND){return Ai.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:n,tokenKey:jl(n)},s)}}function L2(t,n){const s=t.def.nodes[n];if(1&s.flags){const c=jo(t,s.nodeIndex);return s.element.template?c.template:c.renderElement}if(2&s.flags)return Vg(t,s.nodeIndex).renderText;if(20240&s.flags)return op(t,s.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${n}`)}function ix(t,n,s,c){return new F2(t,n,s,c)}class F2{constructor(n,s,c,f){this._moduleType=n,this._parent=s,this._bootstrapComponents=c,this._def=f,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const n=t._def,s=t._providers=ys(n.providers.length);for(let c=0;c<n.providers.length;c++){const f=n.providers[c];4096&f.flags||void 0===s[c]&&(s[c]=s0(t,f))}}(this)}get(n,s=Mo.THROW_IF_NOT_FOUND,c=nr.Default){let f=0;return c&nr.SkipSelf?f|=1:c&nr.Self&&(f|=4),lc(this,{token:n,tokenKey:jl(n),flags:f},s)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Em)}destroy(){if(this._destroyed)throw new Error(`The ng module ${be(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,n){const s=t._def,c=new Set;for(let f=0;f<s.providers.length;f++)if(131072&s.providers[f].flags){const A=t._providers[f];if(A&&A!==Gg){const F=A.ngOnDestroy;"function"==typeof F&&!c.has(A)&&(F.apply(A),c.add(A))}}}(this),this._destroyListeners.forEach(n=>n())}onDestroy(n){this._destroyListeners.push(n)}}const N2=jl(Tb),B2=jl(sd),z2=jl(jg),j2=jl(Op),ox=jl(Yv),V2=jl(Mo),U2=jl(ed);function H2(t,n,s,c,f,b,A,F){const V=[];if(A)for(let oe in A){const[Pe,je]=A[oe];V[Pe]={flags:8,name:oe,nonMinifiedName:je,ns:null,securityContext:null,suffix:null}}const q=[];if(F)for(let oe in F)q.push({type:1,propName:oe,target:null,eventName:F[oe]});return vy(t,n|=16384,s,c,f,f,b,V,q)}function $2(t,n,s){return vy(-1,t|=16,null,0,n,n,s)}function G2(t,n,s,c,f){return vy(-1,t,n,0,s,c,f)}function vy(t,n,s,c,f,b,A,F,V){const{matchedQueries:q,references:oe,matchedQueryIds:Pe}=n0(s);V||(V=[]),F||(F=[]),b=Se(b);const je=$g(A,be(f));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:n,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:q,matchedQueryIds:Pe,references:oe,ngContentIndex:-1,childCount:c,bindings:F,bindingFlags:o0(F),outputs:V,element:null,provider:{token:f,value:b,deps:je},text:null,query:null,ngContent:null}}function W2(t,n){return sx(t,n)}function Z2(t,n){let s=t;for(;s.parent&&!kp(s);)s=s.parent;return c0(s.parent,Tm(s),!0,n.provider.value,n.provider.deps)}function q2(t,n){const c=c0(t,n.parent,(32768&n.flags)>0,n.provider.value,n.provider.deps);if(n.outputs.length)for(let f=0;f<n.outputs.length;f++){const b=n.outputs[f],A=c[b.propName];if(!so(A))throw new Error(`@Output ${b.propName} not initialized in '${c.constructor.name}'.`);{const F=A.subscribe(X2(t,n.parent.nodeIndex,b.eventName));t.disposables[n.outputIndex+f]=F.unsubscribe.bind(F)}}return c}function X2(t,n,s){return c=>Xb(t,n,s,c)}function sx(t,n){const s=(8192&n.flags)>0,c=n.provider;switch(201347067&n.flags){case 512:return c0(t,n.parent,s,c.value,c.deps);case 1024:return function(t,n,s,c,f){const b=f.length;switch(b){case 0:return c();case 1:return c(cc(t,n,s,f[0]));case 2:return c(cc(t,n,s,f[0]),cc(t,n,s,f[1]));case 3:return c(cc(t,n,s,f[0]),cc(t,n,s,f[1]),cc(t,n,s,f[2]));default:const A=[];for(let F=0;F<b;F++)A.push(cc(t,n,s,f[F]));return c(...A)}}(t,n.parent,s,c.value,c.deps);case 2048:return cc(t,n.parent,s,c.deps[0]);case 256:return c.value}}function c0(t,n,s,c,f){const b=f.length;switch(b){case 0:return new c;case 1:return new c(cc(t,n,s,f[0]));case 2:return new c(cc(t,n,s,f[0]),cc(t,n,s,f[1]));case 3:return new c(cc(t,n,s,f[0]),cc(t,n,s,f[1]),cc(t,n,s,f[2]));default:const A=[];for(let F=0;F<b;F++)A.push(cc(t,n,s,f[F]));return new c(...A)}}const Rp={};function cc(t,n,s,c,f=Mo.THROW_IF_NOT_FOUND){if(8&c.flags)return c.token;const b=t;2&c.flags&&(f=null);const A=c.tokenKey;A===ox&&(s=!(!n||!n.element.componentView)),n&&1&c.flags&&(s=!1,n=n.parent);let F=t;for(;F;){if(n)switch(A){case N2:return ax(F,n,s).renderer;case B2:return new sd(jo(F,n.nodeIndex).renderElement);case z2:return jo(F,n.nodeIndex).viewContainer;case j2:if(n.element.template)return jo(F,n.nodeIndex).template;break;case ox:return O2(ax(F,n,s));case V2:case U2:return rx(F,n);default:const q=(s?n.element.allProviders:n.element.publicProviders)[A];if(q){let oe=op(F,q.nodeIndex);return oe||(oe={instance:sx(F,q)},F.nodes[q.nodeIndex]=oe),oe.instance}}s=kp(F),n=Tm(F),F=F.parent,4&c.flags&&(F=null)}const V=b.root.injector.get(c.token,Rp);return V!==Rp||f===Rp?V:b.root.ngModule.injector.get(c.token,f)}function ax(t,n,s){let c;if(s)c=jo(t,n.nodeIndex).componentView;else for(c=t;c.parent&&!kp(c);)c=c.parent;return c}function ld(t,n,s,c,f,b){if(32768&s.flags){const V=jo(t,s.parent.nodeIndex).componentView;2&V.def.flags&&(V.state|=8)}if(n.instance[s.bindings[c].name]=f,524288&s.flags){b=b||{};const V=uu.unwrap(t.oldValues[s.bindingIndex+c]);b[s.bindings[c].nonMinifiedName]=new uc(V,f,0!=(2&t.state))}return t.oldValues[s.bindingIndex+c]=f,b}function u0(t,n){if(!(t.def.nodeFlags&n))return;const s=t.def.nodes;let c=0;for(let f=0;f<s.length;f++){const b=s[f];let A=b.parent;for(!A&&b.flags&n&&lx(t,f,b.flags&n,c++),0==(b.childFlags&n)&&(f+=b.childCount);A&&1&A.flags&&f===A.nodeIndex+A.childCount;)A.directChildFlags&n&&(c=J2(t,A,n,c)),A=A.parent}}function J2(t,n,s,c){for(let f=n.nodeIndex+1;f<=n.nodeIndex+n.childCount;f++){const b=t.def.nodes[f];b.flags&s&&lx(t,f,b.flags&s,c++),f+=b.childCount}return c}function lx(t,n,s,c){const f=op(t,n);if(!f)return;const b=f.instance;!b||(Ai.setCurrentNode(t,n),1048576&s&&gy(t,512,c)&&b.ngAfterContentInit(),2097152&s&&b.ngAfterContentChecked(),4194304&s&&gy(t,768,c)&&b.ngAfterViewInit(),8388608&s&&b.ngAfterViewChecked(),131072&s&&b.ngOnDestroy())}class cx extends Em{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const s=Xn(n);return new h0(s,this.ngModule)}}function ux(t){const n=[];for(let s in t)t.hasOwnProperty(s)&&n.push({propName:t[s],templateName:s});return n}const hx=new Ki("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>R});class h0 extends wm{constructor(n,s){super(),this.componentDef=n,this.ngModule=s,this.componentType=n.type,this.selector=n.selectors.map(en).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return ux(this.componentDef.inputs)}get outputs(){return ux(this.componentDef.outputs)}create(n,s,c,f){const b=(f=f||this.ngModule)?function(t,n){return{get:(s,c,f)=>{const b=t.get(s,Rp,f);return b!==Rp||c===Rp?b:n.get(s,c,f)}}}(n,f.injector):n,A=b.get(hy,br),F=b.get(Gv,null),V=A.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",oe=c?Hm(V,c,this.componentDef.encapsulation):Td(A.createRenderer(null,this.componentDef),q,function(t){const n=t.toLowerCase();return"svg"===n?Ta:"math"===n?Q:null}(q)),Pe=this.componentDef.onPush?576:528,je=mg(),ct=Zp(0,null,null,1,0,null,null,null,null,null),Dt=mp(null,ct,je,Pe,null,null,A,V,F,b);let tn,Ut;El(Dt);try{const Hn=V_(oe,this.componentDef,Dt,A,V);if(oe)if(c)Oo(V,oe,["ng-version",Wv.full]);else{const{attrs:Cn,classes:kr}=function(t){const n=[],s=[];let c=1,f=2;for(;c<t.length;){let b=t[c];if("string"==typeof b)2===f?""!==b&&n.push(b,t[++c]):8===f&&s.push(b);else{if(!Ee(f))break;f=b}c++}return{attrs:n,classes:s}}(this.componentDef.selectors[0]);Cn&&Oo(V,oe,Cn),kr&&kr.length>0&&M(V,oe,kr.join(" "))}if(Ut=Ps(ct,20),void 0!==s){const Cn=Ut.projection=[];for(let kr=0;kr<this.ngContentSelectors.length;kr++){const ci=s[kr];Cn.push(null!=ci?Array.from(ci):null)}}tn=pg(Hn,this.componentDef,Dt,je,[U_]),Pf(ct,Dt,null)}finally{ql()}return new dx(this.componentType,tn,Pp(Ut,Dt),Dt,Ut)}}class dx extends Hv{constructor(n,s,c,f,b){super(),this.location=c,this._rootLView=f,this._tNode=b,this.instance=s,this.hostView=this.changeDetectorRef=new BC(f),this.componentType=n}get injector(){return new wc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function fx(t,n,s,c){return ir(()=>{const f=t;null!==n&&(f.hasOwnProperty("decorators")&&void 0!==f.decorators?f.decorators.push(...n):f.decorators=n),null!==s&&(f.ctorParameters=s),null!==c&&(f.propDecorators=f.hasOwnProperty("propDecorators")&&void 0!==f.propDecorators?Object.assign(Object.assign({},f.propDecorators),c):c)})}const Sm=new Map;function rT(t,n){const s=Sm.get(t);px(t,s&&s.moduleType,n.moduleType),Sm.set(t,n)}function px(t,n,s){if(n&&n!==s)throw new Error(`Duplicate module registered for ${t} - ${be(n)} vs ${be(n.name)}`)}function mx(t){const n=new Set;!function s(c){const f=Mr(c,!0),b=f.id;if(null!==b){px(b,Sm.get(b),c),Sm.set(b,c)}const A=nn(f.imports);for(const F of A)n.has(F)||(n.add(F),s(F))}(t)}function gx(t){return Sm.get(t)||an[t]}class _x extends ip{constructor(n,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cx(this);const c=Mr(n),f=n[ue]||null;f&&ay(f),this._bootstrapComponents=nn(c.bootstrap),this._r3Injector=nf(n,s,[{provide:ip,useValue:this},{provide:Em,useValue:this.componentFactoryResolver}],be(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,s=Mo.THROW_IF_NOT_FOUND,c=nr.Default){return n===Mo||n===ip||n===ed?this:this._r3Injector.get(n,s,c)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class by extends Qv{constructor(n){super(),this.moduleType=n,null!==Mr(n)&&mx(n)}create(n){return new _x(this.moduleType,n)}}function yx(t,n,s){const c=co()+t,f=En();return f[c]===Dn?_h(f,c,s?n.call(s):n()):Sp(f,c)}function vx(t,n,s,c){return d0(En(),co(),t,n,s,c)}function bx(t,n,s,c,f){return f0(En(),co(),t,n,s,c,f)}function xx(t,n,s,c,f,b){return p0(En(),co(),t,n,s,c,f,b)}function wx(t,n,s,c,f,b,A){return m0(En(),co(),t,n,s,c,f,b,A)}function Ex(t,n,s,c,f,b,A,F){const V=co()+t,q=En(),oe=dl(q,V,s,c,f,b);return hl(q,V+4,A)||oe?_h(q,V+5,F?n.call(F,s,c,f,b,A):n(s,c,f,b,A)):Sp(q,V+5)}function Cx(t,n,s,c,f,b,A,F,V){const q=co()+t,oe=En(),Pe=dl(oe,q,s,c,f,b);return rd(oe,q+4,A,F)||Pe?_h(oe,q+6,V?n.call(V,s,c,f,b,A,F):n(s,c,f,b,A,F)):Sp(oe,q+6)}function Tx(t,n,s,c,f,b,A,F,V,q){const oe=co()+t,Pe=En();let je=dl(Pe,oe,s,c,f,b);return lm(Pe,oe+4,A,F,V)||je?_h(Pe,oe+7,q?n.call(q,s,c,f,b,A,F,V):n(s,c,f,b,A,F,V)):Sp(Pe,oe+7)}function Dx(t,n,s,c,f,b,A,F,V,q,oe){const Pe=co()+t,je=En(),ct=dl(je,Pe,s,c,f,b);return dl(je,Pe+4,A,F,V,q)||ct?_h(je,Pe+8,oe?n.call(oe,s,c,f,b,A,F,V,q):n(s,c,f,b,A,F,V,q)):Sp(je,Pe+8)}function Sx(t,n,s,c){return g0(En(),co(),t,n,s,c)}function qg(t,n){const s=t[n];return s===Dn?void 0:s}function d0(t,n,s,c,f,b){const A=n+s;return hl(t,A,f)?_h(t,A+1,b?c.call(b,f):c(f)):qg(t,A+1)}function f0(t,n,s,c,f,b,A){const F=n+s;return rd(t,F,f,b)?_h(t,F+2,A?c.call(A,f,b):c(f,b)):qg(t,F+2)}function p0(t,n,s,c,f,b,A,F){const V=n+s;return lm(t,V,f,b,A)?_h(t,V+3,F?c.call(F,f,b,A):c(f,b,A)):qg(t,V+3)}function m0(t,n,s,c,f,b,A,F,V){const q=n+s;return dl(t,q,f,b,A,F)?_h(t,q+4,V?c.call(V,f,b,A,F):c(f,b,A,F)):qg(t,q+4)}function g0(t,n,s,c,f,b){let A=n+s,F=!1;for(let V=0;V<f.length;V++)hl(t,A++,f[V])&&(F=!0);return F?_h(t,A,c.apply(b,f)):qg(t,A)}function Ix(t,n){const s=Si();let c;const f=t+20;s.firstCreatePass?(c=function(t,n){if(n)for(let s=n.length-1;s>=0;s--){const c=n[s];if(t===c.name)return c}throw new yt("302",`The pipe '${t}' could not be found!`)}(n,s.pipeRegistry),s.data[f]=c,c.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(f,c.onDestroy)):c=s.data[f];const b=c.factory||(c.factory=Gs(c.type)),A=Er(Pn);try{const F=Uc(!1),V=b();return Uc(F),vg(s,En(),f,V),V}finally{Er(A)}}function Mx(t,n,s){const c=t+20,f=En(),b=Hi(f,c);return Kg(f,Xg(f,c)?d0(f,co(),n,b.transform,s,b):b.transform(s))}function Ax(t,n,s,c){const f=t+20,b=En(),A=Hi(b,f);return Kg(b,Xg(b,f)?f0(b,co(),n,A.transform,s,c,A):A.transform(s,c))}function Px(t,n,s,c,f){const b=t+20,A=En(),F=Hi(A,b);return Kg(A,Xg(A,b)?p0(A,co(),n,F.transform,s,c,f,F):F.transform(s,c,f))}function Ox(t,n,s,c,f,b){const A=t+20,F=En(),V=Hi(F,A);return Kg(F,Xg(F,A)?m0(F,co(),n,V.transform,s,c,f,b,V):V.transform(s,c,f,b))}function kx(t,n,s){const c=t+20,f=En(),b=Hi(f,c);return Kg(f,Xg(f,c)?g0(f,co(),n,b.transform,s,b):b.transform.apply(b,s))}function Xg(t,n){return t[1].data[n].pure}function Kg(t,n){return uu.isWrapped(n)&&(n=uu.unwrap(n),t[rl()]=Dn),n}function _0(t){return n=>{setTimeout(t,void 0,n)}}const jd=class extends O.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,s,c){var f,b,A;let F=n,V=s||(()=>null),q=c;if(n&&"object"==typeof n){const Pe=n;F=null===(f=Pe.next)||void 0===f?void 0:f.bind(Pe),V=null===(b=Pe.error)||void 0===b?void 0:b.bind(Pe),q=null===(A=Pe.complete)||void 0===A?void 0:A.bind(Pe)}this.__isAsync&&(V=_0(V),F&&(F=_0(F)),q&&(q=_0(q)));const oe=super.subscribe({next:F,error:V,complete:q});return n instanceof d.w&&n.add(oe),oe}};function sT(){return this._results[Nd()]()}class Yg{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Nd(),c=Yg.prototype;c[s]||(c[s]=sT)}get changes(){return this._changes||(this._changes=new jd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,s){return this._results.reduce(n,s)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,s){const c=this;c.dirty=!1;const f=ns(n);(this._changesDetected=!function(t,n,s){if(t.length!==n.length)return!1;for(let c=0;c<t.length;c++){let f=t[c],b=n[c];if(s&&(f=s(f),b=s(b)),b!==f)return!1}return!0}(c._results,f,s))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class y0{constructor(n){this.queryList=n,this.matches=null}clone(){return new y0(this.queryList)}setDirty(){this.queryList.setDirty()}}class v0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const s=n.queries;if(null!==s){const c=null!==n.contentQueries?n.contentQueries[0]:s.length,f=[];for(let b=0;b<c;b++){const A=s.getByIndex(b);f.push(this.queries[A.indexInDeclarationView].clone())}return new v0(f)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let s=0;s<this.queries.length;s++)null!==Ux(n,s).matches&&this.queries[s].setDirty()}}class Rx{constructor(n,s,c=null){this.predicate=n,this.flags=s,this.read=c}}class b0{constructor(n=[]){this.queries=n}elementStart(n,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(n,s)}elementEnd(n){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(n)}embeddedTView(n){let s=null;for(let c=0;c<this.length;c++){const f=null!==s?s.length:0,b=this.getByIndex(c).embeddedTView(n,f);b&&(b.indexInDeclarationView=c,null!==s?s.push(b):s=[b])}return null!==s?new b0(s):null}template(n,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(n,s)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class x0{constructor(n,s=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(n,s){this.isApplyingToNode(s)&&this.matchTNode(n,s)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,s){this.elementStart(n,s)}embeddedTView(n,s){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,s),new x0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=n.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(n,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const b=c[f];this.matchTNodeWithReadOption(n,s,cT(s,b)),this.matchTNodeWithReadOption(n,s,Wc(s,n,b,!1,!1))}else c===Op?4&s.type&&this.matchTNodeWithReadOption(n,s,-1):this.matchTNodeWithReadOption(n,s,Wc(s,n,c,!1,!1))}matchTNodeWithReadOption(n,s,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===sd||f===jg||f===Op&&4&s.type)this.addMatch(s.index,-2);else{const b=Wc(s,n,f,!1,!1);null!==b&&this.addMatch(s.index,b)}else this.addMatch(s.index,c)}}addMatch(n,s){null===this.matches?this.matches=[n,s]:this.matches.push(n,s)}}function cT(t,n){const s=t.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===n)return s[c+1];return null}function hT(t,n,s,c){return-1===s?function(t,n){return 11&t.type?Pp(t,n):4&t.type?zg(t,n):null}(n,t):-2===s?function(t,n,s){return s===sd?Pp(n,t):s===Op?zg(n,t):s===jg?Ub(n,t):void 0}(t,n,c):Ro(t,t[1],s,n)}function Lx(t,n,s,c){const f=n[19].queries[c];if(null===f.matches){const b=t.data,A=s.matches,F=[];for(let V=0;V<A.length;V+=2){const q=A[V];F.push(q<0?null:hT(n,b[q],A[V+1],s.metadata.read))}f.matches=F}return f.matches}function w0(t,n,s,c){const f=t.queries.getByIndex(s),b=f.matches;if(null!==b){const A=Lx(t,n,f,s);for(let F=0;F<b.length;F+=2){const V=b[F];if(V>0)c.push(A[F/2]);else{const q=b[F+1],oe=n[-V];for(let Pe=10;Pe<oe.length;Pe++){const je=oe[Pe];je[17]===je[3]&&w0(je[1],je,q,c)}if(null!==oe[9]){const Pe=oe[9];for(let je=0;je<Pe.length;je++){const ct=Pe[je];w0(ct[1],ct,q,c)}}}}}return c}function Fx(t){const n=En(),s=Si(),c=Gu();bu(c+1);const f=Ux(s,c);if(t.dirty&&tl(n)===(2==(2&f.metadata.flags))){if(null===f.matches)t.reset([]);else{const b=f.crossesNgTemplate?w0(s,n,c,[]):Lx(s,n,f,c);t.reset(b,Cb),t.notifyOnChanges()}return!0}return!1}function Nx(t,n,s){const c=Si();c.firstCreatePass&&(Vx(c,new Rx(t,n,s),-1),2==(2&n)&&(c.staticViewQueries=!0)),jx(c,En(),n)}function Bx(t,n,s,c){const f=Si();if(f.firstCreatePass){const b=Po();Vx(f,new Rx(n,s,c),b.index),function(t,n){const s=t.contentQueries||(t.contentQueries=[]);n!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,n)}(f,t),2==(2&s)&&(f.staticContentQueries=!0)}jx(f,En(),s)}function zx(){return t=En(),n=Gu(),t[19].queries[n].queryList;var t,n}function jx(t,n,s){const c=new Yg(4==(4&s));$m(t,n,c,c.destroy),null===n[19]&&(n[19]=new v0),n[19].queries.push(new y0(c))}function Vx(t,n,s){null===t.queries&&(t.queries=new b0),t.queries.track(new x0(n,s))}function Ux(t,n){return t.queries.getByIndex(n)}function Hx(t,n){return zg(t,n)}const kc=(()=>({\u0275\u0275attribute:Ip,\u0275\u0275attributeInterpolate1:yh,\u0275\u0275attributeInterpolate2:Qf,\u0275\u0275attributeInterpolate3:cm,\u0275\u0275attributeInterpolate4:um,\u0275\u0275attributeInterpolate5:hm,\u0275\u0275attributeInterpolate6:Mp,\u0275\u0275attributeInterpolate7:_g,\u0275\u0275attributeInterpolate8:dm,\u0275\u0275attributeInterpolateV:fm,\u0275\u0275defineComponent:vt,\u0275\u0275defineDirective:sr,\u0275\u0275defineInjectable:Zn,\u0275\u0275defineInjector:Ur,\u0275\u0275defineNgModule:wn,\u0275\u0275definePipe:tr,\u0275\u0275directiveInject:Pn,\u0275\u0275getInheritedFactory:Na,\u0275\u0275inject:ln,\u0275\u0275injectAttribute:Il,\u0275\u0275invalidFactory:Yt,\u0275\u0275invalidFactoryDep:At,\u0275\u0275templateRefExtractor:Hx,\u0275\u0275NgOnChangesFeature:gu,\u0275\u0275ProvidersFeature:vb,\u0275\u0275CopyDefinitionFeature:G_,\u0275\u0275InheritDefinitionFeature:nm,\u0275\u0275nextContext:wo,\u0275\u0275namespaceHTML:qu,\u0275\u0275namespaceMathML:mc,\u0275\u0275namespaceSVG:di,\u0275\u0275enableBindings:nl,\u0275\u0275disableBindings:Gl,\u0275\u0275elementStart:Mn,\u0275\u0275elementEnd:bn,\u0275\u0275element:Wn,\u0275\u0275elementContainerStart:yr,\u0275\u0275elementContainerEnd:zn,\u0275\u0275elementContainer:_i,\u0275\u0275pureFunction0:yx,\u0275\u0275pureFunction1:vx,\u0275\u0275pureFunction2:bx,\u0275\u0275pureFunction3:xx,\u0275\u0275pureFunction4:wx,\u0275\u0275pureFunction5:Ex,\u0275\u0275pureFunction6:Cx,\u0275\u0275pureFunction7:Tx,\u0275\u0275pureFunction8:Dx,\u0275\u0275pureFunctionV:Sx,\u0275\u0275getCurrentView:Nr,\u0275\u0275restoreView:Uu,\u0275\u0275listener:xo,\u0275\u0275projection:fl,\u0275\u0275syntheticHostProperty:Ov,\u0275\u0275syntheticHostListener:ti,\u0275\u0275pipeBind1:Mx,\u0275\u0275pipeBind2:Ax,\u0275\u0275pipeBind3:Px,\u0275\u0275pipeBind4:Ox,\u0275\u0275pipeBindV:kx,\u0275\u0275projectionDef:Bs,\u0275\u0275hostProperty:Pv,\u0275\u0275property:pn,\u0275\u0275propertyInterpolate:Mi,\u0275\u0275propertyInterpolate1:zo,\u0275\u0275propertyInterpolate2:ta,\u0275\u0275propertyInterpolate3:$i,\u0275\u0275propertyInterpolate4:Ao,\u0275\u0275propertyInterpolate5:ya,\u0275\u0275propertyInterpolate6:Eo,\u0275\u0275propertyInterpolate7:Yo,\u0275\u0275propertyInterpolate8:Ss,\u0275\u0275propertyInterpolateV:xs,\u0275\u0275pipe:Ix,\u0275\u0275queryRefresh:Fx,\u0275\u0275viewQuery:Nx,\u0275\u0275loadQuery:zx,\u0275\u0275contentQuery:Bx,\u0275\u0275reference:bg,\u0275\u0275classMap:Pg,\u0275\u0275classMapInterpolate1:T1,\u0275\u0275classMapInterpolate2:D1,\u0275\u0275classMapInterpolate3:S1,\u0275\u0275classMapInterpolate4:I1,\u0275\u0275classMapInterpolate5:M1,\u0275\u0275classMapInterpolate6:A1,\u0275\u0275classMapInterpolate7:P1,\u0275\u0275classMapInterpolate8:O1,\u0275\u0275classMapInterpolateV:k1,\u0275\u0275styleMap:zl,\u0275\u0275styleMapInterpolate1:R1,\u0275\u0275styleMapInterpolate2:L1,\u0275\u0275styleMapInterpolate3:F1,\u0275\u0275styleMapInterpolate4:N1,\u0275\u0275styleMapInterpolate5:B1,\u0275\u0275styleMapInterpolate6:z1,\u0275\u0275styleMapInterpolate7:j1,\u0275\u0275styleMapInterpolate8:V1,\u0275\u0275styleMapInterpolateV:U1,\u0275\u0275styleProp:ml,\u0275\u0275stylePropInterpolate1:wv,\u0275\u0275stylePropInterpolate2:Ev,\u0275\u0275stylePropInterpolate3:Cv,\u0275\u0275stylePropInterpolate4:Tv,\u0275\u0275stylePropInterpolate5:Dv,\u0275\u0275stylePropInterpolate6:Sv,\u0275\u0275stylePropInterpolate7:Iv,\u0275\u0275stylePropInterpolate8:Mv,\u0275\u0275stylePropInterpolateV:Av,\u0275\u0275classProp:gl,\u0275\u0275advance:wi,\u0275\u0275template:yg,\u0275\u0275text:C1,\u0275\u0275textInterpolate:fv,\u0275\u0275textInterpolate1:iy,\u0275\u0275textInterpolate2:pv,\u0275\u0275textInterpolate3:mv,\u0275\u0275textInterpolate4:gv,\u0275\u0275textInterpolate5:_v,\u0275\u0275textInterpolate6:yv,\u0275\u0275textInterpolate7:vv,\u0275\u0275textInterpolate8:bv,\u0275\u0275textInterpolateV:xv,\u0275\u0275i18n:pb,\u0275\u0275i18nAttributes:mb,\u0275\u0275i18nExp:Bv,\u0275\u0275i18nStart:Fv,\u0275\u0275i18nEnd:Nv,\u0275\u0275i18nApply:gb,\u0275\u0275i18nPostprocess:_b,\u0275\u0275resolveWindow:W,\u0275\u0275resolveDocument:le,\u0275\u0275resolveBody:Ze,\u0275\u0275setComponentScope:wt,\u0275\u0275setNgModuleScope:Jt,\u0275\u0275sanitizeHtml:li,\u0275\u0275sanitizeStyle:xd,\u0275\u0275sanitizeResourceUrl:ha,\u0275\u0275sanitizeScript:qo,\u0275\u0275sanitizeUrl:rh,\u0275\u0275sanitizeUrlOrResourceUrl:Bh,\u0275\u0275trustConstantHtml:Cs,\u0275\u0275trustConstantResourceUrl:bo,forwardRef:Ye,resolveForwardRef:Se}))();let Im=null;function _T(){Im=null}const Qg=[];let E0=!1;function $x(){if(!E0){E0=!0;try{for(let t=Qg.length-1;t>=0;t--){const{moduleType:n,ngModule:s}=Qg[t];s.declarations&&s.declarations.every(Gx)&&(Qg.splice(t,1),bT(n,s))}}finally{E0=!1}}}function Gx(t){return Array.isArray(t)?t.every(Gx):!!Se(t)}function Wx(t,n={}){Zx(t,n),function(t,n){Qg.push({moduleType:t,ngModule:n})}(t,n)}function Zx(t,n,s=!1){const c=ns(n.declarations||Tr);let f=null;Object.defineProperty(t,ne,{configurable:!0,get:()=>(null===f&&(f=Do().compileNgModule(kc,`ng:///${t.name}/\u0275mod.js`,{type:t,bootstrap:ns(n.bootstrap||Tr).map(Se),declarations:c.map(Se),imports:ns(n.imports||Tr).map(Se).map(Yx),exports:ns(n.exports||Tr).map(Se).map(Yx),schemas:n.schemas?ns(n.schemas):null,id:n.id||null}),f.schemas||(f.schemas=[])),f)});let b=null;Object.defineProperty(t,Re,{get:()=>{if(null===b){const F=Do();b=F.compileFactory(kc,`ng:///${t.name}/\u0275fac.js`,{name:t.name,type:t,deps:Xr(t),target:F.FactoryTarget.NgModule,typeArgumentCount:0})}return b},configurable:!1});let A=null;Object.defineProperty(t,pi,{get:()=>{if(null===A){const F={name:t.name,type:t,providers:n.providers||Tr,imports:[(n.imports||Tr).map(Se),(n.exports||Tr).map(Se)]};A=Do().compileInjector(kc,`ng:///${t.name}/\u0275inj.js`,F)}return A},configurable:!1})}let xy=new WeakMap,T0=new WeakMap;function vT(){xy=new WeakMap,T0=new WeakMap,Qg.length=0}function bT(t,n){const s=ns(n.declarations||Tr),c=Jg(t);s.forEach(f=>{f.hasOwnProperty(Nn)?D0(Xn(f),c):!f.hasOwnProperty(mi)&&!f.hasOwnProperty(ke)&&(f.ngSelectorScope=t)})}function D0(t,n){t.directiveDefs=()=>Array.from(n.compilation.directives).map(s=>s.hasOwnProperty(Nn)?Xn(s):mr(s)).filter(s=>!!s),t.pipeDefs=()=>Array.from(n.compilation.pipes).map(s=>Vr(s)),t.schemas=n.schemas,t.tView=null}function Jg(t){if(!S0(t))throw new Error(`${t.name} does not have a module def (\u0275mod property)`);const n=Mr(t);if(null!==n.transitiveCompileScopes)return n.transitiveCompileScopes;const s={schemas:n.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return nn(n.imports).forEach(c=>{const f=c;if(!S0(f))throw new Error(`Importing ${f.name} which does not have a \u0275mod property`);const b=Jg(f);b.exported.directives.forEach(A=>s.compilation.directives.add(A)),b.exported.pipes.forEach(A=>s.compilation.pipes.add(A))}),nn(n.declarations).forEach(c=>{Vr(c)?s.compilation.pipes.add(c):s.compilation.directives.add(c)}),nn(n.exports).forEach(c=>{const f=c;if(S0(f)){const b=Jg(f);b.exported.directives.forEach(A=>{s.compilation.directives.add(A),s.exported.directives.add(A)}),b.exported.pipes.forEach(A=>{s.compilation.pipes.add(A),s.exported.pipes.add(A)})}else Vr(f)?s.exported.pipes.add(f):s.exported.directives.add(f)}),n.transitiveCompileScopes=s,s}function Yx(t){return function(t){return void 0!==t.ngModule}(t)?t.ngModule:t}function S0(t){return!!Mr(t)}let I0=0;function Qx(t,n){let s=null;(function(t,n){Gi(n)&&(ro.set(t,n),Qo.add(t))})(t,n),ew(t,n),Object.defineProperty(t,Nn,{get:()=>{if(null===s){const c=Do();if(Gi(n)){const q=[`Component '${t.name}' is not resolved:`];throw n.templateUrl&&q.push(` - templateUrl: ${n.templateUrl}`),n.styleUrls&&n.styleUrls.length&&q.push(` - styleUrls: ${JSON.stringify(n.styleUrls)}`),q.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(q.join("\n"))}const f=Im;let b=n.preserveWhitespaces;void 0===b&&(b=null!==f&&void 0!==f.preserveWhitespaces&&f.preserveWhitespaces);let A=n.encapsulation;void 0===A&&(A=null!==f&&void 0!==f.defaultEncapsulation?f.defaultEncapsulation:zt.Emulated);const F=n.templateUrl||`ng:///${t.name}/template.html`,V=Object.assign(Object.assign({},tw(t,n)),{typeSourceSpan:c.createParseSourceSpan("Component",t.name,F),template:n.template||"",preserveWhitespaces:b,styles:n.styles||Tr,animations:n.animations,directives:[],changeDetection:n.changeDetection,pipes:new Map,encapsulation:A,interpolation:n.interpolation,viewProviders:n.viewProviders||null});I0++;try{V.usesInheritance&&nw(t),s=c.compileComponent(kc,F,V)}finally{I0--}if(0===I0&&$x(),function(t){return void 0!==t.ngSelectorScope}(t)){const q=Jg(t.ngSelectorScope);D0(s,q)}}return s},configurable:!1})}function M0(t,n){let s=null;ew(t,n||{}),Object.defineProperty(t,mi,{get:()=>{if(null===s){const c=Jx(t,n||{});s=Do().compileDirective(kc,c.sourceMapUrl,c.metadata)}return s},configurable:!1})}function Jx(t,n){const s=t&&t.name,c=`ng:///${s}/\u0275dir.js`,f=Do(),b=tw(t,n);return b.typeSourceSpan=f.createParseSourceSpan("Directive",s,c),b.usesInheritance&&nw(t),{metadata:b,sourceMapUrl:c}}function ew(t,n){let s=null;Object.defineProperty(t,Re,{get:()=>{if(null===s){const c=Jx(t,n),f=Do();s=f.compileFactory(kc,`ng:///${t.name}/\u0275fac.js`,{name:c.metadata.name,type:c.metadata.type,typeArgumentCount:0,deps:Xr(t),target:f.FactoryTarget.Directive})}return s},configurable:!1})}function ET(t){return Object.getPrototypeOf(t.prototype)===Object.prototype}function tw(t,n){const s=Ir(),c=s.ownPropMetadata(t);return{name:t.name,type:t,selector:void 0!==n.selector?n.selector:null,host:n.host||ao,propMetadata:c,inputs:n.inputs||Tr,outputs:n.outputs||Tr,queries:rw(t,c,iw),lifecycle:{usesOnChanges:s.hasLifecycleHook(t,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!ET(t),exportAs:DT(n.exportAs),providers:n.providers||null,viewQueries:rw(t,c,ow)}}function nw(t){const n=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==n;)!mr(s)&&!Xn(s)&&IT(s)&&M0(s,null),s=Object.getPrototypeOf(s)}function CT(t){return"string"==typeof t?aw(t):Se(t)}function TT(t,n){return{propertyName:t,predicate:CT(n.selector),descendants:n.descendants,first:n.first,read:n.read?n.read:null,static:!!n.static,emitDistinctChangesOnly:!!n.emitDistinctChangesOnly}}function rw(t,n,s){const c=[];for(const f in n)if(n.hasOwnProperty(f)){const b=n[f];b.forEach(A=>{if(s(A)){if(!A.selector)throw new Error(`Can't construct a query for the property "${f}" of "${Ct(t)}" since the query selector wasn't defined.`);if(b.some(sw))throw new Error("Cannot combine @Input decorators with query decorators");c.push(TT(f,A))}})}return c}function DT(t){return void 0===t?null:aw(t)}function iw(t){const n=t.ngMetadataName;return"ContentChild"===n||"ContentChildren"===n}function ow(t){const n=t.ngMetadataName;return"ViewChild"===n||"ViewChildren"===n}function sw(t){return"Input"===t.ngMetadataName}function aw(t){return t.split(",").map(n=>n.trim())}const ST=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function IT(t){const n=Ir();if(ST.some(c=>n.hasLifecycleHook(t,c)))return!0;const s=n.propMetadata(t);for(const c in s){const f=s[c];for(let b=0;b<f.length;b++){const A=f[b],F=A.ngMetadataName;if(sw(A)||iw(A)||ow(A)||"Output"===F||"HostBinding"===F||"HostListener"===F)return!0}}return!1}function lw(t,n){let s=null,c=null;Object.defineProperty(t,Re,{get:()=>{if(null===c){const f=cw(t,n),b=Do();c=b.compileFactory(kc,`ng:///${f.name}/\u0275fac.js`,{name:f.name,type:f.type,typeArgumentCount:0,deps:Xr(t),target:b.FactoryTarget.Pipe})}return c},configurable:!1}),Object.defineProperty(t,ke,{get:()=>{if(null===s){const f=cw(t,n);s=Do().compilePipe(kc,`ng:///${f.name}/\u0275pipe.js`,f)}return s},configurable:!1})}function cw(t,n){return{type:t,name:t.name,pipeName:n.name,pure:void 0===n.pure||n.pure}}const uw=sl("Directive",(t={})=>t,void 0,void 0,(t,n)=>FT(t,n)),MT=sl("Component",(t={})=>Object.assign({changeDetection:Pt.Default},t),uw,void 0,(t,n)=>LT(t,n)),AT=sl("Pipe",t=>Object.assign({pure:!0},t),void 0,void 0,(t,n)=>NT(t,n)),PT=Es("Input",t=>({bindingPropertyName:t})),OT=Es("Output",t=>({bindingPropertyName:t})),kT=Es("HostBinding",t=>({hostPropertyName:t})),RT=Es("HostListener",(t,n)=>({eventName:t,args:n})),hw=Qx,dw=M0,fw=lw,LT=hw,FT=dw,NT=fw,BT=sl("NgModule",t=>t,void 0,void 0,(t,n)=>zT(t,n)),pw=Wx,zT=pw,A0=new Ki("Application Initializer");let Mm=(()=>{class t{constructor(s){this.appInits=s,this.resolve=uy,this.reject=uy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const b=this.appInits[f]();if(Kn(b))s.push(b);else if(so(b)){const A=new Promise((F,V)=>{b.subscribe({complete:F,error:V})});s.push(A)}}Promise.all(s).then(()=>{c()}).catch(f=>{this.reject(f)}),0===s.length&&c(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(ln(A0,8))},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();const mw=new Ki("AppId");function gw(){return`${P0()}${P0()}${P0()}`}const _w={provide:mw,useFactory:gw,deps:[]};function P0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yw=new Ki("Platform Initializer"),vw=new Ki("Platform ID"),bw=new Ki("appBootstrapListener"),jT=new Ki("Application Packages Root URL");let xw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();const wy=new Ki("LocaleId"),ww=new Ki("DefaultCurrencyCode"),VT=new Ki("Translations"),UT=new Ki("TranslationsFormat");var Vd=(()=>((Vd=Vd||{})[Vd.Error=0]="Error",Vd[Vd.Warning=1]="Warning",Vd[Vd.Ignore=2]="Ignore",Vd))();const Ew=!0,e_=Ew;class Cw{constructor(n,s){this.ngModuleFactory=n,this.componentFactories=s}}const Ey=function(t){return new by(t)},HT=Ey,Tw=function(t){return Promise.resolve(Ey(t))},$T=Tw,O0=function(t){const n=Ey(t),c=nn(Mr(t).declarations).reduce((f,b)=>{const A=Xn(b);return A&&f.push(new h0(A)),f},[]);return new Cw(n,c)},GT=O0,Dw=function(t){return Promise.resolve(O0(t))},WT=Dw;let t_=(()=>{class t{constructor(){this.compileModuleSync=HT,this.compileModuleAsync=$T,this.compileModuleAndAllComponentsSync=GT,this.compileModuleAndAllComponentsAsync=WT}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();const Sw=new Ki("compilerOptions");class Iw{}const ZT=(()=>Promise.resolve(0))();function k0(t){"undefined"==typeof Zone?ZT.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Vu{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jd(!1),this.onMicrotaskEmpty=new jd(!1),this.onStable=new jd(!1),this.onError=new jd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&s,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let t=fn.requestAnimationFrame,n=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const c=n[Zone.__symbol__("OriginalDelegate")];c&&(n=c)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,L0(t),t.isCheckStableRunning=!0,R0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),L0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,f,b,A,F)=>{try{return Mw(t),s.invokeTask(f,b,A,F)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||t.shouldCoalesceRunChangeDetection)&&n(),Aw(t)}},onInvoke:(s,c,f,b,A,F,V)=>{try{return Mw(t),s.invoke(f,b,A,F,V)}finally{t.shouldCoalesceRunChangeDetection&&n(),Aw(t)}},onHasTask:(s,c,f,b)=>{s.hasTask(f,b),c===f&&("microTask"==b.change?(t._hasPendingMicrotasks=b.microTask,L0(t),R0(t)):"macroTask"==b.change&&(t.hasPendingMacrotasks=b.macroTask))},onHandleError:(s,c,f,b)=>(s.handleError(f,b),t.runOutsideAngular(()=>t.onError.emit(b)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,s,c){return this._inner.run(n,s,c)}runTask(n,s,c,f){const b=this._inner,A=b.scheduleEventTask("NgZoneEvent: "+f,n,XT,uy,uy);try{return b.runTask(A,s,c)}finally{b.cancelTask(A)}}runGuarded(n,s,c){return this._inner.runGuarded(n,s,c)}runOutsideAngular(n){return this._outer.run(n)}}const XT={};function R0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function L0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Mw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Aw(t){t._nesting--,R0(t)}class Pw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jd,this.onMicrotaskEmpty=new jd,this.onStable=new jd,this.onError=new jd}run(n,s,c){return n.apply(s,c)}runGuarded(n,s,c){return n.apply(s,c)}runOutsideAngular(n){return n()}runTask(n,s,c,f){return n.apply(s,c)}}let Ow=(()=>{class t{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vu.assertNotInAngularZone(),k0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())k0(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,f){let b=-1;c&&c>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(A=>A.timeoutId!==b),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:b,updateCb:f})}whenStable(s,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,c,f){return[]}}return t.\u0275fac=function(s){return new(s||t)(ln(Vu))},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})(),F0=(()=>{class t{constructor(){this._applications=new Map,N0.addToWindow(this)}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return N0.findTestabilityInTree(this,s,c)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();class QT{addToWindow(n){}findTestabilityInTree(n,s,c){return null}}function JT(t){N0=t}let N0=new QT,kw=!0,Rw=!1;function B0(){return Rw=!0,kw}function eD(){if(Rw)throw new Error("Cannot enable prod mode after platform setup.");kw=!1}let cd,tD=Lw;function Lw(t,n,s){const c=new by(s);return Promise.resolve(c)}let iD=Fw;function Fw(t){return t.isBoundToModule}const z0=new Ki("AllowMultipleToken");class oD{constructor(n,s){this.name=n,this.token=s}}function Nw(t){if(cd&&!cd.destroyed&&!cd.injector.get(z0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cd=t.get(V0);const n=t.get(yw,null);return n&&n.forEach(s=>s()),cd}function Bw(t,n,s=[]){const c=`Platform: ${n}`,f=new Ki(c);return(b=[])=>{let A=j0();if(!A||A.injector.get(z0,!1))if(t)t(s.concat(b).concat({provide:f,useValue:!0}));else{const F=s.concat(b).concat({provide:f,useValue:!0},{provide:Rd,useValue:"platform"});Nw(Mo.create({providers:F,name:c}))}return zw(f)}}function zw(t){const n=j0();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}function sD(){cd&&!cd.destroyed&&cd.destroy()}function j0(){return cd&&!cd.destroyed?cd:null}let V0=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const F=function(t,n){let s;return s="noop"===t?new Pw:("zone.js"===t?void 0:t)||new Vu({enableLongStackTrace:B0(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),s}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),V=[{provide:Vu,useValue:F}];return F.run(()=>{const q=Mo.create({providers:V,parent:this.injector,name:s.moduleType.name}),oe=s.create(q),Pe=oe.injector.get(ru,null);if(!Pe)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return F.runOutsideAngular(()=>{const je=F.onError.subscribe({next:ct=>{Pe.handleError(ct)}});oe.onDestroy(()=>{U0(this._modules,oe),je.unsubscribe()})}),function(t,n,s){try{const c=s();return Kn(c)?c.catch(f=>{throw n.runOutsideAngular(()=>t.handleError(f)),f}):c}catch(c){throw n.runOutsideAngular(()=>t.handleError(c)),c}}(Pe,F,()=>{const je=oe.injector.get(Mm);return je.runInitializers(),je.donePromise.then(()=>(e_&&ay(oe.injector.get(wy,kg)||kg),this._moduleDoBootstrap(oe),oe))})})}bootstrapModule(s,c=[]){const f=jw({},c);return tD(this.injector,f,s).then(b=>this.bootstrapModuleFactory(b,f))}_moduleDoBootstrap(s){const c=s.injector.get(n_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new Error(`The module ${be(s.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(ln(Mo))},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();function jw(t,n){return Array.isArray(n)?n.reduce(jw,t):Object.assign(Object.assign({},t),n)}let n_=(()=>{class t{constructor(s,c,f,b,A){this._zone=s,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=b,this._initStatus=A,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const F=new te.y(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),V=new te.y(q=>{let oe;this._zone.runOutsideAngular(()=>{oe=this._zone.onStable.subscribe(()=>{Vu.assertNotInAngularZone(),k0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const Pe=this._zone.onUnstable.subscribe(()=>{Vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{oe.unsubscribe(),Pe.unsubscribe()}});this.isStable=(0,l.T)(F,V.pipe(t=>(0,se.x)()(function(t,n){return function(c){let f;f="function"==typeof t?t:function(){return t};const b=Object.create(c,J.N);return b.source=c,b.subjectFactory=f,b}}(he)(t))))}bootstrap(s,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=s instanceof wm?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(f.componentType);const b=iD(f)?void 0:this._injector.get(ip),F=f.create(Mo.NULL,[],c||f.selector,b),V=F.location.nativeElement,q=F.injector.get(Ow,null),oe=q&&F.injector.get(F0);return q&&oe&&oe.registerApplication(V,q),F.onDestroy(()=>{this.detachView(F.hostView),U0(this.components,F),oe&&oe.unregisterApplication(V)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;U0(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(bw,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(s){return new(s||t)(ln(Vu),ln(Mo),ln(ru),ln(Em),ln(Mm))},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();function U0(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}class uD{}function hD(t){const n=gx(t);if(!n)throw Hw(t);return n}function Uw(t){const n=gx(t);if(!n)throw Hw(t);return new by(n)}const dD=Uw;function Hw(t){return new Error(`No module with ID ${t} loaded`)}class Gw{}const pD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let mD=(()=>{class t{constructor(s,c){this._compiler=s,this._config=c||pD}load(s){return!e_&&this._compiler instanceof t_?this.loadFactory(s):this.loadAndCompile(s)}loadAndCompile(s){let[c,f]=s.split("#");return void 0===f&&(f="default"),v(8255)(c).then(b=>b[f]).then(b=>Ww(b,c,f)).then(b=>this._compiler.compileModuleAsync(b))}loadFactory(s){let[c,f]=s.split("#"),b="NgFactory";return void 0===f&&(f="default",b=""),v(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(A=>A[f+b]).then(A=>Ww(A,c,f))}}return t.\u0275fac=function(s){return new(s||t)(ln(t_),ln(Gw,8))},t.\u0275prov=Zn({token:t,factory:t.\u0275fac}),t})();function Ww(t,n,s){if(!t)throw new Error(`Cannot find '${s}' in '${n}'`);return t}class Zw extends Yv{}class gD extends Zw{}class qw{constructor(n,s){this.name=n,this.callback=s}}class r_{constructor(n,s,c){this.listeners=[],this.parent=null,this._debugContext=c,this.nativeNode=n,s&&s instanceof Xa&&s.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Xa extends r_{constructor(n,s,c){super(n,s,c),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=n}addChild(n){n&&(this.childNodes.push(n),n.parent=this)}removeChild(n){const s=this.childNodes.indexOf(n);-1!==s&&(n.parent=null,this.childNodes.splice(s,1))}insertChildrenAfter(n,s){const c=this.childNodes.indexOf(n);-1!==c&&(this.childNodes.splice(c+1,0,...s),s.forEach(f=>{f.parent&&f.parent.removeChild(f),n.parent=this}))}insertBefore(n,s){const c=this.childNodes.indexOf(n);-1===c?this.addChild(s):(s.parent&&s.parent.removeChild(s),s.parent=this,this.childNodes.splice(c,0,s))}query(n){return this.queryAll(n)[0]||null}queryAll(n){const s=[];return Xw(this,n,s),s}queryAllNodes(n){const s=[];return Kw(this,n,s),s}get children(){return this.childNodes.filter(n=>n instanceof Xa)}triggerEventHandler(n,s){this.listeners.forEach(c=>{c.name==n&&c.callback(s)})}}function _D(t){return t.map(n=>n.nativeElement)}function Xw(t,n,s){t.childNodes.forEach(c=>{c instanceof Xa&&(n(c)&&s.push(c),Xw(c,n,s))})}function Kw(t,n,s){t instanceof Xa&&t.childNodes.forEach(c=>{n(c)&&s.push(c),c instanceof Xa&&Kw(c,n,s)})}class H0{constructor(n){this.nativeNode=n}get parent(){const n=this.nativeNode.parentNode;return n?new i_(n):null}get injector(){return Jp(this.nativeNode)}get componentInstance(){const n=this.nativeNode;return n&&(rf(n)||hg(n))}get context(){return rf(this.nativeNode)||Cp(this.nativeNode)}get listeners(){return fg(this.nativeNode).filter(n=>"dom"===n.type)}get references(){return function(t){const n=Ko(t);return null===n?{}:(void 0===n.localRefs&&(n.localRefs=function(t,n){const s=t[1].data[n];if(s&&s.localNames){const c={};let f=s.index+1;for(let b=0;b<s.localNames.length;b+=2)c[s.localNames[b]]=t[f],f++;return c}return null}(n.lView,n.nodeIndex)),n.localRefs||{})}(this.nativeNode)}get providerTokens(){return function(t){const n=Ko(t);if(null===n)return[];const c=n.lView[1],f=c.data[n.nodeIndex],b=[],F=f.directiveEnd;for(let V=1048575&f.providerIndexes;V<F;V++){let q=c.data[V];ov(q)&&(q=q.type),b.push(q)}return b}(this.nativeNode)}}class i_ extends H0{constructor(n){super(n)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const n=Ko(this.nativeNode);return null!==n?n.lView[1].data[n.nodeIndex].value:this.nativeNode.nodeName}get properties(){const n=Ko(this.nativeNode);if(null===n)return{};const s=n.lView,c=s[1].data,f=c[n.nodeIndex],b={};return function(t,n){if(t){let s=Object.getPrototypeOf(t);const c=Node.prototype;for(;null!==s&&s!==c;){const f=Object.getOwnPropertyDescriptors(s);for(let b in f)if(!b.startsWith("__")&&!b.startsWith("on")){const A=t[b];vD(A)&&(n[b]=A)}s=Object.getPrototypeOf(s)}}}(this.nativeElement,b),function(t,n,s,c){let f=n.propertyBindings;if(null!==f)for(let b=0;b<f.length;b++){const A=f[b],V=c[A].split("\ufffd"),q=V[0];if(V.length>1){let oe=V[1];for(let Pe=1;Pe<V.length-1;Pe++)oe+=Tt(s[A+Pe-1])+V[Pe+1];t[q]=oe}else t[q]=s[A]}}(b,f,s,c),b}get attributes(){const n={},s=this.nativeElement;if(!s)return n;const c=Ko(s);if(null===c)return{};const b=c.lView[1].data[c.nodeIndex].attrs,A=[];if(b){let V=0;for(;V<b.length;){const q=b[V];if("string"!=typeof q)break;n[q]=b[V+1],A.push(q.toLowerCase()),V+=2}}const F=s.attributes;for(let V=0;V<F.length;V++){const q=F[V],oe=q.name.toLowerCase();-1===A.indexOf(oe)&&(n[oe]=q.value)}return n}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const n={},c=this.nativeElement.className;return(c&&"string"!=typeof c?c.baseVal.split(" "):c.split(" ")).forEach(b=>n[b]=!0),n}get childNodes(){const n=this.nativeNode.childNodes,s=[];for(let c=0;c<n.length;c++)s.push(Ty(n[c]));return s}get children(){const n=this.nativeElement;if(!n)return[];const s=n.children,c=[];for(let f=0;f<s.length;f++)c.push(Ty(s[f]));return c}query(n){return this.queryAll(n)[0]||null}queryAll(n){const s=[];return Yw(this,n,s,!0),s}queryAllNodes(n){const s=[];return Yw(this,n,s,!1),s}triggerEventHandler(n,s){const c=this.nativeNode,f=[];this.listeners.forEach(b=>{if(b.name===n){const A=b.callback;A.call(c,s),f.push(A)}}),"function"==typeof c.eventListeners&&c.eventListeners(n).forEach(b=>{if(-1!==b.toString().indexOf("__ngUnwrap__")){const A=b("__ngUnwrap__");return-1===f.indexOf(A)&&A.call(c,s)}})}}function vD(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t||null===t}function Yw(t,n,s,c){const f=Ko(t.nativeNode);null!==f?Lp(f.lView[1].data[f.nodeIndex],f.lView,n,s,c,t.nativeNode):G0(t.nativeNode,n,s,c)}function Lp(t,n,s,c,f,b){const A=function(t,n){const s=null===t?-1:t.index;return-1!==s?Pr(n[s]):null}(t,n);if(11&t.type){if($0(A,s,c,f,b),oi(t)){const V=Co(t.index,n);V&&V[1].firstChild&&Lp(V[1].firstChild,V,s,c,f,b)}else t.child&&Lp(t.child,n,s,c,f,b),A&&G0(A,s,c,f);const F=n[t.index];Fn(F)&&Qw(F,s,c,f,b)}else if(4&t.type){const F=n[t.index];$0(F[7],s,c,f,b),Qw(F,s,c,f,b)}else if(16&t.type){const F=n[16],q=F[6].projection[t.projection];if(Array.isArray(q))for(let oe of q)$0(oe,s,c,f,b);else if(q){const oe=F[3];Lp(oe[1].data[q.index],oe,s,c,f,b)}}else t.child&&Lp(t.child,n,s,c,f,b);if(b!==A){const F=4&t.flags?t.projectionNext:t.next;F&&Lp(F,n,s,c,f,b)}}function Qw(t,n,s,c,f){for(let b=10;b<t.length;b++){const A=t[b],F=A[1].firstChild;F&&Lp(F,A,n,s,c,f)}}function $0(t,n,s,c,f){if(f!==t){const b=Ka(t);if(!b)return;(c&&b instanceof i_&&n(b)&&-1===s.indexOf(b)||!c&&n(b)&&-1===s.indexOf(b))&&s.push(b)}}function G0(t,n,s,c){const f=t.childNodes,b=f.length;for(let A=0;A<b;A++){const F=f[A],V=Ka(F);V&&((c&&V instanceof i_&&n(V)&&-1===s.indexOf(V)||!c&&n(V)&&-1===s.indexOf(V))&&s.push(V),G0(F,n,s,c))}}const Cy=new Map,W0="__ng_debug__";function Ty(t){return t instanceof Node?(t.hasOwnProperty(W0)||(t[W0]=t.nodeType==Node.ELEMENT_NODE?new i_(t):new H0(t)),t[W0]):null}const Ka=Ty;function wD(t){return function(t){return Cy.get(t)||null}(t)}const CD=function(t){return null};function Dy(t){Cy.set(t.nativeNode,t)}const DD=H0,SD=i_,ID=Bw(null,"core",[{provide:vw,useValue:"unknown"},{provide:V0,deps:[Mo]},{provide:F0,deps:[]},{provide:xw,deps:[]}]);function Jw(){return Rb}function eE(){return Lb}function tE(t){return t=t||e_&&"undefined"!=typeof $localize&&$localize.locale||kg,e_&&ay(t),t}const nE=[{provide:n_,useClass:n_,deps:[Vu,Mo,ru,Em,Mm]},{provide:hx,deps:[Vu],useFactory:rE},{provide:Mm,useClass:Mm,deps:[[new Qn,A0]]},{provide:t_,useClass:t_,deps:[]},_w,{provide:dy,useFactory:Jw,deps:[]},{provide:fy,useFactory:eE,deps:[]},{provide:wy,useFactory:tE,deps:[[new Rn(wy),new Qn,new dr]]},{provide:ww,useValue:G1}];function rE(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(s){n.push(s)}}let AD=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(ln(n_))},t.\u0275mod=wn({type:t}),t.\u0275inj=Ur({providers:nE}),t})();function PD(t,n,s,c,f,b){t|=1;const{matchedQueries:A,references:F,matchedQueryIds:V}=n0(n);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:A,matchedQueryIds:V,references:F,ngContentIndex:s,childCount:c,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:b?Dm(b):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:f||xh},provider:null,text:null,query:null,ngContent:null}}function OD(t,n,s,c,f,b,A=[],F,V,q,oe,Pe){q||(q=xh);const{matchedQueries:je,references:ct,matchedQueryIds:Dt}=n0(s);let tn=null,Ut=null;b&&([tn,Ut]=i0(b)),F=F||[];const Hn=[];for(let ci=0;ci<F.length;ci++){const[to,Ya,Eh]=F[ci],[u_,Om]=i0(Ya);let km,Rm;switch(15&to){case 4:Rm=Eh;break;case 1:case 8:km=Eh}Hn[ci]={flags:to,ns:u_,name:Om,nonMinifiedName:Om,securityContext:km,suffix:Rm}}V=V||[];const Cn=[];for(let ci=0;ci<V.length;ci++){const[to,Ya]=V[ci];Cn[ci]={type:0,target:to,eventName:Ya,propName:null}}const kr=(A=A||[]).map(([ci,to])=>{const[Ya,Eh]=i0(ci);return[Ya,Eh,to]});return Pe=function(t){return t&&t.id===Wb&&(t.id=null!=t.encapsulation&&t.encapsulation!==zt.None||t.styles.length||Object.keys(t.data).length?"c"+e2++:Zb),t&&t.id===Zb&&(t=null),t||null}(Pe),oe&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:je,matchedQueryIds:Dt,references:ct,ngContentIndex:c,childCount:f,bindings:Hn,bindingFlags:o0(Hn),outputs:Cn,element:{ns:tn,name:Ut,attrs:kr,template:null,componentProvider:null,componentView:oe||null,componentRendererType:Pe,publicProviders:null,allProviders:null,handleEvent:q||xh},provider:null,text:null,query:null,ngContent:null}}function kD(t,n,s){const c=s.element,f=t.root.selectorOrNode,b=t.renderer;let A;if(t.parent||!f){A=c.name?b.createElement(c.name,c.ns):b.createComment("");const F=r0(t,n,s);F&&b.appendChild(F,A)}else A=b.selectRootElement(f,!!c.componentRendererType&&c.componentRendererType.encapsulation===zt.ShadowDom);if(c.attrs)for(let F=0;F<c.attrs.length;F++){const[V,q,oe]=c.attrs[F];b.setAttribute(A,q,oe,V)}return A}function RD(t,n,s,c){for(let f=0;f<s.outputs.length;f++){const b=s.outputs[f],A=LD(t,s.nodeIndex,r2(b.target,b.eventName));let F=b.target,V=t;"component"===b.target&&(F=null,V=n);const q=V.renderer.listen(F||c,b.eventName,A);t.disposables[s.outputIndex+f]=q}}function LD(t,n,s){return c=>Xb(t,n,s,c)}function ud(t,n,s,c){if(!Is(t,n,s,c))return!1;const f=n.bindings[s],b=jo(t,n.nodeIndex),A=b.renderElement,F=f.name;switch(15&f.flags){case 1:!function(t,n,s,c,f,b){const A=n.securityContext;let F=A?t.root.sanitizer.sanitize(A,b):b;F=null!=F?F.toString():null;const V=t.renderer;null!=b?V.setAttribute(s,f,F,c):V.removeAttribute(s,f,c)}(t,f,A,f.ns,F,c);break;case 2:!function(t,n,s,c){const f=t.renderer;c?f.addClass(n,s):f.removeClass(n,s)}(t,A,F,c);break;case 4:!function(t,n,s,c,f){let b=t.root.sanitizer.sanitize(Fo.STYLE,f);if(null!=b){b=b.toString();const F=n.suffix;null!=F&&(b+=F)}else b=null;const A=t.renderer;null!=b?A.setStyle(s,c,b):A.removeStyle(s,c)}(t,f,A,F,c);break;case 8:!function(t,n,s,c,f){const b=n.securityContext;let A=b?t.root.sanitizer.sanitize(b,f):f;t.renderer.setProperty(s,c,A)}(33554432&n.flags&&32&f.flags?b.componentView:t,f,A,F,c)}return!0}function UD(t,n,s){let c=[];for(let f in s)c.push({propName:f,bindingType:s[f]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:n,filterId:Kb(n),bindings:c},ngContent:null}}function HD(t){return new Yg(t)}function $D(t){const n=t.def.nodeMatchedQueries;for(;t.parent&&i2(t);){let s=t.parentNodeDef;t=t.parent;const c=s.nodeIndex+s.childCount;for(let f=0;f<=c;f++){const b=t.def.nodes[f];67108864&b.flags&&536870912&b.flags&&(b.query.filterId&n)===b.query.filterId&&Ug(t,f).setDirty(),(1&b.flags&&f+b.childCount<s.nodeIndex||!(67108864&b.childFlags)||!(536870912&b.childFlags))&&(f+=b.childCount)}}if(134217728&t.def.nodeFlags)for(let s=0;s<t.def.nodes.length;s++){const c=t.def.nodes[s];134217728&c.flags&&536870912&c.flags&&Ug(t,s).setDirty(),s+=c.childCount}}function GD(t,n){const s=Ug(t,n.nodeIndex);if(!s.dirty)return;let c,f;if(67108864&n.flags){const F=n.parent.parent;f=o_(t,F.nodeIndex,F.nodeIndex+F.childCount,n.query,[]),c=op(t,n.parent.nodeIndex).instance}else 134217728&n.flags&&(f=o_(t,0,t.def.nodes.length-1,n.query,[]),c=t.component);s.reset(f,Cb);const b=n.query.bindings;let A=!1;for(let F=0;F<b.length;F++){const V=b[F];let q;switch(V.bindingType){case 0:q=s.first;break;case 1:q=s,A=!0}c[V.propName]=q}A&&s.notifyOnChanges()}function o_(t,n,s,c,f){for(let b=n;b<=s;b++){const A=t.def.nodes[b],F=A.matchedQueries[c.id];if(null!=F&&f.push(iE(t,A,F)),1&A.flags&&A.element.template&&(A.element.template.nodeMatchedQueries&c.filterId)===c.filterId){const V=jo(t,b);if((A.childMatchedQueries&c.filterId)===c.filterId&&(o_(t,b+1,b+A.childCount,c,f),b+=A.childCount),16777216&A.flags){const oe=V.viewContainer._embeddedViews;for(let Pe=0;Pe<oe.length;Pe++){const je=oe[Pe],ct=t0(je);ct&&ct===V&&o_(je,0,je.def.nodes.length-1,c,f)}}const q=V.template._projectedViews;if(q)for(let oe=0;oe<q.length;oe++){const Pe=q[oe];o_(Pe,0,Pe.def.nodes.length-1,c,f)}}(A.childMatchedQueries&c.filterId)!==c.filterId&&(b+=A.childCount)}return f}function iE(t,n,s){if(null!=s)switch(s){case 1:return jo(t,n.nodeIndex).renderElement;case 0:return new sd(jo(t,n.nodeIndex).renderElement);case 2:return jo(t,n.nodeIndex).template;case 3:return jo(t,n.nodeIndex).viewContainer;case 4:return op(t,n.nodeIndex).instance}}function WD(t,n){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:n}}}function ZD(t,n,s){const c=r0(t,n,s);c&&Jb(t,s.ngContent.index,1,c,null,void 0)}function qD(t,n){return Z0(128,t,ys(n+1))}function XD(t,n){return Z0(32,t,ys(n))}function KD(t,n){const s=Object.keys(n),c=s.length,f=[];for(let b=0;b<c;b++){f.push(s[b])}return Z0(64,t,f)}function Z0(t,n,s){const c=[];for(let f=0;f<s.length;f++){const b=s[f];c.push({flags:8,name:b,ns:null,nonMinifiedName:b,securityContext:null,suffix:null})}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:n,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:c,bindingFlags:o0(c),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function eS(t,n,s){const c=[];for(let f=1;f<s.length;f++)c[f-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:s[f]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:n,childCount:0,bindings:c,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:s[0]},query:null,ngContent:null}}function tS(t,n,s){let c;const f=t.renderer;c=f.createText(s.text.prefix);const b=r0(t,n,s);return b&&f.appendChild(b,c),{renderText:c}}function hd(t,n){return(null!=t?t.toString():"")+n.suffix}function iS(t,n,s,c){let f=0,b=0,A=0,F=0,V=0,q=null,oe=null,Pe=!1,je=!1,ct=null;for(let tn=0;tn<n.length;tn++){const Ut=n[tn];if(Ut.nodeIndex=tn,Ut.parent=q,Ut.bindingIndex=f,Ut.outputIndex=b,Ut.renderParent=oe,A|=Ut.flags,V|=Ut.matchedQueryIds,Ut.element){const Hn=Ut.element;Hn.publicProviders=q?q.element.publicProviders:Object.create(null),Hn.allProviders=Hn.publicProviders,Pe=!1,je=!1,Ut.element.template&&(V|=Ut.element.template.nodeMatchedQueries)}if(oS(q,Ut,n.length),f+=Ut.bindings.length,b+=Ut.outputs.length,!oe&&3&Ut.flags&&(ct=Ut),20224&Ut.flags){Pe||(Pe=!0,q.element.publicProviders=Object.create(q.element.publicProviders),q.element.allProviders=q.element.publicProviders);const Cn=0!=(32768&Ut.flags);0==(8192&Ut.flags)||Cn?q.element.publicProviders[jl(Ut.provider.token)]=Ut:(je||(je=!0,q.element.allProviders=Object.create(q.element.publicProviders)),q.element.allProviders[jl(Ut.provider.token)]=Ut),Cn&&(q.element.componentProvider=Ut)}if(q?(q.childFlags|=Ut.flags,q.directChildFlags|=Ut.flags,q.childMatchedQueries|=Ut.matchedQueryIds,Ut.element&&Ut.element.template&&(q.childMatchedQueries|=Ut.element.template.nodeMatchedQueries)):F|=Ut.flags,Ut.childCount>0)q=Ut,oE(Ut)||(oe=Ut);else for(;q&&tn===q.nodeIndex+q.childCount;){const Hn=q.parent;Hn&&(Hn.childFlags|=q.childFlags,Hn.childMatchedQueries|=q.childMatchedQueries),q=Hn,oe=q&&oE(q)?q.renderParent:q}}return{factory:null,nodeFlags:A,rootNodeFlags:F,nodeMatchedQueries:V,flags:t,nodes:n,updateDirectives:s||xh,updateRenderer:c||xh,handleEvent:(tn,Ut,Hn,Cn)=>n[Ut].element.handleEvent(tn,Hn,Cn),bindingCount:f,outputCount:b,lastRenderRootNode:ct}}function oE(t){return 0!=(1&t.flags)&&null===t.element.name}function oS(t,n,s){const c=n.element&&n.element.template;if(c){if(!c.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(c.lastRenderRootNode&&16777216&c.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${n.nodeIndex}!`)}if(20224&n.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${n.nodeIndex}!`);if(n.query){if(67108864&n.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${n.nodeIndex}!`);if(134217728&n.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${n.nodeIndex}!`)}if(n.childCount){const f=t?t.nodeIndex+t.childCount:s-1;if(n.nodeIndex<=f&&n.nodeIndex+n.childCount>f)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${n.nodeIndex}!`)}}function sE(t,n,s,c){const f=q0(t.root,t.renderer,t,n,s);return X0(f,t.component,c),K0(f),f}function aE(t,n,s){const c=q0(t,t.renderer,null,null,n);return X0(c,s,s),K0(c),c}function lE(t,n,s,c){const f=n.element.componentRendererType;let b;return b=f?t.root.rendererFactory.createRenderer(c,f):t.root.renderer,q0(t.root,b,t,n.element.componentProvider,s)}function q0(t,n,s,c,f){const b=new Array(f.nodes.length),A=f.outputCount?new Array(f.outputCount):null;return{def:f,parent:s,viewContainerParent:null,parentNodeDef:c,context:null,component:null,nodes:b,state:13,root:t,renderer:n,oldValues:new Array(f.bindingCount),disposables:A,initIndex:-1}}function X0(t,n,s){t.component=n,t.context=s}function K0(t){let n;kp(t)&&(n=jo(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const s=t.def,c=t.nodes;for(let f=0;f<s.nodes.length;f++){const b=s.nodes[f];let A;switch(Ai.setCurrentNode(t,f),201347067&b.flags){case 1:const F=kD(t,n,b);let V;if(33554432&b.flags){const q=Dm(b.element.componentView);V=Ai.createComponentView(t,b,q,F)}RD(t,V,b,F),A={renderElement:F,componentView:V,viewContainer:null,template:b.element.template?k2(t,b):void 0},16777216&b.flags&&(A.viewContainer=A2(t,b,A));break;case 2:A=tS(t,n,b);break;case 512:case 1024:case 2048:case 256:A=c[f],!A&&!(4096&b.flags)&&(A={instance:W2(t,b)});break;case 16:A={instance:Z2(t,b)};break;case 16384:A=c[f],A||(A={instance:q2(t,b)}),32768&b.flags&&X0(jo(t,b.parent.nodeIndex).componentView,A.instance,A.instance);break;case 32:case 64:case 128:A={value:void 0};break;case 67108864:case 134217728:A=HD(-2147483648==(-2147483648&b.flags));break;case 8:ZD(t,n,b),A=void 0}c[f]=A}s_(t,Vo.CreateViewNodes),Q0(t,201326592,268435456,0)}function Sy(t){uE(t),Ai.updateDirectives(t,1),My(t,Vo.CheckNoChanges),Ai.updateRenderer(t,1),s_(t,Vo.CheckNoChanges),t.state&=-97}function Iy(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,my(t,0,256),uE(t),Ai.updateDirectives(t,0),My(t,Vo.CheckAndUpdate),Q0(t,67108864,536870912,0);let n=my(t,256,512);u0(t,2097152|(n?1048576:0)),Ai.updateRenderer(t,0),s_(t,Vo.CheckAndUpdate),Q0(t,134217728,536870912,0),n=my(t,512,768),u0(t,8388608|(n?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,my(t,768,1024)}function cE(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){return 0===s?function(t,n,s,c,f,b,A,F,V,q,oe,Pe){switch(201347067&n.flags){case 1:return function(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=n.bindings.length;let ct=!1;return je>0&&ud(t,n,0,s)&&(ct=!0),je>1&&ud(t,n,1,c)&&(ct=!0),je>2&&ud(t,n,2,f)&&(ct=!0),je>3&&ud(t,n,3,b)&&(ct=!0),je>4&&ud(t,n,4,A)&&(ct=!0),je>5&&ud(t,n,5,F)&&(ct=!0),je>6&&ud(t,n,6,V)&&(ct=!0),je>7&&ud(t,n,7,q)&&(ct=!0),je>8&&ud(t,n,8,oe)&&(ct=!0),je>9&&ud(t,n,9,Pe)&&(ct=!0),ct}(t,n,s,c,f,b,A,F,V,q,oe,Pe);case 2:return function(t,n,s,c,f,b,A,F,V,q,oe,Pe){let je=!1;const ct=n.bindings,Dt=ct.length;if(Dt>0&&Is(t,n,0,s)&&(je=!0),Dt>1&&Is(t,n,1,c)&&(je=!0),Dt>2&&Is(t,n,2,f)&&(je=!0),Dt>3&&Is(t,n,3,b)&&(je=!0),Dt>4&&Is(t,n,4,A)&&(je=!0),Dt>5&&Is(t,n,5,F)&&(je=!0),Dt>6&&Is(t,n,6,V)&&(je=!0),Dt>7&&Is(t,n,7,q)&&(je=!0),Dt>8&&Is(t,n,8,oe)&&(je=!0),Dt>9&&Is(t,n,9,Pe)&&(je=!0),je){let tn=n.text.prefix;Dt>0&&(tn+=hd(s,ct[0])),Dt>1&&(tn+=hd(c,ct[1])),Dt>2&&(tn+=hd(f,ct[2])),Dt>3&&(tn+=hd(b,ct[3])),Dt>4&&(tn+=hd(A,ct[4])),Dt>5&&(tn+=hd(F,ct[5])),Dt>6&&(tn+=hd(V,ct[6])),Dt>7&&(tn+=hd(q,ct[7])),Dt>8&&(tn+=hd(oe,ct[8])),Dt>9&&(tn+=hd(Pe,ct[9]));const Ut=Vg(t,n.nodeIndex).renderText;t.renderer.setValue(Ut,tn)}return je}(t,n,s,c,f,b,A,F,V,q,oe,Pe);case 16384:return function(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=op(t,n.nodeIndex),ct=je.instance;let tn,Dt=!1;const Ut=n.bindings.length;return Ut>0&&wh(t,n,0,s)&&(Dt=!0,tn=ld(t,je,n,0,s,tn)),Ut>1&&wh(t,n,1,c)&&(Dt=!0,tn=ld(t,je,n,1,c,tn)),Ut>2&&wh(t,n,2,f)&&(Dt=!0,tn=ld(t,je,n,2,f,tn)),Ut>3&&wh(t,n,3,b)&&(Dt=!0,tn=ld(t,je,n,3,b,tn)),Ut>4&&wh(t,n,4,A)&&(Dt=!0,tn=ld(t,je,n,4,A,tn)),Ut>5&&wh(t,n,5,F)&&(Dt=!0,tn=ld(t,je,n,5,F,tn)),Ut>6&&wh(t,n,6,V)&&(Dt=!0,tn=ld(t,je,n,6,V,tn)),Ut>7&&wh(t,n,7,q)&&(Dt=!0,tn=ld(t,je,n,7,q,tn)),Ut>8&&wh(t,n,8,oe)&&(Dt=!0,tn=ld(t,je,n,8,oe,tn)),Ut>9&&wh(t,n,9,Pe)&&(Dt=!0,tn=ld(t,je,n,9,Pe,tn)),tn&&ct.ngOnChanges(tn),65536&n.flags&&gy(t,256,n.nodeIndex)&&ct.ngOnInit(),262144&n.flags&&ct.ngDoCheck(),Dt}(t,n,s,c,f,b,A,F,V,q,oe,Pe);case 32:case 64:case 128:return function(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=n.bindings;let ct=!1;const Dt=je.length;if(Dt>0&&Is(t,n,0,s)&&(ct=!0),Dt>1&&Is(t,n,1,c)&&(ct=!0),Dt>2&&Is(t,n,2,f)&&(ct=!0),Dt>3&&Is(t,n,3,b)&&(ct=!0),Dt>4&&Is(t,n,4,A)&&(ct=!0),Dt>5&&Is(t,n,5,F)&&(ct=!0),Dt>6&&Is(t,n,6,V)&&(ct=!0),Dt>7&&Is(t,n,7,q)&&(ct=!0),Dt>8&&Is(t,n,8,oe)&&(ct=!0),Dt>9&&Is(t,n,9,Pe)&&(ct=!0),ct){const tn=Cm(t,n.nodeIndex);let Ut;switch(201347067&n.flags){case 32:Ut=[],Dt>0&&Ut.push(s),Dt>1&&Ut.push(c),Dt>2&&Ut.push(f),Dt>3&&Ut.push(b),Dt>4&&Ut.push(A),Dt>5&&Ut.push(F),Dt>6&&Ut.push(V),Dt>7&&Ut.push(q),Dt>8&&Ut.push(oe),Dt>9&&Ut.push(Pe);break;case 64:Ut={},Dt>0&&(Ut[je[0].name]=s),Dt>1&&(Ut[je[1].name]=c),Dt>2&&(Ut[je[2].name]=f),Dt>3&&(Ut[je[3].name]=b),Dt>4&&(Ut[je[4].name]=A),Dt>5&&(Ut[je[5].name]=F),Dt>6&&(Ut[je[6].name]=V),Dt>7&&(Ut[je[7].name]=q),Dt>8&&(Ut[je[8].name]=oe),Dt>9&&(Ut[je[9].name]=Pe);break;case 128:const Hn=s;switch(Dt){case 1:Ut=Hn.transform(s);break;case 2:Ut=Hn.transform(c);break;case 3:Ut=Hn.transform(c,f);break;case 4:Ut=Hn.transform(c,f,b);break;case 5:Ut=Hn.transform(c,f,b,A);break;case 6:Ut=Hn.transform(c,f,b,A,F);break;case 7:Ut=Hn.transform(c,f,b,A,F,V);break;case 8:Ut=Hn.transform(c,f,b,A,F,V,q);break;case 9:Ut=Hn.transform(c,f,b,A,F,V,q,oe);break;case 10:Ut=Hn.transform(c,f,b,A,F,V,q,oe,Pe)}}tn.value=Ut}return ct}(t,n,s,c,f,b,A,F,V,q,oe,Pe);default:throw"unreachable"}}(t,n,c,f,b,A,F,V,q,oe,Pe,je):function(t,n,s){switch(201347067&n.flags){case 1:return function(t,n,s){let c=!1;for(let f=0;f<s.length;f++)ud(t,n,f,s[f])&&(c=!0);return c}(t,n,s);case 2:return function(t,n,s){const c=n.bindings;let f=!1;for(let b=0;b<s.length;b++)Is(t,n,b,s[b])&&(f=!0);if(f){let b="";for(let F=0;F<s.length;F++)b+=hd(s[F],c[F]);b=n.text.prefix+b;const A=Vg(t,n.nodeIndex).renderText;t.renderer.setValue(A,b)}return f}(t,n,s);case 16384:return function(t,n,s){const c=op(t,n.nodeIndex),f=c.instance;let A,b=!1;for(let F=0;F<s.length;F++)wh(t,n,F,s[F])&&(b=!0,A=ld(t,c,n,F,s[F],A));return A&&f.ngOnChanges(A),65536&n.flags&&gy(t,256,n.nodeIndex)&&f.ngOnInit(),262144&n.flags&&f.ngDoCheck(),b}(t,n,s);case 32:case 64:case 128:return function(t,n,s){const c=n.bindings;let f=!1;for(let b=0;b<s.length;b++)Is(t,n,b,s[b])&&(f=!0);if(f){const b=Cm(t,n.nodeIndex);let A;switch(201347067&n.flags){case 32:A=s;break;case 64:A={};for(let q=0;q<s.length;q++)A[c[q].name]=s[q];break;case 128:const F=s[0],V=s.slice(1);A=F.transform(...V)}b.value=A}return f}(t,n,s);default:throw"unreachable"}}(t,n,c)}function uE(t){const n=t.def;if(4&n.nodeFlags)for(let s=0;s<n.nodes.length;s++){const c=n.nodes[s];if(4&c.flags){const f=jo(t,s).template._projectedViews;if(f)for(let b=0;b<f.length;b++){const A=f[b];A.state|=32,n2(A,t)}}else 0==(4&c.childFlags)&&(s+=c.childCount)}}function hE(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){return 0===s?function(t,n,s,c,f,b,A,F,V,q,oe,Pe){const je=n.bindings.length;je>0&&ad(t,n,0,s),je>1&&ad(t,n,1,c),je>2&&ad(t,n,2,f),je>3&&ad(t,n,3,b),je>4&&ad(t,n,4,A),je>5&&ad(t,n,5,F),je>6&&ad(t,n,6,V),je>7&&ad(t,n,7,q),je>8&&ad(t,n,8,oe),je>9&&ad(t,n,9,Pe)}(t,n,c,f,b,A,F,V,q,oe,Pe,je):function(t,n,s){for(let c=0;c<s.length;c++)ad(t,n,c,s[c])}(t,n,c),!1}function uS(t,n){if(Ug(t,n.nodeIndex).dirty)throw Hb(Ai.createDebugContext(t,n.nodeIndex),`Query ${n.query.id} not dirty`,`Query ${n.query.id} dirty`,0!=(1&t.state))}function Y0(t){if(!(128&t.state)){if(My(t,Vo.Destroy),s_(t,Vo.Destroy),u0(t,131072),t.disposables)for(let n=0;n<t.disposables.length;n++)t.disposables[n]();(function(t){if(!(16&t.state))return;const n=t0(t);if(n){const s=n.template._projectedViews;s&&(za(s,s.indexOf(t)),Ai.dirtyParentQueries(t))}})(t),t.renderer.destroyNode&&function(t){const n=t.def.nodes.length;for(let s=0;s<n;s++){const c=t.def.nodes[s];1&c.flags?t.renderer.destroyNode(jo(t,s).renderElement):2&c.flags?t.renderer.destroyNode(Vg(t,s).renderText):(67108864&c.flags||134217728&c.flags)&&Ug(t,s).destroy()}}(t),kp(t)&&t.renderer.destroy(),t.state|=128}}var Vo=(()=>((Vo=Vo||{})[Vo.CreateViewNodes=0]="CreateViewNodes",Vo[Vo.CheckNoChanges=1]="CheckNoChanges",Vo[Vo.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",Vo[Vo.CheckAndUpdate=3]="CheckAndUpdate",Vo[Vo.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",Vo[Vo.Destroy=5]="Destroy",Vo))();function s_(t,n){const s=t.def;if(33554432&s.nodeFlags)for(let c=0;c<s.nodes.length;c++){const f=s.nodes[c];33554432&f.flags?dE(jo(t,c).componentView,n):0==(33554432&f.childFlags)&&(c+=f.childCount)}}function My(t,n){const s=t.def;if(16777216&s.nodeFlags)for(let c=0;c<s.nodes.length;c++){const f=s.nodes[c];if(16777216&f.flags){const b=jo(t,c).viewContainer._embeddedViews;for(let A=0;A<b.length;A++)dE(b[A],n)}else 0==(16777216&f.childFlags)&&(c+=f.childCount)}}function dE(t,n){const s=t.state;switch(n){case Vo.CheckNoChanges:0==(128&s)&&(12==(12&s)?Sy(t):64&s&&Ay(t,Vo.CheckNoChangesProjectedViews));break;case Vo.CheckNoChangesProjectedViews:0==(128&s)&&(32&s?Sy(t):64&s&&Ay(t,n));break;case Vo.CheckAndUpdate:0==(128&s)&&(12==(12&s)?Iy(t):64&s&&Ay(t,Vo.CheckAndUpdateProjectedViews));break;case Vo.CheckAndUpdateProjectedViews:0==(128&s)&&(32&s?Iy(t):64&s&&Ay(t,n));break;case Vo.Destroy:Y0(t);break;case Vo.CreateViewNodes:K0(t)}}function Ay(t,n){My(t,n),s_(t,n)}function Q0(t,n,s,c){if(!(t.def.nodeFlags&n&&t.def.nodeFlags&s))return;const f=t.def.nodes.length;for(let b=0;b<f;b++){const A=t.def.nodes[b];if(A.flags&n&&A.flags&s)switch(Ai.setCurrentNode(t,A.nodeIndex),c){case 0:GD(t,A);break;case 1:uS(t,A)}(!(A.childFlags&n)||!(A.childFlags&s))&&(b+=A.childCount)}}let fE=!1;function a_(){if(fE)return;fE=!0;const t=B0()?{setCurrentNode:Pm,createRootView:mS,createEmbeddedView:gS,createComponentView:_S,createNgModuleRef:yS,overrideProvider:vS,overrideComponentView:bS,clearOverrides:xS,checkAndUpdateView:ES,checkNoChangesView:CS,destroyView:TS,createDebugContext:(t,n)=>new t1(t,n),handleEvent:DS,updateDirectives:SS,updateRenderer:IS}:{setCurrentNode:()=>{},createRootView:pS,createEmbeddedView:sE,createComponentView:lE,createNgModuleRef:ix,overrideProvider:xh,overrideComponentView:xh,clearOverrides:xh,checkAndUpdateView:Iy,checkNoChangesView:Sy,destroyView:Y0,createDebugContext:(t,n)=>new t1(t,n),handleEvent:(t,n,s,c)=>t.def.handleEvent(t,n,s,c),updateDirectives:(t,n)=>t.def.updateDirectives(0===n?mE:gE,t),updateRenderer:(t,n)=>t.def.updateRenderer(0===n?mE:gE,t)};Ai.setCurrentNode=t.setCurrentNode,Ai.createRootView=t.createRootView,Ai.createEmbeddedView=t.createEmbeddedView,Ai.createComponentView=t.createComponentView,Ai.createNgModuleRef=t.createNgModuleRef,Ai.overrideProvider=t.overrideProvider,Ai.overrideComponentView=t.overrideComponentView,Ai.clearOverrides=t.clearOverrides,Ai.checkAndUpdateView=t.checkAndUpdateView,Ai.checkNoChangesView=t.checkNoChangesView,Ai.destroyView=t.destroyView,Ai.resolveDep=cc,Ai.createDebugContext=t.createDebugContext,Ai.handleEvent=t.handleEvent,Ai.updateDirectives=t.updateDirectives,Ai.updateRenderer=t.updateRenderer,Ai.dirtyParentQueries=$D}function pS(t,n,s,c,f,b){const A=f.injector.get(hy);return aE(pE(t,f,A,n,s),c,b)}function mS(t,n,s,c,f,b){const A=f.injector.get(hy),F=pE(t,f,new PS(A),n,s),V=e1(c);return Fp(js.create,aE,null,[F,V,b])}function pE(t,n,s,c,f){const b=n.injector.get(Gv),A=n.injector.get(ru),F=s.createRenderer(null,null);return{ngModule:n,injector:t,projectableNodes:c,selectorOrNode:f,sanitizer:b,rendererFactory:s,renderer:F,errorHandler:A}}function gS(t,n,s,c){const f=e1(s);return Fp(js.create,sE,null,[t,n,f,c])}function _S(t,n,s,c){return s=J0.get(n.element.componentProvider.provider.token)||e1(s),Fp(js.create,lE,null,[t,n,s,c])}function yS(t,n,s,c){const f=function(t){const{hasOverrides:n,hasDeprecatedOverrides:s}=function(b){let A=!1,F=!1;return 0===sp.size||(b.providers.forEach(V=>{const q=sp.get(V.token);3840&V.flags&&q&&(A=!0,F=F||q.deprecatedBehavior)}),b.modules.forEach(V=>{l_.forEach((q,oe)=>{Se(gr(oe).providedIn)===V&&(A=!0,F=F||q.deprecatedBehavior)})})),{hasOverrides:A,hasDeprecatedOverrides:F}}(t);return n?(function(b){for(let A=0;A<b.providers.length;A++){const F=b.providers[A];s&&(F.flags|=4096);const V=sp.get(F.token);V&&(F.flags=-3841&F.flags|V.flags,F.deps=$g(V.deps),F.value=V.value)}if(l_.size>0){let A=new Set(b.modules);l_.forEach((F,V)=>{if(A.has(Se(gr(V).providedIn))){let q={token:V,flags:F.flags|(s?4096:0),deps:$g(F.deps),value:F.value,index:b.providers.length};b.providers.push(q),b.providersByKey[jl(V)]=q}})}}(t=t.factory(()=>xh)),t):t}(c);return ix(t,n,s,f)}const sp=new Map,l_=new Map,J0=new Map;function vS(t){let n;sp.set(t.token,t),"function"==typeof t.token&&(n=gr(t.token))&&"function"==typeof n.providedIn&&l_.set(t.token,t)}function bS(t,n){const s=Dm(nx(n)),c=Dm(s.nodes[0].element.componentView);J0.set(t,c)}function xS(){sp.clear(),l_.clear(),J0.clear()}function e1(t){if(0===sp.size)return t;const n=function(f){const b=[];let A=null;for(let F=0;F<f.nodes.length;F++){const V=f.nodes[F];1&V.flags&&(A=V),A&&3840&V.flags&&sp.has(V.provider.token)&&(b.push(A.nodeIndex),A=null)}return b}(t);if(0===n.length)return t;t=t.factory(()=>xh);for(let f=0;f<n.length;f++)c(t,n[f]);return t;function c(f,b){for(let A=b+1;A<f.nodes.length;A++){const F=f.nodes[A];if(1&F.flags)return;if(3840&F.flags){const V=F.provider,q=sp.get(V.token);q&&(F.flags=-3841&F.flags|q.flags,V.deps=$g(q.deps),V.value=q.value)}}}}function mE(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){const ct=t.def.nodes[n];return cE(t,ct,s,c,f,b,A,F,V,q,oe,Pe,je),224&ct.flags?Cm(t,n).value:void 0}function gE(t,n,s,c,f,b,A,F,V,q,oe,Pe,je){const ct=t.def.nodes[n];return hE(t,ct,s,c,f,b,A,F,V,q,oe,Pe,je),224&ct.flags?Cm(t,n).value:void 0}function ES(t){return Fp(js.detectChanges,Iy,null,[t])}function CS(t){return Fp(js.checkNoChanges,Sy,null,[t])}function TS(t){return Fp(js.destroy,Y0,null,[t])}var js=(()=>((js=js||{})[js.create=0]="create",js[js.detectChanges=1]="detectChanges",js[js.checkNoChanges=2]="checkNoChanges",js[js.destroy=3]="destroy",js[js.handleEvent=4]="handleEvent",js))();let c_,Am,Py;function Pm(t,n){Am=t,Py=n}function DS(t,n,s,c){return Pm(t,n),Fp(js.handleEvent,t.def.handleEvent,null,[t,n,s,c])}function SS(t,n){if(128&t.state)throw Gb(js[c_]);return Pm(t,vE(t,0)),t.def.updateDirectives(function(c,f,b,...A){const F=c.def.nodes[f];return 0===n?_E(c,F,b,A):yE(c,F,b,A),16384&F.flags&&Pm(c,vE(c,f)),224&F.flags?Cm(c,F.nodeIndex).value:void 0},t)}function IS(t,n){if(128&t.state)throw Gb(js[c_]);return Pm(t,bE(t,0)),t.def.updateRenderer(function(c,f,b,...A){const F=c.def.nodes[f];return 0===n?_E(c,F,b,A):yE(c,F,b,A),3&F.flags&&Pm(c,bE(c,f)),224&F.flags?Cm(c,F.nodeIndex).value:void 0},t)}function _E(t,n,s,c){if(cE(t,n,s,...c)){const b=1===s?c[0]:c;if(16384&n.flags){const A={};for(let q=0;q<n.bindings.length;q++){const oe=n.bindings[q],Pe=b[q];8&oe.flags&&(A[Gh(oe.nonMinifiedName)]=x(Pe))}const F=n.parent,V=jo(t,F.nodeIndex).renderElement;if(F.element.name)for(let q in A){const oe=A[q];null!=oe?t.renderer.setAttribute(V,q,oe):t.renderer.removeAttribute(V,q)}else t.renderer.setValue(V,Nu(`bindings=${JSON.stringify(A,null,2)}`))}}}function yE(t,n,s,c){hE(t,n,s,...c)}function vE(t,n){for(let s=n;s<t.def.nodes.length;s++){const c=t.def.nodes[s];if(16384&c.flags&&c.bindings&&c.bindings.length)return s}return null}function bE(t,n){for(let s=n;s<t.def.nodes.length;s++){const c=t.def.nodes[s];if(3&c.flags&&c.bindings&&c.bindings.length)return s}return null}class t1{constructor(n,s){this.view=n,this.nodeIndex=s,null==s&&(this.nodeIndex=s=0),this.nodeDef=n.def.nodes[s];let c=this.nodeDef,f=n;for(;c&&0==(1&c.flags);)c=c.parent;if(!c)for(;!c&&f;)c=Tm(f),f=f.parent;this.elDef=c,this.elView=f}get elOrCompView(){return jo(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return rx(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const n=[];if(this.elDef)for(let s=this.elDef.nodeIndex+1;s<=this.elDef.nodeIndex+this.elDef.childCount;s++){const c=this.elView.def.nodes[s];20224&c.flags&&n.push(c.provider.token),s+=c.childCount}return n}get references(){const n={};if(this.elDef){xE(this.elView,this.elDef,n);for(let s=this.elDef.nodeIndex+1;s<=this.elDef.nodeIndex+this.elDef.childCount;s++){const c=this.elView.def.nodes[s];20224&c.flags&&xE(this.elView,c,n),s+=c.childCount}}return n}get componentRenderElement(){const n=function(t){for(;t&&!kp(t);)t=t.parent;return t.parent?jo(t.parent,Tm(t).nodeIndex):null}(this.elOrCompView);return n?n.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Hg(this.view,this.nodeDef):Hg(this.elView,this.elDef)}logError(n,...s){let c,f;2&this.nodeDef.flags?(c=this.view.def,f=this.nodeDef.nodeIndex):(c=this.elView.def,f=this.elDef.nodeIndex);const b=function(t,n){let s=-1;for(let c=0;c<=n;c++)3&t.nodes[c].flags&&s++;return s}(c,f);let A=-1;c.factory(()=>(A++,A===b?n.error.bind(n,...s):xh)),A<b&&(n.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),n.error(...s))}}function xE(t,n,s){for(let c in n.references)s[c]=iE(t,n,n.references[c])}function Fp(t,n,s,c){const f=c_,b=Am,A=Py;try{c_=t;const F=n.apply(s,c);return Am=b,Py=A,c_=f,F}catch(F){throw function(t){return!!Xd(t)}(F)||!Am?F:function(t,n){return t instanceof Error||(t=new Error(t.toString())),$b(t,n),t}(F,n1())}}function n1(){return Am?new t1(Am,Py):null}class PS{constructor(n){this.delegate=n}createRenderer(n,s){return new OS(this.delegate.createRenderer(n,s))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class OS{constructor(n){this.delegate=n,this.debugContextFactory=n1,this.data=this.delegate.data}createDebugContext(n){return this.debugContextFactory(n)}destroyNode(n){const s=Ka(n);s&&(Cy.delete(s.nativeNode),s instanceof r_&&(s.listeners.length=0)),this.delegate.destroyNode&&this.delegate.destroyNode(n)}destroy(){this.delegate.destroy()}createElement(n,s){const c=this.delegate.createElement(n,s),f=this.createDebugContext(c);if(f){const b=new Xa(c,null,f);b.name=n,Dy(b)}return c}createComment(n){const s=this.delegate.createComment(Nu(n)),c=this.createDebugContext(s);return c&&Dy(new r_(s,null,c)),s}createText(n){const s=this.delegate.createText(n),c=this.createDebugContext(s);return c&&Dy(new r_(s,null,c)),s}appendChild(n,s){const c=Ka(n),f=Ka(s);c&&f&&c instanceof Xa&&c.addChild(f),this.delegate.appendChild(n,s)}insertBefore(n,s,c,f){const b=Ka(n),A=Ka(s),F=Ka(c);b&&A&&b instanceof Xa&&b.insertBefore(F,A),this.delegate.insertBefore(n,s,c,f)}removeChild(n,s){const c=Ka(n),f=Ka(s);c&&f&&c instanceof Xa&&c.removeChild(f),this.delegate.removeChild(n,s)}selectRootElement(n,s){const c=this.delegate.selectRootElement(n,s),f=n1();return f&&Dy(new Xa(c,null,f)),c}setAttribute(n,s,c,f){const b=Ka(n);b&&b instanceof Xa&&(b.attributes[f?f+":"+s:s]=c),this.delegate.setAttribute(n,s,c,f)}removeAttribute(n,s,c){const f=Ka(n);f&&f instanceof Xa&&(f.attributes[c?c+":"+s:s]=null),this.delegate.removeAttribute(n,s,c)}addClass(n,s){const c=Ka(n);c&&c instanceof Xa&&(c.classes[s]=!0),this.delegate.addClass(n,s)}removeClass(n,s){const c=Ka(n);c&&c instanceof Xa&&(c.classes[s]=!1),this.delegate.removeClass(n,s)}setStyle(n,s,c,f){const b=Ka(n);b&&b instanceof Xa&&(b.styles[s]=c),this.delegate.setStyle(n,s,c,f)}removeStyle(n,s,c){const f=Ka(n);f&&f instanceof Xa&&(f.styles[s]=null),this.delegate.removeStyle(n,s,c)}setProperty(n,s,c){const f=Ka(n);f&&f instanceof Xa&&(f.properties[s]=c),this.delegate.setProperty(n,s,c)}listen(n,s,c){if("string"!=typeof n){const f=Ka(n);f&&f.listeners.push(new qw(s,c))}return this.delegate.listen(n,s,c)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setValue(n,s){return this.delegate.setValue(n,s)}}function kS(t){return a_(),Ai.overrideProvider(t)}function RS(t,n){return a_(),Ai.overrideComponentView(t,n)}function LS(){return a_(),Ai.clearOverrides()}function FS(t,n,s){return new BS(t,n,s)}class BS extends Qv{constructor(n,s,c){super(),this.moduleType=n,this._bootstrapComponents=s,this._ngModuleDefFactory=c}create(n){a_();const s=function(t){const n=Array.from(t.providers),s=Array.from(t.modules),c={};for(const f in t.providersByKey)c[f]=t.providersByKey[f];return{factory:t.factory,scope:t.scope,providers:n,modules:s,providersByKey:c}}(Dm(this._ngModuleDefFactory));return Ai.createNgModuleRef(this.moduleType,n||Mo.NULL,this._bootstrapComponents,s)}}function zS(t){return Do().compileDirectiveDeclaration(kc,`ng:///${t.type.name}/\u0275fac.js`,t)}function jS(t){var n,s;fx(t.type,t.decorators,null!==(n=t.ctorParameters)&&void 0!==n?n:null,null!==(s=t.propDecorators)&&void 0!==s?s:null)}function VS(t){return Do().compileComponentDeclaration(kc,`ng:///${t.type.name}/\u0275cmp.js`,t)}function US(t){return Do(function(t){switch(t){case Lo.Directive:return"directive";case Lo.Component:return"component";case Lo.Injectable:return"injectable";case Lo.Pipe:return"pipe";case Lo.NgModule:;}}(t.target)).compileFactoryDeclaration(kc,`ng:///${t.type.name}/\u0275fac.js`,t)}function $S(t){return Do().compileInjectableDeclaration(kc,`ng:///${t.type.name}/\u0275prov.js`,t)}function GS(t){return Do().compileInjectorDeclaration(kc,`ng:///${t.type.name}/\u0275inj.js`,t)}function WS(t){return Do().compileNgModuleDeclaration(kc,`ng:///${t.type.name}/\u0275mod.js`,t)}function ZS(t){return Do().compilePipeDeclaration(kc,`ng:///${t.type.name}/\u0275pipe.js`,t)}},9075:(me,we,v)=>{"use strict";v.r(we),v.d(we,{\u0275getDOM:()=>O.\u0275getDOM,BrowserModule:()=>vt,BrowserTransferStateModule:()=>Bn,By:()=>Wi,DomSanitizer:()=>fn,EVENT_MANAGER_PLUGINS:()=>Lt,EventManager:()=>Xt,HAMMER_GESTURE_CONFIG:()=>fi,HAMMER_LOADER:()=>pi,HammerGestureConfig:()=>ii,HammerModule:()=>Er,Meta:()=>at,Title:()=>wn,TransferState:()=>ut,VERSION:()=>Zr,disableDebugTools:()=>Vr,enableDebugTools:()=>mr,makeStateKey:()=>qn,platformBrowser:()=>Ge,\u0275BROWSER_SANITIZATION_PROVIDERS:()=>Re,\u0275BROWSER_SANITIZATION_PROVIDERS__POST_R3__:()=>ue,\u0275BrowserDomAdapter:()=>l,\u0275BrowserGetTestability:()=>fe,\u0275DomEventsPlugin:()=>pr,\u0275DomRendererFactory2:()=>vi,\u0275DomSanitizerImpl:()=>Vi,\u0275DomSharedStylesHost:()=>mn,\u0275ELEMENT_PROBE_PROVIDERS:()=>jt,\u0275ELEMENT_PROBE_PROVIDERS__POST_R3__:()=>Kt,\u0275HAMMER_PROVIDERS__POST_R3__:()=>nr,\u0275HammerGesturesPlugin:()=>Li,\u0275INTERNAL_BROWSER_PLATFORM_PROVIDERS:()=>ke,\u0275KeyEventsPlugin:()=>Wt,\u0275NAMESPACE_URIS:()=>Jn,\u0275SharedStylesHost:()=>cn,\u0275TRANSITION_ID:()=>he,\u0275angular_packages_platform_browser_platform_browser_a:()=>Tr,\u0275angular_packages_platform_browser_platform_browser_b:()=>Nn,\u0275angular_packages_platform_browser_platform_browser_c:()=>it,\u0275angular_packages_platform_browser_platform_browser_d:()=>wt,\u0275angular_packages_platform_browser_platform_browser_e:()=>an,\u0275angular_packages_platform_browser_platform_browser_f:()=>hr,\u0275angular_packages_platform_browser_platform_browser_g:()=>Zt,\u0275angular_packages_platform_browser_platform_browser_h:()=>Hr,\u0275angular_packages_platform_browser_platform_browser_i:()=>Gr,\u0275angular_packages_platform_browser_platform_browser_j:()=>Rr,\u0275angular_packages_platform_browser_platform_browser_k:()=>ce,\u0275angular_packages_platform_browser_platform_browser_l:()=>ie,\u0275angular_packages_platform_browser_platform_browser_m:()=>Ct,\u0275angular_packages_platform_browser_platform_browser_n:()=>xt,\u0275angular_packages_platform_browser_platform_browser_o:()=>be,\u0275angular_packages_platform_browser_platform_browser_p:()=>te,\u0275escapeHtml:()=>Mr,\u0275flattenStyles:()=>An,\u0275initDomAdapter:()=>ao,\u0275shimContentAttribute:()=>Pi,\u0275shimHostAttribute:()=>Nt});var O=v(8583),d=v(3018);class te extends O.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class l extends te{static makeCurrent(){(0,O.\u0275setRootDomAdapter)(new l)}onAndCancel(dt,Ne,We){return dt.addEventListener(Ne,We,!1),()=>{dt.removeEventListener(Ne,We,!1)}}dispatchEvent(dt,Ne){dt.dispatchEvent(Ne)}remove(dt){dt.parentNode&&dt.parentNode.removeChild(dt)}createElement(dt,Ne){return(Ne=Ne||this.getDefaultDocument()).createElement(dt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(dt){return dt.nodeType===Node.ELEMENT_NODE}isShadowRoot(dt){return dt instanceof DocumentFragment}getGlobalEventTarget(dt,Ne){return"window"===Ne?window:"document"===Ne?dt:"body"===Ne?dt.body:null}getBaseHref(dt){const Ne=(J=J||document.querySelector("base"),J?J.getAttribute("href"):null);return null==Ne?null:function(_t){_e=_e||document.createElement("a"),_e.setAttribute("href",_t);const dt=_e.pathname;return"/"===dt.charAt(0)?dt:`/${dt}`}(Ne)}resetBaseElement(){J=null}getUserAgent(){return window.navigator.userAgent}getCookie(dt){return(0,O.\u0275parseCookieValue)(document.cookie,dt)}}let _e,J=null;const he=new d.InjectionToken("TRANSITION_ID");function ce(_t,dt,Ne){return()=>{Ne.get(d.ApplicationInitStatus).donePromise.then(()=>{const We=(0,O.\u0275getDOM)(),bt=dt.querySelectorAll(`style[ng-transition="${_t}"]`);for(let Sn=0;Sn<bt.length;Sn++)We.remove(bt[Sn])})}}const ie=[{provide:d.APP_INITIALIZER,useFactory:ce,deps:[he,O.DOCUMENT,d.Injector],multi:!0}];class fe{static init(){(0,d.setTestabilityGetter)(new fe)}addToWindow(dt){d.\u0275global.getAngularTestability=(We,bt=!0)=>{const Sn=dt.findTestabilityInTree(We,bt);if(null==Sn)throw new Error("Could not find testability for element.");return Sn},d.\u0275global.getAllAngularTestabilities=()=>dt.getAllTestabilities(),d.\u0275global.getAllAngularRootElements=()=>dt.getAllRootElements(),d.\u0275global.frameworkStabilizers||(d.\u0275global.frameworkStabilizers=[]),d.\u0275global.frameworkStabilizers.push(We=>{const bt=d.\u0275global.getAllAngularTestabilities();let Sn=bt.length,vr=!1;const Br=function(or){vr=vr||or,Sn--,0==Sn&&We(vr)};bt.forEach(function(or){or.whenStable(Br)})})}findTestabilityInTree(dt,Ne,We){if(null==Ne)return null;const bt=dt.getTestability(Ne);return null!=bt?bt:We?(0,O.\u0275getDOM)().isShadowRoot(Ne)?this.findTestabilityInTree(dt,Ne.host,!0):this.findTestabilityInTree(dt,Ne.parentElement,!0):null}}let be=(()=>{class _t{build(){return new XMLHttpRequest}}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();function Je(_t,dt){"undefined"!=typeof COMPILED&&COMPILED||((d.\u0275global.ng=d.\u0275global.ng||{})[_t]=dt)}const yt=(()=>({ApplicationRef:d.ApplicationRef,NgZone:d.NgZone}))();function Tt(_t){return(0,d.\u0275getDebugNodeR2)(_t)}function Ct(_t){return Je("probe",Tt),Je("coreTokens",Object.assign(Object.assign({},yt),function(_t){return _t.reduce((dt,Ne)=>(dt[Ne.name]=Ne.token,dt),{})}(_t||[]))),()=>Tt}const Kt=[],xt=[{provide:d.APP_INITIALIZER,useFactory:Ct,deps:[[d.NgProbeToken,new d.Optional]],multi:!0}],jt=Kt,Lt=new d.InjectionToken("EventManagerPlugins");let Xt=(()=>{class _t{constructor(Ne,We){this._zone=We,this._eventNameToPlugin=new Map,Ne.forEach(bt=>bt.manager=this),this._plugins=Ne.slice().reverse()}addEventListener(Ne,We,bt){return this._findPluginFor(We).addEventListener(Ne,We,bt)}addGlobalEventListener(Ne,We,bt){return this._findPluginFor(We).addGlobalEventListener(Ne,We,bt)}getZone(){return this._zone}_findPluginFor(Ne){const We=this._eventNameToPlugin.get(Ne);if(We)return We;const bt=this._plugins;for(let Sn=0;Sn<bt.length;Sn++){const vr=bt[Sn];if(vr.supports(Ne))return this._eventNameToPlugin.set(Ne,vr),vr}throw new Error(`No event manager plugin found for event ${Ne}`)}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(Lt),d.\u0275\u0275inject(d.NgZone))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();class Zt{constructor(dt){this._doc=dt}addGlobalEventListener(dt,Ne,We){const bt=(0,O.\u0275getDOM)().getGlobalEventTarget(this._doc,dt);if(!bt)throw new Error(`Unsupported event target ${bt} for event ${Ne}`);return this.addEventListener(bt,Ne,We)}}let cn=(()=>{class _t{constructor(){this._stylesSet=new Set}addStyles(Ne){const We=new Set;Ne.forEach(bt=>{this._stylesSet.has(bt)||(this._stylesSet.add(bt),We.add(bt))}),this.onStylesAdded(We)}onStylesAdded(Ne){}getAllStyles(){return Array.from(this._stylesSet)}}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})(),mn=(()=>{class _t extends cn{constructor(Ne){super(),this._doc=Ne,this._hostNodes=new Map,this._hostNodes.set(Ne.head,[])}_addStylesToHost(Ne,We,bt){Ne.forEach(Sn=>{const vr=this._doc.createElement("style");vr.textContent=Sn,bt.push(We.appendChild(vr))})}addHost(Ne){const We=[];this._addStylesToHost(this._stylesSet,Ne,We),this._hostNodes.set(Ne,We)}removeHost(Ne){const We=this._hostNodes.get(Ne);We&&We.forEach(Lr),this._hostNodes.delete(Ne)}onStylesAdded(Ne){this._hostNodes.forEach((We,bt)=>{this._addStylesToHost(Ne,bt,We)})}ngOnDestroy(){this._hostNodes.forEach(Ne=>Ne.forEach(Lr))}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();function Lr(_t){(0,O.\u0275getDOM)().remove(_t)}const Jn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fr=/%COMP%/g;function Pi(_t){return"_ngcontent-%COMP%".replace(fr,_t)}function Nt(_t){return"_nghost-%COMP%".replace(fr,_t)}function An(_t,dt,Ne){for(let We=0;We<dt.length;We++){let bt=dt[We];Array.isArray(bt)?An(_t,bt,Ne):(bt=bt.replace(fr,_t),Ne.push(bt))}return Ne}function ni(_t){return dt=>{if("__ngUnwrap__"===dt)return _t;!1===_t(dt)&&(dt.preventDefault(),dt.returnValue=!1)}}let vi=(()=>{class _t{constructor(Ne,We,bt){this.eventManager=Ne,this.sharedStylesHost=We,this.appId=bt,this.rendererByCompId=new Map,this.defaultRenderer=new Zn(Ne)}createRenderer(Ne,We){if(!Ne||!We)return this.defaultRenderer;switch(We.encapsulation){case d.ViewEncapsulation.Emulated:{let bt=this.rendererByCompId.get(We.id);return bt||(bt=new ri(this.eventManager,this.sharedStylesHost,We,this.appId),this.rendererByCompId.set(We.id,bt)),bt.applyToHost(Ne),bt}case 1:case d.ViewEncapsulation.ShadowDom:return new bi(this.eventManager,this.sharedStylesHost,Ne,We);default:if(!this.rendererByCompId.has(We.id)){const bt=An(We.id,We.styles,[]);this.sharedStylesHost.addStyles(bt),this.rendererByCompId.set(We.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(Xt),d.\u0275\u0275inject(mn),d.\u0275\u0275inject(d.APP_ID))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();class Zn{constructor(dt){this.eventManager=dt,this.data=Object.create(null)}destroy(){}createElement(dt,Ne){return Ne?document.createElementNS(Jn[Ne]||Ne,dt):document.createElement(dt)}createComment(dt){return document.createComment(dt)}createText(dt){return document.createTextNode(dt)}appendChild(dt,Ne){dt.appendChild(Ne)}insertBefore(dt,Ne,We){dt&&dt.insertBefore(Ne,We)}removeChild(dt,Ne){dt&&dt.removeChild(Ne)}selectRootElement(dt,Ne){let We="string"==typeof dt?document.querySelector(dt):dt;if(!We)throw new Error(`The selector "${dt}" did not match any elements`);return Ne||(We.textContent=""),We}parentNode(dt){return dt.parentNode}nextSibling(dt){return dt.nextSibling}setAttribute(dt,Ne,We,bt){if(bt){Ne=bt+":"+Ne;const Sn=Jn[bt];Sn?dt.setAttributeNS(Sn,Ne,We):dt.setAttribute(Ne,We)}else dt.setAttribute(Ne,We)}removeAttribute(dt,Ne,We){if(We){const bt=Jn[We];bt?dt.removeAttributeNS(bt,Ne):dt.removeAttribute(`${We}:${Ne}`)}else dt.removeAttribute(Ne)}addClass(dt,Ne){dt.classList.add(Ne)}removeClass(dt,Ne){dt.classList.remove(Ne)}setStyle(dt,Ne,We,bt){bt&(d.RendererStyleFlags2.DashCase|d.RendererStyleFlags2.Important)?dt.style.setProperty(Ne,We,bt&d.RendererStyleFlags2.Important?"important":""):dt.style[Ne]=We}removeStyle(dt,Ne,We){We&d.RendererStyleFlags2.DashCase?dt.style.removeProperty(Ne):dt.style[Ne]=""}setProperty(dt,Ne,We){dt[Ne]=We}setValue(dt,Ne){dt.nodeValue=Ne}listen(dt,Ne,We){return"string"==typeof dt?this.eventManager.addGlobalEventListener(dt,Ne,ni(We)):this.eventManager.addEventListener(dt,Ne,ni(We))}}class ri extends Zn{constructor(dt,Ne,We,bt){super(dt),this.component=We;const Sn=An(bt+"-"+We.id,We.styles,[]);Ne.addStyles(Sn),this.contentAttr=Pi(bt+"-"+We.id),this.hostAttr=Nt(bt+"-"+We.id)}applyToHost(dt){super.setAttribute(dt,this.hostAttr,"")}createElement(dt,Ne){const We=super.createElement(dt,Ne);return super.setAttribute(We,this.contentAttr,""),We}}class bi extends Zn{constructor(dt,Ne,We,bt){super(dt),this.sharedStylesHost=Ne,this.hostEl=We,this.shadowRoot=We.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Sn=An(bt.id,bt.styles,[]);for(let vr=0;vr<Sn.length;vr++){const Br=document.createElement("style");Br.textContent=Sn[vr],this.shadowRoot.appendChild(Br)}}nodeOrShadowRoot(dt){return dt===this.hostEl?this.shadowRoot:dt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(dt,Ne){return super.appendChild(this.nodeOrShadowRoot(dt),Ne)}insertBefore(dt,Ne,We){return super.insertBefore(this.nodeOrShadowRoot(dt),Ne,We)}removeChild(dt,Ne){return super.removeChild(this.nodeOrShadowRoot(dt),Ne)}parentNode(dt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(dt)))}}let pr=(()=>{class _t extends Zt{constructor(Ne){super(Ne)}supports(Ne){return!0}addEventListener(Ne,We,bt){return Ne.addEventListener(We,bt,!1),()=>this.removeEventListener(Ne,We,bt)}removeEventListener(Ne,We,bt){return Ne.removeEventListener(We,bt)}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();const _o={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},fi=new d.InjectionToken("HammerGestureConfig"),pi=new d.InjectionToken("HammerLoader");let ii=(()=>{class _t{constructor(){this.events=[],this.overrides={}}buildHammer(Ne){const We=new Hammer(Ne,this.options);We.get("pinch").set({enable:!0}),We.get("rotate").set({enable:!0});for(const bt in this.overrides)We.get(bt).set(this.overrides[bt]);return We}}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})(),Li=(()=>{class _t extends Zt{constructor(Ne,We,bt,Sn){super(Ne),this._config=We,this.console=bt,this.loader=Sn,this._loaderPromise=null}supports(Ne){return!(!_o.hasOwnProperty(Ne.toLowerCase())&&!this.isCustomEvent(Ne)||!window.Hammer&&!this.loader)}addEventListener(Ne,We,bt){const Sn=this.manager.getZone();if(We=We.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let vr=!1,Br=()=>{vr=!0};return this._loaderPromise.then(()=>{window.Hammer?vr||(Br=this.addEventListener(Ne,We,bt)):Br=()=>{}}).catch(()=>{Br=()=>{}}),()=>{Br()}}return Sn.runOutsideAngular(()=>{const vr=this._config.buildHammer(Ne),Br=function(or){Sn.runGuarded(function(){bt(or)})};return vr.on(We,Br),()=>{vr.off(We,Br),"function"==typeof vr.destroy&&vr.destroy()}})}isCustomEvent(Ne){return this._config.events.indexOf(Ne)>-1}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT),d.\u0275\u0275inject(fi),d.\u0275\u0275inject(d.\u0275Console),d.\u0275\u0275inject(pi,8))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();const nr=[],Hr=[{provide:Lt,useClass:Li,multi:!0,deps:[O.DOCUMENT,fi,d.\u0275Console,[new d.Optional,pi]]},{provide:fi,useClass:ii,deps:[]}],Gr=nr;let Er=(()=>{class _t{}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275mod=d.\u0275\u0275defineNgModule({type:_t}),_t.\u0275inj=d.\u0275\u0275defineInjector({providers:Hr}),_t})();const Cr=["alt","control","meta","shift"],ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jn={alt:_t=>_t.altKey,control:_t=>_t.ctrlKey,meta:_t=>_t.metaKey,shift:_t=>_t.shiftKey};let Wt=(()=>{class _t extends Zt{constructor(Ne){super(Ne)}supports(Ne){return null!=_t.parseEventName(Ne)}addEventListener(Ne,We,bt){const Sn=_t.parseEventName(We),vr=_t.eventCallback(Sn.fullKey,bt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,O.\u0275getDOM)().onAndCancel(Ne,Sn.domEventName,vr))}static parseEventName(Ne){const We=Ne.toLowerCase().split("."),bt=We.shift();if(0===We.length||"keydown"!==bt&&"keyup"!==bt)return null;const Sn=_t._normalizeKey(We.pop());let vr="";if(Cr.forEach(or=>{const Ui=We.indexOf(or);Ui>-1&&(We.splice(Ui,1),vr+=or+".")}),vr+=Sn,0!=We.length||0===Sn.length)return null;const Br={};return Br.domEventName=bt,Br.fullKey=vr,Br}static getEventFullKey(Ne){let We="",bt=function(_t){let dt=_t.key;if(null==dt){if(dt=_t.keyIdentifier,null==dt)return"Unidentified";dt.startsWith("U+")&&(dt=String.fromCharCode(parseInt(dt.substring(2),16)),3===_t.location&&Pt.hasOwnProperty(dt)&&(dt=Pt[dt]))}return ir[dt]||dt}(Ne);return bt=bt.toLowerCase()," "===bt?bt="space":"."===bt&&(bt="dot"),Cr.forEach(Sn=>{Sn!=bt&&jn[Sn](Ne)&&(We+=Sn+".")}),We+=bt,We}static eventCallback(Ne,We,bt){return Sn=>{_t.getEventFullKey(Sn)===Ne&&bt.runGuarded(()=>We(Sn))}}static _normalizeKey(Ne){return"esc"===Ne?"escape":Ne}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})(),fn=(()=>{class _t{}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275prov=(0,d.\u0275\u0275defineInjectable)({factory:function(){return(0,d.\u0275\u0275inject)(Vi)},token:_t,providedIn:"root"}),_t})();function Rr(_t){return new Vi(_t.get(O.DOCUMENT))}let Vi=(()=>{class _t extends fn{constructor(Ne){super(),this._doc=Ne}sanitize(Ne,We){if(null==We)return null;switch(Ne){case d.SecurityContext.NONE:return We;case d.SecurityContext.HTML:return(0,d.\u0275allowSanitizationBypassAndThrow)(We,"HTML")?(0,d.\u0275unwrapSafeValue)(We):(0,d.\u0275_sanitizeHtml)(this._doc,String(We)).toString();case d.SecurityContext.STYLE:return(0,d.\u0275allowSanitizationBypassAndThrow)(We,"Style")?(0,d.\u0275unwrapSafeValue)(We):We;case d.SecurityContext.SCRIPT:if((0,d.\u0275allowSanitizationBypassAndThrow)(We,"Script"))return(0,d.\u0275unwrapSafeValue)(We);throw new Error("unsafe value used in a script context");case d.SecurityContext.URL:return(0,d.\u0275getSanitizationBypassType)(We),(0,d.\u0275allowSanitizationBypassAndThrow)(We,"URL")?(0,d.\u0275unwrapSafeValue)(We):(0,d.\u0275_sanitizeUrl)(String(We));case d.SecurityContext.RESOURCE_URL:if((0,d.\u0275allowSanitizationBypassAndThrow)(We,"ResourceURL"))return(0,d.\u0275unwrapSafeValue)(We);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ne} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ne){return(0,d.\u0275bypassSanitizationTrustHtml)(Ne)}bypassSecurityTrustStyle(Ne){return(0,d.\u0275bypassSanitizationTrustStyle)(Ne)}bypassSecurityTrustScript(Ne){return(0,d.\u0275bypassSanitizationTrustScript)(Ne)}bypassSecurityTrustUrl(Ne){return(0,d.\u0275bypassSanitizationTrustUrl)(Ne)}bypassSecurityTrustResourceUrl(Ne){return(0,d.\u0275bypassSanitizationTrustResourceUrl)(Ne)}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=(0,d.\u0275\u0275defineInjectable)({factory:function(){return Rr((0,d.\u0275\u0275inject)(d.INJECTOR))},token:_t,providedIn:"root"}),_t})();function ao(){l.makeCurrent(),fe.init()}function Tr(){return new d.ErrorHandler}function Nn(){return(0,d.\u0275setDocument)(document),document}const ke=[{provide:d.PLATFORM_ID,useValue:O.\u0275PLATFORM_BROWSER_ID},{provide:d.PLATFORM_INITIALIZER,useValue:ao,multi:!0},{provide:O.DOCUMENT,useFactory:Nn,deps:[]}],ue=[],Re=ue,Ge=(0,d.createPlatformFactory)(d.platformCore,"browser",ke),it=[Re,{provide:d.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:d.ErrorHandler,useFactory:Tr,deps:[]},{provide:Lt,useClass:pr,multi:!0,deps:[O.DOCUMENT,d.NgZone,d.PLATFORM_ID]},{provide:Lt,useClass:Wt,multi:!0,deps:[O.DOCUMENT]},Gr,{provide:vi,useClass:vi,deps:[Xt,mn,d.APP_ID]},{provide:d.RendererFactory2,useExisting:vi},{provide:cn,useExisting:mn},{provide:mn,useClass:mn,deps:[O.DOCUMENT]},{provide:d.Testability,useClass:d.Testability,deps:[d.NgZone]},{provide:Xt,useClass:Xt,deps:[Lt,d.NgZone]},{provide:O.XhrFactory,useClass:be,deps:[]},jt];let vt=(()=>{class _t{constructor(Ne){if(Ne)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ne){return{ngModule:_t,providers:[{provide:d.APP_ID,useValue:Ne.appId},{provide:he,useExisting:d.APP_ID},ie]}}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(_t,12))},_t.\u0275mod=d.\u0275\u0275defineNgModule({type:_t}),_t.\u0275inj=d.\u0275\u0275defineInjector({providers:it,imports:[O.CommonModule,d.ApplicationModule]}),_t})();function wt(){return new at((0,d.\u0275\u0275inject)(O.DOCUMENT))}let at=(()=>{class _t{constructor(Ne){this._doc=Ne,this._dom=(0,O.\u0275getDOM)()}addTag(Ne,We=!1){return Ne?this._getOrCreateElement(Ne,We):null}addTags(Ne,We=!1){return Ne?Ne.reduce((bt,Sn)=>(Sn&&bt.push(this._getOrCreateElement(Sn,We)),bt),[]):[]}getTag(Ne){return Ne&&this._doc.querySelector(`meta[${Ne}]`)||null}getTags(Ne){if(!Ne)return[];const We=this._doc.querySelectorAll(`meta[${Ne}]`);return We?[].slice.call(We):[]}updateTag(Ne,We){if(!Ne)return null;We=We||this._parseSelector(Ne);const bt=this.getTag(We);return bt?this._setMetaElementAttributes(Ne,bt):this._getOrCreateElement(Ne,!0)}removeTag(Ne){this.removeTagElement(this.getTag(Ne))}removeTagElement(Ne){Ne&&this._dom.remove(Ne)}_getOrCreateElement(Ne,We=!1){if(!We){const vr=this._parseSelector(Ne),Br=this.getTags(vr).filter(or=>this._containsAttributes(Ne,or))[0];if(void 0!==Br)return Br}const bt=this._dom.createElement("meta");return this._setMetaElementAttributes(Ne,bt),this._doc.getElementsByTagName("head")[0].appendChild(bt),bt}_setMetaElementAttributes(Ne,We){return Object.keys(Ne).forEach(bt=>We.setAttribute(this._getMetaKeyMap(bt),Ne[bt])),We}_parseSelector(Ne){const We=Ne.name?"name":"property";return`${We}="${Ne[We]}"`}_containsAttributes(Ne,We){return Object.keys(Ne).every(bt=>We.getAttribute(this._getMetaKeyMap(bt))===Ne[bt])}_getMetaKeyMap(Ne){return It[Ne]||Ne}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=(0,d.\u0275\u0275defineInjectable)({factory:wt,token:_t,providedIn:"root"}),_t})();const It={httpEquiv:"http-equiv"};function an(){return new wn((0,d.\u0275\u0275inject)(O.DOCUMENT))}let wn=(()=>{class _t{constructor(Ne){this._doc=Ne}getTitle(){return this._doc.title}setTitle(Ne){this._doc.title=Ne||""}}return _t.\u0275fac=function(Ne){return new(Ne||_t)(d.\u0275\u0275inject(O.DOCUMENT))},_t.\u0275prov=(0,d.\u0275\u0275defineInjectable)({factory:an,token:_t,providedIn:"root"}),_t})();const Jt="undefined"!=typeof window&&window||{};class er{constructor(dt,Ne){this.msPerTick=dt,this.numTicks=Ne}}class sr{constructor(dt){this.appRef=dt.injector.get(d.ApplicationRef)}timeChangeDetection(dt){const Ne=dt&&dt.record,We="Change Detection",bt=null!=Jt.console.profile;Ne&&bt&&Jt.console.profile(We);const Sn=tr();let vr=0;for(;vr<5||tr()-Sn<500;)this.appRef.tick(),vr++;const Br=tr();Ne&&bt&&Jt.console.profileEnd(We);const or=(Br-Sn)/vr;return Jt.console.log(`ran ${vr} change detection cycles`),Jt.console.log(`${or.toFixed(2)} ms per check`),new er(or,vr)}}function tr(){return Jt.performance&&Jt.performance.now?Jt.performance.now():(new Date).getTime()}const Xn="profiler";function mr(_t){return Je(Xn,new sr(_t)),_t}function Vr(){Je(Xn,null)}function Mr(_t){const dt={"&":"&a;",'"':"&q;","'":"&s;","<":"&l;",">":"&g;"};return _t.replace(/[&"'<>]/g,Ne=>dt[Ne])}function qn(_t){return _t}let ut=(()=>{class _t{constructor(){this.store={},this.onSerializeCallbacks={}}static init(Ne){const We=new _t;return We.store=Ne,We}get(Ne,We){return void 0!==this.store[Ne]?this.store[Ne]:We}set(Ne,We){this.store[Ne]=We}remove(Ne){delete this.store[Ne]}hasKey(Ne){return this.store.hasOwnProperty(Ne)}onSerialize(Ne,We){this.onSerializeCallbacks[Ne]=We}toJson(){for(const Ne in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(Ne))try{this.store[Ne]=this.onSerializeCallbacks[Ne]()}catch(We){console.warn("Exception in onSerialize callback: ",We)}return JSON.stringify(this.store)}}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275prov=d.\u0275\u0275defineInjectable({token:_t,factory:_t.\u0275fac}),_t})();function hr(_t,dt){const Ne=_t.getElementById(dt+"-state");let We={};if(Ne&&Ne.textContent)try{We=JSON.parse(function(_t){const dt={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"};return _t.replace(/&[^;]+;/g,Ne=>dt[Ne])}(Ne.textContent))}catch(bt){console.warn("Exception while restoring TransferState for app "+dt,bt)}return ut.init(We)}let Bn=(()=>{class _t{}return _t.\u0275fac=function(Ne){return new(Ne||_t)},_t.\u0275mod=d.\u0275\u0275defineNgModule({type:_t}),_t.\u0275inj=d.\u0275\u0275defineInjector({providers:[{provide:ut,useFactory:hr,deps:[O.DOCUMENT,d.APP_ID]}]}),_t})();class Wi{static all(){return()=>!0}static css(dt){return Ne=>null!=Ne.nativeElement&&function(_t,dt){return!!(0,O.\u0275getDOM)().isElementNode(_t)&&(_t.matches&&_t.matches(dt)||_t.msMatchesSelector&&_t.msMatchesSelector(dt)||_t.webkitMatchesSelector&&_t.webkitMatchesSelector(dt))}(Ne.nativeElement,dt)}static directive(dt){return Ne=>-1!==Ne.providerTokens.indexOf(dt)}}const Zr=new d.Version("12.2.16")},9457:function(me,we){var d;void 0!==(d=function(){"use strict";function l(ce,ie,fe){var be=new XMLHttpRequest;be.open("GET",ce),be.responseType="blob",be.onload=function(){he(be.response,ie,fe)},be.onerror=function(){console.error("could not download file")},be.send()}function J(ce){var ie=new XMLHttpRequest;ie.open("HEAD",ce,!1);try{ie.send()}catch(fe){}return 200<=ie.status&&299>=ie.status}function de(ce){try{ce.dispatchEvent(new MouseEvent("click"))}catch(fe){var ie=document.createEvent("MouseEvents");ie.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),ce.dispatchEvent(ie)}}var _e="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,se=_e.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),he=_e.saveAs||("object"!=typeof window||window!==_e?function(){}:"download"in HTMLAnchorElement.prototype&&!se?function(ce,ie,fe){var be=_e.URL||_e.webkitURL,xe=document.createElement("a");xe.download=ie=ie||ce.name||"download",xe.rel="noopener","string"==typeof ce?(xe.href=ce,xe.origin===location.origin?de(xe):J(xe.href)?l(ce,ie,fe):de(xe,xe.target="_blank")):(xe.href=be.createObjectURL(ce),setTimeout(function(){be.revokeObjectURL(xe.href)},4e4),setTimeout(function(){de(xe)},0))}:"msSaveOrOpenBlob"in navigator?function(ce,ie,fe){if(ie=ie||ce.name||"download","string"!=typeof ce)navigator.msSaveOrOpenBlob(function(ce,ie){return void 0===ie?ie={autoBom:!1}:"object"!=typeof ie&&(console.warn("Deprecated: Expected third argument to be a object"),ie={autoBom:!ie}),ie.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ce.type)?new Blob(["\ufeff",ce],{type:ce.type}):ce}(ce,fe),ie);else if(J(ce))l(ce,ie,fe);else{var be=document.createElement("a");be.href=ce,be.target="_blank",setTimeout(function(){de(be)})}}:function(ce,ie,fe,be){if((be=be||open("","_blank"))&&(be.document.title=be.document.body.innerText="downloading..."),"string"==typeof ce)return l(ce,ie,fe);var xe="application/octet-stream"===ce.type,Fe=/constructor/i.test(_e.HTMLElement)||_e.safari,Ye=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ye||xe&&Fe||se)&&"undefined"!=typeof FileReader){var Se=new FileReader;Se.onloadend=function(){var yt=Se.result;yt=Ye?yt:yt.replace(/^data:[^;]*;/,"data:attachment/file;"),be?be.location.href=yt:location=yt,be=null},Se.readAsDataURL(ce)}else{var Je=_e.URL||_e.webkitURL,ht=Je.createObjectURL(ce);be?be.location=ht:location.href=ht,be=null,setTimeout(function(){Je.revokeObjectURL(ht)},4e4)}});_e.saveAs=he.saveAs=he,me.exports=he}.apply(we,[]))&&(me.exports=d)},2958:function(me){me.exports=function(){"use strict";var we,v,O;function d(l,J){if(we)if(v){var de="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+we+")(sharedChunk); ("+v+")(sharedChunk); self.onerror = null;",_e={};we(_e),O=J(_e),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(O.workerUrl=window.URL.createObjectURL(new Blob([de],{type:"text/javascript"})))}else v=J;else we=J}return d(0,function(l){var J="undefined"!=typeof self?self:{},de=_e;function _e(i,e,r,a){this.cx=3*i,this.bx=3*(r-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=a,this.p2x=r,this.p2y=a}_e.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i},_e.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i},_e.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},_e.prototype.solveCurveX=function(i,e){var r,a,h,m,_;for(void 0===e&&(e=1e-6),h=i,_=0;_<8;_++){if(m=this.sampleCurveX(h)-i,Math.abs(m)<e)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=m/w}if((h=i)<(r=0))return r;if(h>(a=1))return a;for(;r<a;){if(m=this.sampleCurveX(h),Math.abs(m-i)<e)return h;i>m?r=h:a=h,h=.5*(a-r)+r}return h},_e.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};var se=he;function he(i,e){this.x=i,this.y=e}he.prototype={clone:function(){return new he(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,r=i.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),r=Math.sin(i),a=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=a,this},_rotateAround:function(i,e){var r=Math.cos(i),a=Math.sin(i),h=e.y+a*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-a*(this.y-e.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},he.convert=function(i){return i instanceof he?i:Array.isArray(i)?new he(i[0],i[1]):i};const ce=Math.PI/180,ie=180/Math.PI;function fe(i){return i*ce}function be(i){return i*ie}const xe=[[0,0],[1,0],[1,1],[0,1]];function Fe(i){if(i<=0)return 0;if(i>=1)return 1;const e=i*i,r=e*i;return 4*(i<.5?r:3*(i-e)+r-.75)}function Ye(i,e,r,a){const h=new de(i,e,r,a);return function(m){return h.solve(m)}}const Se=Ye(.25,.1,.25,1);function Je(i,e,r){return Math.min(r,Math.max(e,i))}function ht(i,e,r){return(r=Je((r-i)/(e-i),0,1))*r*(3-2*r)}function yt(i,e,r){const a=r-e,h=((i-e)%a+a)%a+e;return h===e?r:h}function St(i,e,r){if(!i.length)return r(null,[]);let a=i.length;const h=new Array(i.length);let m=null;i.forEach((_,w)=>{e(_,(P,k)=>{P&&(m=P),h[w]=k,0==--a&&r(m,h)})})}function $t(i){const e=[];for(const r in i)e.push(i[r]);return e}function Tt(i,...e){for(const r of e)for(const a in r)i[a]=r[a];return i}let Ct=1;function Bt(){return Ct++}function Kt(){return function i(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function xt(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function jt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function Lt(i,e){i.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function Xt(i,e){return-1!==i.indexOf(e,i.length-e.length)}function Zt(i,e,r){const a={};for(const h in i)a[h]=e.call(r||this,i[h],h,i);return a}function cn(i,e,r){const a={};for(const h in i)e.call(r||this,i[h],h,i)&&(a[h]=i[h]);return a}function mn(i){return Array.isArray(i)?i.map(mn):"object"==typeof i&&i?Zt(i,mn):i}const Lr={};function Jn(i){Lr[i]||("undefined"!=typeof console&&console.warn(i),Lr[i]=!0)}function fr(i,e,r){return(r.y-i.y)*(e.x-i.x)>(e.y-i.y)*(r.x-i.x)}function Fr(i){let e=0;for(let r,a,h=0,m=i.length,_=m-1;h<m;_=h++)r=i[h],a=i[_],e+=(a.x-r.x)*(r.y+a.y);return e}function si(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function yi(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,a,h,m)=>{const _=h||m;return e[a]=!_||_.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let Ti=null;function Pi(i){if(null==Ti){const e=i.navigator?i.navigator.userAgent:null;Ti=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ti}function Nt(i){try{const e=J[i];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function An(i,e){return[i[4*e],i[4*e+1],i[4*e+2],i[4*e+3]]}const ni=J.performance;function ui(i){const e=i?i.url.toString():void 0;return ni.getEntriesByName(e)}let Zn,Oi,Ur,gr;const ri={now:()=>void 0!==Ur?Ur:J.performance.now(),setNow(i){Ur=i},restoreNow(){Ur=void 0},frame(i){const e=J.requestAnimationFrame(i);return{cancel:()=>J.cancelAnimationFrame(e)}},getImageData(i,e=0){const{width:r,height:a}=i;gr||(gr=J.document.createElement("canvas"));const h=gr.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return(r>gr.width||a>gr.height)&&(gr.width=r,gr.height=a),h.clearRect(-e,-e,r+2*e,a+2*e),h.drawImage(i,0,0,r,a),h.getImageData(-e,-e,r+2*e,a+2*e)},resolveURL:i=>(Zn||(Zn=J.document.createElement("a")),Zn.href=i,Zn.href),get devicePixelRatio(){return J.devicePixelRatio},get prefersReducedMotion(){return!!J.matchMedia&&(null==Oi&&(Oi=J.matchMedia("(prefers-reduced-motion: reduce)")),Oi.matches)}};let bi;const pr={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==bi){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{bi=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):i}catch(e){bi=i}}return bi},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},_o={supported:!1,testSupport:function(i){!ii&&pi&&(Li?nr(i):fi=i)}};let fi,pi,ii=!1,Li=!1;function nr(i){const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,pi),i.isContextLost())return;_o.supported=!0}catch(r){}i.deleteTexture(e),ii=!0}J.document&&(pi=J.document.createElement("img"),pi.onload=function(){fi&&nr(fi),fi=null,Li=!0},pi.onerror=function(){ii=!0,fi=null},pi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Hr="01",Gr="NO_ACCESS_TOKEN";function Er(i){return 0===i.indexOf("mapbox:")}function Cr(i){return pr.API_URL_REGEX.test(i)}const lr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ir(i){const e=i.match(lr);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Pt(i){const e=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${e}`}function qe(i){if(!i)return null;const e=i.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(J.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(r){return null}}class Xe{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=qe(pr.ACCESS_TOKEN);let a="";return a=r&&r.u?J.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(Number("0x"+m)))):pr.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${a}`:`mapbox.eventData:${a}`}fetchEventData(){const e=Nt("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const h=J.localStorage.getItem(r);h&&(this.eventData=JSON.parse(h));const m=J.localStorage.getItem(a);m&&(this.anonId=m)}catch(h){Jn("Unable to read from LocalStorage")}}saveEventData(){const e=Nt("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{J.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&J.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(h){Jn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,a,h){if(!pr.EVENTS_URL)return;const m=ir(pr.EVENTS_URL);m.params.push(`access_token=${h||pr.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.10.0",skuId:Hr,userId:this.anonId},w=r?Tt(_,r):_,P={url:Pt(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=an(P,k=>{this.pendingRequest=null,a(k),this.saveEventData(),this.processRequests(h)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const zt=new class extends Xe{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,e){pr.EVENTS_URL&&pr.ACCESS_TOKEN&&Array.isArray(i)&&i.some(r=>Er(r)||Cr(r))&&this.queueRequest(Date.now(),e)}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=qe(pr.ACCESS_TOKEN),r=e?e.u:pr.ACCESS_TOKEN;let a=r!==this.eventData.tokenU;jt(this.anonId)||(this.anonId=Kt(),a=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),_=new Date(h),w=(h-this.eventData.lastSuccess)/864e5;a=a||w>=1||w<-1||m.getDate()!==_.getDate()}else a=!0;a?this.postEvent(h,{"enabled.telemetry":!1},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=r)},i):this.processRequests()}},Qt=zt.postTurnstileEvent.bind(zt),jn=new class extends Xe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,e,r,a){this.skuToken=e,this.errorCb=a,pr.EVENTS_URL&&(r||pr.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(Gr)))}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),jt(this.anonId)||(this.anonId=Kt()),this.postEvent(r,{skuToken:this.skuToken},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},i))}},Wt=jn.postMapLoadEvent.bind(jn),On=new class extends Xe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,e,r,a){if(!pr.API_URL||!pr.SESSION_PATH)return;const h=ir(pr.API_URL+pr.SESSION_PATH);h.params.push(`sku=${e||""}`),h.params.push(`access_token=${a||pr.ACCESS_TOKEN||""}`);const m={url:Pt(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=wn(m,_=>{this.pendingRequest=null,r(_),this.saveEventData(),this.processRequests(a)})}getSessionAPI(i,e,r,a){this.skuToken=e,this.errorCb=a,pr.SESSION_PATH&&pr.API_URL&&(r||pr.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(Gr)))}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},i)}},fn=On.getSessionAPI.bind(On),Rr=new Set;let Vi,ao=500,Tr=50,Nn={};function mi(i){const e=ue(i);let r,a;e&&e.forEach(m=>{const _=m.split("=");"language"===_[0]?r=_[1]:"worldview"===_[0]&&(a=_[1])});let h="mapbox-tiles";return r&&(h+=`-${r}`),a&&(h+=`-${a}`),h}function ke(){try{return J.caches}catch(i){}}function ne(i){const e=ke();e&&!Nn[i]&&(Nn[i]=e.open(i))}function ue(i){const e=i.indexOf("?");return e>0?i.slice(e+1).split("&"):[]}function Re(i){const e=i.indexOf("?");if(e<0)return i;const r=ue(i).filter(a=>{const h=a.split("=");return"language"===h[0]||"worldview"===h[0]});return r.length?`${i.slice(0,e)}?${r.join("&")}`:i.slice(0,e)}let Ge=1/0;const it={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(it);class vt extends Error{constructor(e,r,a){401===r&&Cr(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const wt=si()?()=>self.worker&&self.worker.referrer:()=>("blob:"===J.location.protocol?J.parent:J).location.href,at=function(i,e){if(!(/^file:/.test(r=i.url)||/^file:/.test(wt())&&!/^\w+:/.test(r))){if(J.fetch&&J.Request&&J.AbortController&&J.Request.prototype.hasOwnProperty("signal"))return function(a,h){const m=new J.AbortController,_=new J.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:wt(),signal:m.signal});let w=!1,P=!1;const k=(j=_.url).indexOf("sku=")>0&&Cr(j);var j;"json"===a.type&&_.headers.set("Accept","application/json");const $=(Y,re,pe)=>{if(P)return;if(Y&&"SecurityError"!==Y.message&&Jn(Y),re&&pe)return G(re);const Ie=Date.now();J.fetch(_).then(Ue=>{if(Ue.ok){const et=k?Ue.clone():null;return G(Ue,et,Ie)}return h(new vt(Ue.statusText,Ue.status,a.url))}).catch(Ue=>{20!==Ue.code&&h(new Error(Ue.message))})},G=(Y,re,pe)=>{("arrayBuffer"===a.type?Y.arrayBuffer():"json"===a.type?Y.json():Y.text()).then(Ie=>{P||(re&&pe&&function(Ue,et,$e){const Qe=mi(Ue.url);if(ne(Qe),!Nn[Qe])return;const pt={status:et.status,statusText:et.statusText,headers:new J.Headers};et.headers.forEach((Ht,un)=>pt.headers.set(un,Ht));const nt=yi(et.headers.get("Cache-Control")||"");if(nt["no-store"])return;nt["max-age"]&&pt.headers.set("Expires",new Date($e+1e3*nt["max-age"]).toUTCString());const Gt=pt.headers.get("Expires");Gt&&(new Date(Gt).getTime()-$e<42e4||function(Ht,un){if(void 0===Vi)try{new Response(new ReadableStream),Vi=!0}catch(Pn){Vi=!1}Vi?un(Ht.body):Ht.blob().then(un)}(et,Ht=>{const un=new J.Response(Ht,pt);ne(Qe),Nn[Qe]&&Nn[Qe].then(Pn=>Pn.put(Re(Ue.url),un)).catch(Pn=>Jn(Pn.message))}))}(_,re,pe),w=!0,h(null,Ie,Y.headers.get("Cache-Control"),Y.headers.get("Expires")))}).catch(Ie=>{P||h(new Error(Ie.message))})};return k?function(Y,re){const pe=mi(Y.url);if(ne(pe),!Nn[pe])return re(null);const Ie=Re(Y.url);Nn[pe].then(Ue=>{Ue.match(Ie).then(et=>{const $e=function(Qe){if(!Qe)return!1;const pt=new Date(Qe.headers.get("Expires")||0),nt=yi(Qe.headers.get("Cache-Control")||"");return pt>Date.now()&&!nt["no-cache"]}(et);Ue.delete(Ie),$e&&Ue.put(Ie,et.clone()),re(null,et,$e)}).catch(re)}).catch(re)}(_,$):$(null,null),{cancel:()=>{P=!0,w||m.abort()}}}(i,e);if(si()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e,void 0,!0)}var r;return function(a,h){const m=new J.XMLHttpRequest;m.open(a.method||"GET",a.url,!0),"arrayBuffer"===a.type&&(m.responseType="arraybuffer");for(const _ in a.headers)m.setRequestHeader(_,a.headers[_]);return"json"===a.type&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials="include"===a.credentials,m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||0===m.status)&&null!==m.response){let _=m.response;if("json"===a.type)try{_=JSON.parse(m.response)}catch(w){return h(w)}h(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new vt(m.statusText,m.status,a.url))},m.send(a.body),{cancel:()=>m.abort()}}(i,e)},It=function(i,e){return at(Tt(i,{type:"arrayBuffer"}),e)},an=function(i,e){return at(Tt(i,{method:"POST"}),e)},wn=function(i,e){return at(Tt(i,{method:"GET"}),e)};function Jt(i){const e=J.document.createElement("a");return e.href=i,e.protocol===J.document.location.protocol&&e.host===J.document.location.host}const er="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let sr,tr;sr=[],tr=0;const Xn=function(i,e){if(_o.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),tr>=pr.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return sr.push(m),m}tr++;let r=!1;const a=()=>{if(!r)for(r=!0,tr--;sr.length&&tr<pr.MAX_PARALLEL_IMAGE_REQUESTS;){const m=sr.shift(),{requestParameters:_,callback:w,cancelled:P}=m;P||(m.cancel=Xn(_,w).cancel)}},h=It(i,(m,_,w,P)=>{a(),m?e(m):_&&(J.createImageBitmap?function(k,j){const $=new J.Blob([new Uint8Array(k)],{type:"image/png"});J.createImageBitmap($).then(G=>{j(null,G)}).catch(G=>{j(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(k,j)=>e(k,j,w,P)):function(k,j){const $=new J.Image,G=J.URL;$.onload=()=>{j(null,$),G.revokeObjectURL($.src),$.onload=null,J.requestAnimationFrame(()=>{$.src=er})},$.onerror=()=>j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Y=new J.Blob([new Uint8Array(k)],{type:"image/png"});$.src=k.byteLength?G.createObjectURL(Y):er}(_,(k,j)=>e(k,j,w,P)))});return{cancel:()=>{h.cancel(),a()}}};function mr(i,e,r){r[i]&&-1!==r[i].indexOf(e)||(r[i]=r[i]||[],r[i].push(e))}function Vr(i,e,r){if(r&&r[i]){const a=r[i].indexOf(e);-1!==a&&r[i].splice(a,1)}}class Mr{constructor(e,r={}){Tt(this,r),this.type=e}}class ai extends Mr{constructor(e,r={}){super("error",Tt({error:e},r))}}class qn{on(e,r){return this._listeners=this._listeners||{},mr(e,r,this._listeners),this}off(e,r){return Vr(e,r,this._listeners),Vr(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},mr(e,r,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,r){"string"==typeof e&&(e=new Mr(e,r||{}));const a=e.type;if(this.listens(a)){e.target=this;const h=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const w of h)w.call(this,e);const m=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const w of m)Vr(a,w,this._oneTimeListeners),w.call(this,e);const _=this._eventedParent;_&&(Tt(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),_.fire(e))}else e instanceof ai&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var ut=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function hr(i,...e){for(const r of e)for(const a in r)i[a]=r[a];return i}function Bn(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Wi(i){if(Array.isArray(i))return i.map(Wi);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const r in i)e[r]=Wi(i[r]);return e}return Bn(i)}class os extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var Zr=os;class _t{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[a,h]of r)this.bindings[a]=h}concat(e){return new _t(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var dt=_t;const Ne={kind:"null"},We={kind:"number"},bt={kind:"string"},Sn={kind:"boolean"},vr={kind:"color"},Br={kind:"object"},or={kind:"value"},Ui={kind:"collator"},ts={kind:"formatted"},ss={kind:"resolvedImage"};function qi(i,e){return{kind:"array",itemType:i,N:e}}function Sr(i){if("array"===i.kind){const e=Sr(i.itemType);return"number"==typeof i.N?`array<${e}, ${i.N}>`:"value"===i.itemType.kind?"array":`array<${e}>`}return i.kind}const Vs=[Ne,We,bt,Sn,vr,ts,Br,qi(or),ss];function Ms(i,e){if("error"===e.kind)return null;if("array"===i.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ms(i.itemType,e.itemType))&&("number"!=typeof i.N||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if("value"===i.kind)for(const r of Vs)if(!Ms(r,e))return null}return`Expected ${Sr(i)} but found ${Sr(e)} instead.`}function ms(i,e){return e.some(r=>r.kind===i.kind)}function Et(i,e){return e.some(r=>"null"===r?null===i:"array"===r?Array.isArray(i):"object"===r?i&&!Array.isArray(i)&&"object"==typeof i:r===typeof i)}function ge(i){var e={exports:{}};return i(e,e.exports),e.exports}var Be=ge(function(i,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return a("%"===w[w.length-1]?parseFloat(w)/100*255:parseInt(w))}function m(w){return(P="%"===w[w.length-1]?parseFloat(w)/100:parseFloat(w))<0?0:P>1?1:P;var P}function _(w,P,k){return k<0?k+=1:k>1&&(k-=1),6*k<1?w+(P-w)*k*6:2*k<1?P:3*k<2?w+(P-w)*(2/3-k)*6:w}try{e.parseCSSColor=function(w){var P,k=w.replace(/ /g,"").toLowerCase();if(k in r)return r[k].slice();if("#"===k[0])return 4===k.length?(P=parseInt(k.substr(1),16))>=0&&P<=4095?[(3840&P)>>4|(3840&P)>>8,240&P|(240&P)>>4,15&P|(15&P)<<4,1]:null:7===k.length&&(P=parseInt(k.substr(1),16))>=0&&P<=16777215?[(16711680&P)>>16,(65280&P)>>8,255&P,1]:null;var j=k.indexOf("("),$=k.indexOf(")");if(-1!==j&&$+1===k.length){var G=k.substr(0,j),Y=k.substr(j+1,$-(j+1)).split(","),re=1;switch(G){case"rgba":if(4!==Y.length)return null;re=m(Y.pop());case"rgb":return 3!==Y.length?null:[h(Y[0]),h(Y[1]),h(Y[2]),re];case"hsla":if(4!==Y.length)return null;re=m(Y.pop());case"hsl":if(3!==Y.length)return null;var pe=(parseFloat(Y[0])%360+360)%360/360,Ie=m(Y[1]),Ue=m(Y[2]),et=Ue<=.5?Ue*(Ie+1):Ue+Ie-Ue*Ie,$e=2*Ue-et;return[a(255*_($e,et,pe+1/3)),a(255*_($e,et,pe)),a(255*_($e,et,pe-1/3)),re];default:return null}}return null}}catch(w){}});class rt{constructor(e,r,a,h=1){this.r=e,this.g=r,this.b=a,this.a=h}static parse(e){if(!e)return;if(e instanceof rt)return e;if("string"!=typeof e)return;const r=Be.parseCSSColor(e);return r?new rt(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,a,h]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(a)},${h})`}toArray(){const{r:e,g:r,b:a,a:h}=this;return 0===h?[0,0,0,0]:[255*e/h,255*r/h,255*a/h,h]}toArray01(){const{r:e,g:r,b:a,a:h}=this;return 0===h?[0,0,0,0]:[e/h,r/h,a/h,h]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:a,a:h}=this;return[e,r,a,h]}}rt.black=new rt(0,0,0,1),rt.white=new rt(1,1,1,1),rt.transparent=new rt(0,0,0,0),rt.red=new rt(1,0,0,1),rt.blue=new rt(0,0,1,1);var Mt=rt;class Ln{constructor(e,r,a){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yn{constructor(e,r,a,h,m){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=a,this.fontStack=h,this.textColor=m}}class Fn{constructor(e){this.sections=e}static fromString(e){return new Fn([new Yn(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Fn?e:Fn.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const a={};r.fontStack&&(a["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(a["font-scale"]=r.scale),r.textColor&&(a["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(a)}return e}}class Ar{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ar({name:e,available:!1}):null}serialize(){return["image",this.name]}}function oi(i,e,r,a){return"number"==typeof i&&i>=0&&i<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:`Invalid rgba value [${[i,e,r,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof a?[i,e,r,a]:[i,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zi(i){if(null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i||i instanceof Mt||i instanceof Ln||i instanceof Fn||i instanceof Ar)return!0;if(Array.isArray(i)){for(const e of i)if(!zi(e))return!1;return!0}if("object"==typeof i){for(const e in i)if(!zi(i[e]))return!1;return!0}return!1}function Wr(i){if(null===i)return Ne;if("string"==typeof i)return bt;if("boolean"==typeof i)return Sn;if("number"==typeof i)return We;if(i instanceof Mt)return vr;if(i instanceof Ln)return Ui;if(i instanceof Fn)return ts;if(i instanceof Ar)return ss;if(Array.isArray(i)){const e=i.length;let r;for(const a of i){const h=Wr(a);if(r){if(r===h)continue;r=or;break}r=h}return qi(r||or,e)}return Br}function Vl(i){const e=typeof i;return null===i?"":"string"===e||"number"===e||"boolean"===e?String(i):i instanceof Mt||i instanceof Fn||i instanceof Ar?i.toString():JSON.stringify(i)}class va{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(2!==e.length)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!zi(e[1]))return r.error("invalid value");const a=e[1];let h=Wr(a);const m=r.expectedType;return"array"!==h.kind||0!==h.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(h=m),new va(h,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Mt?["rgba"].concat(this.value.toArray()):this.value instanceof Fn?this.value.serialize():this.value}}var Qa=va,Di=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const ba={string:bt,number:We,boolean:Sn,object:Br};class Ul{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let a,h=1;const m=e[0];if("array"===m){let w,P;if(e.length>2){const k=e[1];if("string"!=typeof k||!(k in ba)||"object"===k)return r.error('The item type argument of "array" must be one of string, number, boolean',1);w=ba[k],h++}else w=or;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);P=e[2],h++}a=qi(w,P)}else a=ba[m];const _=[];for(;h<e.length;h++){const w=r.parse(e[h],h,or);if(!w)return null;_.push(w)}return new Ul(a,_)}evaluate(e){for(let r=0;r<this.args.length;r++){const a=this.args[r].evaluate(e);if(!Ms(this.type,Wr(a)))return a;if(r===this.args.length-1)throw new Di(`Expected value to be of type ${Sr(this.type)}, but found ${Sr(Wr(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if("array"===e.kind){const a=e.itemType;if("string"===a.kind||"number"===a.kind||"boolean"===a.kind){r.push(a.kind);const h=e.N;("number"==typeof h||this.args.length>1)&&r.push(h)}}return r.concat(this.args.map(a=>a.serialize()))}}var xr=Ul;class xa{constructor(e){this.type=ts,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&"object"==typeof a)return r.error("First argument must be an image or text section.");const h=[];let m=!1;for(let _=1;_<=e.length-1;++_){const w=e[_];if(m&&"object"==typeof w&&!Array.isArray(w)){m=!1;let P=null;if(w["font-scale"]&&(P=r.parse(w["font-scale"],1,We),!P))return null;let k=null;if(w["text-font"]&&(k=r.parse(w["text-font"],1,qi(bt)),!k))return null;let j=null;if(w["text-color"]&&(j=r.parse(w["text-color"],1,vr),!j))return null;const $=h[h.length-1];$.scale=P,$.font=k,$.textColor=j}else{const P=r.parse(e[_],1,or);if(!P)return null;const k=P.type.kind;if("string"!==k&&"value"!==k&&"null"!==k&&"resolvedImage"!==k)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:P,scale:null,font:null,textColor:null})}}return new xa(h)}evaluate(e){return new Fn(this.sections.map(r=>{const a=r.content.evaluate(e);return Wr(a)===ss?new Yn("",a,null,null,null):new Yn(Vl(a),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const a={};r.scale&&(a["font-scale"]=r.scale.serialize()),r.font&&(a["text-font"]=r.font.serialize()),r.textColor&&(a["text-color"]=r.textColor.serialize()),e.push(a)}return e}}class yl{constructor(e){this.type=ss,this.input=e}static parse(e,r){if(2!==e.length)return r.error("Expected two arguments.");const a=r.parse(e[1],1,bt);return a?new yl(a):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),a=Ar.fromString(r);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(r)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vl={"to-boolean":Sn,"to-color":vr,"to-number":We,"to-string":bt};class du{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[0];if(("to-boolean"===a||"to-string"===a)&&2!==e.length)return r.error("Expected one argument.");const h=vl[a],m=[];for(let _=1;_<e.length;_++){const w=r.parse(e[_],_,or);if(!w)return null;m.push(w)}return new du(h,m)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let r,a;for(const h of this.args){if(r=h.evaluate(e),a=null,r instanceof Mt)return r;if("string"==typeof r){const m=e.parseColor(r);if(m)return m}else if(Array.isArray(r)&&(a=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:oi(r[0],r[1],r[2],r[3]),!a))return new Mt(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Di(a||`Could not parse color from value '${"string"==typeof r?r:String(JSON.stringify(r))}'`)}if("number"===this.type.kind){let r=null;for(const a of this.args){if(r=a.evaluate(e),null===r)return 0;const h=Number(r);if(!isNaN(h))return h}throw new Di(`Could not convert ${JSON.stringify(r)} to number.`)}return"formatted"===this.type.kind?Fn.fromString(Vl(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ar.fromString(Vl(this.args[0].evaluate(e))):Vl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new xa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new yl(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Us=du;const fu=["Unknown","Point","LineString","Polygon"];var pu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?fu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-i[0])+this.featureDistanceData.bearing[1]*(a*e-i[1])}return 0}parseColor(i){let e=this._parseColorCache[i];return e||(e=this._parseColorCache[i]=Mt.parse(i)),e}};class Ja{constructor(e,r,a,h){this.name=e,this.type=r,this._evaluate=a,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const a=e[0],h=Ja.definitions[a];if(!h)return r.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,_=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=_.filter(([k])=>!Array.isArray(k)||k.length===e.length-1);let P=null;for(const[k,j]of w){P=new Vt(r.registry,r.path,null,r.scope);const $=[];let G=!1;for(let Y=1;Y<e.length;Y++){const re=e[Y],pe=Array.isArray(k)?k[Y-1]:k.type,Ie=P.parse(re,1+$.length,pe);if(!Ie){G=!0;break}$.push(Ie)}if(!G)if(Array.isArray(k)&&k.length!==$.length)P.error(`Expected ${k.length} arguments, but found ${$.length} instead.`);else{for(let Y=0;Y<$.length;Y++){const re=Array.isArray(k)?k[Y]:k.type,pe=$[Y];P.concat(Y+1).checkSubtype(re,pe.type)}if(0===P.errors.length)return new Ja(a,m,j,$)}}if(1===w.length)r.errors.push(...P.errors);else{const k=(w.length?w:_).map(([$])=>{return G=$,Array.isArray(G)?`(${G.map(Sr).join(", ")})`:`(${Sr(G.type)}...)`;var G}).join(" | "),j=[];for(let $=1;$<e.length;$++){const G=r.parse(e[$],1+j.length);if(!G)return null;j.push(Sr(G.type))}r.error(`Expected arguments of type ${k}, but found (${j.join(", ")}) instead.`)}return null}static register(e,r){Ja.definitions=r;for(const a in r)e[a]=Ja}}var Hs=Ja;class As{constructor(e,r,a){this.type=Ui,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(2!==e.length)return r.error("Expected one argument.");const a=e[1];if("object"!=typeof a||Array.isArray(a))return r.error("Collator options argument must be an object.");const h=r.parse(void 0!==a["case-sensitive"]&&a["case-sensitive"],1,Sn);if(!h)return null;const m=r.parse(void 0!==a["diacritic-sensitive"]&&a["diacritic-sensitive"],1,Sn);if(!m)return null;let _=null;return a.locale&&(_=r.parse(a.locale,1,bt),!_)?null:new As(h,m,_)}evaluate(e){return new Ln(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const as=8192;function Xi(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function $s(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function Rc(i,e){const r=(180+i[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(r*h*as),Math.round(a*h*as)]}function mu(i,e,r){const a=i[0]-e[0],h=i[1]-e[1],m=i[0]-r[0],_=i[1]-r[1];return a*_-m*h==0&&a*m<=0&&h*_<=0}function wa(i,e){let r=!1;for(let _=0,w=e.length;_<w;_++){const P=e[_];for(let k=0,j=P.length;k<j-1;k++){if(mu(i,P[k],P[k+1]))return!1;(h=P[k])[1]>(a=i)[1]!=(m=P[k+1])[1]>a[1]&&a[0]<(m[0]-h[0])*(a[1]-h[1])/(m[1]-h[1])+h[0]&&(r=!r)}}var a,h,m;return r}function Gs(i,e){for(let r=0;r<e.length;r++)if(wa(i,e[r]))return!0;return!1}function uc(i,e,r,a){const h=a[0]-r[0],m=a[1]-r[1],_=(i[0]-r[0])*m-h*(i[1]-r[1]),w=(e[0]-r[0])*m-h*(e[1]-r[1]);return _>0&&w<0||_<0&&w>0}function gu(i,e,r){for(const k of r)for(let j=0;j<k.length-1;++j)if((w=[(_=k[j+1])[0]-(m=k[j])[0],_[1]-m[1]])[0]*(P=[(h=e)[0]-(a=i)[0],h[1]-a[1]])[1]-w[1]*P[0]!=0&&uc(a,h,m,_)&&uc(m,_,a,h))return!0;var a,h,m,_,w,P;return!1}function hc(i,e){for(let r=0;r<i.length;++r)if(!wa(i[r],e))return!1;for(let r=0;r<i.length-1;++r)if(gu(i[r],i[r+1],e))return!1;return!0}function Lc(i,e){for(let r=0;r<e.length;r++)if(hc(i,e[r]))return!0;return!1}function ls(i,e,r){const a=[];for(let h=0;h<i.length;h++){const m=[];for(let _=0;_<i[h].length;_++){const w=Rc(i[h][_],r);Xi(e,w),m.push(w)}a.push(m)}return a}function mo(i,e,r){const a=[];for(let h=0;h<i.length;h++){const m=ls(i[h],e,r);a.push(m)}return a}function Ea(i,e,r,a){if(i[0]<r[0]||i[0]>r[2]){const h=.5*a;let m=i[0]-r[0]>h?-a:r[0]-i[0]>h?a:0;0===m&&(m=i[0]-r[2]>h?-a:r[2]-i[0]>h?a:0),i[0]+=m}Xi(e,i)}function el(i,e,r,a){const h=Math.pow(2,a.z)*as,m=[a.x*as,a.y*as],_=[];if(!i)return _;for(const w of i)for(const P of w){const k=[P.x+m[0],P.y+m[1]];Ea(k,e,r,h),_.push(k)}return _}function Ca(i,e,r,a){const h=Math.pow(2,a.z)*as,m=[a.x*as,a.y*as],_=[];if(!i)return _;for(const P of i){const k=[];for(const j of P){const $=[j.x+m[0],j.y+m[1]];Xi(e,$),k.push($)}_.push(k)}if(e[2]-e[0]<=h/2){(w=e)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const P of _)for(const k of P)Ea(k,e,r,h)}var w;return _}class Hl{constructor(e,r){this.type=Sn,this.geojson=e,this.geometries=r}static parse(e,r){if(2!==e.length)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(zi(e[1])){const a=e[1];if("FeatureCollection"===a.type)for(let h=0;h<a.features.length;++h){const m=a.features[h].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Hl(a,a.features[h].geometry)}else if("Feature"===a.type){const h=a.geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new Hl(a,a.geometry)}else if("Polygon"===a.type||"MultiPolygon"===a.type)return new Hl(a,a)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(r,a){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(!_)return!1;if("Polygon"===a.type){const w=ls(a.coordinates,m,_),P=el(r.geometry(),h,m,_);if(!$s(h,m))return!1;for(const k of P)if(!wa(k,w))return!1}if("MultiPolygon"===a.type){const w=mo(a.coordinates,m,_),P=el(r.geometry(),h,m,_);if(!$s(h,m))return!1;for(const k of P)if(!Gs(k,w))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(r,a){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(!_)return!1;if("Polygon"===a.type){const w=ls(a.coordinates,m,_),P=Ca(r.geometry(),h,m,_);if(!$s(h,m))return!1;for(const k of P)if(!hc(k,w))return!1}if("MultiPolygon"===a.type){const w=mo(a.coordinates,m,_),P=Ca(r.geometry(),h,m,_);if(!$s(h,m))return!1;for(const k of P)if(!Lc(k,w))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var cs=Hl;function Ta(i){if(i instanceof Hs&&("get"===i.name&&1===i.args.length||"feature-state"===i.name||"has"===i.name&&1===i.args.length||"properties"===i.name||"geometry-type"===i.name||"id"===i.name||/^filter-/.test(i.name))||i instanceof cs)return!1;let e=!0;return i.eachChild(r=>{e&&!Ta(r)&&(e=!1)}),e}function Q(i){if(i instanceof Hs&&"feature-state"===i.name)return!1;let e=!0;return i.eachChild(r=>{e&&!Q(r)&&(e=!1)}),e}function ve(i,e){if(i instanceof Hs&&e.indexOf(i.name)>=0)return!1;let r=!0;return i.eachChild(a=>{r&&!ve(a,e)&&(r=!1)}),r}class ee{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(2!==e.length||"string"!=typeof e[1])return r.error("'var' expression requires exactly one string literal argument.");const a=e[1];return r.scope.has(a)?new ee(a,r.scope.get(a)):r.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Me=ee;class mt{constructor(e,r=[],a,h=new dt,m=[]){this.registry=e,this.path=r,this.key=r.map(_=>`[${_}]`).join(""),this.scope=h,this.errors=m,this.expectedType=a}parse(e,r,a,h,m={}){return r?this.concat(r,a,h)._parse(e,m):this._parse(e,m)}_parse(e,r){function a(h,m,_){return"assert"===_?new xr(m,[h]):"coerce"===_?new Us(m,[h]):h}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=e[0];if("string"!=typeof h)return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let _=m.parse(e,this);if(!_)return null;if(this.expectedType){const w=this.expectedType,P=_.type;if("string"!==w.kind&&"number"!==w.kind&&"boolean"!==w.kind&&"object"!==w.kind&&"array"!==w.kind||"value"!==P.kind)if("color"!==w.kind&&"formatted"!==w.kind&&"resolvedImage"!==w.kind||"value"!==P.kind&&"string"!==P.kind){if(this.checkSubtype(w,P))return null}else _=a(_,w,r.typeAnnotation||"coerce");else _=a(_,w,r.typeAnnotation||"assert")}if(!(_ instanceof Qa)&&"resolvedImage"!==_.type.kind&&on(_)){const w=new pu;try{_=new Qa(_.type,_.evaluate(w))}catch(P){return this.error(P.message),null}}return _}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,a){const h="number"==typeof e?this.path.concat(e):this.path,m=a?this.scope.concat(a):this.scope;return new mt(this.registry,h,r||null,m,this.errors)}error(e,...r){const a=`${this.key}${r.map(h=>`[${h}]`).join("")}`;this.errors.push(new Zr(a,e))}checkSubtype(e,r){const a=Ms(e,r);return a&&this.error(a),a}}var Vt=mt;function on(i){if(i instanceof Me)return on(i.boundExpression);if(i instanceof Hs&&"error"===i.name||i instanceof As||i instanceof cs)return!1;const e=i instanceof Us||i instanceof xr;let r=!0;return i.eachChild(a=>{r=e?r&&on(a):r&&a instanceof Qa}),!!r&&Ta(i)&&ve(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function br(i,e){const r=i.length-1;let a,h,m=0,_=r,w=0;for(;m<=_;)if(w=Math.floor((m+_)/2),a=i[w],h=i[w+1],a<=e){if(w===r||e<h)return w;m=w+1}else{if(!(a>e))throw new Di("Input is not a number.");_=w-1}return 0}class Fi{constructor(e,r,a){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[h,m]of a)this.labels.push(h),this.outputs.push(m)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const a=r.parse(e[1],1,We);if(!a)return null;const h=[];let m=null;r.expectedType&&"value"!==r.expectedType.kind&&(m=r.expectedType);for(let _=1;_<e.length;_+=2){const w=1===_?-1/0:e[_],P=e[_+1],k=_,j=_+1;if("number"!=typeof w)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(h.length&&h[h.length-1][0]>=w)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const $=r.parse(P,j,m);if(!$)return null;m=m||$.type,h.push([w,$])}return new Fi(m,a,h)}evaluate(e){const r=this.labels,a=this.outputs;if(1===r.length)return a[0].evaluate(e);const h=this.input.evaluate(e);if(h<=r[0])return a[0].evaluate(e);const m=r.length;return h>=r[m-1]?a[m-1].evaluate(e):a[br(r,h)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var Pr=Fi;function ur(i,e,r){return i*(1-r)+e*r}function gi(i,e,r){return i.map((a,h)=>ur(a,e[h],r))}var no=Object.freeze({__proto__:null,number:ur,color:function(i,e,r){return new Mt(ur(i.r,e.r,r),ur(i.g,e.g,r),ur(i.b,e.b,r),ur(i.a,e.a,r))},array:gi});const Ps=4/29,Hi=6/29,Co=3*Hi*Hi,tl=Math.PI/180,Da=180/Math.PI;function Sa(i){return i>.008856451679035631?Math.pow(i,1/3):i/Co+Ps}function ws(i){return i>Hi?i*i*i:Co*(i-Ps)}function bl(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function xl(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function zr(i){const e=xl(i.r),r=xl(i.g),a=xl(i.b),h=Sa((.4124564*e+.3575761*r+.1804375*a)/.95047),m=Sa((.2126729*e+.7151522*r+.072175*a)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-Sa((.0193339*e+.119192*r+.9503041*a)/1.08883)),alpha:i.a}}function Fc(i){let e=(i.l+16)/116,r=isNaN(i.a)?e:e+i.a/500,a=isNaN(i.b)?e:e-i.b/200;return e=1*ws(e),r=.95047*ws(r),a=1.08883*ws(a),new Mt(bl(3.2404542*r-1.5371385*e-.4985314*a),bl(-.969266*r+1.8760108*e+.041556*a),bl(.0556434*r-.2040259*e+1.0572252*a),i.alpha)}function _u(i,e,r){const a=e-i;return i+r*(a>180||a<-180?a-360*Math.round(a/360):a)}const $l={forward:zr,reverse:Fc,interpolate:function(i,e,r){return{l:ur(i.l,e.l,r),a:ur(i.a,e.a,r),b:ur(i.b,e.b,r),alpha:ur(i.alpha,e.alpha,r)}}},Ia={forward:function(i){const{l:e,a:r,b:a}=zr(i),h=Math.atan2(a,r)*Da;return{h:h<0?h+360:h,c:Math.sqrt(r*r+a*a),l:e,alpha:i.a}},reverse:function(i){const e=i.h*tl,r=i.c;return Fc({l:i.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:i.alpha})},interpolate:function(i,e,r){return{h:_u(i.h,e.h,r),c:ur(i.c,e.c,r),l:ur(i.l,e.l,r),alpha:ur(i.alpha,e.alpha,r)}}};var yu=Object.freeze({__proto__:null,lab:$l,hcl:Ia});class nl{constructor(e,r,a,h,m){this.type=e,this.operator=r,this.interpolation=a,this.input=h,this.labels=[],this.outputs=[];for(const[_,w]of m)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(e,r,a,h){let m=0;if("exponential"===e.name)m=Gl(r,e.base,a,h);else if("linear"===e.name)m=Gl(r,1,a,h);else if("cubic-bezier"===e.name){const _=e.controlPoints;m=new de(_[0],_[1],_[2],_[3]).solve(Gl(r,1,a,h))}return m}static parse(e,r){let[a,h,m,..._]=e;if(!Array.isArray(h)||0===h.length)return r.error("Expected an interpolation type expression.",1);if("linear"===h[0])h={name:"linear"};else if("exponential"===h[0]){const k=h[1];if("number"!=typeof k)return r.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:k}}else{if("cubic-bezier"!==h[0])return r.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const k=h.slice(1);if(4!==k.length||k.some(j=>"number"!=typeof j||j<0||j>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:k}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(m=r.parse(m,2,We),!m)return null;const w=[];let P=null;"interpolate-hcl"===a||"interpolate-lab"===a?P=vr:r.expectedType&&"value"!==r.expectedType.kind&&(P=r.expectedType);for(let k=0;k<_.length;k+=2){const j=_[k],$=_[k+1],G=k+3,Y=k+4;if("number"!=typeof j)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(w.length&&w[w.length-1][0]>=j)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const re=r.parse($,Y,P);if(!re)return null;P=P||re.type,w.push([j,re])}return"number"===P.kind||"color"===P.kind||"array"===P.kind&&"number"===P.itemType.kind&&"number"==typeof P.N?new nl(P,a,h,m,w):r.error(`Type ${Sr(P)} is not interpolatable.`)}evaluate(e){const r=this.labels,a=this.outputs;if(1===r.length)return a[0].evaluate(e);const h=this.input.evaluate(e);if(h<=r[0])return a[0].evaluate(e);const m=r.length;if(h>=r[m-1])return a[m-1].evaluate(e);const _=br(r,h),w=nl.interpolationFactor(this.interpolation,h,r[_],r[_+1]),P=a[_].evaluate(e),k=a[_+1].evaluate(e);return"interpolate"===this.operator?no[this.type.kind.toLowerCase()](P,k,w):"interpolate-hcl"===this.operator?Ia.reverse(Ia.interpolate(Ia.forward(P),Ia.forward(k),w)):$l.reverse($l.interpolate($l.forward(P),$l.forward(k),w))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)r.push(this.labels[a],this.outputs[a].serialize());return r}}function Gl(i,e,r,a){const h=a-r,m=i-r;return 0===h?0:1===e?m/h:(Math.pow(e,m)-1)/(Math.pow(e,h)-1)}var En=nl;class Si{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let a=null;const h=r.expectedType;h&&"value"!==h.kind&&(a=h);const m=[];for(const w of e.slice(1)){const P=r.parse(w,1+m.length,a,void 0,{typeAnnotation:"omit"});if(!P)return null;a=a||P.type,m.push(P)}const _=h&&m.some(w=>Ms(h,w.type));return new Si(_?or:a,m)}evaluate(e){let r,a=null,h=0;for(const m of this.args){if(h++,a=m.evaluate(e),a&&a instanceof Ar&&!a.available&&(r||(r=a),a=null,h===this.args.length))return r;if(null!==a)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Uu=Si;class Po{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let m=1;m<e.length-1;m+=2){const _=e[m];if("string"!=typeof _)return r.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return r.error("Variable names must contain only alphanumeric characters or '_'.",m);const w=r.parse(e[m+1],m+1);if(!w)return null;a.push([_,w])}const h=r.parse(e[e.length-1],e.length-1,r.expectedType,a);return h?new Po(a,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,a]of this.bindings)e.push(r,a.serialize());return e.push(this.result.serialize()),e}}var Ch=Po;class wl{constructor(e,r,a){this.type=e,this.index=r,this.input=a}static parse(e,r){if(3!==e.length)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,We),h=r.parse(e[2],2,qi(r.expectedType||or));return a&&h?new wl(h.type.itemType,a,h):null}evaluate(e){const r=this.index.evaluate(e),a=this.input.evaluate(e);if(r<0)throw new Di(`Array index out of bounds: ${r} < 0.`);if(r>=a.length)throw new Di(`Array index out of bounds: ${r} > ${a.length-1}.`);if(r!==Math.floor(r))throw new Di(`Array index must be an integer, but found ${r} instead.`);return a[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ra=wl;class dc{constructor(e,r){this.type=Sn,this.needle=e,this.haystack=r}static parse(e,r){if(3!==e.length)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,or),h=r.parse(e[2],2,or);return a&&h?ms(a.type,[Sn,bt,We,Ne,or])?new dc(a,h):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(a.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(null==a)return!1;if(!Et(r,["boolean","string","number","null"]))throw new Di(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(Wr(r))} instead.`);if(!Et(a,["string","array"]))throw new Di(`Expected second argument to be of type array or string, but found ${Sr(Wr(a))} instead.`);return a.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var fc=dc;class Hu{constructor(e,r,a){this.type=We,this.needle=e,this.haystack=r,this.fromIndex=a}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,or),h=r.parse(e[2],2,or);if(!a||!h)return null;if(!ms(a.type,[Sn,bt,We,Ne,or]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(a.type)} instead`);if(4===e.length){const m=r.parse(e[3],3,We);return m?new Hu(a,h,m):null}return new Hu(a,h)}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!Et(r,["boolean","string","number","null"]))throw new Di(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(Wr(r))} instead.`);if(!Et(a,["string","array"]))throw new Di(`Expected second argument to be of type array or string, but found ${Sr(Wr(a))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(e);return a.indexOf(r,h)}return a.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var dd=Hu;class Ma{constructor(e,r,a,h,m,_){this.inputType=e,this.type=r,this.input=a,this.cases=h,this.outputs=m,this.otherwise=_}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let a,h;r.expectedType&&"value"!==r.expectedType.kind&&(h=r.expectedType);const m={},_=[];for(let k=2;k<e.length-1;k+=2){let j=e[k];const $=e[k+1];Array.isArray(j)||(j=[j]);const G=r.concat(k);if(0===j.length)return G.error("Expected at least one branch label.");for(const re of j){if("number"!=typeof re&&"string"!=typeof re)return G.error("Branch labels must be numbers or strings.");if("number"==typeof re&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof re&&Math.floor(re)!==re)return G.error("Numeric branch labels must be integer values.");if(a){if(G.checkSubtype(a,Wr(re)))return null}else a=Wr(re);if(void 0!==m[String(re)])return G.error("Branch labels must be unique.");m[String(re)]=_.length}const Y=r.parse($,k,h);if(!Y)return null;h=h||Y.type,_.push(Y)}const w=r.parse(e[1],1,or);if(!w)return null;const P=r.parse(e[e.length-1],e.length-1,h);return P?"value"!==w.type.kind&&r.concat(1).checkSubtype(a,w.type)?null:new Ma(a,h,w,m,_,P):null}evaluate(e){const r=this.input.evaluate(e);return(Wr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),a=[],h={};for(const _ of r){const w=h[this.cases[_]];void 0===w?(h[this.cases[_]]=a.length,a.push([this.cases[_],[_]])):a[w][1].push(_)}const m=_=>"number"===this.inputType.kind?Number(_):_;for(const[_,w]of a)e.push(1===w.length?m(w[0]):w.map(m)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}var Nc=Ma;class co{constructor(e,r,a){this.type=e,this.branches=r,this.otherwise=a}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let a;r.expectedType&&"value"!==r.expectedType.kind&&(a=r.expectedType);const h=[];for(let _=1;_<e.length-1;_+=2){const w=r.parse(e[_],_,Sn);if(!w)return null;const P=r.parse(e[_+1],_+1,a);if(!P)return null;h.push([w,P]),a=a||P.type}const m=r.parse(e[e.length-1],e.length-1,a);return m?new co(a,h,m):null}evaluate(e){for(const[r,a]of this.branches)if(r.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,a]of this.branches)e(r),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var rl=co;class vu{constructor(e,r,a,h){this.type=e,this.input=r,this.beginIndex=a,this.endIndex=h}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,or),h=r.parse(e[2],2,We);if(!a||!h)return null;if(!ms(a.type,[qi(or),bt,or]))return r.error(`Expected first argument to be of type array or string, but found ${Sr(a.type)} instead`);if(4===e.length){const m=r.parse(e[3],3,We);return m?new vu(a.type,a,h,m):null}return new vu(a.type,a,h)}evaluate(e){const r=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!Et(r,["string","array"]))throw new Di(`Expected first argument to be of type array or string, but found ${Sr(Wr(r))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(e);return r.slice(a,h)}return r.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Os=vu;function Aa(i,e){return"=="===i||"!="===i?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Th(i,e,r,a){return 0===a.compare(e,r)}function Wl(i,e,r){const a="=="!==i&&"!="!==i;return class wE{constructor(m,_,w){this.type=Sn,this.lhs=m,this.rhs=_,this.collator=w,this.hasUntypedArgument="value"===m.type.kind||"value"===_.type.kind}static parse(m,_){if(3!==m.length&&4!==m.length)return _.error("Expected two or three arguments.");const w=m[0];let P=_.parse(m[1],1,or);if(!P)return null;if(!Aa(w,P.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${Sr(P.type)}'.`);let k=_.parse(m[2],2,or);if(!k)return null;if(!Aa(w,k.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${Sr(k.type)}'.`);if(P.type.kind!==k.type.kind&&"value"!==P.type.kind&&"value"!==k.type.kind)return _.error(`Cannot compare types '${Sr(P.type)}' and '${Sr(k.type)}'.`);a&&("value"===P.type.kind&&"value"!==k.type.kind?P=new xr(k.type,[P]):"value"!==P.type.kind&&"value"===k.type.kind&&(k=new xr(P.type,[k])));let j=null;if(4===m.length){if("string"!==P.type.kind&&"string"!==k.type.kind&&"value"!==P.type.kind&&"value"!==k.type.kind)return _.error("Cannot use collator to compare non-string types.");if(j=_.parse(m[3],3,Ui),!j)return null}return new wE(P,k,j)}evaluate(m){const _=this.lhs.evaluate(m),w=this.rhs.evaluate(m);if(a&&this.hasUntypedArgument){const P=Wr(_),k=Wr(w);if(P.kind!==k.kind||"string"!==P.kind&&"number"!==P.kind)throw new Di(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${P.kind}, ${k.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const P=Wr(_),k=Wr(w);if("string"!==P.kind||"string"!==k.kind)return e(m,_,w)}return this.collator?r(m,_,w,this.collator.evaluate(m)):e(m,_,w)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const fd=Wl("==",function(i,e,r){return e===r},Th),Dh=Wl("!=",function(i,e,r){return e!==r},function(i,e,r,a){return!Th(0,e,r,a)}),$u=Wl("<",function(i,e,r){return e<r},function(i,e,r,a){return a.compare(e,r)<0}),Zl=Wl(">",function(i,e,r){return e>r},function(i,e,r,a){return a.compare(e,r)>0}),Gu=Wl("<=",function(i,e,r){return e<=r},function(i,e,r,a){return a.compare(e,r)<=0}),bu=Wl(">=",function(i,e,r){return e>=r},function(i,e,r,a){return a.compare(e,r)>=0});class xu{constructor(e,r,a,h,m,_){this.type=bt,this.number=e,this.locale=r,this.currency=a,this.unit=h,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(e,r){if(3!==e.length)return r.error("Expected two arguments.");const a=r.parse(e[1],1,We);if(!a)return null;const h=e[2];if("object"!=typeof h||Array.isArray(h))return r.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=r.parse(h.locale,1,bt),!m))return null;let _=null;if(h.currency&&(_=r.parse(h.currency,1,bt),!_))return null;let w=null;if(h.unit&&(w=r.parse(h.unit,1,bt),!w))return null;let P=null;if(h["min-fraction-digits"]&&(P=r.parse(h["min-fraction-digits"],1,We),!P))return null;let k=null;return h["max-fraction-digits"]&&(k=r.parse(h["max-fraction-digits"],1,We),!k)?null:new xu(a,m,_,w,P,k)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Wu{constructor(e){this.type=We,this.input=e}static parse(e,r){if(2!==e.length)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=r.parse(e[1],1);return a?"array"!==a.type.kind&&"string"!==a.type.kind&&"value"!==a.type.kind?r.error(`Expected argument of type string or array, but found ${Sr(a.type)} instead.`):new Wu(a):null}evaluate(e){const r=this.input.evaluate(e);if("string"==typeof r||Array.isArray(r))return r.length;throw new Di(`Expected value to be of type string or array, but found ${Sr(Wr(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const El={"==":fd,"!=":Dh,">":Zl,"<":$u,">=":bu,"<=":Gu,array:xr,at:ra,boolean:xr,case:rl,coalesce:Uu,collator:As,format:xa,image:yl,in:fc,"index-of":dd,interpolate:En,"interpolate-hcl":En,"interpolate-lab":En,length:Wu,let:Ch,literal:Qa,match:Nc,number:xr,"number-format":xu,object:xr,slice:Os,step:Pr,string:xr,"to-boolean":Us,"to-color":Us,"to-number":Us,"to-string":Us,var:Me,within:cs};function wu(i,[e,r,a,h]){e=e.evaluate(i),r=r.evaluate(i),a=a.evaluate(i);const m=h?h.evaluate(i):1,_=oi(e,r,a,m);if(_)throw new Di(_);return new Mt(e/255*m,r/255*m,a/255*m,m)}function xi(i,e){return i in e}function Bc(i,e){const r=e[i];return void 0===r?null:r}function Pa(i){return{type:i}}Hs.register(El,{error:[{kind:"error"},[bt],(i,[e])=>{throw new Di(e.evaluate(i))}],typeof:[bt,[or],(i,[e])=>Sr(Wr(e.evaluate(i)))],"to-rgba":[qi(We,4),[vr],(i,[e])=>e.evaluate(i).toArray()],rgb:[vr,[We,We,We],wu],rgba:[vr,[We,We,We,We],wu],has:{type:Sn,overloads:[[[bt],(i,[e])=>xi(e.evaluate(i),i.properties())],[[bt,Br],(i,[e,r])=>xi(e.evaluate(i),r.evaluate(i))]]},get:{type:or,overloads:[[[bt],(i,[e])=>Bc(e.evaluate(i),i.properties())],[[bt,Br],(i,[e,r])=>Bc(e.evaluate(i),r.evaluate(i))]]},"feature-state":[or,[bt],(i,[e])=>Bc(e.evaluate(i),i.featureState||{})],properties:[Br,[],i=>i.properties()],"geometry-type":[bt,[],i=>i.geometryType()],id:[or,[],i=>i.id()],zoom:[We,[],i=>i.globals.zoom],pitch:[We,[],i=>i.globals.pitch||0],"distance-from-center":[We,[],i=>i.distanceFromCenter()],"heatmap-density":[We,[],i=>i.globals.heatmapDensity||0],"line-progress":[We,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[We,[],i=>i.globals.skyRadialProgress||0],accumulated:[or,[],i=>void 0===i.globals.accumulated?null:i.globals.accumulated],"+":[We,Pa(We),(i,e)=>{let r=0;for(const a of e)r+=a.evaluate(i);return r}],"*":[We,Pa(We),(i,e)=>{let r=1;for(const a of e)r*=a.evaluate(i);return r}],"-":{type:We,overloads:[[[We,We],(i,[e,r])=>e.evaluate(i)-r.evaluate(i)],[[We],(i,[e])=>-e.evaluate(i)]]},"/":[We,[We,We],(i,[e,r])=>e.evaluate(i)/r.evaluate(i)],"%":[We,[We,We],(i,[e,r])=>e.evaluate(i)%r.evaluate(i)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(i,[e,r])=>Math.pow(e.evaluate(i),r.evaluate(i))],sqrt:[We,[We],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[We,[We],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[We,[We],(i,[e])=>Math.log(e.evaluate(i))],log2:[We,[We],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[We,[We],(i,[e])=>Math.sin(e.evaluate(i))],cos:[We,[We],(i,[e])=>Math.cos(e.evaluate(i))],tan:[We,[We],(i,[e])=>Math.tan(e.evaluate(i))],asin:[We,[We],(i,[e])=>Math.asin(e.evaluate(i))],acos:[We,[We],(i,[e])=>Math.acos(e.evaluate(i))],atan:[We,[We],(i,[e])=>Math.atan(e.evaluate(i))],min:[We,Pa(We),(i,e)=>Math.min(...e.map(r=>r.evaluate(i)))],max:[We,Pa(We),(i,e)=>Math.max(...e.map(r=>r.evaluate(i)))],abs:[We,[We],(i,[e])=>Math.abs(e.evaluate(i))],round:[We,[We],(i,[e])=>{const r=e.evaluate(i);return r<0?-Math.round(-r):Math.round(r)}],floor:[We,[We],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[We,[We],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[Sn,[bt,or],(i,[e,r])=>i.properties()[e.value]===r.value],"filter-id-==":[Sn,[or],(i,[e])=>i.id()===e.value],"filter-type-==":[Sn,[bt],(i,[e])=>i.geometryType()===e.value],"filter-<":[Sn,[bt,or],(i,[e,r])=>{const a=i.properties()[e.value],h=r.value;return typeof a==typeof h&&a<h}],"filter-id-<":[Sn,[or],(i,[e])=>{const r=i.id(),a=e.value;return typeof r==typeof a&&r<a}],"filter->":[Sn,[bt,or],(i,[e,r])=>{const a=i.properties()[e.value],h=r.value;return typeof a==typeof h&&a>h}],"filter-id->":[Sn,[or],(i,[e])=>{const r=i.id(),a=e.value;return typeof r==typeof a&&r>a}],"filter-<=":[Sn,[bt,or],(i,[e,r])=>{const a=i.properties()[e.value],h=r.value;return typeof a==typeof h&&a<=h}],"filter-id-<=":[Sn,[or],(i,[e])=>{const r=i.id(),a=e.value;return typeof r==typeof a&&r<=a}],"filter->=":[Sn,[bt,or],(i,[e,r])=>{const a=i.properties()[e.value],h=r.value;return typeof a==typeof h&&a>=h}],"filter-id->=":[Sn,[or],(i,[e])=>{const r=i.id(),a=e.value;return typeof r==typeof a&&r>=a}],"filter-has":[Sn,[or],(i,[e])=>e.value in i.properties()],"filter-has-id":[Sn,[],i=>null!==i.id()&&void 0!==i.id()],"filter-type-in":[Sn,[qi(bt)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[Sn,[qi(or)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[Sn,[bt,qi(or)],(i,[e,r])=>r.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[Sn,[bt,qi(or)],(i,[e,r])=>function(a,h,m,_){for(;m<=_;){const w=m+_>>1;if(h[w]===a)return!0;h[w]>a?_=w-1:m=w+1}return!1}(i.properties()[e.value],r.value,0,r.value.length-1)],all:{type:Sn,overloads:[[[Sn,Sn],(i,[e,r])=>e.evaluate(i)&&r.evaluate(i)],[Pa(Sn),(i,e)=>{for(const r of e)if(!r.evaluate(i))return!1;return!0}]]},any:{type:Sn,overloads:[[[Sn,Sn],(i,[e,r])=>e.evaluate(i)||r.evaluate(i)],[Pa(Sn),(i,e)=>{for(const r of e)if(r.evaluate(i))return!0;return!1}]]},"!":[Sn,[Sn],(i,[e])=>!e.evaluate(i)],"is-supported-script":[Sn,[bt],(i,[e])=>{const r=i.globals&&i.globals.isSupportedScript;return!r||r(e.evaluate(i))}],upcase:[bt,[bt],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[bt,[bt],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[bt,Pa(or),(i,e)=>e.map(r=>Vl(r.evaluate(i))).join("")],"resolved-locale":[bt,[Ui],(i,[e])=>e.evaluate(i).resolvedLocale()]});var ql=El;function Zu(i){return{result:"success",value:i}}function pc(i){return{result:"error",value:i}}function Uo(i){return"data-driven"===i["property-type"]||"cross-faded-data-driven"===i["property-type"]}function Oa(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function yo(i){return!!i.expression&&i.expression.interpolated}function di(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":null===i?"null":typeof i}function mc(i){return"object"==typeof i&&null!==i&&!Array.isArray(i)}function qu(i){return i}function zc(i,e){const r="color"===e.type,a=i.stops&&"object"==typeof i.stops[0][0],h=a||!(a||void 0!==i.property),m=i.type||(yo(e)?"exponential":"interval");if(r&&((i=hr({},i)).stops&&(i.stops=i.stops.map(k=>[k[0],Mt.parse(k[1])])),i.default=Mt.parse(i.default?i.default:e.default)),i.colorSpace&&"rgb"!==i.colorSpace&&!yu[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let _,w,P;if("exponential"===m)_=jc;else if("interval"===m)_=ka;else if("categorical"===m){_=Sh,w=Object.create(null);for(const k of i.stops)w[k[0]]=k[1];P=typeof i.stops[0][0]}else{if("identity"!==m)throw new Error(`Unknown function type "${m}"`);_=ks}if(a){const k={},j=[];for(let Y=0;Y<i.stops.length;Y++){const re=i.stops[Y],pe=re[0].zoom;void 0===k[pe]&&(k[pe]={zoom:pe,type:i.type,property:i.property,default:i.default,stops:[]},j.push(pe)),k[pe].stops.push([re[0].value,re[1]])}const $=[];for(const Y of j)$.push([k[Y].zoom,zc(k[Y],e)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:En.interpolationFactor.bind(void 0,G),zoomStops:$.map(Y=>Y[0]),evaluate:({zoom:Y},re)=>jc({stops:$,base:i.base},e,Y).evaluate(Y,re)}}if(h){const k="exponential"===m?{name:"exponential",base:void 0!==i.base?i.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:En.interpolationFactor.bind(void 0,k),zoomStops:i.stops.map(j=>j[0]),evaluate:({zoom:j})=>_(i,e,j,w,P)}}return{kind:"source",evaluate(k,j){const $=j&&j.properties?j.properties[i.property]:void 0;return void 0===$?gc(i.default,e.default):_(i,e,$,w,P)}}}function gc(i,e,r){return void 0!==i?i:void 0!==e?e:void 0!==r?r:void 0}function Sh(i,e,r,a,h){return gc(typeof r===h?a[r]:void 0,i.default,e.default)}function ka(i,e,r){if("number"!==di(r))return gc(i.default,e.default);const a=i.stops.length;if(1===a||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[a-1][0])return i.stops[a-1][1];const h=br(i.stops.map(m=>m[0]),r);return i.stops[h][1]}function jc(i,e,r){const a=void 0!==i.base?i.base:1;if("number"!==di(r))return gc(i.default,e.default);const h=i.stops.length;if(1===h||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[h-1][0])return i.stops[h-1][1];const m=br(i.stops.map(j=>j[0]),r),_=function(j,$,G,Y){const re=Y-G,pe=j-G;return 0===re?0:1===$?pe/re:(Math.pow($,pe)-1)/(Math.pow($,re)-1)}(r,a,i.stops[m][0],i.stops[m+1][0]),w=i.stops[m][1],P=i.stops[m+1][1];let k=no[e.type]||qu;if(i.colorSpace&&"rgb"!==i.colorSpace){const j=yu[i.colorSpace];k=($,G)=>j.reverse(j.interpolate(j.forward($),j.forward(G),_))}return"function"==typeof w.evaluate?{evaluate(...j){const $=w.evaluate.apply(void 0,j),G=P.evaluate.apply(void 0,j);if(void 0!==$&&void 0!==G)return k($,G,_)}}:k(w,P,_)}function ks(i,e,r){return"color"===e.type?r=Mt.parse(r):"formatted"===e.type?r=Fn.fromString(r.toString()):"resolvedImage"===e.type?r=Ar.fromString(r.toString()):di(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),gc(r,i.default,e.default)}class _c{constructor(e,r){var a;this.expression=e,this._warningHistory={},this._evaluator=new pu,this._defaultValue=r?"color"===(a=r).type&&(mc(a.default)||Array.isArray(a.default))?new Mt(0,0,0,0):"color"===a.type?Mt.parse(a.default)||null:void 0===a.default?null:a.default:null,this._enumValues=r&&"enum"===r.type?r.values:null}evaluateWithoutErrorHandling(e,r,a,h,m,_,w,P){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=a,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,a,h,m,_,w,P){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=a||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=P||null;try{const k=this.expression.evaluate(this._evaluator);if(null==k||"number"==typeof k&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new Di(`Expected value to be one of ${Object.keys(this._enumValues).map(j=>JSON.stringify(j)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,"undefined"!=typeof console&&console.warn(k.message)),this._defaultValue}}}function Ra(i){return Array.isArray(i)&&i.length>0&&"string"==typeof i[0]&&i[0]in ql}function ia(i,e){const r=new Vt(ql,[],e?function(h){const m={color:vr,string:bt,number:We,enum:bt,boolean:Sn,formatted:ts,resolvedImage:ss};return"array"===h.type?qi(m[h.value]||or,h.length):m[h.type]}(e):void 0),a=r.parse(i,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return a?Zu(new _c(a,e)):pc(r.errors)}class La{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent="constant"!==e&&!Q(r.expression)}evaluateWithoutErrorHandling(e,r,a,h,m,_){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,h,m,_)}evaluate(e,r,a,h,m,_){return this._styleExpression.evaluate(e,r,a,h,m,_)}}class Cl{constructor(e,r,a,h){this.kind=e,this.zoomStops=a,this._styleExpression=r,this.isStateDependent="camera"!==e&&!Q(r.expression),this.interpolationType=h}evaluateWithoutErrorHandling(e,r,a,h,m,_){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,h,m,_)}evaluate(e,r,a,h,m,_){return this._styleExpression.evaluate(e,r,a,h,m,_)}interpolationFactor(e,r,a){return this.interpolationType?En.interpolationFactor(this.interpolationType,e,r,a):0}}function Eu(i,e){if("error"===(i=ia(i,e)).result)return i;const r=i.value.expression,a=Ta(r);if(!a&&!Uo(e))return pc([new Zr("","data expressions not supported")]);const h=ve(r,["zoom","pitch","distance-from-center"]);if(!h&&!Oa(e))return pc([new Zr("","zoom expressions not supported")]);const m=oa(r);return m||h?m instanceof Zr?pc([m]):m instanceof En&&!yo(e)?pc([new Zr("",'"interpolate" expressions cannot be used with this property')]):Zu(m?new Cl(a?"camera":"composite",i.value,m.labels,m instanceof En?m.interpolation:void 0):new La(a?"constant":"source",i.value)):pc([new Zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xl{constructor(e,r){this._parameters=e,this._specification=r,hr(this,zc(this._parameters,this._specification))}static deserialize(e){return new Xl(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function oa(i){let e=null;if(i instanceof Ch)e=oa(i.result);else if(i instanceof Uu){for(const r of i.args)if(e=oa(r),e)break}else(i instanceof Pr||i instanceof En)&&i.input instanceof Hs&&"zoom"===i.input.name&&(e=i);return e instanceof Zr||i.eachChild(r=>{const a=oa(r);a instanceof Zr?e=a:!e&&a?e=new Zr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new Zr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Un{constructor(e,r,a,h){this.message=(e?`${e}: `:"")+a,h&&(this.identifier=h),null!=r&&r.__line__&&(this.line=r.__line__)}}function Rs(i){const e=i.key,r=i.value,a=i.valueSpec||{},h=i.objectElementValidators||{},m=i.style,_=i.styleSpec;let w=[];const P=di(r);if("object"!==P)return[new Un(e,r,`object expected, ${P} found`)];for(const k in r){const j=k.split(".")[0],$=a[j]||a["*"];let G;h[j]?G=h[j]:a[j]?G=Ro:h["*"]?G=h["*"]:a["*"]&&(G=Ro),G?w=w.concat(G({key:(e&&`${e}.`)+k,value:r[k],valueSpec:$,style:m,styleSpec:_,object:r,objectKey:k},r)):w.push(new Un(e,r[k],`unknown property "${k}"`))}for(const k in a)h[k]||a[k].required&&void 0===a[k].default&&void 0===r[k]&&w.push(new Un(e,r,`missing required property "${k}"`));return w}function gs(i){const e=i.value,r=i.valueSpec,a=i.style,h=i.styleSpec,m=i.key,_=i.arrayElementValidator||Ro;if("array"!==di(e))return[new Un(m,e,`array expected, ${di(e)} found`)];if(r.length&&e.length!==r.length)return[new Un(m,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new Un(m,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let w={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};h.$version<7&&(w.function=r.function),"object"===di(r.value)&&(w=r.value);let P=[];for(let k=0;k<e.length;k++)P=P.concat(_({array:e,arrayIndex:k,value:e[k],valueSpec:w,style:a,styleSpec:h,key:`${m}[${k}]`}));return P}function Kl(i){const e=i.key,r=i.value,a=i.valueSpec;let h=di(r);if("number"===h&&r!=r&&(h="NaN"),"number"!==h)return[new Un(e,r,`number expected, ${h} found`)];if("minimum"in a){let m=a.minimum;if("array"===di(a.minimum)&&(m=a.minimum[i.arrayIndex]),r<m)return[new Un(e,r,`${r} is less than the minimum value ${m}`)]}if("maximum"in a){let m=a.maximum;if("array"===di(a.maximum)&&(m=a.maximum[i.arrayIndex]),r>m)return[new Un(e,r,`${r} is greater than the maximum value ${m}`)]}return[]}function Ws(i){const e=i.valueSpec,r=Bn(i.value.type);let a,h,m,_={};const w="categorical"!==r&&void 0===i.value.property,P=!w,k="array"===di(i.value.stops)&&"array"===di(i.value.stops[0])&&"object"===di(i.value.stops[0][0]),j=Rs({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(Y){if("identity"===r)return[new Un(Y.key,Y.value,'identity function may not have a "stops" property')];let re=[];const pe=Y.value;return re=re.concat(gs({key:Y.key,value:pe,valueSpec:Y.valueSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:$})),"array"===di(pe)&&0===pe.length&&re.push(new Un(Y.key,pe,"array must have at least one stop")),re},default:function(Y){return Ro({key:Y.key,value:Y.value,valueSpec:e,style:Y.style,styleSpec:Y.styleSpec})}}});return"identity"===r&&w&&j.push(new Un(i.key,i.value,'missing required property "property"')),"identity"===r||i.value.stops||j.push(new Un(i.key,i.value,'missing required property "stops"')),"exponential"===r&&i.valueSpec.expression&&!yo(i.valueSpec)&&j.push(new Un(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(P&&!Uo(i.valueSpec)?j.push(new Un(i.key,i.value,"property functions not supported")):w&&!Oa(i.valueSpec)&&j.push(new Un(i.key,i.value,"zoom functions not supported"))),"categorical"!==r&&!k||void 0!==i.value.property||j.push(new Un(i.key,i.value,'"property" property is required')),j;function $(Y){let re=[];const pe=Y.value,Ie=Y.key;if("array"!==di(pe))return[new Un(Ie,pe,`array expected, ${di(pe)} found`)];if(2!==pe.length)return[new Un(Ie,pe,`array length 2 expected, length ${pe.length} found`)];if(k){if("object"!==di(pe[0]))return[new Un(Ie,pe,`object expected, ${di(pe[0])} found`)];if(void 0===pe[0].zoom)return[new Un(Ie,pe,"object stop key must have zoom")];if(void 0===pe[0].value)return[new Un(Ie,pe,"object stop key must have value")];const Ue=Bn(pe[0].zoom);if("number"!=typeof Ue)return[new Un(Ie,pe[0].zoom,"stop zoom values must be numbers")];if(m&&m>Ue)return[new Un(Ie,pe[0].zoom,"stop zoom values must appear in ascending order")];Ue!==m&&(m=Ue,h=void 0,_={}),re=re.concat(Rs({key:`${Ie}[0]`,value:pe[0],valueSpec:{zoom:{}},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Kl,value:G}}))}else re=re.concat(G({key:`${Ie}[0]`,value:pe[0],valueSpec:{},style:Y.style,styleSpec:Y.styleSpec},pe));return Ra(Wi(pe[1]))?re.concat([new Un(`${Ie}[1]`,pe[1],"expressions are not allowed in function stops.")]):re.concat(Ro({key:`${Ie}[1]`,value:pe[1],valueSpec:e,style:Y.style,styleSpec:Y.styleSpec}))}function G(Y,re){const pe=di(Y.value),Ie=Bn(Y.value),Ue=null!==Y.value?Y.value:re;if(a){if(pe!==a)return[new Un(Y.key,Ue,`${pe} stop domain type must match previous stop domain type ${a}`)]}else a=pe;if("number"!==pe&&"string"!==pe&&"boolean"!==pe&&"number"!=typeof Ie&&"string"!=typeof Ie&&"boolean"!=typeof Ie)return[new Un(Y.key,Ue,"stop domain value must be a number, string, or boolean")];if("number"!==pe&&"categorical"!==r){let et=`number expected, ${pe} found`;return Uo(e)&&void 0===r&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Un(Y.key,Ue,et)]}return"categorical"!==r||"number"!==pe||"number"==typeof Ie&&isFinite(Ie)&&Math.floor(Ie)===Ie?"categorical"!==r&&"number"===pe&&"number"==typeof Ie&&"number"==typeof h&&void 0!==h&&Ie<h?[new Un(Y.key,Ue,"stop domain values must appear in ascending order")]:(h=Ie,"categorical"===r&&Ie in _?[new Un(Y.key,Ue,"stop domain values must be unique")]:(_[Ie]=!0,[])):[new Un(Y.key,Ue,`integer expected, found ${String(Ie)}`)]}}function Oo(i){const e=("property"===i.expressionContext?Eu:ia)(Wi(i.value),i.valueSpec);if("error"===e.result)return e.value.map(a=>new Un(`${i.key}${a.key}`,i.value,a.message));const r=e.value.expression||e.value._styleExpression.expression;if("property"===i.expressionContext&&"text-font"===i.propertyKey&&!r.outputDefined())return[new Un(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===i.expressionContext&&"layout"===i.propertyType&&!Q(r))return[new Un(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===i.expressionContext)return _s(r,i);if(i.expressionContext&&0===i.expressionContext.indexOf("cluster")){if(!ve(r,["zoom","feature-state"]))return[new Un(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===i.expressionContext&&!Ta(r))return[new Un(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _s(i,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const h of e.valueSpec.expression.parameters)r.delete(h);if(0===r.size)return[];const a=[];return i instanceof Hs&&r.has(i.name)?[new Un(e.key,e.value,`["${i.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(i.eachChild(h=>{a.push(..._s(h,e))}),a)}function sa(i){const e=i.key,r=i.value,a=i.valueSpec,h=[];return Array.isArray(a.values)?-1===a.values.indexOf(Bn(r))&&h.push(new Un(e,r,`expected one of [${a.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(a.values).indexOf(Bn(r))&&h.push(new Un(e,r,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(r)} found`)),h}function Tl(i){if(!0===i||!1===i)return!0;if(!Array.isArray(i)||0===i.length)return!1;switch(i[0]){case"has":return i.length>=2&&"$id"!==i[1]&&"$type"!==i[1];case"in":return i.length>=3&&("string"!=typeof i[1]||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==i.length||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!Tl(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function yc(i,e="fill"){if(null==i)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Tl(i)||(i=Tu(i));const r=i;let a=!0;try{a=function(k){if(!il(k))return k;let j=Wi(k);return Yl(j),j=Cu(j),j}(r)}catch(k){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const h=ut[`filter_${e}`],m=ia(a,h);let _=null;if("error"===m.result)throw new Error(m.value.map(k=>`${k.key}: ${k.message}`).join(", "));_=(k,j,$)=>m.value.evaluate(k,j,{},$);let w=null,P=null;if(a!==r){const k=ia(r,h);if("error"===k.result)throw new Error(k.value.map(j=>`${j.key}: ${j.message}`).join(", "));w=(j,$,G,Y,re)=>k.value.evaluate(j,$,{},G,void 0,void 0,Y,re),P=!Ta(k.value.expression)}return{filter:_,dynamicFilter:w||void 0,needGeometry:Uc(a),needFeature:!!P}}function Cu(i){if(!Array.isArray(i))return i;const e=function(r){if(Vc.has(r[0]))for(let a=1;a<r.length;a++)if(il(r[a]))return!0;return r}(i);return!0===e?e:e.map(r=>Cu(r))}function Yl(i){let e=!1;const r=[];if("case"===i[0]){for(let a=1;a<i.length-1;a+=2)e=e||il(i[a]),r.push(i[a+1]);r.push(i[i.length-1])}else if("match"===i[0]){e=e||il(i[1]);for(let a=2;a<i.length-1;a+=2)r.push(i[a+1]);r.push(i[i.length-1])}else if("step"===i[0]){e=e||il(i[1]);for(let a=1;a<i.length-1;a+=2)r.push(i[a+1])}e&&(i.length=0,i.push("any",...r));for(let a=1;a<i.length;a++)Yl(i[a])}function il(i){if(!Array.isArray(i))return!1;if("pitch"===(e=i[0])||"distance-from-center"===e)return!0;var e;for(let r=1;r<i.length;r++)if(il(i[r]))return!0;return!1}const Vc=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Xu(i,e){return i<e?-1:i>e?1:0}function Uc(i){if(!Array.isArray(i))return!1;if("within"===i[0])return!0;for(let e=1;e<i.length;e++)if(Uc(i[e]))return!0;return!1}function Tu(i){if(!i)return!0;const e=i[0];return i.length<=1?"any"!==e:"=="===e?Ih(i[1],i[2],"=="):"!="===e?ko(Ih(i[1],i[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ih(i[1],i[2],e):"any"===e?(r=i.slice(1),["any"].concat(r.map(Tu))):"all"===e?["all"].concat(i.slice(1).map(Tu)):"none"===e?["all"].concat(i.slice(1).map(Tu).map(ko)):"in"===e?aa(i[1],i.slice(2)):"!in"===e?ko(aa(i[1],i.slice(2))):"has"===e?Fa(i[1]):"!has"===e?ko(Fa(i[1])):"within"!==e||i;var r}function Ih(i,e,r){switch(i){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,i,e]}}function aa(i,e){if(0===e.length)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",i,["literal",e.sort(Xu)]]:["filter-in-small",i,["literal",e]]}}function Fa(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ko(i){return["!",i]}function Zs(i){return Tl(Wi(i.value))?Oo(hr({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Ql(i)}function Ql(i){const e=i.value,r=i.key;if("array"!==di(e))return[new Un(r,e,`array expected, ${di(e)} found`)];const a=i.styleSpec;let h,m=[];if(e.length<1)return[new Un(r,e,"filter array must have at least 1 element")];switch(m=m.concat(sa({key:`${r}[0]`,value:e[0],valueSpec:a.filter_operator,style:i.style,styleSpec:i.styleSpec})),Bn(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Bn(e[1])&&m.push(new Un(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&m.push(new Un(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=di(e[1]),"string"!==h&&m.push(new Un(`${r}[1]`,e[1],`string expected, ${h} found`)));for(let _=2;_<e.length;_++)h=di(e[_]),"$type"===Bn(e[1])?m=m.concat(sa({key:`${r}[${_}]`,value:e[_],valueSpec:a.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==h&&"number"!==h&&"boolean"!==h&&m.push(new Un(`${r}[${_}]`,e[_],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let _=1;_<e.length;_++)m=m.concat(Ql({key:`${r}[${_}]`,value:e[_],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=di(e[1]),2!==e.length?m.push(new Un(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==h&&m.push(new Un(`${r}[1]`,e[1],`string expected, ${h} found`));break;case"within":h=di(e[1]),2!==e.length?m.push(new Un(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==h&&m.push(new Un(`${r}[1]`,e[1],`object expected, ${h} found`))}return m}function vc(i,e){const r=i.key,a=i.style,h=i.styleSpec,m=i.value,_=i.objectKey,w=h[`${e}_${i.layerType}`];if(!w)return[];const P=_.match(/^(.*)-transition$/);if("paint"===e&&P&&w[P[1]]&&w[P[1]].transition)return Ro({key:r,value:m,valueSpec:h.transition,style:a,styleSpec:h});const k=i.valueSpec||w[_];if(!k)return[new Un(r,m,`unknown property "${_}"`)];let j;if("string"===di(m)&&Uo(k)&&!k.tokens&&(j=/^{([^}]+)}$/.exec(m)))return[new Un(r,m,`"${_}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const $=[];return"symbol"===i.layerType&&("text-field"===_&&a&&!a.glyphs&&$.push(new Un(r,m,'use of "text-field" requires a style "glyphs" property')),"text-font"===_&&mc(Wi(m))&&"identity"===Bn(m.type)&&$.push(new Un(r,m,'"text-font" does not support identity functions'))),$.concat(Ro({key:i.key,value:m,valueSpec:k,style:a,styleSpec:h,expressionContext:"property",propertyType:e,propertyKey:_}))}function Hc(i){return vc(i,"paint")}function bc(i){return vc(i,"layout")}function $c(i){let e=[];const r=i.value,a=i.key,h=i.style,m=i.styleSpec;r.type||r.ref||e.push(new Un(a,r,'either "type" or "ref" is required'));let _=Bn(r.type);const w=Bn(r.ref);if(r.id){const P=Bn(r.id);for(let k=0;k<i.arrayIndex;k++){const j=h.layers[k];Bn(j.id)===P&&e.push(new Un(a,r.id,`duplicate layer id "${r.id}", previously used at line ${j.id.__line__}`))}}if("ref"in r){let P;["type","source","source-layer","filter","layout"].forEach(k=>{k in r&&e.push(new Un(a,r[k],`"${k}" is prohibited for ref layers`))}),h.layers.forEach(k=>{Bn(k.id)===w&&(P=k)}),P?P.ref?e.push(new Un(a,r.ref,"ref cannot reference another ref layer")):_=Bn(P.type):"string"==typeof w&&e.push(new Un(a,r.ref,`ref layer "${w}" not found`))}else if("background"!==_&&"sky"!==_)if(r.source){const P=h.sources&&h.sources[r.source],k=P&&Bn(P.type);P?"vector"===k&&"raster"===_?e.push(new Un(a,r.source,`layer "${r.id}" requires a raster source`)):"raster"===k&&"raster"!==_?e.push(new Un(a,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==k||r["source-layer"]?"raster-dem"===k&&"hillshade"!==_?e.push(new Un(a,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==_||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===k&&P.lineMetrics||e.push(new Un(a,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Un(a,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Un(a,r.source,`source "${r.source}" not found`))}else e.push(new Un(a,r,'missing required property "source"'));return e=e.concat(Rs({key:a,value:r,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ro({key:`${a}.type`,value:r.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,object:r,objectKey:"type"}),filter:P=>Zs(hr({layerType:_},P)),layout:P=>Rs({layer:r,key:P.key,value:P.value,valueSpec:{},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":k=>bc(hr({layerType:_},k))}}),paint:P=>Rs({layer:r,key:P.key,value:P.value,valueSpec:{},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":k=>Hc(hr({layerType:_},k))}})}})),e}function Dl(i){const e=i.value,r=i.key,a=di(e);return"string"!==a?[new Un(r,e,`string expected, ${a} found`)]:[]}const Gc={promoteId:function({key:i,value:e}){if("string"===di(e))return Dl({key:i,value:e});{const r=[];for(const a in e)r.push(...Dl({key:`${i}.${a}`,value:e[a]}));return r}}};function Mh(i){const e=i.value,r=i.key,a=i.styleSpec,h=i.style;if(!e.type)return[new Un(r,e,'"type" is required')];const m=Bn(e.type);let _;switch(m){case"vector":case"raster":case"raster-dem":return _=Rs({key:r,value:e,valueSpec:a[`source_${m.replace("-","_")}`],style:i.style,styleSpec:a,objectElementValidators:Gc}),_;case"geojson":if(_=Rs({key:r,value:e,valueSpec:a.source_geojson,style:h,styleSpec:a,objectElementValidators:Gc}),e.cluster)for(const w in e.clusterProperties){const[P,k]=e.clusterProperties[w],j="string"==typeof P?[P,["accumulated"],["get",w]]:P;_.push(...Oo({key:`${r}.${w}.map`,value:k,expressionContext:"cluster-map"})),_.push(...Oo({key:`${r}.${w}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return _;case"video":return Rs({key:r,value:e,valueSpec:a.source_video,style:h,styleSpec:a});case"image":return Rs({key:r,value:e,valueSpec:a.source_image,style:h,styleSpec:a});case"canvas":return[new Un(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sa({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:a})}}function xc(i){const e=i.value,r=i.styleSpec,a=r.light,h=i.style;let m=[];const _=di(e);if(void 0===e)return m;if("object"!==_)return m=m.concat([new Un("light",e,`object expected, ${_} found`)]),m;for(const w in e){const P=w.match(/^(.*)-transition$/);m=m.concat(P&&a[P[1]]&&a[P[1]].transition?Ro({key:w,value:e[w],valueSpec:r.transition,style:h,styleSpec:r}):a[w]?Ro({key:w,value:e[w],valueSpec:a[w],style:h,styleSpec:r}):[new Un(w,e[w],`unknown property "${w}"`)])}return m}function us(i){const e=i.value,r=i.key,a=i.style,h=i.styleSpec,m=h.terrain;let _=[];const w=di(e);if(void 0===e)return _;if("object"!==w)return _=_.concat([new Un("terrain",e,`object expected, ${w} found`)]),_;for(const P in e){const k=P.match(/^(.*)-transition$/);_=_.concat(k&&m[k[1]]&&m[k[1]].transition?Ro({key:P,value:e[P],valueSpec:h.transition,style:a,styleSpec:h}):m[P]?Ro({key:P,value:e[P],valueSpec:m[P],style:a,styleSpec:h}):[new Un(P,e[P],`unknown property "${P}"`)])}if(e.source){const P=a.sources&&a.sources[e.source],k=P&&Bn(P.type);P?"raster-dem"!==k&&_.push(new Un(r,e.source,`terrain cannot be used with a source of type ${String(k)}, it only be used with a "raster-dem" source type`)):_.push(new Un(r,e.source,`source "${e.source}" not found`))}else _.push(new Un(r,e,'terrain is missing required property "source"'));return _}function Ah(i){const e=i.value,r=i.style,a=i.styleSpec,h=a.fog;let m=[];const _=di(e);if(void 0===e)return m;if("object"!==_)return m=m.concat([new Un("fog",e,`object expected, ${_} found`)]),m;for(const w in e){const P=w.match(/^(.*)-transition$/);m=m.concat(P&&h[P[1]]&&h[P[1]].transition?Ro({key:w,value:e[w],valueSpec:a.transition,style:r,styleSpec:a}):h[w]?Ro({key:w,value:e[w],valueSpec:h[w],style:r,styleSpec:a}):[new Un(w,e[w],`unknown property "${w}"`)])}return m}const Wc={"*":()=>[],array:gs,boolean:function(i){const e=i.value,r=i.key,a=di(e);return"boolean"!==a?[new Un(r,e,`boolean expected, ${a} found`)]:[]},number:Kl,color:function(i){const e=i.key,r=i.value,a=di(r);return"string"!==a?[new Un(e,r,`color expected, ${a} found`)]:null===Be.parseCSSColor(r)?[new Un(e,r,`color expected, "${r}" found`)]:[]},enum:sa,filter:Zs,function:Ws,layer:$c,object:Rs,source:Mh,light:xc,terrain:us,fog:Ah,string:Dl,formatted:function(i){return 0===Dl(i).length?[]:Oo(i)},resolvedImage:function(i){return 0===Dl(i).length?[]:Oo(i)},projection:function(i){const e=i.value,r=i.styleSpec,a=r.projection,h=i.style;let m=[];const _=di(e);if("object"===_)for(const w in e)m=m.concat(Ro({key:w,value:e[w],valueSpec:a[w],style:h,styleSpec:r}));else"string"!==_&&(m=m.concat([new Un("projection",e,`object or string expected, ${_} found`)]));return m}};function Ro(i){const e=i.value,r=i.valueSpec,a=i.styleSpec;return r.expression&&mc(Bn(e))?Ws(i):r.expression&&Ra(Wi(e))?Oo(i):r.type&&Wc[r.type]?Wc[r.type](i):Rs(hr({},i,{valueSpec:r.type?a[r.type]:r}))}function Ud(i){const e=i.value,r=i.key,a=Dl(i);return a.length||(-1===e.indexOf("{fontstack}")&&a.push(new Un(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&a.push(new Un(r,e,'"glyphs" url must include a "{range}" token'))),a}function Du(i,e=ut){return Na(Ro({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,objectElementValidators:{glyphs:Ud,"*":()=>[]}}))}const Su=i=>Na(Hc(i)),wc=i=>Na(bc(i));function Na(i){return i.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function Sl(i,e){let r=!1;if(e&&e.length)for(const a of e)i.fire(new ai(new Error(a.message))),r=!0;return r}var Il=hs;function hs(i,e,r){var a=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var h=new Int32Array(this.arrayBuffer);i=h[0],this.d=(e=h[1])+2*(r=h[2]);for(var m=0;m<this.d*this.d;m++){var _=h[3+m],w=h[3+m+1];a.push(_===w?null:h.subarray(_,w))}var P=h[3+a.length+1];this.keys=h.subarray(h[3+a.length],P),this.bboxes=h.subarray(P),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var k=0;k<this.d*this.d;k++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=i,this.padding=r,this.scale=e/i,this.uid=0;var j=r/e*i;this.min=-j,this.max=i+j}hs.prototype.insert=function(i,e,r,a,h){this._forEachCell(e,r,a,h,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(h)},hs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hs.prototype._insertCell=function(i,e,r,a,h,m){this.cells[h].push(m)},hs.prototype.query=function(i,e,r,a,h){var m=this.min,_=this.max;if(i<=m&&e<=m&&_<=r&&_<=a&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(i,e,r,a,this._queryCell,w,{},h),w},hs.prototype._queryCell=function(i,e,r,a,h,m,_,w){var P=this.cells[h];if(null!==P)for(var k=this.keys,j=this.bboxes,$=0;$<P.length;$++){var G=P[$];if(void 0===_[G]){var Y=4*G;(w?w(j[Y+0],j[Y+1],j[Y+2],j[Y+3]):i<=j[Y+2]&&e<=j[Y+3]&&r>=j[Y+0]&&a>=j[Y+1])?(_[G]=!0,m.push(k[G])):_[G]=!1}}},hs.prototype._forEachCell=function(i,e,r,a,h,m,_,w){for(var P=this._convertToCellCoord(i),k=this._convertToCellCoord(e),j=this._convertToCellCoord(r),$=this._convertToCellCoord(a),G=P;G<=j;G++)for(var Y=k;Y<=$;Y++){var re=this.d*Y+G;if((!w||w(this._convertFromCellCoord(G),this._convertFromCellCoord(Y),this._convertFromCellCoord(G+1),this._convertFromCellCoord(Y+1)))&&h.call(this,i,e,r,a,re,m,_,w))return}},hs.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},hs.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},hs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,e=3+this.cells.length+1+1,r=0,a=0;a<this.cells.length;a++)r+=this.cells[a].length;var h=new Int32Array(e+r+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=e,_=0;_<i.length;_++){var w=i[_];h[3+_]=m,h.set(w,m),m+=w.length}return h[3+i.length]=m,h.set(this.keys,m),h[3+i.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};const ol={};function $n(i,e,r={}){Object.defineProperty(i,"_classRegistryKey",{value:e,writeable:!1}),ol[e]={klass:i,omit:r.omit||[]}}$n(Object,"Object"),Il.serialize=function(i,e){const r=i.toArrayBuffer();return e&&e.push(r),{buffer:r}},Il.deserialize=function(i){return new Il(i.buffer)},Object.defineProperty(Il,"name",{value:"Grid"}),$n(Il,"Grid"),$n(Mt,"Color"),$n(Error,"Error"),$n(vt,"AJAXError"),$n(Ar,"ResolvedImage"),$n(Xl,"StylePropertyFunction"),$n(_c,"StyleExpression",{omit:["_evaluator"]}),$n(Cl,"ZoomDependentExpression"),$n(La,"ZoomConstantExpression"),$n(Hs,"CompoundExpression",{omit:["_evaluate"]});for(const i in ql)ol[ql[i]._classRegistryKey]||$n(ql[i],`Expression${i}`);function sl(i){return i&&"undefined"!=typeof ArrayBuffer&&(i instanceof ArrayBuffer||i.constructor&&"ArrayBuffer"===i.constructor.name)}function Ls(i){return J.ImageBitmap&&i instanceof J.ImageBitmap}function To(i,e){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(sl(i)||Ls(i))return e&&e.push(i),i;if(ArrayBuffer.isView(i)){const r=i;return e&&e.push(r.buffer),r}if(i instanceof J.ImageData)return e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const r=[];for(const a of i)r.push(To(a,e));return r}if("object"==typeof i){const r=i.constructor,a=r._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const h=r.serialize?r.serialize(i,e):{};if(!r.serialize){for(const m in i)i.hasOwnProperty(m)&&(ol[a].omit.indexOf(m)>=0||(h[m]=To(i[m],e)));i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==a&&(h.$name=a),h}throw new Error("can't serialize object of type "+typeof i)}function Es(i){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||sl(i)||Ls(i)||ArrayBuffer.isView(i)||i instanceof J.ImageData)return i;if(Array.isArray(i))return i.map(Es);if("object"==typeof i){const e=i.$name||"Object",{klass:r}=ol[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(i);const a=Object.create(r.prototype);for(const h of Object.keys(i))"$name"!==h&&(a[h]=Es(i[h]));return a}throw new Error("can't deserialize object of type "+typeof i)}class pd{constructor(){this.first=!0}update(e,r){const a=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=a,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=a,!0):(this.lastFloorZoom>a?(this.lastIntegerZoom=a+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<a&&(this.lastIntegerZoom=a,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=a,!0))}}const Ph=i=>i>=1536&&i<=1791,Hd=i=>i>=1872&&i<=1919,Ku=i=>i>=2208&&i<=2303,Ki=i=>i>=11904&&i<=12031,al=i=>i>=12032&&i<=12255,qs=i=>i>=12272&&i<=12287,go=i=>i>=12288&&i<=12351,Ba=i=>i>=12352&&i<=12447,Jl=i=>i>=12448&&i<=12543,$d=i=>i>=12544&&i<=12591,Iu=i=>i>=12704&&i<=12735,md=i=>i>=12736&&i<=12783,ec=i=>i>=12784&&i<=12799,Yu=i=>i>=12800&&i<=13055,uo=i=>i>=13056&&i<=13311,Lo=i=>i>=13312&&i<=19903,Mu=i=>i>=19968&&i<=40959,Do=i=>i>=40960&&i<=42127,la=i=>i>=42128&&i<=42191,Zc=i=>i>=44032&&i<=55215,Au=i=>i>=63744&&i<=64255,ll=i=>i>=64336&&i<=65023,ns=i=>i>=65040&&i<=65055,Xs=i=>i>=65072&&i<=65103,Ec=i=>i>=65104&&i<=65135,za=i=>i>=65136&&i<=65279,ys=i=>i>=65280&&i<=65519;function tc(i){for(const e of i)if(Pu(e.charCodeAt(0)))return!0;return!1}function qc(i){for(const e of i)if(!Oh(e.charCodeAt(0)))return!1;return!0}function Oh(i){return!(Ph(i)||Hd(i)||Ku(i)||ll(i)||za(i))}function Pu(i){return!(746!==i&&747!==i&&(i<4352||!(Iu(i)||$d(i)||Xs(i)&&!(i>=65097&&i<=65103)||Au(i)||uo(i)||Ki(i)||md(i)||!(!go(i)||i>=12296&&i<=12305||i>=12308&&i<=12319||12336===i)||Lo(i)||Mu(i)||Yu(i)||(e=i,e>=12592&&e<=12687)||(e=>e>=43360&&e<=43391)(i)||(e=>e>=55216&&e<=55295)(i)||(e=>e>=4352&&e<=4607)(i)||Zc(i)||Ba(i)||qs(i)||(e=>e>=12688&&e<=12703)(i)||al(i)||ec(i)||Jl(i)&&12540!==i||!(!ys(i)||65288===i||65289===i||65293===i||i>=65306&&i<=65310||65339===i||65341===i||65343===i||i>=65371&&i<=65503||65507===i||i>=65512&&i<=65519)||!(!Ec(i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||(e=>e>=5120&&e<=5759)(i)||(e=>e>=6320&&e<=6399)(i)||ns(i)||(e=>e>=19904&&e<=19967)(i)||Do(i)||la(i))));var e}function Xc(i){return!(Pu(i)||(e=i,(r=e)>=128&&r<=255&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(r=>r>=8192&&r<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(r=>r>=8448&&r<=8527)(e)||(r=>r>=8528&&r<=8591)(e)||(r=>r>=8960&&r<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(r=>r>=9216&&r<=9279)(e)&&9251!==e||(r=>r>=9280&&r<=9311)(e)||(r=>r>=9312&&r<=9471)(e)||(r=>r>=9632&&r<=9727)(e)||(r=>r>=9728&&r<=9983)(e)&&!(e>=9754&&e<=9759)||(r=>r>=11008&&r<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||go(e)||Jl(e)||(r=>r>=57344&&r<=63743)(e)||Xs(e)||Ec(e)||ys(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e,r}function p(i){return i>=1424&&i<=2303||ll(i)||za(i)}function o(i,e){return!(!e&&p(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||(r=i,r>=6016&&r<=6143));var r}function u(i){for(const e of i)if(p(e.charCodeAt(0)))return!0;return!1}const g="deferred",E="loading",I="loaded";let B=null,z="unavailable",U=null;const Z=function(i){i&&"string"==typeof i&&i.indexOf("NetworkError")>-1&&(z="error"),B&&B(i)};function X(){ae.fire(new Mr("pluginStateChange",{pluginStatus:z,pluginURL:U}))}const ae=new qn,ye=function(){return z},Le=function(){if(z!==g||!U)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");z=E,X(),U&&It({url:U},i=>{i?Z(i):(z=I,X())})},Ae={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>z===I||null!=Ae.applyArabicShaping,isLoading:()=>z===E,setState(i){z=i.pluginStatus,U=i.pluginURL},isParsed:()=>null!=Ae.applyArabicShaping&&null!=Ae.processBidirectionalText&&null!=Ae.processStyledBidirectionalText,getPluginURL:()=>U};class De{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pd,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,a){for(const h of r)if(!o(h.charCodeAt(0),a))return!1;return!0}(e,Ae.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,r=e-Math.floor(e),a=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*a}:{fromScale:.5,toScale:1,t:1-(1-a)*r}}}class Oe{constructor(e,r){this.property=e,this.value=r,this.expression=function(a,h){if(mc(a))return new Xl(a,h);if(Ra(a)){const m=Eu(a,h);if("error"===m.result)throw new Error(m.value.map(_=>`${_.key}: ${_.message}`).join(", "));return m.value}{let m=a;return"string"==typeof a&&"color"===h.type&&(m=Mt.parse(a)),{kind:"constant",evaluate:()=>m}}}(void 0===r?e.specification.default:r,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,r,a){return this.property.possiblyEvaluate(this,e,r,a)}}class Ce{constructor(e){this.property=e,this.value=new Oe(e,void 0)}transitioned(e,r){return new ze(this.property,this.value,r,Tt({},e.transition,this.transition),e.now)}untransitioned(){return new ze(this.property,this.value,null,{},0)}}class Ve{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return mn(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Ce(this._values[e].property)),this._values[e].value=new Oe(this._values[e].property,null===r?void 0:mn(r))}getTransition(e){return mn(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Ce(this._values[e].property)),this._values[e].transition=mn(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);void 0!==a&&(e[r]=a);const h=this.getTransition(r);void 0!==h&&(e[`${r}-transition`]=h)}return e}transitioned(e,r){const a=new ft(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].transitioned(e,r._values[h]);return a}untransitioned(){const e=new ft(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class ze{constructor(e,r,a,h,m){const _=h.delay||0,w=h.duration||0;m=m||0,this.property=e,this.value=r,this.begin=m+_,this.end=this.begin+w,e.specification.transition&&(h.delay||h.duration)&&(this.prior=a)}possiblyEvaluate(e,r,a){const h=e.now||0,m=this.value.possiblyEvaluate(e,r,a),_=this.prior;if(_){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return _.possiblyEvaluate(e,r,a);{const w=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(e,r,a),m,Fe(w))}}return m}}class ft{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,a){const h=new st(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(e,r,a);return h}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ot{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return mn(this._values[e].value)}setValue(e,r){this._values[e]=new Oe(this._values[e].property,null===r?void 0:mn(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);void 0!==a&&(e[r]=a)}return e}possiblyEvaluate(e,r,a){const h=new st(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(e,r,a);return h}}class Ke{constructor(e,r,a){this.property=e,this.value=r,this.parameters=a}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,r,a,h){return this.property.evaluate(this.value,this.parameters,e,r,a,h)}}class st{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class tt{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,a){const h=no[this.specification.type];return h?h(e,r,a):e}}class gt{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,a,h){return new Ke(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(r,null,{},a,h)}:e.expression,r)}interpolate(e,r,a){if("constant"!==e.value.kind||"constant"!==r.value.kind)return e;if(void 0===e.value.value||void 0===r.value.value)return new Ke(this,{kind:"constant",value:void 0},e.parameters);const h=no[this.specification.type];return h?new Ke(this,{kind:"constant",value:h(e.value.value,r.value.value,a)},e.parameters):e}evaluate(e,r,a,h,m,_){return"constant"===e.kind?e.value:e.evaluate(r,a,h,m,_)}}class kt extends gt{possiblyEvaluate(e,r,a,h){if(void 0===e.value)return new Ke(this,{kind:"constant",value:void 0},r);if("constant"===e.expression.kind){const m=e.expression.evaluate(r,null,{},a,h),_="resolvedImage"===e.property.specification.type&&"string"!=typeof m?m.name:m,w=this._calculate(_,_,_,r);return new Ke(this,{kind:"constant",value:w},r)}if("camera"===e.expression.kind){const m=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new Ke(this,{kind:"constant",value:m},r)}return new Ke(this,e.expression,r)}evaluate(e,r,a,h,m,_){if("source"===e.kind){const w=e.evaluate(r,a,h,m,_);return this._calculate(w,w,w,r)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},a,h),e.evaluate({zoom:Math.floor(r.zoom)},a,h),e.evaluate({zoom:Math.floor(r.zoom)+1},a,h),r):e.value}_calculate(e,r,a,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:r,other:a}:{from:a,to:r,other:e}}interpolate(e){return e}}class ln{constructor(e){this.specification=e}possiblyEvaluate(e,r,a,h){if(void 0!==e.value){if("constant"===e.expression.kind){const m=e.expression.evaluate(r,null,{},a,h);return this._calculate(m,m,m,r)}return this._calculate(e.expression.evaluate(new De(Math.floor(r.zoom-1),r)),e.expression.evaluate(new De(Math.floor(r.zoom),r)),e.expression.evaluate(new De(Math.floor(r.zoom+1),r)),r)}}_calculate(e,r,a,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:a,to:r}}interpolate(e){return e}}class At{constructor(e){this.specification=e}possiblyEvaluate(e,r,a,h){return!!e.expression.evaluate(r,null,{},a,h)}interpolate(){return!1}}class sn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new De(0,{});for(const a in e){const h=e[a];h.specification.overridable&&this.overridableProperties.push(a);const m=this.defaultPropertyValues[a]=new Oe(h,void 0),_=this.defaultTransitionablePropertyValues[a]=new Ce(h);this.defaultTransitioningPropertyValues[a]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=m.possiblyEvaluate(r)}}}function rn(i,e){return 256*(i=Je(Math.floor(i),0,255))+Je(Math.floor(e),0,255)}$n(gt,"DataDrivenProperty"),$n(tt,"DataConstantProperty"),$n(kt,"CrossFadedDataDrivenProperty"),$n(ln,"CrossFadedProperty"),$n(At,"ColorRampProperty");const kn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qt{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _n{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function hn(i,e=1){let r=0,a=0;return{members:i.map(h=>{const m=kn[h.type].BYTES_PER_ELEMENT,_=r=Vn(r,Math.max(e,m)),w=h.components||1;return a=Math.max(a,m),r+=m*w,{name:h.name,type:h.type,components:w,offset:_}}),size:Vn(r,Math.max(a,e)),alignment:e}}function Vn(i,e){return Math.ceil(i/e)*e}class Rn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const h=2*e;return this.int16[h+0]=r,this.int16[h+1]=a,e}}Rn.prototype.bytesPerElement=4,$n(Rn,"StructArrayLayout2i4");class Qn extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,a)}emplace(e,r,a,h){const m=3*e;return this.int16[m+0]=r,this.int16[m+1]=a,this.int16[m+2]=h,e}}Qn.prototype.bytesPerElement=6,$n(Qn,"StructArrayLayout3i6");class ar extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,h)}emplace(e,r,a,h,m){const _=4*e;return this.int16[_+0]=r,this.int16[_+1]=a,this.int16[_+2]=h,this.int16[_+3]=m,e}}ar.prototype.bytesPerElement=8,$n(ar,"StructArrayLayout4i8");class dr extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,a,h,m,_,w)}emplace(e,r,a,h,m,_,w,P){const k=6*e,j=12*e,$=3*e;return this.int16[k+0]=r,this.int16[k+1]=a,this.uint8[j+4]=h,this.uint8[j+5]=m,this.uint8[j+6]=_,this.uint8[j+7]=w,this.float32[$+2]=P,e}}dr.prototype.bytesPerElement=12,$n(dr,"StructArrayLayout2i4ub1f12");class qr extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,h)}emplace(e,r,a,h,m){const _=4*e;return this.float32[_+0]=r,this.float32[_+1]=a,this.float32[_+2]=h,this.float32[_+3]=m,e}}qr.prototype.bytesPerElement=16,$n(qr,"StructArrayLayout4f16");class rr extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P,k,j){const $=this.length;return this.resize($+1),this.emplace($,e,r,a,h,m,_,w,P,k,j)}emplace(e,r,a,h,m,_,w,P,k,j,$){const G=10*e;return this.uint16[G+0]=r,this.uint16[G+1]=a,this.uint16[G+2]=h,this.uint16[G+3]=m,this.uint16[G+4]=_,this.uint16[G+5]=w,this.uint16[G+6]=P,this.uint16[G+7]=k,this.uint16[G+8]=j,this.uint16[G+9]=$,e}}rr.prototype.bytesPerElement=20,$n(rr,"StructArrayLayout10ui20");class Ir extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P){const k=this.length;return this.resize(k+1),this.emplace(k,e,r,a,h,m,_,w,P)}emplace(e,r,a,h,m,_,w,P,k){const j=8*e;return this.uint16[j+0]=r,this.uint16[j+1]=a,this.uint16[j+2]=h,this.uint16[j+3]=m,this.uint16[j+4]=_,this.uint16[j+5]=w,this.uint16[j+6]=P,this.uint16[j+7]=k,e}}Ir.prototype.bytesPerElement=16,$n(Ir,"StructArrayLayout8ui16");class Xr extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,h,m,_)}emplace(e,r,a,h,m,_,w){const P=6*e;return this.int16[P+0]=r,this.int16[P+1]=a,this.int16[P+2]=h,this.int16[P+3]=m,this.int16[P+4]=_,this.int16[P+5]=w,e}}Xr.prototype.bytesPerElement=12,$n(Xr,"StructArrayLayout6i12");class Yi extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P,k,j,$,G){const Y=this.length;return this.resize(Y+1),this.emplace(Y,e,r,a,h,m,_,w,P,k,j,$,G)}emplace(e,r,a,h,m,_,w,P,k,j,$,G,Y){const re=12*e;return this.int16[re+0]=r,this.int16[re+1]=a,this.int16[re+2]=h,this.int16[re+3]=m,this.uint16[re+4]=_,this.uint16[re+5]=w,this.uint16[re+6]=P,this.uint16[re+7]=k,this.int16[re+8]=j,this.int16[re+9]=$,this.int16[re+10]=G,this.int16[re+11]=Y,e}}Yi.prototype.bytesPerElement=24,$n(Yi,"StructArrayLayout4i4ui4i24");class Qi extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,h,m,_)}emplace(e,r,a,h,m,_,w){const P=10*e,k=5*e;return this.int16[P+0]=r,this.int16[P+1]=a,this.int16[P+2]=h,this.float32[k+2]=m,this.float32[k+3]=_,this.float32[k+4]=w,e}}Qi.prototype.bytesPerElement=20,$n(Qi,"StructArrayLayout3i3f20");class ki extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}ki.prototype.bytesPerElement=4,$n(ki,"StructArrayLayout1ul4");class ro extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P,k,j,$,G,Y){const re=this.length;return this.resize(re+1),this.emplace(re,e,r,a,h,m,_,w,P,k,j,$,G,Y)}emplace(e,r,a,h,m,_,w,P,k,j,$,G,Y,re){const pe=20*e,Ie=10*e;return this.int16[pe+0]=r,this.int16[pe+1]=a,this.int16[pe+2]=h,this.int16[pe+3]=m,this.int16[pe+4]=_,this.float32[Ie+3]=w,this.float32[Ie+4]=P,this.float32[Ie+5]=k,this.float32[Ie+6]=j,this.int16[pe+14]=$,this.uint32[Ie+8]=G,this.uint16[pe+18]=Y,this.uint16[pe+19]=re,e}}ro.prototype.bytesPerElement=40,$n(ro,"StructArrayLayout5i4f1i1ul2ui40");class Qo extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,a,h,m,_,w)}emplace(e,r,a,h,m,_,w,P){const k=8*e;return this.int16[k+0]=r,this.int16[k+1]=a,this.int16[k+2]=h,this.int16[k+4]=m,this.int16[k+5]=_,this.int16[k+6]=w,this.int16[k+7]=P,e}}Qo.prototype.bytesPerElement=16,$n(Qo,"StructArrayLayout3i2i2i16");class Ks extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,a,h,m)}emplace(e,r,a,h,m,_){const w=4*e,P=8*e;return this.float32[w+0]=r,this.float32[w+1]=a,this.float32[w+2]=h,this.int16[P+6]=m,this.int16[P+7]=_,e}}Ks.prototype.bytesPerElement=16,$n(Ks,"StructArrayLayout2f1f2i16");class Ji extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,h)}emplace(e,r,a,h,m){const _=12*e,w=3*e;return this.uint8[_+0]=r,this.uint8[_+1]=a,this.float32[w+1]=h,this.float32[w+2]=m,e}}Ji.prototype.bytesPerElement=12,$n(Ji,"StructArrayLayout2ub2f12");class Gi extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,a)}emplace(e,r,a,h){const m=3*e;return this.float32[m+0]=r,this.float32[m+1]=a,this.float32[m+2]=h,e}}Gi.prototype.bytesPerElement=12,$n(Gi,"StructArrayLayout3f12");class jr extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,a)}emplace(e,r,a,h){const m=3*e;return this.uint16[m+0]=r,this.uint16[m+1]=a,this.uint16[m+2]=h,e}}jr.prototype.bytesPerElement=6,$n(jr,"StructArrayLayout3ui6");class Ho extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt){const nt=this.length;return this.resize(nt+1),this.emplace(nt,e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt)}emplace(e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt,nt){const Gt=30*e,Ht=15*e,un=60*e;return this.int16[Gt+0]=r,this.int16[Gt+1]=a,this.int16[Gt+2]=h,this.float32[Ht+2]=m,this.float32[Ht+3]=_,this.uint16[Gt+8]=w,this.uint16[Gt+9]=P,this.uint32[Ht+5]=k,this.uint32[Ht+6]=j,this.uint32[Ht+7]=$,this.uint16[Gt+16]=G,this.uint16[Gt+17]=Y,this.uint16[Gt+18]=re,this.float32[Ht+10]=pe,this.float32[Ht+11]=Ie,this.uint8[un+48]=Ue,this.uint8[un+49]=et,this.uint8[un+50]=$e,this.uint32[Ht+13]=Qe,this.int16[Gt+28]=pt,this.uint8[un+58]=nt,e}}Ho.prototype.bytesPerElement=60,$n(Ho,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class So extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt,nt,Gt,Ht,un,Pn,Yt,pn,vn,gn){const Mn=this.length;return this.resize(Mn+1),this.emplace(Mn,e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt,nt,Gt,Ht,un,Pn,Yt,pn,vn,gn)}emplace(e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie,Ue,et,$e,Qe,pt,nt,Gt,Ht,un,Pn,Yt,pn,vn,gn,Mn){const bn=38*e,Wn=19*e;return this.int16[bn+0]=r,this.int16[bn+1]=a,this.int16[bn+2]=h,this.float32[Wn+2]=m,this.float32[Wn+3]=_,this.int16[bn+8]=w,this.int16[bn+9]=P,this.int16[bn+10]=k,this.int16[bn+11]=j,this.int16[bn+12]=$,this.int16[bn+13]=G,this.uint16[bn+14]=Y,this.uint16[bn+15]=re,this.uint16[bn+16]=pe,this.uint16[bn+17]=Ie,this.uint16[bn+18]=Ue,this.uint16[bn+19]=et,this.uint16[bn+20]=$e,this.uint16[bn+21]=Qe,this.uint16[bn+22]=pt,this.uint16[bn+23]=nt,this.uint16[bn+24]=Gt,this.uint16[bn+25]=Ht,this.uint16[bn+26]=un,this.uint16[bn+27]=Pn,this.uint16[bn+28]=Yt,this.uint32[Wn+15]=pn,this.float32[Wn+16]=vn,this.float32[Wn+17]=gn,this.float32[Wn+18]=Mn,e}}So.prototype.bytesPerElement=76,$n(So,"StructArrayLayout3i2f6i15ui1ul3f76");class Ni extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Ni.prototype.bytesPerElement=4,$n(Ni,"StructArrayLayout1f4");class $o extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,a,h,m)}emplace(e,r,a,h,m,_){const w=5*e;return this.float32[w+0]=r,this.float32[w+1]=a,this.float32[w+2]=h,this.float32[w+3]=m,this.float32[w+4]=_,e}}$o.prototype.bytesPerElement=20,$n($o,"StructArrayLayout5f20");class Io extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,h)}emplace(e,r,a,h,m){const _=6*e;return this.uint32[3*e+0]=r,this.uint16[_+2]=a,this.uint16[_+3]=h,this.uint16[_+4]=m,e}}Io.prototype.bytesPerElement=12,$n(Io,"StructArrayLayout1ul3ui12");class ds extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const h=2*e;return this.uint16[h+0]=r,this.uint16[h+1]=a,e}}ds.prototype.bytesPerElement=4,$n(ds,"StructArrayLayout2ui4");class ca extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}ca.prototype.bytesPerElement=2,$n(ca,"StructArrayLayout1ui2");class Kc extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const h=2*e;return this.float32[h+0]=r,this.float32[h+1]=a,e}}Kc.prototype.bytesPerElement=8,$n(Kc,"StructArrayLayout2f8");class ja extends qt{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}ja.prototype.size=12;class vs extends Xr{get(e){return new ja(this,e)}}$n(vs,"FillExtrusionExtArray");class Va extends qt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Va.prototype.size=40;class Ml extends ro{get(e){return new Va(this,e)}}$n(Ml,"CollisionBoxArray");class Ou extends qt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Ou.prototype.size=60;class Qu extends Ho{get(e){return new Ou(this,e)}}$n(Qu,"PlacedSymbolArray");class kh extends qt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}kh.prototype.size=76;class Yc extends So{get(e){return new kh(this,e)}}$n(Yc,"SymbolInstanceArray");class gd extends Ni{getoffsetX(e){return this.float32[1*e+0]}}$n(gd,"GlyphOffsetArray");class ff extends Qn{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}$n(ff,"SymbolLineVertexArray");class Gd extends qt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Gd.prototype.size=12;class Ys extends Io{get(e){return new Gd(this,e)}}$n(Ys,"FeatureIndexArray");class Rh extends qt{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Rh.prototype.size=4;class Al extends ds{get(e){return new Rh(this,e)}}$n(Al,"FillExtrusionCentroidArray");class Cc extends qt{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Cc.prototype.size=12;class _d extends Xr{get(e){return new Cc(this,e)}}$n(_d,"CircleGlobeExtArray");const pf=hn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Np=hn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Lh=ge(function(i){i.exports=function(e,r){var a,h,m,_,w,P,k,j;for(h=e.length-(a=3&e.length),m=r,w=3432918353,P=461845907,j=0;j<h;)k=255&e.charCodeAt(j)|(255&e.charCodeAt(++j))<<8|(255&e.charCodeAt(++j))<<16|(255&e.charCodeAt(++j))<<24,++j,m=27492+(65535&(_=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*w+(((k>>>16)*w&65535)<<16)&4294967295)<<15|k>>>17))*P+(((k>>>16)*P&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,a){case 3:k^=(255&e.charCodeAt(j+2))<<16;case 2:k^=(255&e.charCodeAt(j+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&e.charCodeAt(j)))*w+(((k>>>16)*w&65535)<<16)&4294967295)<<15|k>>>17))*P+(((k>>>16)*P&65535)<<16)&4294967295}return m^=e.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),mf=ge(function(i){i.exports=function(e,r){for(var a,h=e.length,m=r^h,_=0;h>=4;)a=1540483477*(65535&(a=255&e.charCodeAt(_)|(255&e.charCodeAt(++_))<<8|(255&e.charCodeAt(++_))<<16|(255&e.charCodeAt(++_))<<24))+((1540483477*(a>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:m^=(255&e.charCodeAt(_+2))<<16;case 2:m^=(255&e.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&e.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),Ju=Lh,Wd=mf;Ju.murmur3=Lh,Ju.murmur2=Wd;class eh{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,a,h){this.ids.push(Fh(e)),this.positions.push(r,a,h)}getPositions(e){const r=Fh(e);let a=0,h=this.ids.length-1;for(;a<h;){const _=a+h>>1;this.ids[_]>=r?h=_:a=_+1}const m=[];for(;this.ids[a]===r;)m.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return m}static serialize(e,r){const a=new Float64Array(e.ids),h=new Uint32Array(e.positions);return yd(a,h,0,a.length-1),r&&r.push(a.buffer,h.buffer),{ids:a,positions:h}}static deserialize(e){const r=new eh;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function Fh(i){const e=+i;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ju(String(i))}function yd(i,e,r,a){for(;r<a;){const h=i[r+a>>1];let m=r-1,_=a+1;for(;;){do{m++}while(i[m]<h);do{_--}while(i[_]>h);if(m>=_)break;th(i,m,_),th(e,3*m,3*_),th(e,3*m+1,3*_+1),th(e,3*m+2,3*_+2)}_-r<a-_?(yd(i,e,r,_),r=_+1):(yd(i,e,_+1,a),a=_)}}function th(i,e,r){const a=i[e];i[e]=i[r],i[r]=a}$n(eh,"FeaturePositionMap");class Tc{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Qc extends Tc{constructor(e){super(e),this.current=0}set(e,r,a){this.fetchUniformLocation(e,r)&&this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class nc extends Tc{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,a){this.fetchUniformLocation(e,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3])))}}class Dc extends Tc{constructor(e){super(e),this.current=Mt.transparent}set(e,r,a){this.fetchUniformLocation(e,r)&&(a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a)))}}const rc=new Float32Array(16),_r=new Float32Array(9),vd=new Float32Array(4);function bd(i){return[rn(255*i.r,255*i.g),rn(255*i.b,255*i.a)]}class Jc{constructor(e,r,a){this.value=e,this.uniformNames=r.map(h=>`u_${h}`),this.type=a}setUniform(e,r,a,h,m){r.set(e,m,h.constantOr(this.value))}getBinding(e,r){return"color"===this.type?new Dc(e):new Qc(e)}}class ku{constructor(e,r){this.uniformNames=r.map(a=>`u_${a}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=r.tl.concat(r.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,r,a,h,m){const _="u_pattern_to"===m||"u_dash_to"===m?this.patternTo:"u_pattern_from"===m||"u_dash_from"===m?this.patternFrom:"u_pixel_ratio_to"===m?this.pixelRatioTo:"u_pixel_ratio_from"===m?this.pixelRatioFrom:null;_&&r.set(e,m,_)}getBinding(e,r){return"u_pattern_from"===r||"u_pattern_to"===r||"u_dash_from"===r||"u_dash_to"===r?new nc(e):new Qc(e)}}class Rt{constructor(e,r,a,h){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=r.map(m=>({name:`a_${m}`,type:"Float32",components:"color"===a?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,r,a,h,m,_){const w=this.paintVertexArray.length,P=this.expression.evaluate(new De(0),r,{},m,h,_);this.paintVertexArray.resize(e),this._setPaintValue(w,e,P)}updatePaintArray(e,r,a,h,m){const _=this.expression.evaluate({zoom:0},a,h,void 0,m);this._setPaintValue(e,r,_)}_setPaintValue(e,r,a){if("color"===this.type){const h=bd(a);for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=e;h<r;h++)this.paintVertexArray.emplace(h,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pl{constructor(e,r,a,h,m,_){this.expression=e,this.uniformNames=r.map(w=>`u_${w}_t`),this.type=a,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=r.map(w=>({name:`a_${w}`,type:"Float32",components:"color"===a?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(e,r,a,h,m,_){const w=this.expression.evaluate(new De(this.zoom),r,{},m,h,_),P=this.expression.evaluate(new De(this.zoom+1),r,{},m,h,_),k=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(k,e,w,P)}updatePaintArray(e,r,a,h,m){const _=this.expression.evaluate({zoom:this.zoom},a,h,void 0,m),w=this.expression.evaluate({zoom:this.zoom+1},a,h,void 0,m);this._setPaintValue(e,r,_,w)}_setPaintValue(e,r,a,h){if("color"===this.type){const m=bd(a),_=bd(h);for(let w=e;w<r;w++)this.paintVertexArray.emplace(w,m[0],m[1],_[0],_[1])}else{for(let m=e;m<r;m++)this.paintVertexArray.emplace(m,a,h);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,a,h,m){const _=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,w=Je(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);r.set(e,m,w)}getBinding(e,r){return new Qc(e)}}class ua{constructor(e,r,a,h,m,_,w){this.expression=e,this.type=a,this.useIntegerZoom=h,this.zoom=m,this.layerId=w,this.paintVertexAttributes=("array"===a?Np:pf).members;for(let P=0;P<r.length;++P);this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,r,a){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,r.patterns&&r.patterns[this.layerId],a)}updatePaintArray(e,r,a,h,m,_){this._setPaintValues(e,r,a.patterns&&a.patterns[this.layerId],_)}_setPaintValues(e,r,a,h){if(!h||!a)return;const{min:m,mid:_,max:w}=a,P=h[m],k=h[_],j=h[w];if(P&&k&&j)for(let $=e;$<r;$++)this._setPaintValue(this.zoomInPaintVertexArray,$,k,P),this._setPaintValue(this.zoomOutPaintVertexArray,$,k,j)}_setPaintValue(e,r,a,h){e.emplace(r,a.tl[0],a.tl[1],a.br[0],a.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],a.pixelRatio,h.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Tn{constructor(e,r,a=(()=>!0)){this.binders={},this._buffers=[];const h=[];for(const m in e.paint._values){if(!a(m))continue;const _=e.paint.get(m);if(!(_ instanceof Ke&&Uo(_.property.specification)))continue;const w=_f(m,e.type),P=_.value,k=_.property.specification.type,j=_.property.useIntegerZoom,$=_.property.specification["property-type"],G="cross-faded"===$||"cross-faded-data-driven"===$,Y="line-dasharray"===String(m)&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==P.kind||Y)if("source"===P.kind||Y||G){const re=Nh(m,k,"source");this.binders[m]=G?new ua(P,w,k,j,r,re,e.id):new Rt(P,w,k,re),h.push(`/a_${m}`)}else{const re=Nh(m,k,"composite");this.binders[m]=new Pl(P,w,k,j,r,re),h.push(`/z_${m}`)}else this.binders[m]=G?new ku(P.value,w):new Jc(P.value,w,k),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Rt||r instanceof Pl?r.maxValue:0}populatePaintArrays(e,r,a,h,m,_){for(const w in this.binders){const P=this.binders[w];(P instanceof Rt||P instanceof Pl||P instanceof ua)&&P.populatePaintArray(e,r,a,h,m,_)}}setConstantPatternPositions(e,r){for(const a in this.binders){const h=this.binders[a];h instanceof ku&&h.setConstantPatternPositions(e,r)}}updatePaintArrays(e,r,a,h,m,_){let w=!1;for(const P in e){const k=r.getPositions(P);for(const j of k){const $=a.feature(j.index);for(const G in this.binders){const Y=this.binders[G];if((Y instanceof Rt||Y instanceof Pl||Y instanceof ua)&&!0===Y.expression.isStateDependent){const re=h.paint.get(G);Y.expression=re.value,Y.updatePaintArray(j.start,j.end,$,e[P],m,_),w=!0}}}}return w}defines(){const e=[];for(const r in this.binders){const a=this.binders[r];(a instanceof Jc||a instanceof ku)&&e.push(...a.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof Rt||a instanceof Pl||a instanceof ua)for(let h=0;h<a.paintVertexAttributes.length;h++)e.push(a.paintVertexAttributes[h].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof Jc||a instanceof ku||a instanceof Pl)for(const h of a.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Jc||h instanceof ku||h instanceof Pl)for(const m of h.uniformNames)r.push({name:m,property:a,binding:h.getBinding(e,m)})}return r}setUniforms(e,r,a,h,m){for(const{name:_,property:w,binding:P}of a)this.binders[w].setUniform(e,P,m,h.get(w),_)}updatePaintBuffers(e){this._buffers=[];for(const r in this.binders){const a=this.binders[r];if(e&&a instanceof ua){const h=2===e.fromScale?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(a instanceof Rt||a instanceof Pl)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(e){for(const r in this.binders){const a=this.binders[r];(a instanceof Rt||a instanceof Pl||a instanceof ua)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Rt||r instanceof Pl||r instanceof ua)&&r.destroy()}}}class ic{constructor(e,r,a=(()=>!0)){this.programConfigurations={};for(const h of e)this.programConfigurations[h.id]=new Tn(h,r,a);this.needsUpload=!1,this._featureMap=new eh,this._bufferOffset=0}populatePaintArrays(e,r,a,h,m,_,w){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(e,r,h,m,_,w);void 0!==r.id&&this._featureMap.add(r.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,a,h,m){for(const _ of a)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,r,_,h,m)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const gf={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function _f(i,e){return gf[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}const yf={"line-pattern":{source:rr,composite:rr},"fill-pattern":{source:rr,composite:rr},"fill-extrusion-pattern":{source:rr,composite:rr},"line-dasharray":{source:Ir,composite:Ir}},Sc={color:{source:Kc,composite:qr},number:{source:Ni,composite:Kc}};function Nh(i,e,r){const a=yf[i];return a&&a[r]||Sc[e][r]}$n(Jc,"ConstantBinder"),$n(ku,"CrossFadedConstantBinder"),$n(Rt,"SourceExpressionBinder"),$n(ua,"CrossFadedCompositeBinder"),$n(Pl,"CompositeExpressionBinder"),$n(Tn,"ProgramConfiguration",{omit:["_buffers"]}),$n(ic,"ProgramConfigurationSet");const Ol="-transition";class Ua extends qn{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new ot(r.layout)),r.paint)){this._transitionablePaint=new Ve(r.paint);for(const a in e.paint)this.setPaintProperty(a,e.paint[a],{validate:!1});for(const a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,a={}){null!=r&&this._validate(wc,`layers.${this.id}.layout.${e}`,e,r,a)||("visibility"!==e?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return Xt(e,Ol)?this._transitionablePaint.getTransition(e.slice(0,-Ol.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,a={}){if(null!=r&&this._validate(Su,`layers.${this.id}.paint.${e}`,e,r,a))return!1;if(Xt(e,Ol))return this._transitionablePaint.setTransition(e.slice(0,-Ol.length),r||void 0),!1;{const h=this._transitionablePaint._values[e],m="cross-faded-data-driven"===h.property.specification["property-type"],_=h.value.isDataDriven(),w=h.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const P=this._transitionablePaint._values[e].value;return P.isDataDriven()||_||m||this._handleOverridablePaintPropertyUpdate(e,w,P)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),cn(e,(r,a)=>!(void 0===r||"layout"===a&&!Object.keys(r).length||"paint"===a&&!Object.keys(r).length))}_validate(e,r,a,h,m={}){return(!m||!1!==m.validate)&&Sl(this,e.call(Du,{key:r,layerType:this.type,objectKey:a,value:h,styleSpec:ut,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof Ke&&Uo(r.property.specification)&&("source"===r.value.kind||"composite"===r.value.kind)&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=yc(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Zd=hn([{name:"a_pos",components:2,type:"Int16"}],4),nh=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class vo{constructor(e=[]){this.segments=e}prepareSegment(e,r,a,h){let m=this.segments[this.segments.length-1];return e>vo.MAX_VERTEX_ARRAY_LENGTH&&Jn(`Max vertices per segment is ${vo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!m||m.vertexLength+e>vo.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:r.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},void 0!==h&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,a,h){return new vo([{vertexOffset:e,primitiveOffset:r,vertexLength:a,primitiveLength:h,vaos:{},sortKey:0}])}}vo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$n(vo,"SegmentVector");var wr=8192;class eu{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof li?new li(e.lng,e.lat):li.convert(e),this}setSouthWest(e){return this._sw=e instanceof li?new li(e.lng,e.lat):li.convert(e),this}extend(e){const r=this._sw,a=this._ne;let h,m;if(e instanceof li)h=e,m=e;else{if(!(e instanceof eu))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(eu.convert(e)):this.extend(li.convert(e)):this;if(h=e._sw,m=e._ne,!h||!m)return this}return r||a?(r.lng=Math.min(h.lng,r.lng),r.lat=Math.min(h.lat,r.lat),a.lng=Math.max(m.lng,a.lng),a.lat=Math.max(m.lat,a.lat)):(this._sw=new li(h.lng,h.lat),this._ne=new li(m.lng,m.lat)),this}getCenter(){return new li((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new li(this.getWest(),this.getNorth())}getSouthEast(){return new li(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:a}=li.convert(e);let h=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&h}static convert(e){return!e||e instanceof eu?e:new eu(e)}}const Fo=6371008.8;class li{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new li(yt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,a=this.lat*r,h=e.lat*r,m=Math.sin(a)*Math.sin(h)+Math.cos(a)*Math.cos(h)*Math.cos((e.lng-this.lng)*r);return Fo*Math.acos(Math.min(m,1))}toBounds(e=0){const r=360*e/40075017,a=r/Math.cos(Math.PI/180*this.lat);return new eu(new li(this.lng-a,this.lat-r),new li(this.lng+a,this.lat+r))}static convert(e){if(e instanceof li)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new li(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new li(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xd=2*Math.PI*Fo;function rh(i){return xd*Math.cos(i*Math.PI/180)}function ha(i){return(180+i)/360}function qo(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Cs(i,e){return i/rh(e)}function bo(i){return 360*i-180}function Ri(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function Bh(i,e){return i*rh(Ri(e))}const da=85.051129;function Ha(i){return 1/Math.cos(i*Math.PI/180)}class Xo{constructor(e,r,a=0){this.x=+e,this.y=+r,this.z=+a}static fromLngLat(e,r=0){const a=li.convert(e);return new Xo(ha(a.lng),qo(a.lat),Cs(r,a.lat))}toLngLat(){return new li(bo(this.x),Ri(this.y))}toAltitude(){return Bh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xd*Ha(Ri(this.y))}}function Ko(i,e,r,a,h,m,_,w,P){const k=(e+a)/2,j=(r+h)/2,$=new se(k,j);w($),function(G,Y,re,pe,Ie,Ue){const et=re-Ie,$e=pe-Ue;return Math.abs((pe-Y)*et-(re-G)*$e)/Math.hypot(et,$e)}($.x,$.y,m.x,m.y,_.x,_.y)>=P?(Ko(i,e,r,k,j,m,$,w,P),Ko(i,k,j,a,h,$,_,w,P)):i.push(_)}function fa(i,e,r){let a=i[0],h=a.x,m=a.y;e(a);const _=[a];for(let w=1;w<i.length;w++){const P=i[w],{x:k,y:j}=P;e(P),Ko(_,h,m,k,j,a,P,e,r),h=k,m=j,a=P}return _}function zh(i,e,r,a,h){if(h(e,r)){const m=e.add(r).mult(.5);a(m),zh(i,e,m,a,h),zh(i,m,r,a,h)}else i.push(r)}function Ru(i,e,r){let a=i[0];e(a);const h=[a];for(let m=1;m<i.length;m++){const _=i[m];e(_),zh(h,a,_,e,r),a=_}return h}const rs=Math.pow(2,14)-1,Lu=-rs-1;function vf(i,e){const r=Math.round(i.x*e),a=Math.round(i.y*e);return i.x=Je(r,Lu,rs),i.y=Je(a,Lu,rs),(r<i.x||r>i.x+1||a<i.y||a>i.y+1)&&Jn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function cl(i,e,r){const a=i.loadGeometry(),h=i.extent,m=wr/h;if(e&&r&&r.projection.isReprojectedInTileSpace){const _=1<<e.z,{scale:w,x:P,y:k,projection:j}=r,$=G=>{const Y=bo((e.x+G.x/h)/_),re=Ri((e.y+G.y/h)/_),pe=j.project(Y,re);G.x=(pe.x*w-P)*h,G.y=(pe.y*w-k)*h};for(let G=0;G<a.length;G++)if(1!==i.type)a[G]=fa(a[G],$,1);else{const Y=[];for(const re of a[G])re.x<0||re.x>=h||re.y<0||re.y>=h||($(re),Y.push(re));a[G]=Y}}for(const _ of a)for(const w of _)vf(w,m);return a}function oc(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?cl(i):[]}}function tu(i,e,r,a,h){i.emplaceBack(2*e+(a+1)/2,2*r+(h+1)/2)}function jh(i,e,r){const a=16384;i.emplaceBack(e.x,e.y,e.z,r[0]*a,r[1]*a,r[2]*a)}class Vh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Rn,this.indexArray=new jr,this.segments=new vo,this.programConfigurations=new ic(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,h){const m=this.layers[0],_=[];let w=null;"circle"===m.type&&(w=m.layout.get("circle-sort-key"));for(const{feature:k,id:j,index:$,sourceLayerIndex:G}of e){const Y=this.layers[0]._featureFilter.needGeometry,re=oc(k,Y);if(!this.layers[0]._featureFilter.filter(new De(this.zoom),re,a))continue;const pe=w?w.evaluate(re,{},a):void 0,Ie={id:j,properties:k.properties,type:k.type,sourceLayerIndex:G,index:$,geometry:Y?re.geometry:cl(k,a,h),patterns:{},sortKey:pe};_.push(Ie)}w&&_.sort((k,j)=>k.sortKey-j.sortKey);let P=null;"globe"===h.projection.name&&(this.globeExtVertexArray=new _d,P=h.projection);for(const k of _){const{geometry:j,index:$,sourceLayerIndex:G}=k,Y=e[$].feature;this.addFeature(k,j,$,r.availableImages,a,P),r.featureIndex.insert(Y,j,$,G,this.index)}}update(e,r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zd.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,nh.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,a,h,m,_){for(const w of r)for(const P of w){const k=P.x,j=P.y;if(k<0||k>=wr||j<0||j>=wr)continue;if(_){const Y=_.projectTilePoint(k,j,m),re=_.upVector(m,k,j),pe=this.globeExtVertexArray;jh(pe,Y,re),jh(pe,Y,re),jh(pe,Y,re),jh(pe,Y,re)}const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),G=$.vertexLength;tu(this.layoutVertexArray,k,j,-1,-1),tu(this.layoutVertexArray,k,j,1,-1),tu(this.layoutVertexArray,k,j,1,1),tu(this.layoutVertexArray,k,j,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+2,G+3),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},h,m)}}function wd(i,e){for(let r=0;r<i.length;r++)if(oh(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(oh(i,e[r]))return!0;return!!nu(i,e)}function qd(i,e,r){return!!oh(i,e)||!!Uh(e,i,r)}function ih(i,e){if(1===i.length)return Hh(e,i[0]);for(let r=0;r<e.length;r++){const a=e[r];for(let h=0;h<a.length;h++)if(oh(i,a[h]))return!0}for(let r=0;r<i.length;r++)if(Hh(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(nu(i,e[r]))return!0;return!1}function Ed(i,e,r){if(i.length>1){if(nu(i,e))return!0;for(let a=0;a<e.length;a++)if(Uh(e[a],i,r))return!0}for(let a=0;a<i.length;a++)if(Uh(i[a],e,r))return!0;return!1}function nu(i,e){if(0===i.length||0===e.length)return!1;for(let r=0;r<i.length-1;r++){const a=i[r],h=i[r+1];for(let m=0;m<e.length-1;m++)if(bf(a,h,e[m],e[m+1]))return!0}return!1}function bf(i,e,r,a){return fr(i,r,a)!==fr(e,r,a)&&fr(i,e,r)!==fr(i,e,a)}function Uh(i,e,r){const a=r*r;if(1===e.length)return i.distSqr(e[0])<a;for(let h=1;h<e.length;h++)if(Fu(i,e[h-1],e[h])<a)return!0;return!1}function Fu(i,e,r){const a=e.distSqr(r);if(0===a)return i.distSqr(e);const h=((i.x-e.x)*(r.x-e.x)+(i.y-e.y)*(r.y-e.y))/a;return i.distSqr(h<0?e:h>1?r:r.sub(e)._mult(h)._add(e))}function Hh(i,e){let r,a,h,m=!1;for(let _=0;_<i.length;_++){r=i[_];for(let w=0,P=r.length-1;w<r.length;P=w++)a=r[w],h=r[P],a.y>e.y!=h.y>e.y&&e.x<(h.x-a.x)*(e.y-a.y)/(h.y-a.y)+a.x&&(m=!m)}return m}function oh(i,e){let r=!1;for(let a=0,h=i.length-1;a<i.length;h=a++){const m=i[a],_=i[h];m.y>e.y!=_.y>e.y&&e.x<(_.x-m.x)*(e.y-m.y)/(_.y-m.y)+m.x&&(r=!r)}return r}function Xd(i,e,r,a,h){for(const _ of i)if(e<=_.x&&r<=_.y&&a>=_.x&&h>=_.y)return!0;const m=[new se(e,r),new se(e,h),new se(a,h),new se(a,r)];if(i.length>2)for(const _ of m)if(oh(i,_))return!0;for(let _=0;_<i.length-1;_++)if(sh(i[_],i[_+1],m))return!0;return!1}function sh(i,e,r){const a=r[0],h=r[2];if(i.x<a.x&&e.x<a.x||i.x>h.x&&e.x>h.x||i.y<a.y&&e.y<a.y||i.y>h.y&&e.y>h.y)return!1;const m=fr(i,e,r[0]);return m!==fr(i,e,r[1])||m!==fr(i,e,r[2])||m!==fr(i,e,r[3])}function ah(i,e,r){const a=e.paint.get(i).value;return"constant"===a.kind?a.value:r.programConfigurations.get(e.id).getMaxValue(i)}function $h(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function ru(i,e,r,a,h){if(!e[0]&&!e[1])return i;const m=se.convert(e)._mult(h);"viewport"===r&&m._rotate(-a);const _=[];for(let w=0;w<i.length;w++)_.push(i[w].sub(m));return _}function iu(i,e,r,a){const h=se.convert(i)._mult(a);return"viewport"===e&&h._rotate(-r),h}$n(Vh,"CircleBucket",{omit:["layers"]});const xf=new sn({"circle-sort-key":new gt(ut.layout_circle["circle-sort-key"])});var $a={paint:new sn({"circle-radius":new gt(ut.paint_circle["circle-radius"]),"circle-color":new gt(ut.paint_circle["circle-color"]),"circle-blur":new gt(ut.paint_circle["circle-blur"]),"circle-opacity":new gt(ut.paint_circle["circle-opacity"]),"circle-translate":new tt(ut.paint_circle["circle-translate"]),"circle-translate-anchor":new tt(ut.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tt(ut.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tt(ut.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gt(ut.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gt(ut.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gt(ut.paint_circle["circle-stroke-opacity"])}),layout:xf},Cd=1e-6,Qs="undefined"!=typeof Float32Array?Float32Array:Array;function Nu(){var i=new Qs(9);return Qs!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function No(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Gh(i,e){var r=e[0],a=e[1],h=e[2],m=e[3],_=e[4],w=e[5],P=e[6],k=e[7],j=e[8],$=e[9],G=e[10],Y=e[11],re=e[12],pe=e[13],Ie=e[14],Ue=e[15],et=r*w-a*_,$e=r*P-h*_,Qe=r*k-m*_,pt=a*P-h*w,nt=a*k-m*w,Gt=h*k-m*P,Ht=j*pe-$*re,un=j*Ie-G*re,Pn=j*Ue-Y*re,Yt=$*Ie-G*pe,pn=$*Ue-Y*pe,vn=G*Ue-Y*Ie,gn=et*vn-$e*pn+Qe*Yt+pt*Pn-nt*un+Gt*Ht;return gn?(i[0]=(w*vn-P*pn+k*Yt)*(gn=1/gn),i[1]=(h*pn-a*vn-m*Yt)*gn,i[2]=(pe*Gt-Ie*nt+Ue*pt)*gn,i[3]=(G*nt-$*Gt-Y*pt)*gn,i[4]=(P*Pn-_*vn-k*un)*gn,i[5]=(r*vn-h*Pn+m*un)*gn,i[6]=(Ie*Qe-re*Gt-Ue*$e)*gn,i[7]=(j*Gt-G*Qe+Y*$e)*gn,i[8]=(_*pn-w*Pn+k*Ht)*gn,i[9]=(a*Pn-r*pn-m*Ht)*gn,i[10]=(re*nt-pe*Qe+Ue*et)*gn,i[11]=($*Qe-j*nt-Y*et)*gn,i[12]=(w*un-_*Yt-P*Ht)*gn,i[13]=(r*Yt-a*un+h*Ht)*gn,i[14]=(pe*$e-re*pt-Ie*et)*gn,i[15]=(j*pt-$*$e+G*et)*gn,i):null}function ou(i,e,r){var a=e[0],h=e[1],m=e[2],_=e[3],w=e[4],P=e[5],k=e[6],j=e[7],$=e[8],G=e[9],Y=e[10],re=e[11],pe=e[12],Ie=e[13],Ue=e[14],et=e[15],$e=r[0],Qe=r[1],pt=r[2],nt=r[3];return i[0]=$e*a+Qe*w+pt*$+nt*pe,i[1]=$e*h+Qe*P+pt*G+nt*Ie,i[2]=$e*m+Qe*k+pt*Y+nt*Ue,i[3]=$e*_+Qe*j+pt*re+nt*et,i[4]=($e=r[4])*a+(Qe=r[5])*w+(pt=r[6])*$+(nt=r[7])*pe,i[5]=$e*h+Qe*P+pt*G+nt*Ie,i[6]=$e*m+Qe*k+pt*Y+nt*Ue,i[7]=$e*_+Qe*j+pt*re+nt*et,i[8]=($e=r[8])*a+(Qe=r[9])*w+(pt=r[10])*$+(nt=r[11])*pe,i[9]=$e*h+Qe*P+pt*G+nt*Ie,i[10]=$e*m+Qe*k+pt*Y+nt*Ue,i[11]=$e*_+Qe*j+pt*re+nt*et,i[12]=($e=r[12])*a+(Qe=r[13])*w+(pt=r[14])*$+(nt=r[15])*pe,i[13]=$e*h+Qe*P+pt*G+nt*Ie,i[14]=$e*m+Qe*k+pt*Y+nt*Ue,i[15]=$e*_+Qe*j+pt*re+nt*et,i}function T(i,e,r){var a,h,m,_,w,P,k,j,$,G,Y,re,pe=r[0],Ie=r[1],Ue=r[2];return e===i?(i[12]=e[0]*pe+e[4]*Ie+e[8]*Ue+e[12],i[13]=e[1]*pe+e[5]*Ie+e[9]*Ue+e[13],i[14]=e[2]*pe+e[6]*Ie+e[10]*Ue+e[14],i[15]=e[3]*pe+e[7]*Ie+e[11]*Ue+e[15]):(h=e[1],m=e[2],_=e[3],w=e[4],P=e[5],k=e[6],j=e[7],$=e[8],G=e[9],Y=e[10],re=e[11],i[0]=a=e[0],i[1]=h,i[2]=m,i[3]=_,i[4]=w,i[5]=P,i[6]=k,i[7]=j,i[8]=$,i[9]=G,i[10]=Y,i[11]=re,i[12]=a*pe+w*Ie+$*Ue+e[12],i[13]=h*pe+P*Ie+G*Ue+e[13],i[14]=m*pe+k*Ie+Y*Ue+e[14],i[15]=_*pe+j*Ie+re*Ue+e[15]),i}function x(i,e,r){var a=r[0],h=r[1],m=r[2];return i[0]=e[0]*a,i[1]=e[1]*a,i[2]=e[2]*a,i[3]=e[3]*a,i[4]=e[4]*h,i[5]=e[5]*h,i[6]=e[6]*h,i[7]=e[7]*h,i[8]=e[8]*m,i[9]=e[9]*m,i[10]=e[10]*m,i[11]=e[11]*m,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function y(i,e,r){var a=Math.sin(r),h=Math.cos(r),m=e[4],_=e[5],w=e[6],P=e[7],k=e[8],j=e[9],$=e[10],G=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=m*h+k*a,i[5]=_*h+j*a,i[6]=w*h+$*a,i[7]=P*h+G*a,i[8]=k*h-m*a,i[9]=j*h-_*a,i[10]=$*h-w*a,i[11]=G*h-P*a,i}function R(i,e,r){var a=Math.sin(r),h=Math.cos(r),m=e[0],_=e[1],w=e[2],P=e[3],k=e[8],j=e[9],$=e[10],G=e[11];return e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=m*h-k*a,i[1]=_*h-j*a,i[2]=w*h-$*a,i[3]=P*h-G*a,i[8]=m*a+k*h,i[9]=_*a+j*h,i[10]=w*a+$*h,i[11]=P*a+G*h,i}function W(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function le(i,e,r){var a,h,m,_=r[0],w=r[1],P=r[2],k=Math.hypot(_,w,P);return k<Cd?null:(_*=k=1/k,w*=k,P*=k,a=Math.sin(e),h=Math.cos(e),i[0]=_*_*(m=1-h)+h,i[1]=w*_*m+P*a,i[2]=P*_*m-w*a,i[3]=0,i[4]=_*w*m-P*a,i[5]=w*w*m+h,i[6]=P*w*m+_*a,i[7]=0,i[8]=_*P*m+w*a,i[9]=w*P*m-_*a,i[10]=P*P*m+h,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var Ze=ou;function lt(){var i=new Qs(3);return Qs!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function nn(i){var e=new Qs(3);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}function cr(i){return Math.hypot(i[0],i[1],i[2])}function Ii(i,e,r){var a=new Qs(3);return a[0]=i,a[1]=e,a[2]=r,a}function Dr(i,e,r){return i[0]=e[0]+r[0],i[1]=e[1]+r[1],i[2]=e[2]+r[2],i}function Zi(i,e,r){return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],i}function $r(i,e,r){return i[0]=e[0]*r[0],i[1]=e[1]*r[1],i[2]=e[2]*r[2],i}function Ga(i,e,r){return i[0]=Math.min(e[0],r[0]),i[1]=Math.min(e[1],r[1]),i[2]=Math.min(e[2],r[2]),i}function Js(i,e,r){return i[0]=Math.max(e[0],r[0]),i[1]=Math.max(e[1],r[1]),i[2]=Math.max(e[2],r[2]),i}function is(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i}function kl(i,e,r,a){return i[0]=e[0]+r[0]*a,i[1]=e[1]+r[1]*a,i[2]=e[2]+r[2]*a,i}function io(i,e){var r=e[0],a=e[1],h=e[2],m=r*r+a*a+h*h;return m>0&&(m=1/Math.sqrt(m)),i[0]=e[0]*m,i[1]=e[1]*m,i[2]=e[2]*m,i}function Go(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function su(i,e,r){var a=e[0],h=e[1],m=e[2],_=r[0],w=r[1],P=r[2];return i[0]=h*P-m*w,i[1]=m*_-a*P,i[2]=a*w-h*_,i}function Jo(i,e,r){var a=e[0],h=e[1],m=e[2],_=r[3]*a+r[7]*h+r[11]*m+r[15];return i[0]=(r[0]*a+r[4]*h+r[8]*m+r[12])/(_=_||1),i[1]=(r[1]*a+r[5]*h+r[9]*m+r[13])/_,i[2]=(r[2]*a+r[6]*h+r[10]*m+r[14])/_,i}function wf(i,e,r){var a=r[0],h=r[1],m=r[2],_=e[0],w=e[1],P=e[2],k=h*P-m*w,j=m*_-a*P,$=a*w-h*_,G=h*$-m*j,Y=m*k-a*$,re=a*j-h*k,pe=2*r[3];return j*=pe,$*=pe,Y*=2,re*=2,i[0]=_+(k*=pe)+(G*=2),i[1]=w+j+Y,i[2]=P+$+re,i}var Wh,Ic=Zi,Zh=$r,Ef=cr;function Cf(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=e[3]*r,i}function qh(i,e,r){var a=e[0],h=e[1],m=e[2],_=e[3];return i[0]=r[0]*a+r[4]*h+r[8]*m+r[12]*_,i[1]=r[1]*a+r[5]*h+r[9]*m+r[13]*_,i[2]=r[2]*a+r[6]*h+r[10]*m+r[14]*_,i[3]=r[3]*a+r[7]*h+r[11]*m+r[15]*_,i}function Td(){var i=new Qs(4);return Qs!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function sc(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function Dd(i,e,r){r*=.5;var a=e[0],h=e[1],m=e[2],_=e[3],w=Math.sin(r),P=Math.cos(r);return i[0]=a*P+_*w,i[1]=h*P+m*w,i[2]=m*P-h*w,i[3]=_*P-a*w,i}function au(i,e,r){r*=.5;var a=e[0],h=e[1],m=e[2],_=e[3],w=Math.sin(r),P=Math.cos(r);return i[0]=a*P-m*w,i[1]=h*P+_*w,i[2]=m*P+a*w,i[3]=_*P-h*w,i}lt(),Wh=new Qs(4),Qs!=Float32Array&&(Wh[0]=0,Wh[1]=0,Wh[2]=0,Wh[3]=0),lt(),Ii(1,0,0),Ii(0,1,0),Td(),Td(),Nu();class pa{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,a){const h=Go(r,this.dir);if(Math.abs(h)<1e-6)return!1;const m=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/h;return a[0]=this.pos[0]+this.dir[0]*m,a[1]=this.pos[1]+this.dir[1]*m,a[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(e,r,a){if(pe=(Y=this.pos)[0],Ie=Y[1],Ue=Y[2],et=(re=e)[0],$e=re[1],Qe=re[2],Math.abs(pe-et)<=Cd*Math.max(1,Math.abs(pe),Math.abs(et))&&Math.abs(Ie-$e)<=Cd*Math.max(1,Math.abs(Ie),Math.abs($e))&&Math.abs(Ue-Qe)<=Cd*Math.max(1,Math.abs(Ue),Math.abs(Qe))||0===r)return a[0]=a[1]=a[2]=0,!1;var Y,re,pe,Ie,Ue,et,$e,Qe;const[h,m,_]=this.dir,w=this.pos[0]-e[0],P=this.pos[1]-e[1],k=this.pos[2]-e[2],j=h*h+m*m+_*_,$=2*(w*h+P*m+k*_),G=$*$-4*j*(w*w+P*P+k*k-r*r);if(G<0){const Y=Math.max(-$/2,0),re=w+h*Y,pe=P+m*Y,Ie=k+_*Y,Ue=Math.hypot(re,pe,Ie);return a[0]=re*r/Ue,a[1]=pe*r/Ue,a[2]=Ie*r/Ue,!1}{const Y=(-$-Math.sqrt(G))/(2*j);if(Y<0){const re=Math.hypot(w,P,k);return a[0]=w*r/re,a[1]=P*r/re,a[2]=k*r/re,!1}return a[0]=w+h*Y,a[1]=P+m*Y,a[2]=k+_*Y,!0}}}class Kd{constructor(e,r,a,h,m){this.TL=e,this.TR=r,this.BR=a,this.BL=h,this.horizon=m}static fromInvProjectionMatrix(e,r,a){const h=[-1,1,1],m=[1,1,1],_=[1,-1,1],w=[-1,-1,1],P=Jo(h,h,e),k=Jo(m,m,e),j=Jo(_,_,e),$=Jo(w,w,e);return new Kd(P,k,j,$,r/a)}}class Yd{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,a,h){const m=Math.pow(2,a),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const k=qh([],P,e),j=1/k[3]/r*m;return($=k)[0]=(G=k)[0]*(Y=[j,j,h?1/k[3]:j,j])[0],$[1]=G[1]*Y[1],$[2]=G[2]*Y[2],$[3]=G[3]*Y[3],$;var $,G,Y}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const k=io([],su([],Ic([],_[P[0]],_[P[1]]),Ic([],_[P[2]],_[P[1]]))),j=-Go(k,_[P[1]]);return k.concat(j)});return new Yd(_,w)}}class ma{static fromPoints(e){const r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],a=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const h of e)r[0]=Math.min(r[0],h[0]),r[1]=Math.min(r[1],h[1]),r[2]=Math.min(r[2],h[2]),a[0]=Math.max(a[0],h[0]),a[1]=Math.max(a[1],h[1]),a[2]=Math.max(a[2],h[2]);return new ma(r,a)}constructor(e,r){this.min=e,this.max=r,this.center=is([],Dr([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],a=nn(this.min),h=nn(this.max);for(let m=0;m<r.length;m++)a[m]=r[m]?this.min[m]:this.center[m],h[m]=r[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new ma(a,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let a=!0;for(let h=0;h<e.planes.length;h++){const m=e.planes[h];let _=0;for(let w=0;w<r.length;w++)_+=Go(m,r[w])+m[3]>=0;if(0===_)return 0;_!==r.length&&(a=!1)}if(a)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let w=0;w<e.points.length;w++){const P=e.points[w][h]-this.min[h];m=Math.min(m,P),_=Math.max(_,P)}if(_<0||m>this.max[h]-this.min[h])return 0}return 1}}function Tf(i,e,r,a,h,m,_,w,P){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(P*=i.pixelToTileUnitsFactor);const k=i.tileID.canonical,j=r.projection.upVectorScale(k,r.center.lat,r.worldSize).metersToTile;for(const $ of e)for(const G of $){const Y=G.add(w),re=h&&r.elevation?r.elevation.exaggeration()*h.getElevationAt(Y.x,Y.y,!0):0,pe=r.projection.projectTilePoint(Y.x,Y.y,k);if(re>0){const $e=r.projection.upVector(k,Y.x,Y.y);pe.x+=$e[0]*j*re,pe.y+=$e[1]*j*re,pe.z+=$e[2]*j*re}const Ie=m?Y:Bp(pe.x,pe.y,pe.z,a),Ue=m?i.tilespaceRays.map($e=>jp($e,re)):i.queryGeometry.screenGeometry,et=qh([],[pe.x,pe.y,pe.z,1],a);if(!_&&m?P*=et[3]/r.cameraToCenterDistance:_&&!m&&(P*=r.cameraToCenterDistance/et[3]),m){const $e=Ri((G.y/wr+k.y)/(1<<k.z));P/=r.projection.pixelsPerMeter($e,1)/Cs(1,$e)}if(qd(Ue,Ie,P))return!0}return!1}function Bp(i,e,r,a){const h=qh([],[i,e,r,1],a);return new se(h[0]/h[3],h[1]/h[3])}const Sd=Ii(0,0,0),zp=Ii(0,0,1);function jp(i,e){const r=lt();return Sd[2]=e,i.intersectsPlane(Sd,zp,r),new se(r[0],r[1])}class Qd extends Vh{}function Df(i,{width:e,height:r},a,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*r*a)throw new RangeError("mismatched image size")}else h=new Uint8Array(e*r*a);return i.width=e,i.height=r,i.data=h,i}function Ts(i,e,r){const{width:a,height:h}=e;a===i.width&&h===i.height||(Xh(i,e,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,a),height:Math.min(i.height,h)},r),i.width=a,i.height=h,i.data=e.data)}function Xh(i,e,r,a,h,m){if(0===h.width||0===h.height)return e;if(h.width>i.width||h.height>i.height||r.x>i.width-h.width||r.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||a.x>e.width-h.width||a.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const _=i.data,w=e.data;for(let P=0;P<h.height;P++){const k=((r.y+P)*i.width+r.x)*m,j=((a.y+P)*e.width+a.x)*m;for(let $=0;$<h.width*m;$++)w[j+$]=_[k+$]}return e}$n(Qd,"HeatmapBucket",{omit:["layers"]});class Wa{constructor(e,r){Df(this,e,1,r)}resize(e){Ts(this,new Wa(e),1)}clone(){return new Wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,h,m){Xh(e,r,a,h,m,1)}}class Ds{constructor(e,r){Df(this,e,4,r)}resize(e){Ts(this,new Ds(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ds({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,h,m){Xh(e,r,a,h,m,4)}}$n(Wa,"AlphaImage"),$n(Ds,"RGBAImage");var ul={paint:new sn({"heatmap-radius":new gt(ut.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gt(ut.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tt(ut.paint_heatmap["heatmap-intensity"]),"heatmap-color":new At(ut.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tt(ut.paint_heatmap["heatmap-opacity"])})};function ap(i){const e={},r=i.resolution||256,a=i.clips?i.clips.length:1,h=i.image||new Ds({width:r,height:a}),m=(_,w,P)=>{e[i.evaluationKey]=P;const k=i.expression.evaluate(e);h.data[_+w+0]=Math.floor(255*k.r/k.a),h.data[_+w+1]=Math.floor(255*k.g/k.a),h.data[_+w+2]=Math.floor(255*k.b/k.a),h.data[_+w+3]=Math.floor(255*k.a)};if(i.clips)for(let _=0,w=0;_<a;++_,w+=4*r)for(let P=0,k=0;P<r;P++,k+=4){const j=P/(r-1),{start:$,end:G}=i.clips[_];m(w,k,$*(1-j)+G*j)}else for(let _=0,w=0;_<r;_++,w+=4)m(0,w,_/(r-1));return h}var Vp={paint:new sn({"hillshade-illumination-direction":new tt(ut.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tt(ut.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tt(ut.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tt(ut.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tt(ut.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tt(ut.paint_hillshade["hillshade-accent-color"])})};const lp=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:cp}=lp;var Id=lh,up=lh;function lh(i,e,r){r=r||2;var a,h,m,_,w,P,k,j=e&&e.length,$=j?e[0]*r:i.length,G=Mc(i,0,$,r,!0),Y=[];if(!G||G.next===G.prev)return Y;if(j&&(G=function(pe,Ie,Ue,et){var $e,Qe,pt,nt=[];for($e=0,Qe=Ie.length;$e<Qe;$e++)(pt=Mc(pe,Ie[$e]*et,$e<Qe-1?Ie[$e+1]*et:pe.length,et,!1))===pt.next&&(pt.steiner=!0),nt.push(M(pt));for(nt.sort(Sf),$e=0;$e<nt.length;$e++)Ue=dp(nt[$e],Ue);return Ue}(i,e,G,r)),i.length>80*r){a=m=i[0],h=_=i[1];for(var re=r;re<$;re+=r)(w=i[re])<a&&(a=w),(P=i[re+1])<h&&(h=P),w>m&&(m=w),P>_&&(_=P);k=0!==(k=Math.max(m-a,_-h))?32767/k:0}return Fs(G,Y,r,a,h,k,0),Y}function Mc(i,e,r,a,h){var m,_;if(h===In(i,e,r,a)>0)for(m=e;m<r;m+=a)_=He(m,i[m],i[m+1],_);else for(m=r-a;m>=e;m-=a)_=He(m,i[m],i[m+1],_);return _&&C(_,_.next)&&(Ot(_),_=_.next),_}function fs(i,e){if(!i)return i;e||(e=i);var r,a=i;do{if(r=!1,a.steiner||!C(a,a.next)&&0!==N(a.prev,a,a.next))a=a.next;else{if(Ot(a),(a=e=a.prev)===a.next)break;r=!0}}while(r||a!==e);return e}function Fs(i,e,r,a,h,m,_){if(i){!_&&m&&function(j,$,G,Y){var re=j;do{0===re.z&&(re.z=Md(re.x,re.y,$,G,Y)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next}while(re!==j);re.prevZ.nextZ=null,re.prevZ=null,function(pe){var Ie,Ue,et,$e,Qe,pt,nt,Gt,Ht=1;do{for(Ue=pe,pe=null,Qe=null,pt=0;Ue;){for(pt++,et=Ue,nt=0,Ie=0;Ie<Ht&&(nt++,et=et.nextZ);Ie++);for(Gt=Ht;nt>0||Gt>0&&et;)0!==nt&&(0===Gt||!et||Ue.z<=et.z)?($e=Ue,Ue=Ue.nextZ,nt--):($e=et,et=et.nextZ,Gt--),Qe?Qe.nextZ=$e:pe=$e,$e.prevZ=Qe,Qe=$e;Ue=et}Qe.nextZ=null,Ht*=2}while(pt>1)}(re)}(i,a,h,m);for(var w,P,k=i;i.prev!==i.next;)if(w=i.prev,P=i.next,m?hp(i,a,h,m):Kh(i))e.push(w.i/r|0),e.push(i.i/r|0),e.push(P.i/r|0),Ot(i),i=P.next,k=P.next;else if((i=P)===k){_?1===_?Fs(i=Jd(fs(i),e,r),e,r,a,h,m,2):2===_&&Lm(i,e,r,a,h,m):Fs(fs(i),e,r,a,h,m,1);break}}}function Kh(i){var e=i.prev,r=i,a=i.next;if(N(e,r,a)>=0)return!1;for(var h=e.x,m=r.x,_=a.x,w=e.y,P=r.y,k=a.y,j=h<m?h<_?h:_:m<_?m:_,$=w<P?w<k?w:k:P<k?P:k,G=h>m?h>_?h:_:m>_?m:_,Y=w>P?w>k?w:k:P>k?P:k,re=a.next;re!==e;){if(re.x>=j&&re.x<=G&&re.y>=$&&re.y<=Y&&D(h,w,m,P,_,k,re.x,re.y)&&N(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function hp(i,e,r,a){var h=i.prev,m=i,_=i.next;if(N(h,m,_)>=0)return!1;for(var w=h.x,P=m.x,k=_.x,j=h.y,$=m.y,G=_.y,Y=w<P?w<k?w:k:P<k?P:k,re=j<$?j<G?j:G:$<G?$:G,pe=w>P?w>k?w:k:P>k?P:k,Ie=j>$?j>G?j:G:$>G?$:G,Ue=Md(Y,re,e,r,a),et=Md(pe,Ie,e,r,a),$e=i.prevZ,Qe=i.nextZ;$e&&$e.z>=Ue&&Qe&&Qe.z<=et;){if($e.x>=Y&&$e.x<=pe&&$e.y>=re&&$e.y<=Ie&&$e!==h&&$e!==_&&D(w,j,P,$,k,G,$e.x,$e.y)&&N($e.prev,$e,$e.next)>=0||($e=$e.prevZ,Qe.x>=Y&&Qe.x<=pe&&Qe.y>=re&&Qe.y<=Ie&&Qe!==h&&Qe!==_&&D(w,j,P,$,k,G,Qe.x,Qe.y)&&N(Qe.prev,Qe,Qe.next)>=0))return!1;Qe=Qe.nextZ}for(;$e&&$e.z>=Ue;){if($e.x>=Y&&$e.x<=pe&&$e.y>=re&&$e.y<=Ie&&$e!==h&&$e!==_&&D(w,j,P,$,k,G,$e.x,$e.y)&&N($e.prev,$e,$e.next)>=0)return!1;$e=$e.prevZ}for(;Qe&&Qe.z<=et;){if(Qe.x>=Y&&Qe.x<=pe&&Qe.y>=re&&Qe.y<=Ie&&Qe!==h&&Qe!==_&&D(w,j,P,$,k,G,Qe.x,Qe.y)&&N(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.nextZ}return!0}function Jd(i,e,r){var a=i;do{var h=a.prev,m=a.next.next;!C(h,m)&&S(h,a,a.next,m)&&Ee(h,m)&&Ee(m,h)&&(e.push(h.i/r|0),e.push(a.i/r|0),e.push(m.i/r|0),Ot(a),Ot(a.next),a=i=m),a=a.next}while(a!==i);return fs(a)}function Lm(i,e,r,a,h,m){var _=i;do{for(var w=_.next.next;w!==_.prev;){if(_.i!==w.i&&L(_,w)){var P=Te(_,w);return _=fs(_,_.next),P=fs(P,P.next),Fs(_,e,r,a,h,m,0),void Fs(P,e,r,a,h,m,0)}w=w.next}_=_.next}while(_!==i)}function Sf(i,e){return i.x-e.x}function dp(i,e){var r=function(h,m){var _,w=m,P=h.x,k=h.y,j=-1/0;do{if(k<=w.y&&k>=w.next.y&&w.next.y!==w.y){var $=w.x+(k-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if($<=P&&$>j&&(j=$,_=w.x<w.next.x?w:w.next,$===P))return _}w=w.next}while(w!==m);if(!_)return null;var G,Y=_,re=_.x,pe=_.y,Ie=1/0;w=_;do{P>=w.x&&w.x>=re&&P!==w.x&&D(k<pe?P:j,k,re,pe,k<pe?j:P,k,w.x,w.y)&&(G=Math.abs(k-w.y)/(P-w.x),Ee(w,h)&&(G<Ie||G===Ie&&(w.x>_.x||w.x===_.x&&Up(_,w)))&&(_=w,Ie=G)),w=w.next}while(w!==Y);return _}(i,e);if(!r)return e;var a=Te(r,i);return fs(a,a.next),fs(r,r.next)}function Up(i,e){return N(i.prev,i,e.prev)<0&&N(e.next,i,i.next)<0}function Md(i,e,r,a,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-r)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*h|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function M(i){var e=i,r=i;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==i);return r}function D(i,e,r,a,h,m,_,w){return(h-_)*(e-w)>=(i-_)*(m-w)&&(i-_)*(a-w)>=(r-_)*(e-w)&&(r-_)*(m-w)>=(h-_)*(a-w)}function L(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(r,a){var h=r;do{if(h.i!==r.i&&h.next.i!==r.i&&h.i!==a.i&&h.next.i!==a.i&&S(h,h.next,r,a))return!0;h=h.next}while(h!==r);return!1}(i,e)&&(Ee(i,e)&&Ee(e,i)&&function(r,a){var h=r,m=!1,_=(r.x+a.x)/2,w=(r.y+a.y)/2;do{h.y>w!=h.next.y>w&&h.next.y!==h.y&&_<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next}while(h!==r);return m}(i,e)&&(N(i.prev,i,e.prev)||N(i,e.prev,e))||C(i,e)&&N(i.prev,i,i.next)>0&&N(e.prev,e,e.next)>0)}function N(i,e,r){return(e.y-i.y)*(r.x-e.x)-(e.x-i.x)*(r.y-e.y)}function C(i,e){return i.x===e.x&&i.y===e.y}function S(i,e,r,a){var h=K(N(i,e,r)),m=K(N(i,e,a)),_=K(N(r,a,i)),w=K(N(r,a,e));return h!==m&&_!==w||!(0!==h||!H(i,r,e))||!(0!==m||!H(i,a,e))||!(0!==_||!H(r,i,a))||!(0!==w||!H(r,e,a))}function H(i,e,r){return e.x<=Math.max(i.x,r.x)&&e.x>=Math.min(i.x,r.x)&&e.y<=Math.max(i.y,r.y)&&e.y>=Math.min(i.y,r.y)}function K(i){return i>0?1:i<0?-1:0}function Ee(i,e){return N(i.prev,i,i.next)<0?N(i,e,i.next)>=0&&N(i,i.prev,e)>=0:N(i,e,i.prev)<0||N(i,i.next,e)<0}function Te(i,e){var r=new Ft(i.i,i.x,i.y),a=new Ft(e.i,e.x,e.y),h=i.next,m=e.prev;return i.next=e,e.prev=i,r.next=h,h.prev=r,a.next=r,r.prev=a,m.next=a,a.prev=m,a}function He(i,e,r,a){var h=new Ft(i,e,r);return a?(h.next=a.next,h.prev=a,a.next.prev=h,a.next=h):(h.prev=h,h.next=h),h}function Ot(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ft(i,e,r){this.i=i,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function In(i,e,r,a){for(var h=0,m=e,_=r-a;m<r;m+=a)h+=(i[_]-i[m])*(i[m+1]+i[_+1]),_=m;return h}function dn(i,e,r,a,h){Gn(i,e,r||0,a||i.length-1,h||xn)}function Gn(i,e,r,a,h){for(;a>r;){if(a-r>600){var m=a-r+1,_=e-r+1,w=Math.log(m),P=.5*Math.exp(2*w/3),k=.5*Math.sqrt(w*P*(m-P)/m)*(_-m/2<0?-1:1);Gn(i,e,Math.max(r,Math.floor(e-_*P/m+k)),Math.min(a,Math.floor(e+(m-_)*P/m+k)),h)}var j=i[e],$=r,G=a;for(en(i,r,e),h(i[a],j)>0&&en(i,r,a);$<G;){for(en(i,$,G),$++,G--;h(i[$],j)<0;)$++;for(;h(i[G],j)>0;)G--}0===h(i[r],j)?en(i,r,G):en(i,++G,a),G<=e&&(r=G+1),e<=G&&(a=G-1)}}function en(i,e,r){var a=i[e];i[e]=i[r],i[r]=a}function xn(i,e){return i<e?-1:i>e?1:0}function yn(i,e){const r=i.length;if(r<=1)return[i];const a=[];let h,m;for(let _=0;_<r;_++){const w=Fr(i[_]);0!==w&&(i[_].area=Math.abs(w),void 0===m&&(m=w<0),m===w<0?(h&&a.push(h),h=[i[_]]):h.push(i[_]))}if(h&&a.push(h),e>1)for(let _=0;_<a.length;_++)a[_].length<=e||(dn(a[_],e,1,a[_].length-1,Dn),a[_]=a[_].slice(0,e));return a}function Dn(i,e){return e.area-i.area}function wi(i,e,r){const a=r.patternDependencies;let h=!1;for(const m of e){const _=m.paint.get(`${i}-pattern`);_.isConstant()||(h=!0);const w=_.constantOr(null);w&&(h=!0,a[w.to]=!0,a[w.from]=!0)}return h}function Kr(i,e,r,a,h){const m=h.patternDependencies;for(const _ of e){const w=_.paint.get(`${i}-pattern`).value;if("constant"!==w.kind){let P=w.evaluate({zoom:a-1},r,{},h.availableImages),k=w.evaluate({zoom:a},r,{},h.availableImages),j=w.evaluate({zoom:a+1},r,{},h.availableImages);P=P&&P.name?P.name:P,k=k&&k.name?k.name:k,j=j&&j.name?j.name:j,m[P]=!0,m[k]=!0,m[j]=!0,r.patterns[_.id]={min:P,mid:k,max:j}}}return r}lh.deviation=function(i,e,r,a){var h=e&&e.length,m=Math.abs(In(i,0,h?e[0]*r:i.length,r));if(h)for(var _=0,w=e.length;_<w;_++)m-=Math.abs(In(i,e[_]*r,_<w-1?e[_+1]*r:i.length,r));var P=0;for(_=0;_<a.length;_+=3){var k=a[_]*r,j=a[_+1]*r,$=a[_+2]*r;P+=Math.abs((i[k]-i[$])*(i[j+1]-i[k+1])-(i[k]-i[j])*(i[$+1]-i[k+1]))}return 0===m&&0===P?0:Math.abs((P-m)/m)},lh.flatten=function(i){for(var e=i[0][0].length,r={vertices:[],holes:[],dimensions:e},a=0,h=0;h<i.length;h++){for(var m=0;m<i[h].length;m++)for(var _=0;_<e;_++)r.vertices.push(i[h][m][_]);h>0&&r.holes.push(a+=i[h-1].length)}return r},Id.default=up;class Or{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rn,this.indexArray=new jr,this.indexArray2=new ds,this.programConfigurations=new ic(e.layers,e.zoom),this.segments=new vo,this.segments2=new vo,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,a,h){this.hasPattern=wi("fill",this.layers,r);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:w,id:P,index:k,sourceLayerIndex:j}of e){const $=this.layers[0]._featureFilter.needGeometry,G=oc(w,$);if(!this.layers[0]._featureFilter.filter(new De(this.zoom),G,a))continue;const Y=m?m.evaluate(G,{},a,r.availableImages):void 0,re={id:P,properties:w.properties,type:w.type,sourceLayerIndex:j,index:k,geometry:$?G.geometry:cl(w,a,h),patterns:{},sortKey:Y};_.push(re)}m&&_.sort((w,P)=>w.sortKey-P.sortKey);for(const w of _){const{geometry:P,index:k,sourceLayerIndex:j}=w;if(this.hasPattern){const $=Kr("fill",this.layers,w,this.zoom,r);this.patternFeatures.push($)}else this.addFeature(w,P,k,a,{},r.availableImages);r.featureIndex.insert(e[k].feature,P,k,j,this.index)}}update(e,r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,h)}addFeatures(e,r,a,h,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,r,a,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,a,h,m,_=[]){for(const w of yn(r,500)){let P=0;for(const re of w)P+=re.length;const k=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),j=k.vertexLength,$=[],G=[];for(const re of w){if(0===re.length)continue;re!==w[0]&&G.push($.length/2);const pe=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),Ie=pe.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(Ie+re.length-1,Ie),$.push(re[0].x),$.push(re[0].y);for(let Ue=1;Ue<re.length;Ue++)this.layoutVertexArray.emplaceBack(re[Ue].x,re[Ue].y),this.indexArray2.emplaceBack(Ie+Ue-1,Ie+Ue),$.push(re[Ue].x),$.push(re[Ue].y);pe.vertexLength+=re.length,pe.primitiveLength+=re.length}const Y=Id($,G);for(let re=0;re<Y.length;re+=3)this.indexArray.emplaceBack(j+Y[re],j+Y[re+1],j+Y[re+2]);k.vertexLength+=P,k.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,_,h)}}$n(Or,"FillBucket",{omit:["layers","patternFeatures"]});const Yr=new sn({"fill-sort-key":new gt(ut.layout_fill["fill-sort-key"])});var Bi={paint:new sn({"fill-antialias":new tt(ut.paint_fill["fill-antialias"]),"fill-opacity":new gt(ut.paint_fill["fill-opacity"]),"fill-color":new gt(ut.paint_fill["fill-color"]),"fill-outline-color":new gt(ut.paint_fill["fill-outline-color"]),"fill-translate":new tt(ut.paint_fill["fill-translate"]),"fill-translate-anchor":new tt(ut.paint_fill["fill-translate-anchor"]),"fill-pattern":new kt(ut.paint_fill["fill-pattern"])}),layout:Yr};const es=hn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ac=hn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Bo=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Ei}=es;var Ns=Rl;function Rl(i,e,r,a,h){this.properties={},this.extent=r,this.type=0,this._pbf=i,this._geometry=-1,this._keys=a,this._values=h,i.readFields(bs,this,e)}function bs(i,e,r){1==i?e.id=r.readVarint():2==i?function(a,h){for(var m=a.readVarint()+a.pos;a.pos<m;){var _=h._keys[a.readVarint()],w=h._values[a.readVarint()];h.properties[_]=w}}(r,e):3==i?e.type=r.readVarint():4==i&&(e._geometry=r.pos)}function ch(i){for(var e,r,a=0,h=0,m=i.length,_=m-1;h<m;_=h++)a+=((r=i[_]).x-(e=i[h]).x)*(e.y+r.y);return a}Rl.types=["Unknown","Point","LineString","Polygon"],Rl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,r=i.readVarint()+i.pos,a=1,h=0,m=0,_=0,w=[];i.pos<r;){if(h<=0){var P=i.readVarint();a=7&P,h=P>>3}if(h--,1===a||2===a)m+=i.readSVarint(),_+=i.readSVarint(),1===a&&(e&&w.push(e),e=[]),e.push(new se(m,_));else{if(7!==a)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&w.push(e),w},Rl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,r=1,a=0,h=0,m=0,_=1/0,w=-1/0,P=1/0,k=-1/0;i.pos<e;){if(a<=0){var j=i.readVarint();r=7&j,a=j>>3}if(a--,1===r||2===r)(h+=i.readSVarint())<_&&(_=h),h>w&&(w=h),(m+=i.readSVarint())<P&&(P=m),m>k&&(k=m);else if(7!==r)throw new Error("unknown command "+r)}return[_,P,w,k]},Rl.prototype.toGeoJSON=function(i,e,r){var a,h,m=this.extent*Math.pow(2,r),_=this.extent*i,w=this.extent*e,P=this.loadGeometry(),k=Rl.types[this.type];function j(Y){for(var re=0;re<Y.length;re++){var pe=Y[re];Y[re]=[360*(pe.x+_)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(pe.y+w)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(a=0;a<P.length;a++)$[a]=P[a][0];j(P=$);break;case 2:for(a=0;a<P.length;a++)j(P[a]);break;case 3:for(P=function(Y){var re=Y.length;if(re<=1)return[Y];for(var pe,Ie,Ue=[],et=0;et<re;et++){var $e=ch(Y[et]);0!==$e&&(void 0===Ie&&(Ie=$e<0),Ie===$e<0?(pe&&Ue.push(pe),pe=[Y[et]]):pe.push(Y[et]))}return pe&&Ue.push(pe),Ue}(P),a=0;a<P.length;a++)for(h=0;h<P[a].length;h++)j(P[a][h])}1===P.length?P=P[0]:k="Multi"+k;var G={type:"Feature",geometry:{type:k,coordinates:P},properties:this.properties};return"id"in this&&(G.id=this.id),G};var oo=ga;function ga(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Yh,this,e),this.length=this._features.length}function Yh(i,e,r){15===i?e.version=r.readVarint():1===i?e.name=r.readString():5===i?e.extent=r.readVarint():2===i?e._features.push(r.pos):3===i?e._keys.push(r.readString()):4===i&&e._values.push(function(a){for(var h=null,m=a.readVarint()+a.pos;a.pos<m;){var _=a.readVarint()>>3;h=1===_?a.readString():2===_?a.readFloat():3===_?a.readDouble():4===_?a.readVarint64():5===_?a.readVarint():6===_?a.readSVarint():7===_?a.readBoolean():null}return h}(r))}function Qh(i,e,r){if(3===i){var a=new oo(r,r.readVarint()+r.pos);a.length&&(e[a.name]=a)}}ga.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new Ns(this._pbf,e,this.extent,this._keys,this._values)};var Pc={VectorTile:function(i,e){this.layers=i.readFields(Qh,{},e)},VectorTileFeature:Ns,VectorTileLayer:oo};function Ad(i,e,r,a){const h=[],m=0===a?(_,w,P,k,j,$)=>{_.push(new se($,P+($-w)/(k-w)*(j-P)))}:(_,w,P,k,j,$)=>{_.push(new se(w+($-P)/(j-P)*(k-w),$))};for(const _ of i){const w=[];for(const P of _){if(P.length<=2)continue;const k=[];for(let G=0;G<P.length-1;G++){const Y=P[G].x,re=P[G].y,pe=P[G+1].x,Ie=P[G+1].y,Ue=0===a?Y:re,et=0===a?pe:Ie;Ue<e?et>e&&m(k,Y,re,pe,Ie,e):Ue>r?et<r&&m(k,Y,re,pe,Ie,r):k.push(P[G]),et<e&&Ue>=e&&m(k,Y,re,pe,Ie,e),et>r&&Ue<=r&&m(k,Y,re,pe,Ie,r)}let j=P[P.length-1];const $=0===a?j.x:j.y;$>=e&&$<=r&&k.push(j),k.length&&(j=k[k.length-1],k[0].x===j.x&&k[0].y===j.y||k.push(k[0]),w.push(k))}w.length&&h.push(w)}return h}const uh=Pc.VectorTileFeature.types,Pd=Math.pow(2,13);function Hp(i,e,r,a,h,m,_,w){i.emplaceBack((e<<1)+_,(r<<1)+m,(Math.floor(a*Pd)<<1)+h,Math.round(w))}function fp(i,e,r){const a=16384;i.emplaceBack(e.x,e.y,e.z,r[0]*a,r[1]*a,r[2]*a)}class Oy{constructor(){this.acc=new se(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new se(e.x,e.y),this.max=new se(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const a=this.min,h=this.max;e.x<a.x?a.x=e.x:e.x>h.x&&(h.x=e.x),e.y<a.y?a.y=e.y:e.y>h.y&&(h.y=e.y),((0===e.x||e.x===wr)&&e.x===r.x)!=((0===e.y||e.y===wr)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,ur(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>wr!=e.x>wr&&this.addBorderIntersection(1,ur(r.y,e.y,(wr-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,ur(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>wr!=e.y>wr&&this.addBorderIntersection(3,ur(r.x,e.x,(wr-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];r<a[0]&&(a[0]=r),r>a[1]&&(a[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const a=0===e.x?0:1;this.addBorderIntersection(a,r.y),this.addBorderIntersection(a,e.y)}else{const a=0===e.y?2:3;this.addBorderIntersection(a,r.x),this.addBorderIntersection(a,e.x)}}centroid(){const e=this.polyCount.reduce((r,a)=>r+a.edges,0);return 0!==e?this.acc.div(e)._round():new se(0,0)}span(){return new se(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class If{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new ar,this.centroidVertexArray=new Al,this.indexArray=new jr,this.programConfigurations=new ic(e.layers,e.zoom),this.segments=new vo,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,a,h){this.features=[],this.hasPattern=wi("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const _=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*_/(_*_+1)/wr/(1<<m.z)}(a),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:_,index:w,sourceLayerIndex:P}of e){const k=this.layers[0]._featureFilter.needGeometry,j=oc(m,k);if(!this.layers[0]._featureFilter.filter(new De(this.zoom),j,a))continue;const $={id:_,sourceLayerIndex:P,index:w,geometry:k?j.geometry:cl(m,a,h),properties:m.properties,type:m.type,patterns:{}},G=this.layoutVertexArray.length;this.hasPattern?this.features.push(Kr("fill-extrusion",this.layers,$,this.zoom,r)):this.addFeature($,$.geometry,w,a,{},r.availableImages,h),r.featureIndex.insert(m,$.geometry,w,P,this.index,G)}this.sortBorders()}addFeatures(e,r,a,h,m){for(const _ of this.features){const{geometry:w}=_;this.addFeature(_,w,_.index,r,a,h,m)}this.sortBorders()}update(e,r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ei),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Bo.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Ac.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,a,h,m,_,w){const P=[new se(0,0),new se(wr,wr)],k=w.projection,j="globe"===k.name,$=this.enableTerrain&&!j?new Oy:null,G="Polygon"===uh[e.type];j&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new vs);const Y=yn(r,500);for(let Ue=Y.length-1;Ue>=0;Ue--){const et=Y[Ue];(0===et.length||(re=et[0]).every($e=>$e.x<=0)||re.every($e=>$e.x>=wr)||re.every($e=>$e.y<=0)||re.every($e=>$e.y>=wr))&&Y.splice(Ue,1)}var re;let pe;if(j)pe=By(Y,P,h);else{pe=[];for(const Ue of Y)pe.push({polygon:Ue,bounds:P})}const Ie=G?this.edgeRadius:0;for(const{polygon:Ue,bounds:et}of pe){let $e=0,Qe=0;for(const nt of Ue)G&&!nt[0].equals(nt[nt.length-1])&&nt.push(nt[0]),Qe+=G?nt.length-1:nt.length;const pt=this.segments.prepareSegment((G?5:4)*Qe,this.layoutVertexArray,this.indexArray);if(G){const nt=[],Gt=[];$e=pt.vertexLength;for(const un of Ue){let Pn,Yt;un.length&&un!==Ue[0]&&Gt.push(nt.length/2),Pn=un[1].sub(un[0])._perp()._unit();for(let pn=1;pn<un.length;pn++){const vn=un[pn],gn=un[pn===un.length-1?1:pn+1];let{x:Mn,y:bn}=vn;if(Ie){Yt=gn.sub(vn)._perp()._unit();const Wn=Pn.add(Yt)._unit(),Jr=Ie*Math.min(4,1/(Pn.x*Wn.x+Pn.y*Wn.y));Mn+=Jr*Wn.x,bn+=Jr*Wn.y,Pn=Yt}Hp(this.layoutVertexArray,Mn,bn,0,0,1,1,0),pt.vertexLength++,nt.push(vn.x,vn.y),j&&fp(this.layoutVertexExtArray,k.projectTilePoint(Mn,bn,h),k.upVector(h,Mn,bn))}}const Ht=Id(nt,Gt);for(let un=0;un<Ht.length;un+=3)this.indexArray.emplaceBack($e+Ht[un],$e+Ht[un+2],$e+Ht[un+1]),pt.primitiveLength++}for(const nt of Ue){$&&nt.length&&$.startRing(nt[0]);let Gt,Ht,un,Pn=nt.length>4&&Ly(nt[nt.length-2],nt[0],nt[1]),Yt=Ie?ky(nt[nt.length-2],nt[0],nt[1],Ie):0;Ht=nt[1].sub(nt[0])._perp()._unit();for(let pn=1,vn=0;pn<nt.length;pn++){let gn=nt[pn-1],Mn=nt[pn];const bn=nt[pn===nt.length-1?1:pn+1];if($&&G&&$.currentPolyCount.top++,Ry(Mn,gn,et)){Ie&&(Ht=bn.sub(Mn)._perp()._unit());continue}$&&$.append(Mn,gn);const Wn=Mn.sub(gn)._perp(),Jr=Wn.x/(Math.abs(Wn.x)+Math.abs(Wn.y)),ei=Wn.y>0?1:0,yr=gn.dist(Mn);if(vn+yr>32768&&(vn=0),Ie){un=bn.sub(Mn)._perp()._unit();let Kn=$p(gn,Mn,bn,Fm(Ht,un),Ie);isNaN(Kn)&&(Kn=0);const fo=Mn.sub(gn)._unit();gn=gn.add(fo.mult(Yt))._round(),Mn=Mn.add(fo.mult(-Kn))._round(),Yt=Kn,Ht=un}const zn=pt.vertexLength,_i=nt.length>4&&Ly(gn,Mn,bn);let Nr=Fy(vn,Pn,!0);if(Hp(this.layoutVertexArray,gn.x,gn.y,Jr,ei,0,0,Nr),Hp(this.layoutVertexArray,gn.x,gn.y,Jr,ei,0,1,Nr),vn+=yr,Nr=Fy(vn,_i,!1),Pn=_i,Hp(this.layoutVertexArray,Mn.x,Mn.y,Jr,ei,0,0,Nr),Hp(this.layoutVertexArray,Mn.x,Mn.y,Jr,ei,0,1,Nr),pt.vertexLength+=4,this.indexArray.emplaceBack(zn+0,zn+1,zn+2),this.indexArray.emplaceBack(zn+1,zn+3,zn+2),pt.primitiveLength+=2,Ie){const Kn=$e+(1===pn?nt.length-2:pn-2),fo=1===pn?$e:Kn+1;if(this.indexArray.emplaceBack(zn+1,Kn,zn+3),this.indexArray.emplaceBack(Kn,fo,zn+3),pt.primitiveLength+=2,void 0===Gt&&(Gt=zn),!Ry(bn,nt[pn],et)){const so=pn===nt.length-1?Gt:pt.vertexLength;this.indexArray.emplaceBack(zn+2,zn+3,so),this.indexArray.emplaceBack(zn+3,so+1,so),this.indexArray.emplaceBack(zn+3,fo,so+1),pt.primitiveLength+=3}}if(j){const Kn=this.layoutVertexExtArray,fo=k.projectTilePoint(gn.x,gn.y,h),so=k.projectTilePoint(Mn.x,Mn.y,h),xo=k.upVector(h,gn.x,gn.y),ti=k.upVector(h,Mn.x,Mn.y);fp(Kn,fo,xo),fp(Kn,fo,xo),fp(Kn,so,ti),fp(Kn,so,ti)}}G&&($e+=nt.length-1)}}if($&&$.polyCount.length>0){if($.borders){$.vertexArrayOffset=this.centroidVertexArray.length;const Ue=$.borders,et=this.featuresOnBorder.push($)-1;for(let $e=0;$e<4;$e++)Ue[$e][0]!==Number.MAX_VALUE&&this.borders[$e].push(et)}this.encodeCentroid($.borders?void 0:$.centroid(),$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,_,h)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,a)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,r,a=!0){let h,m;if(e)if(0!==e.y){const w=r.span()._mult(this.tileToMeter);h=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(w.x/10)),m=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(w.y/10))}else h=Math.ceil(7*(e.x+450)),m=0;else h=0,m=+a;let _=a?this.centroidVertexArray.length:r.vertexArrayOffset;for(const w of r.polyCount){a&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*w.edges+w.top);for(let P=0;P<w.top;P++)this.centroidVertexArray.emplace(_++,h,m);for(let P=0;P<2*w.edges;P++)this.centroidVertexArray.emplace(_++,0,m),this.centroidVertexArray.emplace(_++,h,m)}}}function Fm(i,e){const r=i.add(e)._unit();return i.x*r.x+i.y*r.y}function ky(i,e,r,a){const h=e.sub(i)._perp()._unit(),m=r.sub(e)._perp()._unit();return $p(i,e,r,Fm(h,m),a)}function $p(i,e,r,a,h){const m=Math.sqrt(1-a*a);return Math.min(i.dist(e)/3,e.dist(r)/3,h*m/a)}function Ry(i,e,r){return i.x<r[0].x&&e.x<r[0].x||i.x>r[1].x&&e.x>r[1].x||i.y<r[0].y&&e.y<r[0].y||i.y>r[1].y&&e.y>r[1].y}function Ly(i,e,r){if(i.x<0||i.x>=wr||e.x<0||e.x>=wr||r.x<0||r.x>=wr)return!1;const a=r.sub(e),h=a.perp(),m=i.sub(e);return(a.x*m.x+a.y*m.y)/Math.sqrt((a.x*a.x+a.y*a.y)*(m.x*m.x+m.y*m.y))>-.866&&h.x*m.x+h.y*m.y<0}function Fy(i,e,r){const a=e?2|i:-3&i;return r?1|a:-2&a}function Ny(){const i=Math.PI/32,e=Math.tan(i),r=Fo;return r*Math.sqrt(1+2*e*e)-r}function By(i,e,r){const a=1<<r.z,h=bo(r.x/a),m=bo((r.x+1)/a),_=Ri(r.y/a),w=Ri((r.y+1)/a);return function(P,k,j,$,G=0,Y){const re=[];if(!P.length||!j||!$)return re;const pe=(nt,Gt)=>{for(const Ht of nt)re.push({polygon:Ht,bounds:Gt})},Ie=Math.ceil(Math.log2(j)),Ue=Math.ceil(Math.log2($)),et=Ie-Ue,$e=[];for(let nt=0;nt<Math.abs(et);nt++)$e.push(et>0?0:1);for(let nt=0;nt<Math.min(Ie,Ue);nt++)$e.push(0),$e.push(1);let Qe=P;if(Qe=Ad(Qe,k[0].y-G,k[1].y+G,1),Qe=Ad(Qe,k[0].x-G,k[1].x+G,0),!Qe.length)return re;const pt=[];for($e.length?pt.push({polygons:Qe,bounds:k,depth:0}):pe(Qe,k);pt.length;){const nt=pt.pop(),Gt=nt.depth,Ht=$e[Gt],un=nt.bounds[0],Pn=nt.bounds[1],Yt=0===Ht?un.x:un.y,pn=0===Ht?Pn.x:Pn.y,vn=Y?Y(Ht,Yt,pn):.5*(Yt+pn),gn=Ad(nt.polygons,Yt-G,vn+G,Ht),Mn=Ad(nt.polygons,vn-G,pn+G,Ht);if(gn.length){const bn=[un,new se(0===Ht?vn:Pn.x,1===Ht?vn:Pn.y)];$e.length>Gt+1?pt.push({polygons:gn,bounds:bn,depth:Gt+1}):pe(gn,bn)}if(Mn.length){const bn=[new se(0===Ht?vn:un.x,1===Ht?vn:un.y),Pn];$e.length>Gt+1?pt.push({polygons:Mn,bounds:bn,depth:Gt+1}):pe(Mn,bn)}}return re}(i,e,Math.ceil((m-h)/11.25),Math.ceil((_-w)/11.25),1,(P,k,j)=>{if(0===P)return.5*(k+j);{const $=Ri((r.y+k/wr)/a);return(qo(.5*(Ri((r.y+j/wr)/a)+$))*a-r.y)*wr}})}$n(If,"FillExtrusionBucket",{omit:["layers","features"]}),$n(Oy,"PartMetadata");const l1=new sn({"fill-extrusion-edge-radius":new tt(ut["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var c1={paint:new sn({"fill-extrusion-opacity":new tt(ut["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gt(ut["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tt(ut["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tt(ut["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kt(ut["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gt(ut["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gt(ut["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new tt(ut["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new tt(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new tt(ut["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:l1};function zy(i,e,r){var a=2*Math.PI*6378137/256/Math.pow(2,r);return[i*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}class Nm{constructor(e,r,a){this.z=e,this.x=r,this.y=a,this.key=lu(0,e,e,r,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const a=(_=this.y,w=this.z,P=zy(256*(m=this.x),256*(_=Math.pow(2,w)-_-1),w),k=zy(256*(m+1),256*(_+1),w),P[0]+","+P[1]+","+k[0]+","+k[1]),h=function(m,_,w){let P,k="";for(let j=m;j>0;j--)P=1<<j-1,k+=(_&P?1:0)+(w&P?2:0);return k}(this.z,this.x,this.y);var m,_,w,P,k;return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class jy{constructor(e,r){this.wrap=e,this.canonical=r,this.key=lu(e,r.z,r.z,r.x,r.y)}}class Ll{constructor(e,r,a,h,m){this.overscaledZ=e,this.wrap=r,this.canonical=new Nm(a,+h,+m),this.key=0===r&&e===a?this.canonical.key:lu(r,e,a,h,m)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new Ll(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ll(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return lu(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return lu(this.wrap*+r,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Ll(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,a=2*this.canonical.x,h=2*this.canonical.y;return[new Ll(r,this.wrap,r,a,h),new Ll(r,this.wrap,r,a+1,h),new Ll(r,this.wrap,r,a,h+1),new Ll(r,this.wrap,r,a+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Ll(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Ll(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new jy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function lu(i,e,r,a,h){const m=1<<Math.min(r,22);let _=m*(h%m)+a%m;return i&&r<22&&(_+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-r)))),16*(32*_+r)+(e-r)}function ef(i,e){return i.x*e.x+i.y*e.y}function h_(i,e){if(1===i.length){let r=0;const a=e[r++];let h;for(;!h||a.equals(h);)if(h=e[r++],!h)return 1/0;for(;r<e.length;r++){const m=e[r],_=i[0],w=h.sub(a),P=m.sub(a),k=_.sub(a),j=ef(w,w),$=ef(w,P),G=ef(P,P),Y=ef(k,w),re=ef(k,P),pe=j*G-$*$,Ie=(G*Y-$*re)/pe,Ue=(j*re-$*Y)/pe,et=a.z*(1-Ie-Ue)+h.z*Ie+m.z*Ue;if(isFinite(et))return et}return 1/0}{let r=1/0;for(const a of e)r=Math.min(r,a.z);return r}}function pp(i){const e=new se(i[0],i[1]);return e.z=i[2],e}function Gp(i,e,r,a,h,m,_,w){const P=_*h.getElevationAt(i,e,!0,!0),k=0!==m[0],j=k?0===m[1]?_*(m[0]/7-450):_*function($,G,Y){const re=Math.floor(G[0]/8),pe=Math.floor(G[1]/8),Ie=10*(G[0]-8*re),Ue=10*(G[1]-8*pe),et=$.getElevationAt(re,pe,!0,!0),$e=$.getMeterToDEM(Y),Qe=Math.floor(.5*(Ie*$e-1)),pt=Math.floor(.5*(Ue*$e-1)),nt=$.tileCoordToPixel(re,pe),Gt=2*Qe+1,Ht=2*pt+1,un=(Jr=Gt,ei=Ht,[(Mn=$).getElevationAtPixel(bn=nt.x-Qe,Wn=nt.y-pt,!0),Mn.getElevationAtPixel(bn+ei,Wn,!0),Mn.getElevationAtPixel(bn,Wn+ei,!0),Mn.getElevationAtPixel(bn+Jr,Wn+ei,!0)]),Pn=Math.abs(un[0]-un[1]),Yt=Math.abs(un[2]-un[3]),pn=Math.abs(un[0]-un[2])+Math.abs(un[1]-un[3]),vn=Math.min(.25,.5*$e*(Pn+Yt)/Gt),gn=Math.min(.25,.5*$e*pn/Ht);var Mn,bn,Wn,Jr,ei;return et+Math.max(vn*Ie,gn*Ue)}(h,m,w):P;return{base:P+(0===r)?-1:r,top:k?Math.max(j+a,P+r+2):P+a}}$n(Nm,"CanonicalTileID"),$n(Ll,"OverscaledTileID",{omit:["projMatrix"]});const d_=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Bm}=d_,Vy=hn([{name:"a_packed",components:4,type:"Float32"}]),{members:Od}=Vy,f_=Pc.VectorTileFeature.types,Uy=Math.cos(Math.PI/180*37.5);class zm{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new dr,this.layoutVertexArray2=new qr,this.indexArray=new jr,this.programConfigurations=new ic(e.layers,e.zoom),this.segments=new vo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,h){this.hasPattern=wi("line",this.layers,r);const m=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:j,id:$,index:G,sourceLayerIndex:Y}of e){const re=this.layers[0]._featureFilter.needGeometry,pe=oc(j,re);if(!this.layers[0]._featureFilter.filter(new De(this.zoom),pe,a))continue;const Ie=m?m.evaluate(pe,{},a):void 0,Ue={id:$,properties:j.properties,type:j.type,sourceLayerIndex:Y,index:G,geometry:re?pe.geometry:cl(j,a,h),patterns:{},sortKey:Ie};_.push(Ue)}m&&_.sort((j,$)=>j.sortKey-$.sortKey);const{lineAtlas:w,featureIndex:P}=r,k=this.addConstantDashes(w);for(const j of _){const{geometry:$,index:G,sourceLayerIndex:Y}=j;if(k&&this.addFeatureDashes(j,w),this.hasPattern){const re=Kr("line",this.layers,j,this.zoom,r);this.patternFeatures.push(re)}else this.addFeature(j,$,G,a,w.positions,r.availableImages);P.insert(e[G].feature,$,G,Y,this.index)}}addConstantDashes(e){let r=!1;for(const a of this.layers){const h=a.paint.get("line-dasharray").value,m=a.layout.get("line-cap").value;if("constant"!==h.kind||"constant"!==m.kind)r=!0;else{const _=m.value,w=h.value;if(!w)continue;e.addDash(w.from,_),e.addDash(w.to,_),w.other&&e.addDash(w.other,_)}}return r}addFeatureDashes(e,r){const a=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,_=h.layout.get("line-cap").value;if("constant"===m.kind&&"constant"===_.kind)continue;let w,P,k,j,$,G;if("constant"===m.kind){const Ie=m.value;if(!Ie)continue;w=Ie.other||Ie.to,P=Ie.to,k=Ie.from}else w=m.evaluate({zoom:a-1},e),P=m.evaluate({zoom:a},e),k=m.evaluate({zoom:a+1},e);"constant"===_.kind?j=$=G=_.value:(j=_.evaluate({zoom:a-1},e),$=_.evaluate({zoom:a},e),G=_.evaluate({zoom:a+1},e)),r.addDash(w,j),r.addDash(P,$),r.addDash(k,G);const Y=r.getKey(w,j),re=r.getKey(P,$),pe=r.getKey(k,G);e.patterns[h.id]={min:Y,mid:re,max:pe}}}update(e,r,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,h)}addFeatures(e,r,a,h,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,r,a,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Od)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bm),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,a,h,m,_){const w=this.layers[0].layout,P=w.get("line-join").evaluate(e,{}),k=w.get("line-cap").evaluate(e,{}),j=w.get("line-miter-limit"),$=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const G of r)this.addLine(G,e,P,k,j,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,m,_,h)}addLine(e,r,a,h,m,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<e.length-1;Ue++)this.totalDistance+=e[Ue].dist(e[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w="Polygon"===f_[r.type];let P=e.length;for(;P>=2&&e[P-1].equals(e[P-2]);)P--;let k=0;for(;k<P-1&&e[k].equals(e[k+1]);)k++;if(P<(w?3:2))return;"bevel"===a&&(m=1.05);const j=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let G,Y,re,pe,Ie;this.e1=this.e2=-1,w&&(G=e[P-2],Ie=e[k].sub(G)._unit()._perp());for(let Ue=k;Ue<P;Ue++){if(re=Ue===P-1?w?e[k+1]:void 0:e[Ue+1],re&&e[Ue].equals(re))continue;Ie&&(pe=Ie),G&&(Y=G),G=e[Ue],Ie=re?re.sub(G)._unit()._perp():pe,pe=pe||Ie;let et=pe.add(Ie);0===et.x&&0===et.y||et._unit();const $e=pe.x*Ie.x+pe.y*Ie.y,Qe=et.x*Ie.x+et.y*Ie.y,pt=0!==Qe?1/Qe:1/0,nt=2*Math.sqrt(2-2*Qe),Gt=Qe<Uy&&Y&&re,Ht=pe.x*Ie.y-pe.y*Ie.x>0;if(Gt&&Ue>k){const Yt=G.dist(Y);if(Yt>2*j){const pn=G.sub(G.sub(Y)._mult(j/Yt)._round());this.updateDistance(Y,pn),this.addCurrentVertex(pn,pe,0,0,$),Y=pn}}const un=Y&&re;let Pn=un?a:w?"butt":h;if(un&&"round"===Pn&&(pt<_?Pn="miter":pt<=2&&(Pn="fakeround")),"miter"===Pn&&pt>m&&(Pn="bevel"),"bevel"===Pn&&(pt>2&&(Pn="flipbevel"),pt<m&&(Pn="miter")),Y&&this.updateDistance(Y,G),"miter"===Pn)et._mult(pt),this.addCurrentVertex(G,et,0,0,$);else if("flipbevel"===Pn){if(pt>100)et=Ie.mult(-1);else{const Yt=pt*pe.add(Ie).mag()/pe.sub(Ie).mag();et._perp()._mult(Yt*(Ht?-1:1))}this.addCurrentVertex(G,et,0,0,$),this.addCurrentVertex(G,et.mult(-1),0,0,$)}else if("bevel"===Pn||"fakeround"===Pn){const Yt=-Math.sqrt(pt*pt-1),pn=Ht?Yt:0,vn=Ht?0:Yt;if(Y&&this.addCurrentVertex(G,pe,pn,vn,$),"fakeround"===Pn){const gn=Math.round(180*nt/Math.PI/20);for(let Mn=1;Mn<gn;Mn++){let bn=Mn/gn;if(.5!==bn){const Jr=bn-.5;bn+=bn*Jr*(bn-1)*((1.0904+$e*($e*(3.55645-1.43519*$e)-3.2452))*Jr*Jr+(.848013+$e*(.215638*$e-1.06021)))}const Wn=Ie.sub(pe)._mult(bn)._add(pe)._unit()._mult(Ht?-1:1);this.addHalfVertex(G,Wn.x,Wn.y,!1,Ht,0,$)}}re&&this.addCurrentVertex(G,Ie,-pn,-vn,$)}else if("butt"===Pn)this.addCurrentVertex(G,et,0,0,$);else if("square"===Pn){const Yt=Y?1:-1;Y||this.addCurrentVertex(G,et,Yt,Yt,$),this.addCurrentVertex(G,et,0,0,$),Y&&this.addCurrentVertex(G,et,Yt,Yt,$)}else"round"===Pn&&(Y&&(this.addCurrentVertex(G,pe,0,0,$),this.addCurrentVertex(G,pe,1,1,$,!0)),re&&(this.addCurrentVertex(G,Ie,-1,-1,$,!0),this.addCurrentVertex(G,Ie,0,0,$)));if(Gt&&Ue<P-1){const Yt=G.dist(re);if(Yt>2*j){const pn=G.add(re.sub(G)._mult(j/Yt)._round());this.updateDistance(G,pn),this.addCurrentVertex(pn,Ie,0,0,$),G=pn}}}}addCurrentVertex(e,r,a,h,m,_=!1){const w=r.y*h-r.x,P=-r.y-r.x*h;this.addHalfVertex(e,r.x+r.y*a,r.y-r.x*a,_,!1,a,m),this.addHalfVertex(e,w,P,_,!0,-h,m)}addHalfVertex({x:e,y:r},a,h,m,_,w,P){this.layoutVertexArray.emplaceBack((e<<1)+(m?1:0),(r<<1)+(_?1:0),Math.round(63*a)+128,Math.round(63*h)+128,1+(0===w?0:w<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const k=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),P.primitiveLength++),_?this.e2=k:this.e1=k}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}$n(zm,"LineBucket",{omit:["layers","patternFeatures"]});const jm=new sn({"line-cap":new gt(ut.layout_line["line-cap"]),"line-join":new gt(ut.layout_line["line-join"]),"line-miter-limit":new tt(ut.layout_line["line-miter-limit"]),"line-round-limit":new tt(ut.layout_line["line-round-limit"]),"line-sort-key":new gt(ut.layout_line["line-sort-key"])});var p_={paint:new sn({"line-opacity":new gt(ut.paint_line["line-opacity"]),"line-color":new gt(ut.paint_line["line-color"]),"line-translate":new tt(ut.paint_line["line-translate"]),"line-translate-anchor":new tt(ut.paint_line["line-translate-anchor"]),"line-width":new gt(ut.paint_line["line-width"]),"line-gap-width":new gt(ut.paint_line["line-gap-width"]),"line-offset":new gt(ut.paint_line["line-offset"]),"line-blur":new gt(ut.paint_line["line-blur"]),"line-dasharray":new kt(ut.paint_line["line-dasharray"]),"line-pattern":new kt(ut.paint_line["line-pattern"]),"line-gradient":new At(ut.paint_line["line-gradient"]),"line-trim-offset":new tt(ut.paint_line["line-trim-offset"])}),layout:jm};const Vm=new class extends gt{possiblyEvaluate(i,e){return e=new De(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(i,e)}evaluate(i,e,r,a){return e=Tt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(i,e,r,a)}}(p_.paint.properties["line-width"].specification);function m_(i,e){return e>0?e+2*i:i}Vm.useIntegerZoom=!0;const Hy=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mp=hn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Mf=hn([{name:"a_projected_pos",components:4,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Um=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Af=hn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Pf=hn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Of=hn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Bu=128;function Wp(i,e){const{expression:r}=e;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new De(i+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:a,interpolationType:h}=r;let m=0;for(;m<a.length&&a[m]<=i;)m++;m=Math.max(0,m-1);let _=m;for(;_<a.length&&a[_]<i+1;)_++;_=Math.min(a.length-1,_);const w=a[m],P=a[_];return"composite"===r.kind?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:P,minSize:r.evaluate(new De(w)),maxSize:r.evaluate(new De(P)),interpolationType:h}}}function kf(i,{uSize:e,uSizeT:r},{lowerSize:a,upperSize:h}){return"source"===i.kind?a/Bu:"composite"===i.kind?ur(a/Bu,h/Bu,r):e}function kd(i,e){let r=0,a=0;if("constant"===i.kind)a=i.layoutSize;else if("source"!==i.kind){const{interpolationType:h,minZoom:m,maxZoom:_}=i,w=h?Je(En.interpolationFactor(h,e,m,_),0,1):0;"camera"===i.kind?a=ur(i.minSize,i.maxSize,w):r=w}return{uSizeT:r,uSize:a}}var g_=Object.freeze({__proto__:null,getSizeData:Wp,evaluateSizeForFeature:kf,evaluateSizeForZoom:kd,SIZE_PACK_FACTOR:Bu});function Zp(i,e,r){return i.sections.forEach(a=>{a.text=function(h,m,_){const w=m.layout.get("text-transform").evaluate(_,{});return"uppercase"===w?h=h.toLocaleUpperCase():"lowercase"===w&&(h=h.toLocaleLowerCase()),Ae.applyArabicShaping&&(h=Ae.applyArabicShaping(h)),h}(a.text,e,r)}),i}const gp={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function __(i){return"\ufe36"===i||"\ufe48"===i||"\ufe38"===i||"\ufe44"===i||"\ufe42"===i||"\ufe3e"===i||"\ufe3c"===i||"\ufe3a"===i||"\ufe18"===i||"\ufe40"===i||"\ufe10"===i||"\ufe13"===i||"\ufe14"===i||"\uff40"===i||"\uffe3"===i||"\ufe11"===i||"\ufe12"===i}function u1(i){return"\ufe35"===i||"\ufe47"===i||"\ufe37"===i||"\ufe43"===i||"\ufe41"===i||"\ufe3d"===i||"\ufe3b"===i||"\ufe39"===i||"\ufe17"===i||"\ufe3f"===i}var Hm=function(i,e,r,a,h){var m,_,w=8*h-a-1,P=(1<<w)-1,k=P>>1,j=-7,$=r?h-1:0,G=r?-1:1,Y=i[e+$];for($+=G,m=Y&(1<<-j)-1,Y>>=-j,j+=w;j>0;m=256*m+i[e+$],$+=G,j-=8);for(_=m&(1<<-j)-1,m>>=-j,j+=a;j>0;_=256*_+i[e+$],$+=G,j-=8);if(0===m)m=1-k;else{if(m===P)return _?NaN:1/0*(Y?-1:1);_+=Math.pow(2,a),m-=k}return(Y?-1:1)*_*Math.pow(2,m-a)},$m=function(i,e,r,a,h,m){var _,w,P,k=8*m-h-1,j=(1<<k)-1,$=j>>1,G=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,Y=a?0:m-1,re=a?1:-1,pe=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(w=isNaN(e)?1:0,_=j):(_=Math.floor(Math.log(e)/Math.LN2),e*(P=Math.pow(2,-_))<1&&(_--,P*=2),(e+=_+$>=1?G/P:G*Math.pow(2,1-$))*P>=2&&(_++,P/=2),_+$>=j?(w=0,_=j):_+$>=1?(w=(e*P-1)*Math.pow(2,h),_+=$):(w=e*Math.pow(2,$-1)*Math.pow(2,h),_=0));h>=8;i[r+Y]=255&w,Y+=re,w/=256,h-=8);for(_=_<<h|w,k+=h;k>0;i[r+Y]=255&_,Y+=re,_/=256,k-=8);i[r+Y-re]|=128*pe},_p=ho;function ho(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}ho.Varint=0,ho.Fixed64=1,ho.Bytes=2,ho.Fixed32=5;var Gm=4294967296,y_=1/Gm,ac="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Jh(i){return i.type===ho.Bytes?i.readVarint()+i.pos:i.pos+1}function $y(i,e,r){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(a);for(var h=r.pos-1;h>=i;h--)r.buf[h+a]=r.buf[h]}function h1(i,e){for(var r=0;r<i.length;r++)e.writeVarint(i[r])}function v_(i,e){for(var r=0;r<i.length;r++)e.writeSVarint(i[r])}function d1(i,e){for(var r=0;r<i.length;r++)e.writeFloat(i[r])}function Gy(i,e){for(var r=0;r<i.length;r++)e.writeDouble(i[r])}function Wm(i,e){for(var r=0;r<i.length;r++)e.writeBoolean(i[r])}function b_(i,e){for(var r=0;r<i.length;r++)e.writeFixed32(i[r])}function Wy(i,e){for(var r=0;r<i.length;r++)e.writeSFixed32(i[r])}function Zy(i,e){for(var r=0;r<i.length;r++)e.writeFixed64(i[r])}function qy(i,e){for(var r=0;r<i.length;r++)e.writeSFixed64(i[r])}function yp(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function Lf(i,e,r){i[r]=e,i[r+1]=e>>>8,i[r+2]=e>>>16,i[r+3]=e>>>24}function Zm(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function Xy(i,e,r){e.glyphs=[],1===i&&r.readMessage(Ky,e)}function Ky(i,e,r){if(3===i){const{id:a,bitmap:h,width:m,height:_,left:w,top:P,advance:k}=r.readMessage(x_,{});e.glyphs.push({id:a,bitmap:new Wa({width:m+6,height:_+6},h),metrics:{width:m,height:_,left:w,top:P,advance:k}})}else 4===i?e.ascender=r.readSVarint():5===i&&(e.descender=r.readSVarint())}function x_(i,e,r){1===i?e.id=r.readVarint():2===i?e.bitmap=r.readBytes():3===i?e.width=r.readVarint():4===i?e.height=r.readVarint():5===i?e.left=r.readSVarint():6===i?e.top=r.readSVarint():7===i&&(e.advance=r.readVarint())}function qp(i){let e=0,r=0;for(const _ of i)e+=_.w*_.h,r=Math.max(r,_.w);i.sort((_,w)=>w.h-_.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let h=0,m=0;for(const _ of i)for(let w=a.length-1;w>=0;w--){const P=a[w];if(!(_.w>P.w||_.h>P.h)){if(_.x=P.x,_.y=P.y,m=Math.max(m,_.y+_.h),h=Math.max(h,_.x+_.w),_.w===P.w&&_.h===P.h){const k=a.pop();w<a.length&&(a[w]=k)}else _.h===P.h?(P.x+=_.w,P.w-=_.w):_.w===P.w?(P.y+=_.h,P.h-=_.h):(a.push({x:P.x+_.w,y:P.y,w:P.w-_.w,h:_.h}),P.y+=_.h,P.h-=_.h);break}}return{w:h,h:m,fill:e/(h*m)||0}}ho.prototype={destroy:function(){this.buf=null},readFields:function(i,e,r){for(r=r||this.length;this.pos<r;){var a=this.readVarint(),h=a>>3,m=this.pos;this.type=7&a,i(h,e,this),this.pos===m&&this.skip(a)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=yp(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Zm(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=yp(this.buf,this.pos)+yp(this.buf,this.pos+4)*Gm;return this.pos+=8,i},readSFixed64:function(){var i=yp(this.buf,this.pos)+Zm(this.buf,this.pos+4)*Gm;return this.pos+=8,i},readFloat:function(){var i=Hm(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Hm(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e,r,a=this.buf;return e=127&(r=a[this.pos++]),r<128?e:(e|=(127&(r=a[this.pos++]))<<7,r<128?e:(e|=(127&(r=a[this.pos++]))<<14,r<128?e:(e|=(127&(r=a[this.pos++]))<<21,r<128?e:function(h,m,_){var w,P,k=_.buf;if(w=(112&(P=k[_.pos++]))>>4,P<128||(w|=(127&(P=k[_.pos++]))<<3,P<128)||(w|=(127&(P=k[_.pos++]))<<10,P<128)||(w|=(127&(P=k[_.pos++]))<<17,P<128)||(w|=(127&(P=k[_.pos++]))<<24,P<128)||(w|=(1&(P=k[_.pos++]))<<31,P<128))return function(i,e,r){return r?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}(h,w,m);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=a[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&ac?ac.decode(this.buf.subarray(e,i)):function(r,a,h){for(var m="",_=a;_<h;){var w,P,k,j=r[_],$=null,G=j>239?4:j>223?3:j>191?2:1;if(_+G>h)break;1===G?j<128&&($=j):2===G?128==(192&(w=r[_+1]))&&($=(31&j)<<6|63&w)<=127&&($=null):3===G?(P=r[_+2],128==(192&(w=r[_+1]))&&128==(192&P)&&(($=(15&j)<<12|(63&w)<<6|63&P)<=2047||$>=55296&&$<=57343)&&($=null)):4===G&&(P=r[_+2],k=r[_+3],128==(192&(w=r[_+1]))&&128==(192&P)&&128==(192&k)&&(($=(15&j)<<18|(63&w)<<12|(63&P)<<6|63&k)<=65535||$>=1114112)&&($=null)),null===$?($=65533,G=1):$>65535&&($-=65536,m+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),m+=String.fromCharCode($),_+=G}return m}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==ho.Bytes)return i.push(this.readVarint(e));var r=Jh(this);for(i=i||[];this.pos<r;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==ho.Bytes)return i.push(this.readSVarint());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==ho.Bytes)return i.push(this.readBoolean());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==ho.Bytes)return i.push(this.readFloat());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==ho.Bytes)return i.push(this.readDouble());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==ho.Bytes)return i.push(this.readFixed32());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==ho.Bytes)return i.push(this.readSFixed32());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==ho.Bytes)return i.push(this.readFixed64());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==ho.Bytes)return i.push(this.readSFixed64());var e=Jh(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===ho.Varint)for(;this.buf[this.pos++]>127;);else if(e===ho.Bytes)this.pos=this.readVarint()+this.pos;else if(e===ho.Fixed32)this.pos+=4;else{if(e!==ho.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Lf(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Lf(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Lf(this.buf,-1&i,this.pos),Lf(this.buf,Math.floor(i*y_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Lf(this.buf,-1&i,this.pos),Lf(this.buf,Math.floor(i*y_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,r){var a,h,m,w;if(e>=0?(a=e%4294967296|0,h=e/4294967296|0):(h=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,h=h+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),m=a,(w=r).buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,w.buf[w.pos]=127&(m>>>=7),function(m,_){var w=(7&m)<<4;_.buf[_.pos++]|=w|((m>>>=3)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m)))))}(h,r)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(a,h,m){for(var _,w,P=0;P<h.length;P++){if((_=h.charCodeAt(P))>55295&&_<57344){if(!w){_>56319||P+1===h.length?(a[m++]=239,a[m++]=191,a[m++]=189):w=_;continue}if(_<56320){a[m++]=239,a[m++]=191,a[m++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(a[m++]=239,a[m++]=191,a[m++]=189,w=null);_<128?a[m++]=_:(_<2048?a[m++]=_>>6|192:(_<65536?a[m++]=_>>12|224:(a[m++]=_>>18|240,a[m++]=_>>12&63|128),a[m++]=_>>6&63|128),a[m++]=63&_|128)}return m}(this.buf,i,this.pos);var r=this.pos-e;r>=128&&$y(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(i){this.realloc(4),$m(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),$m(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=i[r]},writeRawMessage:function(i,e){this.pos++;var r=this.pos;i(e,this);var a=this.pos-r;a>=128&&$y(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeMessage:function(i,e,r){this.writeTag(i,ho.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,h1,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,v_,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,Wm,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,d1,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,Gy,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,b_,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,Wy,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,Zy,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,qy,e)},writeBytesField:function(i,e){this.writeTag(i,ho.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,ho.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,ho.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,ho.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,ho.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,ho.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,ho.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,ho.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,ho.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,ho.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,Boolean(e))}};class qm{constructor(e,{pixelRatio:r,version:a,stretchX:h,stretchY:m,content:_}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=h,this.stretchY=m,this.content=_,this.version=a}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zu{constructor(e,r){const a={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(e,a,m),this.addImages(r,h,m);const{w:_,h:w}=qp(m),P=new Ds({width:_||1,height:w||1});for(const k in e){const j=e[k],$=a[k].paddedRect;Ds.copy(j.data,P,{x:0,y:0},{x:$.x+1,y:$.y+1},j.data)}for(const k in r){const j=r[k],$=h[k].paddedRect,G=$.x+1,Y=$.y+1,re=j.data.width,pe=j.data.height;Ds.copy(j.data,P,{x:0,y:0},{x:G,y:Y},j.data),Ds.copy(j.data,P,{x:0,y:pe-1},{x:G,y:Y-1},{width:re,height:1}),Ds.copy(j.data,P,{x:0,y:0},{x:G,y:Y+pe},{width:re,height:1}),Ds.copy(j.data,P,{x:re-1,y:0},{x:G-1,y:Y},{width:1,height:pe}),Ds.copy(j.data,P,{x:0,y:0},{x:G+re,y:Y},{width:1,height:pe})}this.image=P,this.iconPositions=a,this.patternPositions=h}addImages(e,r,a){for(const h in e){const m=e[h],_={x:0,y:0,w:m.data.width+2,h:m.data.height+2};a.push(_),r[h]=new qm(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(a=>e.hasImage(a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const a in e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),r),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),r)}patchUpdatedImage(e,r,a){if(!e||!r||e.version===r.version)return;e.version=r.version;const[h,m]=e.tl;a.update(r.data,void 0,{x:h,y:m})}}$n(qm,"ImagePosition"),$n(zu,"ImageAtlas");const Fl={horizontal:1,vertical:2,horizontalOnly:3};class vp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const a=new vp;return a.scale=e||1,a.fontStack=r,a}static forImage(e){const r=new vp;return r.imageName=e,r}}class Ff{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const a=new Ff;for(let h=0;h<e.sections.length;h++){const m=e.sections[h];m.image?a.addImageSection(m):a.addTextSection(m,r)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,a){let h="";for(let m=0;m<r.length;m++){const _=r.charCodeAt(m+1)||null,w=r.charCodeAt(m-1)||null;h+=!a&&(_&&Xc(_)&&!gp[r[m+1]]||w&&Xc(w)&&!gp[r[m-1]])||!gp[r[m]]?r[m]:gp[r[m]]}return h}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&bp[this.text.charCodeAt(a)];a++)e++;let r=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&bp[this.text.charCodeAt(a)];a--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const a=new Ff;return a.text=this.text.substring(e,r),a.sectionIndex=this.sectionIndex.slice(e,r),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(vp.forText(e.scale,e.fontStack||r));const a=this.sections.length-1;for(let h=0;h<e.text.length;++h)this.sectionIndex.push(a)}addImageSection(e){const r=e.image?e.image.name:"";if(0===r.length)return void Jn("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(vp.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Jn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function w_(i,e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe){const Ie=Ff.fromFeature(i,h);let Ue;$===Fl.vertical&&Ie.verticalizePunctuation(G);const{processBidirectionalText:et,processStyledBidirectionalText:$e}=Ae;if(et&&1===Ie.sections.length){Ue=[];const nt=et(Ie.toString(),Nf(Ie,k,m,e,a,Y,re));for(const Gt of nt){const Ht=new Ff;Ht.text=Gt,Ht.sections=Ie.sections;for(let un=0;un<Gt.length;un++)Ht.sectionIndex.push(0);Ue.push(Ht)}}else if($e){Ue=[];const nt=$e(Ie.text,Ie.sectionIndex,Nf(Ie,k,m,e,a,Y,re));for(const Gt of nt){const Ht=new Ff;Ht.text=Gt[0],Ht.sectionIndex=Gt[1],Ht.sections=Ie.sections,Ue.push(Ht)}}else Ue=function(nt,Gt){const Ht=[],un=nt.text;let Pn=0;for(const Yt of Gt)Ht.push(nt.substring(Pn,Yt)),Pn=Yt;return Pn<un.length&&Ht.push(nt.substring(Pn,un.length)),Ht}(Ie,Nf(Ie,k,m,e,a,Y,re));const Qe=[],pt={positionedLines:Qe,text:Ie.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:$,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(nt,Gt,Ht,un,Pn,Yt,pn,vn,gn,Mn,bn,Wn){let Jr=0,ei=0,yr=0;const zn="right"===vn?1:"left"===vn?0:.5;let _i=!1;for(const ti of Pn){const ji=ti.getSections();for(const po of ji){if(po.imageName)continue;const lo=Gt[po.fontStack];if(lo&&(_i=void 0!==lo.ascender&&void 0!==lo.descender,!_i))break}if(!_i)break}let Nr=0;for(const ti of Pn){ti.trim();const ji=ti.getMaxScale(),po=24*(ji-1),lo={positionedGlyphs:[],lineOffset:0};nt.positionedLines[Nr]=lo;const eo=lo.positionedGlyphs;let wo=0;if(!ti.length()){ei+=Yt,++Nr;continue}let Wo=0,Bs=0;for(let Mi=0;Mi<ti.length();Mi++){const zo=ti.getSection(Mi),ta=ti.getSectionIndex(Mi),$i=ti.getCharCode(Mi);let Ao=zo.scale,ya=null,Eo=null,Yo=null,Ss=24,xs=0;const qa=!(gn===Fl.horizontal||!bn&&!Pu($i)||bn&&(bp[$i]||(Kn=$i,Ph(Kn)||Hd(Kn)||Ku(Kn)||ll(Kn)||za(Kn))));if(zo.imageName){const pl=un[zo.imageName];if(!pl)continue;Yo=zo.imageName,nt.iconsInText=nt.iconsInText||!0,Eo=pl.paddedRect;const na=pl.displaySize;Ao=24*Ao/Wn,ya={width:na[0],height:na[1],left:1,top:-3,advance:qa?na[1]:na[0],localGlyph:!1},xs=_i?-ya.height*Ao:24*ji-17-na[1]*Ao,Ss=ya.advance;const bh=(qa?na[0]:na[1])*Ao-24*ji;bh>0&&bh>wo&&(wo=bh)}else{const pl=Ht[zo.fontStack];if(!pl)continue;pl[$i]&&(Eo=pl[$i]);const na=Gt[zo.fontStack];if(!na)continue;const bh=na.glyphs[$i];if(!bh)continue;if(ya=bh.metrics,Ss=8203!==$i?24:0,_i){const np=void 0!==na.ascender?Math.abs(na.ascender):0,ps=void 0!==na.descender?Math.abs(na.descender):0,rp=(np+ps)*Ao;Wo<rp&&(Wo=rp,Bs=(np-ps)/2*Ao),xs=-np*Ao}else xs=24*(ji-Ao)-17}qa?(nt.verticalizable=!0,eo.push({glyph:$i,imageName:Yo,x:Jr,y:ei+xs,vertical:qa,scale:Ao,localGlyph:ya.localGlyph,fontStack:zo.fontStack,sectionIndex:ta,metrics:ya,rect:Eo}),Jr+=Ss*Ao+Mn):(eo.push({glyph:$i,imageName:Yo,x:Jr,y:ei+xs,vertical:qa,scale:Ao,localGlyph:ya.localGlyph,fontStack:zo.fontStack,sectionIndex:ta,metrics:ya,rect:Eo}),Jr+=ya.advance*Ao+Mn)}0!==eo.length&&(yr=Math.max(Jr-Mn,yr),_i?S_(eo,zn,wo,Bs,Yt*ji/2):S_(eo,zn,wo,0,Yt/2)),Jr=0;const fl=Yt*ji+wo;lo.lineOffset=Math.max(wo,po),ei+=fl,++Nr}var Kn;const fo=ei,{horizontalAlign:so,verticalAlign:xo}=xp(pn);(function(ti,ji,po,lo,eo,wo){const Wo=(ji-po)*eo,Bs=-wo*lo;for(const fl of ti)for(const Mi of fl.positionedGlyphs)Mi.x+=Wo,Mi.y+=Bs})(nt.positionedLines,zn,so,xo,yr,fo),nt.top+=-xo*fo,nt.bottom=nt.top+fo,nt.left+=-so*yr,nt.right=nt.left+yr,nt.hasBaseline=_i}(pt,e,r,a,Ue,_,w,P,$,k,G,pe),!function(nt){for(const Gt of nt)if(0!==Gt.positionedGlyphs.length)return!1;return!0}(Qe)&&pt}const bp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Yy={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function E_(i,e,r,a,h,m){if(e.imageName){const _=a[e.imageName];return _?_.displaySize[0]*e.scale*24/m+h:0}{const _=r[e.fontStack],w=_&&_.glyphs[i];return w?w.metrics.advance*e.scale+h:0}}function C_(i,e,r,a){const h=Math.pow(i-e,2);return a?i<e?h/2:2*h:h+Math.abs(r)*r}function Xm(i,e,r){let a=0;return 10===i&&(a-=1e4),r&&(a+=150),40!==i&&65288!==i||(a+=50),41!==e&&65289!==e||(a+=50),a}function T_(i,e,r,a,h,m){let _=null,w=C_(e,r,h,m);for(const P of a){const k=C_(e-P.x,r,h,m)+P.badness;k<=w&&(_=P,w=k)}return{index:i,x:e,priorBreak:_,badness:w}}function D_(i){return i?D_(i.priorBreak).concat(i.index):[]}function Nf(i,e,r,a,h,m,_){if("point"!==m)return[];if(!i)return[];const w=[],P=function(G,Y,re,pe,Ie,Ue){let et=0;for(let $e=0;$e<G.length();$e++){const Qe=G.getSection($e);et+=E_(G.getCharCode($e),Qe,pe,Ie,Y,Ue)}return et/Math.max(1,Math.ceil(et/re))}(i,e,r,a,h,_),k=i.text.indexOf("\u200b")>=0;let j=0;for(let G=0;G<i.length();G++){const Y=i.getSection(G),re=i.getCharCode(G);if(bp[re]||(j+=E_(re,Y,a,h,e,_)),G<i.length()-1){const pe=!(($=re)<11904||!(Iu($)||$d($)||Xs($)||Au($)||uo($)||Ki($)||md($)||go($)||Lo($)||Mu($)||Yu($)||ys($)||Ba($)||qs($)||al($)||ec($)||Jl($)||ns($)||la($)||Do($)));(Yy[re]||pe||Y.imageName)&&w.push(T_(G+1,j,P,w,Xm(re,i.getCharCode(G+1),pe&&k),!1))}}var $;return D_(T_(i.length(),j,P,w,0,!0))}function xp(i){let e=.5,r=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function S_(i,e,r,a,h){if(!(e||r||a||h))return;const m=i.length-1,_=i[m],w=(_.x+_.metrics.advance*_.scale)*e;for(let P=0;P<=m;P++)i[P].x-=w,i[P].y+=r+a+h}function Km(i,e,r){const{horizontalAlign:a,verticalAlign:h}=xp(r),m=e[0]-i.displaySize[0]*a,_=e[1]-i.displaySize[1]*h;return{image:i,top:_,bottom:_+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function Xp(i,e,r,a,h,m){const _=i.image;let w;if(_.content){const Ie=_.content,Ue=_.pixelRatio||1;w=[Ie[0]/Ue,Ie[1]/Ue,_.displaySize[0]-Ie[2]/Ue,_.displaySize[1]-Ie[3]/Ue]}const P=e.left*m,k=e.right*m;let j,$,G,Y;"width"===r||"both"===r?(Y=h[0]+P-a[3],$=h[0]+k+a[1]):(Y=h[0]+(P+k-_.displaySize[0])/2,$=Y+_.displaySize[0]);const re=e.top*m,pe=e.bottom*m;return"height"===r||"both"===r?(j=h[1]+re-a[0],G=h[1]+pe+a[2]):(j=h[1]+(re+pe-_.displaySize[1])/2,G=j+_.displaySize[1]),{image:_,top:j,right:$,bottom:G,left:Y,collisionPadding:w}}class hh extends se{constructor(e,r,a,h,m){super(e,r),this.angle=h,this.z=a,void 0!==m&&(this.segment=m)}clone(){return new hh(this.x,this.y,this.z,this.angle,this.segment)}}function I_(i,e,r,a,h){if(void 0===e.segment)return!0;let m=e,_=e.segment+1,w=0;for(;w>-r/2;){if(_--,_<0)return!1;w-=i[_].dist(m),m=i[_]}w+=i[_].dist(i[_+1]),_++;const P=[];let k=0;for(;w<r/2;){const j=i[_],$=i[_+1];if(!$)return!1;let G=i[_-1].angleTo(j)-j.angleTo($);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:G}),k+=G;w-P[0].distance>a;)k-=P.shift().angleDelta;if(k>h)return!1;_++,w+=j.dist($)}return!0}function M_(i){let e=0;for(let r=0;r<i.length-1;r++)e+=i[r].dist(i[r+1]);return e}function Kp(i,e,r){return i?.6*e*r:0}function Qy(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function Jy(i,e,r,a,h,m){const _=Kp(r,h,m),w=Qy(r,a)*m;let P=0;const k=M_(i)/2;for(let j=0;j<i.length-1;j++){const $=i[j],G=i[j+1],Y=$.dist(G);if(P+Y>k){const re=(k-P)/Y,pe=ur($.x,G.x,re),Ie=ur($.y,G.y,re),Ue=new hh(pe,Ie,0,G.angleTo($),j);return!_||I_(i,Ue,w,_,e)?Ue:void 0}P+=Y}}function A_(i,e,r,a,h,m,_,w,P){const k=Kp(a,m,_),j=Qy(a,h),$=j*_,G=0===i[0].x||i[0].x===P||0===i[0].y||i[0].y===P;return e-$<e/4&&(e=$+e/4),Ym(i,G?e/2*w%e:(j/2+2*m)*_*w%e,e,k,r,$,G,!1,P)}function Ym(i,e,r,a,h,m,_,w,P){const k=m/2,j=M_(i);let $=0,G=e-r,Y=[];for(let re=0;re<i.length-1;re++){const pe=i[re],Ie=i[re+1],Ue=pe.dist(Ie),et=Ie.angleTo(pe);for(;G+r<$+Ue;){G+=r;const $e=(G-$)/Ue,Qe=ur(pe.x,Ie.x,$e),pt=ur(pe.y,Ie.y,$e);if(Qe>=0&&Qe<P&&pt>=0&&pt<P&&G-k>=0&&G+k<=j){const nt=new hh(Qe,pt,0,et,re);nt._round(),a&&!I_(i,nt,m,a,h)||Y.push(nt)}}$+=Ue}return w||Y.length||_||(Y=Ym(i,$/2,r,a,h,m,_,!0,P)),Y}function Qm(i,e,r,a,h){const m=[];for(let _=0;_<i.length;_++){const w=i[_];let P;for(let k=0;k<w.length-1;k++){let j=w[k],$=w[k+1];j.x<e&&$.x<e||(j.x<e?j=new se(e,j.y+(e-j.x)/($.x-j.x)*($.y-j.y))._round():$.x<e&&($=new se(e,j.y+(e-j.x)/($.x-j.x)*($.y-j.y))._round()),j.y<r&&$.y<r||(j.y<r?j=new se(j.x+(r-j.y)/($.y-j.y)*($.x-j.x),r)._round():$.y<r&&($=new se(j.x+(r-j.y)/($.y-j.y)*($.x-j.x),r)._round()),j.x>=a&&$.x>=a||(j.x>=a?j=new se(a,j.y+(a-j.x)/($.x-j.x)*($.y-j.y))._round():$.x>=a&&($=new se(a,j.y+(a-j.x)/($.x-j.x)*($.y-j.y))._round()),j.y>=h&&$.y>=h||(j.y>=h?j=new se(j.x+(h-j.y)/($.y-j.y)*($.x-j.x),h)._round():$.y>=h&&($=new se(j.x+(h-j.y)/($.y-j.y)*($.x-j.x),h)._round()),P&&j.equals(P[P.length-1])||(P=[j],m.push(P)),P.push($)))))}}return m}$n(hh,"Anchor");const Bf=1e20;function Jm(i,e,r,a,h,m,_,w,P){for(let k=e;k<e+a;k++)dh(i,r*m+k,m,h,_,w,P);for(let k=r;k<r+h;k++)dh(i,k*m+e,1,a,_,w,P)}function dh(i,e,r,a,h,m,_){m[0]=0,_[0]=-Bf,_[1]=Bf,h[0]=i[e];for(let w=1,P=0,k=0;w<a;w++){h[w]=i[e+w*r];const j=w*w;do{const $=m[P];k=(h[w]-h[$]+j-$*$)/(w-$)/2}while(k<=_[P]&&--P>-1);P++,m[P]=w,_[P]=k,_[P+1]=Bf}for(let w=0,P=0;w<a;w++){for(;_[P+1]<w;)P++;const k=m[P],j=w-k;i[e+w*r]=h[k]+j*j}}const zf={none:0,ideographs:1,all:2};class tf{constructor(e,r,a){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=a,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const a=[];for(const h in e)for(const m of e[h])a.push({stack:h,id:m});St(a,({stack:h,id:m},_)=>{let w=this.entries[h];w||(w=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let P=w.glyphs[m];if(void 0!==P)return void _(null,{stack:h,id:m,glyph:P});if(P=this._tinySDF(w,h,m),P)return w.glyphs[m]=P,void _(null,{stack:h,id:m,glyph:P});const k=Math.floor(m/256);if(256*k>65535)return void _(new Error("glyphs > 65535 not supported"));if(w.ranges[k])return void _(null,{stack:h,id:m,glyph:P});let j=w.requests[k];j||(j=w.requests[k]=[],tf.loadGlyphRange(h,k,this.url,this.requestManager,($,G)=>{if(G){w.ascender=G.ascender,w.descender=G.descender;for(const Y in G.glyphs)this._doesCharSupportLocalGlyph(+Y)||(w.glyphs[+Y]=G.glyphs[+Y]);w.ranges[k]=!0}for(const Y of j)Y($,G);delete w.requests[k]})),j.push(($,G)=>{$?_($):G&&_(null,{stack:h,id:m,glyph:G.glyphs[m]||null})})},(h,m)=>{if(h)r(h);else if(m){const _={};for(const{stack:w,id:P,glyph:k}of m)void 0===_[w]&&(_[w]={}),void 0===_[w].glyphs&&(_[w].glyphs={}),_[w].glyphs[P]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics},_[w].ascender=this.entries[w].ascender,_[w].descender=this.entries[w].descender;r(null,_)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==zf.none&&(this.localGlyphMode===zf.all?!!this.localFontFamily:!!this.localFontFamily&&(Mu(e)||Zc(e)||Ba(e)||Jl(e)||go(e)))}_tinySDF(e,r,a){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(a))return;let m=e.tinySDF;if(!m){let pe="400";/bold/i.test(r)?pe="900":/medium/i.test(r)?pe="500":/light/i.test(r)&&(pe="200"),m=e.tinySDF=new tf.TinySDF({fontFamily:h,fontWeight:pe,fontSize:48,buffer:6,radius:16}),m.fontWeight=pe}if(this.localGlyphs[m.fontWeight][a])return this.localGlyphs[m.fontWeight][a];const _=String.fromCharCode(a),{data:w,width:P,height:k,glyphWidth:j,glyphHeight:$,glyphLeft:G,glyphTop:Y,glyphAdvance:re}=m.draw(_);return this.localGlyphs[m.fontWeight][a]={id:a,bitmap:new Wa({width:P,height:k},w),metrics:{width:j/2,height:$/2,left:G/2,top:Y/2-27,advance:re/2,localGlyph:!0}}}}function eg(i,e,r,a){const h=[],m=i.image,_=m.pixelRatio,w=m.paddedRect.w-2,P=m.paddedRect.h-2,k=i.right-i.left,j=i.bottom-i.top,$=m.stretchX||[[0,w]],G=m.stretchY||[[0,P]],Y=(Yt,pn)=>Yt+pn[1]-pn[0],re=$.reduce(Y,0),pe=G.reduce(Y,0),Ie=w-re,Ue=P-pe;let et=0,$e=re,Qe=0,pt=pe,nt=0,Gt=Ie,Ht=0,un=Ue;if(m.content&&a){const Yt=m.content;et=tg($,0,Yt[0]),Qe=tg(G,0,Yt[1]),$e=tg($,Yt[0],Yt[2]),pt=tg(G,Yt[1],Yt[3]),nt=Yt[0]-et,Ht=Yt[1]-Qe,Gt=Yt[2]-Yt[0]-$e,un=Yt[3]-Yt[1]-pt}const Pn=(Yt,pn,vn,gn)=>{const Mn=jf(Yt.stretch-et,$e,k,i.left),bn=Rd(Yt.fixed-nt,Gt,Yt.stretch,re),Wn=jf(pn.stretch-Qe,pt,j,i.top),Jr=Rd(pn.fixed-Ht,un,pn.stretch,pe),ei=jf(vn.stretch-et,$e,k,i.left),yr=Rd(vn.fixed-nt,Gt,vn.stretch,re),zn=jf(gn.stretch-Qe,pt,j,i.top),_i=Rd(gn.fixed-Ht,un,gn.stretch,pe),Nr=new se(Mn,Wn),Kn=new se(ei,Wn),fo=new se(ei,zn),so=new se(Mn,zn),xo=new se(bn/_,Jr/_),ti=new se(yr/_,_i/_),ji=e*Math.PI/180;if(ji){const eo=Math.sin(ji),wo=Math.cos(ji),Wo=[wo,-eo,eo,wo];Nr._matMult(Wo),Kn._matMult(Wo),so._matMult(Wo),fo._matMult(Wo)}const po=Yt.stretch+Yt.fixed,lo=pn.stretch+pn.fixed;return{tl:Nr,tr:Kn,bl:so,br:fo,tex:{x:m.paddedRect.x+1+po,y:m.paddedRect.y+1+lo,w:vn.stretch+vn.fixed-po,h:gn.stretch+gn.fixed-lo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xo,pixelOffsetBR:ti,minFontScaleX:Gt/_/k,minFontScaleY:un/_/j,isSDF:r}};if(a&&(m.stretchX||m.stretchY)){const Yt=ed($,Ie,re),pn=ed(G,Ue,pe);for(let vn=0;vn<Yt.length-1;vn++){const gn=Yt[vn],Mn=Yt[vn+1];for(let bn=0;bn<pn.length-1;bn++)h.push(Pn(gn,pn[bn],Mn,pn[bn+1]))}}else h.push(Pn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return h}function tg(i,e,r){let a=0;for(const h of i)a+=Math.max(e,Math.min(r,h[1]))-Math.max(e,Math.min(r,h[0]));return a}function ed(i,e,r){const a=[{fixed:-1,stretch:0}];for(const[h,m]of i){const _=a[a.length-1];a.push({fixed:h-_.stretch,stretch:_.stretch}),a.push({fixed:h-_.stretch,stretch:_.stretch+(m-h)})}return a.push({fixed:e+1,stretch:r}),a}function jf(i,e,r,a){return i/e*r+a}function Rd(i,e,r,a){return i-e*r/a}function wp(i,e,r,a){const h=e+i.positionedLines[a].lineOffset;return 0===a?r+h/2:r+(h+(e+i.positionedLines[a-1].lineOffset))/2}tf.loadGlyphRange=function(i,e,r,a,h){const m=256*e,_=m+255,w=a.transformRequest(a.normalizeGlyphsURL(r).replace("{fontstack}",i).replace("{range}",`${m}-${_}`),it.Glyphs);It(w,(P,k)=>{if(P)h(P);else if(k){const j={},$=new _p(k).readFields(Xy,{});for(const G of $.glyphs)j[G.id]=G;h(null,{glyphs:j,ascender:$.ascender,descender:$.descender})}})},tf.TinySDF=class{constructor({fontSize:i=24,buffer:e=3,radius:r=8,cutoff:a=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=r;const w=this.size=i+4*e,P=this._createCanvas(w),k=this.ctx=P.getContext("2d",{willReadFrequently:!0});k.font=`${_} ${m} ${i}px ${h}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(i){const e=document.createElement("canvas");return e.width=e.height=i,e}draw(i){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:a,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(i),_=Math.ceil(r),w=Math.min(this.size-this.buffer,Math.ceil(m-h)),P=Math.min(this.size-this.buffer,_+Math.ceil(a)),k=w+2*this.buffer,j=P+2*this.buffer,$=Math.max(k*j,0),G=new Uint8ClampedArray($),Y={data:G,width:k,height:j,glyphWidth:w,glyphHeight:P,glyphTop:_,glyphLeft:0,glyphAdvance:e};if(0===w||0===P)return Y;const{ctx:re,buffer:pe,gridInner:Ie,gridOuter:Ue}=this;re.clearRect(pe,pe,w,P),re.fillText(i,pe,pe+_);const et=re.getImageData(pe,pe,w,P);Ue.fill(Bf,0,$),Ie.fill(0,0,$);for(let $e=0;$e<P;$e++)for(let Qe=0;Qe<w;Qe++){const pt=et.data[4*($e*w+Qe)+3]/255;if(0===pt)continue;const nt=($e+pe)*k+Qe+pe;if(1===pt)Ue[nt]=0,Ie[nt]=Bf;else{const Gt=.5-pt;Ue[nt]=Gt>0?Gt*Gt:0,Ie[nt]=Gt<0?Gt*Gt:0}}Jm(Ue,0,0,k,j,k,this.f,this.v,this.z),Jm(Ie,pe,pe,w,P,k,this.f,this.v,this.z);for(let $e=0;$e<$;$e++){const Qe=Math.sqrt(Ue[$e])-Math.sqrt(Ie[$e]);G[$e]=Math.round(255-255*(Qe/this.radius+this.cutoff))}return Y}};class ev{constructor(e=[],r=ng){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:a}=this,h=r[e];for(;e>0;){const m=e-1>>1,_=r[m];if(a(h,_)>=0)break;r[e]=_,e=m}r[e]=h}_down(e){const{data:r,compare:a}=this,h=this.length>>1,m=r[e];for(;e<h;){let _=1+(e<<1),w=r[_];const P=_+1;if(P<this.length&&a(r[P],w)<0&&(_=P,w=r[P]),a(w,m)>=0)break;r[e]=w,e=_}r[e]=m}}function ng(i,e){return i<e?-1:i>e?1:0}function P_(i,e=1,r=!1){let a=1/0,h=1/0,m=-1/0,_=-1/0;const w=i[0];for(let Y=0;Y<w.length;Y++){const re=w[Y];(!Y||re.x<a)&&(a=re.x),(!Y||re.y<h)&&(h=re.y),(!Y||re.x>m)&&(m=re.x),(!Y||re.y>_)&&(_=re.y)}const P=Math.min(m-a,_-h);let k=P/2;const j=new ev([],O_);if(0===P)return new se(a,h);for(let Y=a;Y<m;Y+=P)for(let re=h;re<_;re+=P)j.push(new nf(Y+k,re+k,k,i));let $=function(Y){let re=0,pe=0,Ie=0;const Ue=Y[0];for(let et=0,$e=Ue.length,Qe=$e-1;et<$e;Qe=et++){const pt=Ue[et],nt=Ue[Qe],Gt=pt.x*nt.y-nt.x*pt.y;pe+=(pt.x+nt.x)*Gt,Ie+=(pt.y+nt.y)*Gt,re+=3*Gt}return new nf(pe/re,Ie/re,0,Y)}(i),G=j.length;for(;j.length;){const Y=j.pop();(Y.d>$.d||!$.d)&&($=Y,r&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,G)),Y.max-$.d<=e||(k=Y.h/2,j.push(new nf(Y.p.x-k,Y.p.y-k,k,i)),j.push(new nf(Y.p.x+k,Y.p.y-k,k,i)),j.push(new nf(Y.p.x-k,Y.p.y+k,k,i)),j.push(new nf(Y.p.x+k,Y.p.y+k,k,i)),G+=4)}return r&&(console.log(`num probes: ${G}`),console.log(`best distance: ${$.d}`)),$.p}function O_(i,e){return e.max-i.max}function nf(i,e,r,a){this.p=new se(i,e),this.h=r,this.d=function(h,m){let _=!1,w=1/0;for(let P=0;P<m.length;P++){const k=m[P];for(let j=0,$=k.length,G=$-1;j<$;G=j++){const Y=k[j],re=k[G];Y.y>h.y!=re.y>h.y&&h.x<(re.x-Y.x)*(h.y-Y.y)/(re.y-Y.y)+Y.x&&(_=!_),w=Math.min(w,Fu(h,Y,re))}}return(_?1:-1)*Math.sqrt(w)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}const rg=Number.POSITIVE_INFINITY,ig=Math.sqrt(2);function k_(i,e){return e[1]!==rg?function(r,a,h){let m=0,_=0;switch(a=Math.abs(a),h=Math.abs(h),r){case"top-right":case"top-left":case"top":_=h-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-h}switch(r){case"top-right":case"bottom-right":case"right":m=-a;break;case"top-left":case"bottom-left":case"left":m=a}return[m,_]}(i,e[0],e[1]):function(r,a){let h=0,m=0;a<0&&(a=0);const _=a/ig;switch(r){case"top-right":case"top-left":m=_-7;break;case"bottom-right":case"bottom-left":m=7-_;break;case"bottom":m=7-a;break;case"top":m=a-7}switch(r){case"top-right":case"bottom-right":h=-_;break;case"top-left":case"bottom-left":h=_;break;case"left":h=a;break;case"right":h=-a}return[h,m]}(i,e[0])}function tv(i,e,r,a,h,m,_,w,P,k){i.createArrays(),i.tilePixelRatio=wr/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const j=i.layers[0].layout,$=i.layers[0]._unevaluatedLayout._values,G={};if("composite"===i.textSizeData.kind){const{minZoom:pe,maxZoom:Ie}=i.textSizeData;G.compositeTextSizes=[$["text-size"].possiblyEvaluate(new De(pe),w),$["text-size"].possiblyEvaluate(new De(Ie),w)]}if("composite"===i.iconSizeData.kind){const{minZoom:pe,maxZoom:Ie}=i.iconSizeData;G.compositeIconSizes=[$["icon-size"].possiblyEvaluate(new De(pe),w),$["icon-size"].possiblyEvaluate(new De(Ie),w)]}G.layoutTextSize=$["text-size"].possiblyEvaluate(new De(P+1),w),G.layoutIconSize=$["icon-size"].possiblyEvaluate(new De(P+1),w),G.textMaxSize=$["text-size"].possiblyEvaluate(new De(18),w);const Y="map"===j.get("text-rotation-alignment")&&"point"!==j.get("symbol-placement"),re=j.get("text-size");for(const pe of i.features){const Ie=j.get("text-font").evaluate(pe,{},w).join(","),Ue=re.evaluate(pe,{},w),et=G.layoutTextSize.evaluate(pe,{},w),$e=(G.layoutIconSize.evaluate(pe,{},w),{horizontal:{},vertical:void 0}),Qe=pe.text;let pt,nt=[0,0];if(Qe){const un=Qe.toString(),Pn=24*j.get("text-letter-spacing").evaluate(pe,{},w),Yt=24*j.get("text-line-height").evaluate(pe,{},w),pn=qc(un)?Pn:0,vn=j.get("text-anchor").evaluate(pe,{},w),gn=j.get("text-variable-anchor");if(!gn){const yr=j.get("text-radial-offset").evaluate(pe,{},w);nt=yr?k_(vn,[24*yr,rg]):j.get("text-offset").evaluate(pe,{},w).map(zn=>24*zn)}let Mn=Y?"center":j.get("text-justify").evaluate(pe,{},w);const bn=j.get("symbol-placement"),Wn="point"===bn,Jr="point"===bn?24*j.get("text-max-width").evaluate(pe,{},w):0,ei=yr=>{i.allowVerticalPlacement&&tc(un)&&($e.vertical=w_(Qe,e,r,h,Ie,Jr,Yt,vn,yr,pn,nt,Fl.vertical,!0,bn,et,Ue))};if(!Y&&gn){const yr="auto"===Mn?gn.map(_i=>Yp(_i)):[Mn];let zn=!1;for(let _i=0;_i<yr.length;_i++){const Nr=yr[_i];if(!$e.horizontal[Nr])if(zn)$e.horizontal[Nr]=$e.horizontal[0];else{const Kn=w_(Qe,e,r,h,Ie,Jr,Yt,"center",Nr,pn,nt,Fl.horizontal,!1,bn,et,Ue);Kn&&($e.horizontal[Nr]=Kn,zn=1===Kn.positionedLines.length)}}ei("left")}else{if("auto"===Mn&&(Mn=Yp(vn)),Wn||j.get("text-writing-mode").indexOf("horizontal")>=0||!tc(un)){const yr=w_(Qe,e,r,h,Ie,Jr,Yt,vn,Mn,pn,nt,Fl.horizontal,!1,bn,et,Ue);yr&&($e.horizontal[Mn]=yr)}ei("point"===bn?"left":Mn)}}let Gt=!1;if(pe.icon&&pe.icon.name){const un=a[pe.icon.name];un&&(pt=Km(h[pe.icon.name],j.get("icon-offset").evaluate(pe,{},w),j.get("icon-anchor").evaluate(pe,{},w)),Gt=un.sdf,void 0===i.sdfIcons?i.sdfIcons=un.sdf:i.sdfIcons!==un.sdf&&Jn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(un.pixelRatio!==i.pixelRatio||0!==j.get("icon-rotate").constantOr(1))&&(i.iconsNeedLinear=!0))}const Ht=L_($e.horizontal)||$e.vertical;i.iconsInText||(i.iconsInText=!!Ht&&Ht.iconsInText),(Ht||pt)&&Vf(i,pe,$e,pt,a,G,et,0,nt,Gt,_,w,k)}m&&i.generateCollisionDebugBuffers(P,i.collisionBoxArray)}function Yp(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vf(i,e,r,a,h,m,_,w,P,k,j,$,G){let Y=m.textMaxSize.evaluate(e,{},$);void 0===Y&&(Y=_);const re=i.layers[0].layout,pe=re.get("icon-offset").evaluate(e,{},$),Ie=L_(r.horizontal)||r.vertical,Ue="globe"===G.name,et=_/24,$e=i.tilePixelRatio*Y/24,Qe=(pn=i.overscaling,i.zoom>18&&pn>2&&(pn>>=1),Math.max(wr/(512*pn),1)*re.get("symbol-spacing")),pt=re.get("text-padding")*i.tilePixelRatio,nt=re.get("icon-padding")*i.tilePixelRatio,Gt=fe(re.get("text-max-angle")),Ht="map"===re.get("text-rotation-alignment")&&"point"!==re.get("symbol-placement"),un="map"===re.get("icon-rotation-alignment")&&"point"!==re.get("symbol-placement"),Pn=re.get("symbol-placement"),Yt=Qe/2;var pn;const vn=re.get("icon-text-fit");let gn;a&&"none"!==vn&&(i.allowVerticalPlacement&&r.vertical&&(gn=Xp(a,r.vertical,vn,re.get("icon-text-fit-padding"),pe,et)),Ie&&(a=Xp(a,Ie,vn,re.get("icon-text-fit-padding"),pe,et)));const Mn=(bn,Wn,Jr)=>{if(Wn.x<0||Wn.x>=wr||Wn.y<0||Wn.y>=wr)return;let ei=null;if(Ue){const{x:yr,y:zn,z:_i}=G.projectTilePoint(Wn.x,Wn.y,Jr);ei={anchor:new hh(yr,zn,_i,0,void 0),up:G.upVector(Jr,Wn.x,Wn.y)}}!function(yr,zn,_i,Nr,Kn,fo,so,xo,ti,ji,po,lo,eo,wo,Wo,Bs,fl,Mi,zo,ta,$i,Ao,ya,Eo,Yo){const Ss=yr.addToLineVertexArray(zn,Nr);let xs,qa,pl,na,bh,np,ps,rp=0,ty=0,ny=0,Sg=0,Ig=-1,_m=-1;const ju={};let hf=Ju("");const df=_i?_i.anchor:zn;let Mg=0,ym=0;if(void 0===ti._unevaluatedLayout.getValue("text-radial-offset")?[Mg,ym]=ti.layout.get("text-offset").evaluate($i,{},Yo).map(ml=>24*ml):(Mg=24*ti.layout.get("text-radial-offset").evaluate($i,{},Yo),ym=rg),yr.allowVerticalPlacement&&Kn.vertical){const ml=Kn.vertical;if(Wo)np=og(ml),xo&&(ps=og(xo));else{const gl=ti.layout.get("text-rotate").evaluate($i,{},Yo)+90;pl=nd(ji,df,zn,po,lo,eo,ml,wo,gl,Bs),xo&&(na=nd(ji,df,zn,po,lo,eo,xo,Mi,gl))}}if(fo){const ml=ti.layout.get("icon-rotate").evaluate($i,{},Yo),gl="none"!==ti.layout.get("icon-text-fit"),zl=eg(fo,ml,ya,gl),Ag=xo?eg(xo,ml,ya,gl):void 0;qa=nd(ji,df,zn,po,lo,eo,fo,Mi,ml),rp=4*zl.length;const Pg=yr.iconSizeData;let _l=null;"source"===Pg.kind?(_l=[Bu*ti.layout.get("icon-size").evaluate($i,{},Yo)],_l[0]>td&&Jn(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Pg.kind&&(_l=[Bu*Ao.compositeIconSizes[0].evaluate($i,{},Yo),Bu*Ao.compositeIconSizes[1].evaluate($i,{},Yo)],(_l[0]>td||_l[1]>td)&&Jn(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yr.addSymbols(yr.icon,zl,_l,ta,zo,$i,!1,_i,zn,Ss.lineStartIndex,Ss.lineLength,-1,Eo,Yo),Ig=yr.icon.placedSymbolArray.length-1,Ag&&(ty=4*Ag.length,yr.addSymbols(yr.icon,Ag,_l,ta,zo,$i,Fl.vertical,_i,zn,Ss.lineStartIndex,Ss.lineLength,-1,Eo,Yo),_m=yr.icon.placedSymbolArray.length-1)}for(const ml in Kn.horizontal){const gl=Kn.horizontal[ml];xs||(hf=Ju(gl.text),Wo?bh=og(gl):xs=nd(ji,df,zn,po,lo,eo,gl,wo,ti.layout.get("text-rotate").evaluate($i,{},Yo),Bs));const zl=1===gl.positionedLines.length;if(ny+=R_(yr,_i,zn,gl,so,ti,Wo,$i,Bs,Ss,Kn.vertical?Fl.horizontal:Fl.horizontalOnly,zl?Object.keys(Kn.horizontal):[ml],ju,Ig,Ao,Eo,Yo),zl)break}Kn.vertical&&(Sg+=R_(yr,_i,zn,Kn.vertical,so,ti,Wo,$i,Bs,Ss,Fl.vertical,["vertical"],ju,_m,Ao,Eo,Yo));let zd=-1;const vm=(ml,gl)=>ml?Math.max(ml,gl):gl;zd=vm(bh,zd),zd=vm(np,zd),zd=vm(ps,zd);const _1=zd>-1?1:0;yr.glyphOffsetArray.length>=gh.MAX_GLYPHS&&Jn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==$i.sortKey&&yr.addToSortKeyRanges(yr.symbolInstances.length,$i.sortKey),yr.symbolInstances.emplaceBack(df.x,df.y,df.z,zn.x,zn.y,ju.right>=0?ju.right:-1,ju.center>=0?ju.center:-1,ju.left>=0?ju.left:-1,ju.vertical>=0?ju.vertical:-1,Ig,_m,hf,void 0!==xs?xs:yr.collisionBoxArray.length,void 0!==xs?xs+1:yr.collisionBoxArray.length,void 0!==pl?pl:yr.collisionBoxArray.length,void 0!==pl?pl+1:yr.collisionBoxArray.length,void 0!==qa?qa:yr.collisionBoxArray.length,void 0!==qa?qa+1:yr.collisionBoxArray.length,na||yr.collisionBoxArray.length,na?na+1:yr.collisionBoxArray.length,po,ny,Sg,rp,ty,_1,0,Mg,ym,zd)}(i,Wn,ei,bn,r,a,h,gn,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,pt,Ht,P,0,nt,un,pe,e,m,k,j,$)};if("line"===Pn)for(const bn of Qm(e.geometry,0,0,wr,wr)){const Wn=A_(bn,Qe,Gt,r.vertical||Ie,a,24,$e,i.overscaling,wr);for(const Jr of Wn){const ei=Ie;ei&&nv(i,ei.text,Yt,Jr)||Mn(bn,Jr,$)}}else if("line-center"===Pn){for(const bn of e.geometry)if(bn.length>1){const Wn=Jy(bn,Gt,r.vertical||Ie,a,24,$e);Wn&&Mn(bn,Wn,$)}}else if("Polygon"===e.type)for(const bn of yn(e.geometry,0)){const Wn=P_(bn,16);Mn(bn[0],new hh(Wn.x,Wn.y,0,0,void 0),$)}else if("LineString"===e.type)for(const bn of e.geometry)Mn(bn,new hh(bn[0].x,bn[0].y,0,0,void 0),$);else if("Point"===e.type)for(const bn of e.geometry)for(const Wn of bn)Mn([Wn],new hh(Wn.x,Wn.y,0,0,void 0),$)}const td=32640;function R_(i,e,r,a,h,m,_,w,P,k,j,$,G,Y,re,pe,Ie){const Ue=function(Qe,pt,nt,Gt,Ht,un,Pn,Yt){const pn=[];if(0===pt.positionedLines.length)return pn;const vn=Gt.layout.get("text-rotate").evaluate(un,{})*Math.PI/180,gn=function(ei){const yr=ei[0],zn=ei[1],_i=yr*zn;return _i>0?[yr,-zn]:_i<0?[-yr,zn]:0===yr?[zn,yr]:[zn,-yr]}(nt);let Mn=Math.abs(pt.top-pt.bottom);for(const ei of pt.positionedLines)Mn-=ei.lineOffset;const bn=pt.positionedLines.length,Wn=Mn/bn;let Jr=pt.top-nt[1];for(let ei=0;ei<bn;++ei){const yr=pt.positionedLines[ei];Jr=wp(pt,Wn,Jr,ei);for(const zn of yr.positionedGlyphs){if(!zn.rect)continue;const _i=zn.rect||{};let Nr=4,Kn=!0,fo=1,so=0;if(zn.imageName){const Eo=Pn[zn.imageName];if(!Eo)continue;if(Eo.sdf){Jn("SDF images are not supported in formatted text and will be ignored.");continue}Kn=!1,fo=Eo.pixelRatio,Nr=1/fo}const xo=(Ht||Yt)&&zn.vertical,ti=zn.metrics.advance*zn.scale/2,ji=zn.metrics,po=zn.rect;if(null===po)continue;Yt&&pt.verticalizable&&(so=zn.imageName?ti-zn.metrics.width*zn.scale/2:0);const lo=Ht?[zn.x+ti,zn.y]:[0,0];let eo=[0,0],wo=[0,0],Wo=!1;Ht||(xo?(wo=[zn.x+ti+gn[0],zn.y+gn[1]-so],Wo=!0):eo=[zn.x+ti+nt[0],zn.y+nt[1]-so]);const Bs=po.w*zn.scale/(fo*(zn.localGlyph?2:1)),fl=po.h*zn.scale/(fo*(zn.localGlyph?2:1));let Mi,zo,ta,$i;if(xo){const Eo=zn.y-Jr,Yo=new se(-ti,ti-Eo),Ss=-Math.PI/2,xs=new se(...wo);Mi=new se(-ti+eo[0],eo[1]),Mi._rotateAround(Ss,Yo)._add(xs),Mi.x+=-Eo+ti,Mi.y-=(ji.left-Nr)*zn.scale;const qa=zn.imageName?ji.advance*zn.scale:24*zn.scale,pl=String.fromCharCode(zn.glyph);__(pl)?Mi.x+=(1-Nr)*zn.scale:u1(pl)?Mi.x+=qa-ji.height*zn.scale+(-Nr-1)*zn.scale:Mi.x+=zn.imageName||ji.width+2*Nr===po.w&&ji.height+2*Nr===po.h?(qa-fl)/2:(qa-(ji.height+2*Nr)*zn.scale)/2,zo=new se(Mi.x,Mi.y-Bs),ta=new se(Mi.x+fl,Mi.y),$i=new se(Mi.x+fl,Mi.y-Bs)}else{const Eo=(ji.left-Nr)*zn.scale-ti+eo[0],Yo=(-ji.top-Nr)*zn.scale+eo[1],Ss=Eo+Bs,xs=Yo+fl;Mi=new se(Eo,Yo),zo=new se(Ss,Yo),ta=new se(Eo,xs),$i=new se(Ss,xs)}if(vn){let Eo;Eo=Ht?new se(0,0):Wo?new se(gn[0],gn[1]):new se(nt[0],nt[1]),Mi._rotateAround(vn,Eo),zo._rotateAround(vn,Eo),ta._rotateAround(vn,Eo),$i._rotateAround(vn,Eo)}const Ao=new se(0,0),ya=new se(0,0);pn.push({tl:Mi,tr:zo,bl:ta,br:$i,tex:_i,writingMode:pt.writingMode,glyphOffset:lo,sectionIndex:zn.sectionIndex,isSDF:Kn,pixelOffsetTL:Ao,pixelOffsetBR:ya,minFontScaleX:0,minFontScaleY:0})}}return pn}(0,a,P,m,_,w,h,i.allowVerticalPlacement),et=i.textSizeData;let $e=null;"source"===et.kind?($e=[Bu*m.layout.get("text-size").evaluate(w,{},Ie)],$e[0]>td&&Jn(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===et.kind&&($e=[Bu*re.compositeTextSizes[0].evaluate(w,{},Ie),Bu*re.compositeTextSizes[1].evaluate(w,{},Ie)],($e[0]>td||$e[1]>td)&&Jn(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,Ue,$e,P,_,w,j,e,r,k.lineStartIndex,k.lineLength,Y,pe,Ie);for(const Qe of $)G[Qe]=i.text.placedSymbolArray.length-1;return 4*Ue.length}function L_(i){for(const e in i)return i[e];return null}function nd(i,e,r,a,h,m,_,w,P,k){let j=_.top,$=_.bottom,G=_.left,Y=_.right;const re=_.collisionPadding;if(re&&(G-=re[0],j-=re[1],Y+=re[2],$+=re[3]),P){const pe=new se(G,j),Ie=new se(Y,j),Ue=new se(G,$),et=new se(Y,$),$e=fe(P);let Qe=new se(0,0);k&&(Qe=new se(k[0],k[1])),pe._rotateAround($e,Qe),Ie._rotateAround($e,Qe),Ue._rotateAround($e,Qe),et._rotateAround($e,Qe),G=Math.min(pe.x,Ie.x,Ue.x,et.x),Y=Math.max(pe.x,Ie.x,Ue.x,et.x),j=Math.min(pe.y,Ie.y,Ue.y,et.y),$=Math.max(pe.y,Ie.y,Ue.y,et.y)}return i.emplaceBack(e.x,e.y,e.z,r.x,r.y,G,j,Y,$,w,a,h,m),i.length-1}function og(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const e=i.bottom-i.top;return e>0?Math.max(10,e):null}function nv(i,e,r,a){const h=i.compareText;if(e in h){const m=h[e];for(let _=m.length-1;_>=0;_--)if(a.dist(m[_])<r)return!0}else h[e]=[];return h[e].push(a),!1}const rv=hn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:F_}=rv,iv=hn([{name:"a_pos_3",components:3,type:"Int16"}]);var Uf=hn([{name:"a_pos",type:"Int16",components:2}]);const fh=wr/Math.PI/2,Mo=2*Cs(1,0)*fh*Math.PI,Ld=[64,32,16],ph=-fh,ea=fh,sg=[new ma([ph,ph,ph],[ea,ea,ea]),new ma([ph,ph,ph],[0,0,ea]),new ma([0,ph,ph],[ea,0,ea]),new ma([ph,0,ph],[0,ea,ea]),new ma([0,0,ph],[ea,ea,ea])];function Qp(i,e,r,a=!0){const h=is([],i._camera.position,i.worldSize),m=[e,r,1,1];qh(m,m,i.pixelMatrixInverse),Cf(m,m,1/m[3]);const _=io([],Ic([],m,h)),w=i.globeMatrix,P=[w[12],w[13],w[14]],k=Ic([],P,h),j=cr(k),$=io([],k),G=i.worldSize/(2*Math.PI),Y=Go($,_),re=Math.asin(G/j);if(re<Math.acos(Y)){if(!a)return null;const Pn=[],Yt=[];is(Pn,_,j/Y),io(Yt,Ic(Yt,Pn,k)),io(_,Dr(_,k,is(_,Yt,Math.tan(re)*j)))}const pe=[];new pa(h,_).closestPointOnSphere(P,G,pe);const Ie=io([],An(w,0)),Ue=io([],An(w,1)),et=io([],An(w,2)),$e=Go(Ie,pe),Qe=Go(Ue,pe),pt=Go(et,pe),nt=be(Math.asin(-Qe/G));let Gt=be(Math.atan2($e,pt));Gt=i.center.lng+function(Pn,Yt){const pn=(Yt-Pn+180)%360-180;return pn<-180?pn+360:pn}(i.center.lng,Gt);const Ht=ha(Gt),un=Je(qo(nt),0,1);return new Xo(Ht,un)}class f1{constructor(e,r,a){this.a=Ic([],e,a),this.b=Ic([],r,a),this.center=a;const h=io([],this.a),m=io([],this.b);this.angle=Math.acos(Go(h,m))}}function ag(i,e){if(0===i.angle)return null;let r;return r=0===i.a[e]?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[e]/i.a[e]/Math.sin(i.angle)-1/Math.tan(i.angle)),r<0||r>1?null:function(a,h,m,_){const w=Math.sin(m);return a*(Math.sin((1-_)*m)/w)+h*(Math.sin(_*m)/w)}(i.a[e],i.b[e],i.angle,Je(r,0,1))+i.center[e]}function mh(i){if(i.z<=1)return sg[i.z+2*i.y+i.x];const e=ug(Ep(i));return ma.fromPoints(e)}function lg(i,e){const r=Gf(e.zoom);if(0===r)return mh(i);const a=Ep(i),h=ug(a),m=ha(a.getWest())*e.worldSize,_=ha(a.getEast())*e.worldSize,w=qo(a.getNorth())*e.worldSize,P=qo(a.getSouth())*e.worldSize,k=[m,w,0],j=[_,w,0],$=[m,P,0],G=[_,P,0],Y=Gh([],e.globeMatrix);return Jo(k,k,Y),Jo(j,j,Y),Jo($,$,Y),Jo(G,G,Y),h[0]=gi(h[0],$,r),h[1]=gi(h[1],G,r),h[2]=gi(h[2],j,r),h[3]=gi(h[3],k,r),ma.fromPoints(h)}function cg(i,e,r,a,h){for(const m of r)Jo(m,m,a),is(m,m,h),Ga(i,i,m),Js(e,e,m)}function Ep({x:i,y:e,z:r}){const a=1/(1<<r),h=new li(bo(i*a),Ri((e+1)*a)),m=new li(bo((i+1)*a),Ri(e*a));return new eu(h,m)}function ug(i){const e=fe(i.getNorth()),r=fe(i.getSouth()),a=Math.cos(e),h=Math.cos(r),m=Math.sin(e),_=Math.sin(r),w=i.getWest(),P=i.getEast();return[Hf(h,_,w),Hf(h,_,P),Hf(a,m,P),Hf(a,m,w)]}function Hf(i,e,r,a=fh){return r=fe(r),[i*Math.sin(r)*a,-e*a,i*Math.cos(r)*a]}function Fd(i,e,r){return Hf(Math.cos(fe(i)),Math.sin(fe(i)),e,r)}function rf(i,e,r,a){const h=1<<r.z,m=(i/wr+r.x)/h;return Fd(Ri((e/wr+r.y)/h),bo(m),a)}function Cp({min:i,max:e}){return 16383/Math.max(e[0]-i[0],e[1]-i[1],e[2]-i[2])}const hg=new Float64Array(16);function $f(i){const e=Cp(i),r=W(hg,[e,e,e]);return T(r,r,((a=[])[0]=-(h=i.min)[0],a[1]=-h[1],a[2]=-h[2],a));var a,h}function Jp(i){const e=(a=i.min,(r=hg)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r);var r,a;const h=1/Cp(i);return x(e,e,[h,h,h])}function B_(i,e,r,a,h){const m=function(P){const k=wr/(2*Math.PI);return P/(2*Math.PI)/k}(r),_=[i,e,-r/(2*Math.PI)],w=No(new Float64Array(16));return T(w,w,_),x(w,w,[m,m,m]),y(w,w,fe(-h)),R(w,w,fe(-a)),w}function Gf(i){return ht(5,6,i)}function z_(i,e){const r=Fd(e.lat,e.lng);return m=(a=Zi([],function(Y){const re=Fd(Y._center.lat,Y._center.lng);let pe=su([],Ii(0,1,0),re);const Ie=le([],-Y.angle,re);pe=Jo(pe,pe,Ie),le(Ie,-Y._pitch,pe);const Ue=io([],re);return is(Ue,Ue,Y.cameraToCenterDistance/Y.pixelsPerMeter*Mo),Jo(Ue,Ue,Ie),Dr([],re,Ue)}(i),r))[0],_=a[1],w=a[2],P=(h=r)[0],k=h[1],j=h[2],G=($=Math.sqrt(m*m+_*_+w*w)*Math.sqrt(P*P+k*k+j*j))&&Go(a,h)/$,Math.acos(Math.min(Math.max(G,-1),1));var a,h,m,_,w,P,k,j,$,G}const j_=fe(85),dg=Math.cos(j_),p1=Math.sin(j_);function fg(i,e){const r=i.fovAboveCenter,a=i.elevation?i.elevation.getMinElevationBelowMSL()*e:0,h=(i._camera.position[2]*i.worldSize-a)/Math.cos(i._pitch),m=Math.sin(r)*h/Math.sin(Math.max(Math.PI/2-i._pitch-r,.01)),_=Math.sin(i._pitch)*m+h;return Math.min(1.01*_,h*(1/i._horizonShift))}function of(i,e){if(!e.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:e};const r=Math.pow(2,-i.z),a=i.x*r,h=(i.x+1)*r,m=i.y*r,_=(i.y+1)*r,w=bo(a),P=bo(h),k=Ri(m),j=Ri(_),$=e.project(w,k),G=e.project(P,k),Y=e.project(P,j),re=e.project(w,j);let pe=Math.min($.x,G.x,Y.x,re.x),Ie=Math.min($.y,G.y,Y.y,re.y),Ue=Math.max($.x,G.x,Y.x,re.x),et=Math.max($.y,G.y,Y.y,re.y);const $e=r/16;function Qe(nt,Gt,Ht,un,Pn,Yt){const pn=(Ht+Pn)/2,vn=(un+Yt)/2,gn=e.project(bo(pn),Ri(vn)),Mn=Math.max(0,pe-gn.x,Ie-gn.y,gn.x-Ue,gn.y-et);pe=Math.min(pe,gn.x),Ue=Math.max(Ue,gn.x),Ie=Math.min(Ie,gn.y),et=Math.max(et,gn.y),Mn>$e&&(Qe(nt,gn,Ht,un,pn,vn),Qe(gn,Gt,pn,vn,Pn,Yt))}Qe($,G,a,m,h,m),Qe(G,Y,h,m,h,_),Qe(Y,re,h,_,a,_),Qe(re,$,a,_,a,m),pe-=$e,Ie-=$e,Ue+=$e,et+=$e;const pt=1/Math.max(Ue-pe,et-Ie);return{scale:pt,x:pe*pt,y:Ie*pt,x2:Ue*pt,y2:et*pt,projection:e}}const ov=No(new Float32Array(16));class sf{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new li(0,0)}projectTilePoint(e,r,a){return{x:e,y:r,z:0}}locationPoint(e,r,a=!0){return e._coordinatePoint(e.locationCoordinate(r),a)}pixelsPerMeter(e,r){return Cs(1,e)*r}pixelSpaceConversion(e,r,a){return 1}farthestPixelDistance(e){return fg(e,e.pixelsPerMeter)}pointCoordinate(e,r,a,h){const m=e.horizonLineFromTop(!1),_=new se(r,Math.max(m,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(_,h))}pointCoordinate3D(e,r,a){const h=new se(r,a);if(e.elevation)return e.elevation.pointCoordinate(h);{const m=this.pointCoordinate(e,h.x,h.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const a=e.horizonLineFromTop();return r.y<a}createInversionMatrix(e,r){return ov}createTileMatrix(e,r,a){let h,m,_;const w=a.canonical,P=No(new Float64Array(16));if(this.isReprojectedInTileSpace){const k=of(w,this);h=1,m=k.x+a.wrap*k.scale,_=k.y,x(P,P,[h/k.scale,h/k.scale,e.pixelsPerMeter/r])}else h=r/e.zoomScale(w.z),m=(w.x+Math.pow(2,w.z)*a.wrap)*h,_=w.y*h;return T(P,P,[m,_,0]),x(P,P,[h/wr,h/wr,1]),P}upVector(e,r,a){return[0,0,1]}upVectorScale(e,r,a){return{metersToTile:1}}}class m1 extends sf{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,a]=this.parallels=e.parallels||[29.5,45.5],h=Math.sin(fe(r));this.n=(h+Math.sin(fe(a)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:a,c:h,r0:m}=this,_=fe(e-this.center[0]),w=fe(r),P=Math.sqrt(h-2*a*Math.sin(w))/a;return{x:P*Math.sin(_*a),y:P*Math.cos(_*a)-m,z:0}}unproject(e,r){const{n:a,c:h,r0:m}=this,_=m+r;let w=Math.atan2(e,Math.abs(_))*Math.sign(_);_*a<0&&(w-=Math.PI*Math.sign(e)*Math.sign(_));const P=fe(this.center[0])*a;w=yt(w,-Math.PI-P,Math.PI-P);const k=be(w/a)+this.center[0],j=Math.asin(Je((h-(e*e+_*_)*a*a)/(2*a),-1,1)),$=Je(be(j),-85.051129,da);return new li(k,$)}}const af=1.340264,Tp=-.081106,Wf=893e-6,Zf=.003796,em=Math.sqrt(3)/2;class cu extends sf{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(em*Math.sin(r)),h=a*a,m=h*h*h;return{x:.5*(e*Math.cos(a)/(em*(af+3*Tp*h+m*(7*Wf+9*Zf*h)))/Math.PI+.5),y:1-.5*(a*(af+Tp*h+m*(Wf+Zf*h))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,h=a*a,m=h*h*h;for(let j,$,G,Y=0;Y<12&&($=a*(af+Tp*h+m*(Wf+Zf*h))-r,G=af+3*Tp*h+m*(7*Wf+9*Zf*h),j=$/G,a=Je(a-j,-Math.PI/3,Math.PI/3),h=a*a,m=h*h*h,!(Math.abs(j)<1e-12));++Y);const _=em*e*(af+3*Tp*h+m*(7*Wf+9*Zf*h))/Math.cos(a),w=Math.asin(Math.sin(a)/em),P=Je(180*_/Math.PI,-180,180),k=Je(180*w/Math.PI,-85.051129,da);return new li(P,k)}}class g1 extends sf{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const a=360*(e-.5),h=Je(360*(.5-r),-85.051129,da);return new li(a,h)}}const Dp=Math.PI/2;function tm(i){return Math.tan((Dp+i)/2)}class V_ extends sf{constructor(e){super(e),this.center=e.center||[0,30];const[r,a]=this.parallels=e.parallels||[30,30],h=fe(r),m=fe(a),_=Math.cos(h);this.n=h===m?Math.sin(h):Math.log(_/Math.cos(m))/Math.log(tm(m)/tm(h)),this.f=_*Math.pow(tm(h),this.n)/this.n}project(e,r){r=fe(r),e=fe(e-this.center[0]);const a=1e-6,{n:h,f:m}=this;m>0?r<-Dp+a&&(r=-Dp+a):r>Dp-a&&(r=Dp-a);const _=m/Math.pow(tm(r),h),w=_*Math.sin(h*e),P=m-_*Math.cos(h*e);return{x:.5*(w/Math.PI+.5),y:1-.5*(P/Math.PI+.5),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,r=(2*(1-r)-.5)*Math.PI;const{n:a,f:h}=this,m=h-r,_=Math.sign(m),w=Math.sign(a)*Math.sqrt(e*e+m*m);let P=Math.atan2(e,Math.abs(m))*_;m*a<0&&(P-=Math.PI*Math.sign(e)*_);const k=Je(be(P/a)+this.center[0],-180,180),j=Je(be(2*Math.atan(Math.pow(h/w,1/a))-Dp),-85.051129,da);return new li(k,j)}}class pg extends sf{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:ha(e),y:qo(r),z:0}}unproject(e,r){const a=bo(e),h=Ri(r);return new li(a,h)}}const mg=fe(da);class U_ extends sf{project(e,r){const a=(r=fe(r))*r,h=a*a;return{x:.5*((e=fe(e))*(.8707-.131979*a+h*(h*(.003971*a-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+a*(.015085+h*(.028874*a-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,h=25,m=0,_=a*a;do{_=a*a;const k=_*_;m=(a*(1.007226+_*(.015085+k*(.028874*_-.044475-.005916*k)))-r)/(1.007226+_*(.045255+k*(.259866*_-.311325-.005916*11*k))),a=Je(a-m,-mg,mg)}while(Math.abs(m)>1e-6&&--h>0);_=a*a;const w=Je(be(e/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),P=be(a);return new li(w,P)}}const H_=fe(da);class $_ extends sf{project(e,r){r=fe(r),e=fe(e);const a=Math.cos(r),h=2/Math.PI,m=Math.acos(a*Math.cos(e/2)),_=Math.sin(m)/m,w=.5*(e*h+2*a*Math.sin(e/2)/_)||0,P=.5*(r+Math.sin(r)/_)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(e,r){let a=e=(2*e-.5)*Math.PI,h=r=(2*(1-r)-1)*Math.PI,m=25;const _=1e-6;let w=0,P=0;do{const k=Math.cos(h),j=Math.sin(h),$=2*j*k,G=j*j,Y=k*k,re=Math.cos(a/2),pe=Math.sin(a/2),Ie=2*re*pe,Ue=pe*pe,et=1-Y*re*re,$e=et?1/et:0,Qe=et?Math.acos(k*re)*Math.sqrt(1/et):0,pt=.5*(2*Qe*k*pe+2*a/Math.PI)-e,nt=.5*(Qe*j+h)-r,Gt=.5*$e*(Y*Ue+Qe*k*re*G)+1/Math.PI,Ht=$e*(Ie*$/4-Qe*j*pe),un=.125*$e*($*pe-Qe*j*Y*Ie),Pn=.5*$e*(G*re+Qe*Ue*k)+.5,Yt=Ht*un-Pn*Gt;w=(nt*Ht-pt*Pn)/Yt,P=(pt*un-nt*Gt)/Yt,a=Je(a-w,-Math.PI,Math.PI),h=Je(h-P,-H_,H_)}while((Math.abs(w)>_||Math.abs(P)>_)&&--m>0);return new li(be(a),be(h))}}class nm extends sf{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:a,cosPhi:h}=this;return{x:fe(e)*h*a+.5,y:-Math.sin(fe(r))/h*a+.5,z:0}}unproject(e,r){const{scale:a,cosPhi:h}=this,m=-(r-.5)/a,_=Je(be((e-.5)/a)/h,-180,180),w=Math.asin(Je(m*h,-1,1)),P=Je(be(w),-85.051129,da);return new li(_,P)}}class sv extends pg{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(e,r,a){const h=rf(e,r,a);return Jo(h,h,$f(mh(a))),{x:h[0],y:h[1],z:h[2]}}locationPoint(e,r){const a=Fd(r.lat,r.lng),h=io([],a),m=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;kl(a,a,h,Cs(1,0)*wr*m);const _=No(new Float64Array(16));return ou(_,e.pixelMatrix,e.globeMatrix),Jo(a,a,_),new se(a[0],a[1])}pixelsPerMeter(e,r){return Cs(1,0)*r}pixelSpaceConversion(e,r,a){const h=ur(Cs(1,45)*r,Cs(1,e)*r,a);return this.pixelsPerMeter(e,r)/h}createTileMatrix(e,r,a){const h=Jp(mh(a.canonical));return ou(new Float64Array(16),e.globeMatrix,h)}createInversionMatrix(e,r){const{center:a}=e,h=$f(mh(r));return R(h,h,fe(a.lng)),y(h,h,fe(a.lat)),x(h,h,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(e,r,a,h){return Qp(e,r,a,!0)||new Xo(0,0)}pointCoordinate3D(e,r,a){const h=this.pointCoordinate(e,r,a,0);return[h.x,h.y,h.z]}isPointAboveHorizon(e,r){return!Qp(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(h,m){const _=h.cameraToCenterDistance,w=h._centerAltitude*m,P=h._camera,k=h._camera.forward(),j=Dr([],is([],k,-_),[0,0,w]),$=h.worldSize/(2*Math.PI),G=[0,0,-$],Y=h.width/h.height,re=Math.tan(h.fovAboveCenter),pe=is([],P.up(),re),Ie=is([],P.right(),re*Y),Ue=io([],Dr([],Dr([],k,pe),Ie)),et=[];let $e;if(new pa(j,Ue).closestPointOnSphere(G,$,et)){const Qe=Dr([],et,G),pt=Ic([],Qe,j);$e=Math.cos(h.fovAboveCenter)*cr(pt)}else{const Qe=Ic([],j,G),pt=Ic([],G,j);io(pt,pt);const nt=cr(Qe)-$;$e=Math.sqrt(nt*(nt+2*$));const Gt=Math.acos($e/($+nt))-Math.acos(Go(k,pt));$e*=Math.cos(Gt)}return 1.01*$e}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),a=Gf(e.zoom);if(a>0){const h=fg(e,Cs(1,e.center.lat)*e.worldSize),m=e.worldSize/(2*Math.PI),_=Math.max(e.width,e.height)/e.worldSize*Math.PI;return ur(r,h+m*(1-Math.cos(_)),Math.pow(a,10))}return r}upVector(e,r,a){return rf(r,a,e,1)}upVectorScale(e){return{metersToTile:Mo*Cp(mh(e))}}}function rm(i){const e=i.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(i.name){case"mercator":return new pg(i);case"equirectangular":return new g1(i);case"naturalEarth":return new U_(i);case"equalEarth":return new cu(i);case"winkelTripel":return new $_(i);case"albers":return r?new nm(i):new m1(i);case"lambertConformalConic":return r?new nm(i):new V_(i);case"globe":return new sv(i)}throw new Error(`Invalid projection name: ${i.name}`)}const av=Pc.VectorTileFeature.types,lv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function im(i,e,r,a,h,m,_,w,P,k,j,$,G){const Y=w?Math.min(td,Math.round(w[0])):0,re=w?Math.min(td,Math.round(w[1])):0;i.emplaceBack(e,r,Math.round(32*a),Math.round(32*h),m,_,(Y<<1)+(P?1:0),re,16*k,16*j,256*$,256*G)}function om(i,e,r,a,h,m,_){i.emplaceBack(e,r,a,h,m,_)}function sm(i,e,r,a,h){i.emplaceBack(e,r,a,h),i.emplaceBack(e,r,a,h),i.emplaceBack(e,r,a,h),i.emplaceBack(e,r,a,h)}function G_(i){for(const e of i.sections)if(u(e.text))return!0;return!1}class qf{constructor(e){this.layoutVertexArray=new Yi,this.indexArray=new jr,this.programConfigurations=e,this.segments=new vo,this.dynamicLayoutVertexArray=new qr,this.opacityVertexArray=new ki,this.placedSymbolArray=new Qu,this.globeExtVertexArray=new Qi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,r,a,h){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hy.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Mf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,lv,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,mp.members,!0)),this.opacityVertexBuffer.itemSize=1),(a||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}$n(qf,"SymbolBuffers");class Nd{constructor(e,r,a){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new a,this.segments=new vo,this.collisionVertexArray=new Ji,this.collisionVertexArrayExt=new Gi}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Um.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Af.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}$n(Nd,"CollisionBuffers");class gh{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(_=>_.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=No([]),this.placementViewportMatrix=No([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Wp(this.zoom,r["text-size"]),this.iconSizeData=Wp(this.zoom,r["icon-size"]);const a=this.layers[0].layout,h=a.get("symbol-sort-key"),m=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==h.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(_=>Fl[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new qf(new ic(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new qf(new ic(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new gd,this.lineVertexArray=new ff,this.symbolInstances=new Yc}calculateGlyphDependencies(e,r,a,h,m){for(let _=0;_<e.length;_++)if(r[e.charCodeAt(_)]=!0,h&&m){const w=gp[e.charAt(_)];w&&(r[w.charCodeAt(0)]=!0)}}populate(e,r,a,h){const m=this.layers[0],_=m.layout,w="globe"===this.projection.name,P=_.get("text-font"),k=_.get("text-field"),j=_.get("icon-image"),$=("constant"!==k.value.kind||k.value.value instanceof Fn&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&("constant"!==P.value.kind||P.value.value.length>0),G="constant"!==j.value.kind||!!j.value.value||Object.keys(j.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!$&&!G)return;const re=r.iconDependencies,pe=r.glyphDependencies,Ie=r.availableImages,Ue=new De(this.zoom);for(const{feature:et,id:$e,index:Qe,sourceLayerIndex:pt}of e){const nt=m._featureFilter.needGeometry,Gt=oc(et,nt);if(!m._featureFilter.filter(Ue,Gt,a))continue;if(nt||(Gt.geometry=cl(et,a,h)),w&&1!==et.type&&a.z<=5){const Yt=Gt.geometry,pn=.98078528056;for(let vn=0;vn<Yt.length;vn++)Yt[vn]=Ru(Yt[vn],gn=>gn,(gn,Mn)=>Go(rf(gn.x,gn.y,a,1),rf(Mn.x,Mn.y,a,1))<pn)}let Ht,un;if($){const Yt=m.getValueAndResolveTokens("text-field",Gt,a,Ie),pn=Fn.factory(Yt);G_(pn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ye()||this.hasRTLText&&Ae.isParsed())&&(Ht=Zp(pn,m,Gt))}if(G){const Yt=m.getValueAndResolveTokens("icon-image",Gt,a,Ie);un=Yt instanceof Ar?Yt:Ar.fromString(Yt)}if(!Ht&&!un)continue;const Pn=this.sortFeaturesByKey?Y.evaluate(Gt,{},a):void 0;if(this.features.push({id:$e,text:Ht,icon:un,index:Qe,sourceLayerIndex:pt,geometry:Gt.geometry,properties:et.properties,type:av[et.type],sortKey:Pn}),un&&(re[un.name]=!0),Ht){const Yt=P.evaluate(Gt,{},a).join(","),pn="map"===_.get("text-rotation-alignment")&&"point"!==_.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Fl.vertical)>=0;for(const vn of Ht.sections)if(vn.image)re[vn.image.name]=!0;else{const gn=tc(Ht.toString()),Mn=vn.fontStack||Yt,bn=pe[Mn]=pe[Mn]||{};this.calculateGlyphDependencies(vn.text,bn,pn,this.allowVerticalPlacement,gn)}}}"line"===_.get("symbol-placement")&&(this.features=function(et){const $e={},Qe={},pt=[];let nt=0;function Gt(Yt){pt.push(et[Yt]),nt++}function Ht(Yt,pn,vn){const gn=Qe[Yt];return delete Qe[Yt],Qe[pn]=gn,pt[gn].geometry[0].pop(),pt[gn].geometry[0]=pt[gn].geometry[0].concat(vn[0]),gn}function un(Yt,pn,vn){const gn=$e[pn];return delete $e[pn],$e[Yt]=gn,pt[gn].geometry[0].shift(),pt[gn].geometry[0]=vn[0].concat(pt[gn].geometry[0]),gn}function Pn(Yt,pn,vn){const gn=vn?pn[0][pn[0].length-1]:pn[0][0];return`${Yt}:${gn.x}:${gn.y}`}for(let Yt=0;Yt<et.length;Yt++){const pn=et[Yt],vn=pn.geometry,gn=pn.text?pn.text.toString():null;if(!gn){Gt(Yt);continue}const Mn=Pn(gn,vn),bn=Pn(gn,vn,!0);if(Mn in Qe&&bn in $e&&Qe[Mn]!==$e[bn]){const Wn=un(Mn,bn,vn),Jr=Ht(Mn,bn,pt[Wn].geometry);delete $e[Mn],delete Qe[bn],Qe[Pn(gn,pt[Jr].geometry,!0)]=Jr,pt[Wn].geometry=null}else Mn in Qe?Ht(Mn,bn,vn):bn in $e?un(Mn,bn,vn):(Gt(Yt),$e[Mn]=nt-1,Qe[bn]=nt-1)}return pt.filter(Yt=>Yt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((et,$e)=>et.sortKey-$e.sortKey)}update(e,r,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,a,h),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,a,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=rm(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const a=this.lineVertexArray.length,h=e.segment;if(void 0!==h){let m=e.dist(r[h+1]),_=e.dist(r[h]);const w={};for(let P=h+1;P<r.length;P++)w[P]={x:r[P].x,y:r[P].y,tileUnitDistanceFromAnchor:m},P<r.length-1&&(m+=r[P+1].dist(r[P]));for(let P=h||0;P>=0;P--)w[P]={x:r[P].x,y:r[P].y,tileUnitDistanceFromAnchor:_},P>0&&(_+=r[P-1].dist(r[P]));for(let P=0;P<r.length;P++){const k=w[P];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,r,a,h,m,_,w,P,k,j,$,G,Y,re){const pe=e.indexArray,Ie=e.layoutVertexArray,Ue=e.globeExtVertexArray,et=e.segments.prepareSegment(4*r.length,Ie,pe,this.canOverlap?_.sortKey:void 0),$e=this.glyphOffsetArray.length,Qe=et.vertexLength,pt=this.allowVerticalPlacement&&w===Fl.vertical?Math.PI/2:0,nt=_.text&&_.text.sections;for(let Ht=0;Ht<r.length;Ht++){const{tl:un,tr:Pn,bl:Yt,br:pn,tex:vn,pixelOffsetTL:gn,pixelOffsetBR:Mn,minFontScaleX:bn,minFontScaleY:Wn,glyphOffset:Jr,isSDF:ei,sectionIndex:yr}=r[Ht],zn=et.vertexLength,_i=Jr[1];if(im(Ie,k.x,k.y,un.x,_i+un.y,vn.x,vn.y,a,ei,gn.x,gn.y,bn,Wn),im(Ie,k.x,k.y,Pn.x,_i+Pn.y,vn.x+vn.w,vn.y,a,ei,Mn.x,gn.y,bn,Wn),im(Ie,k.x,k.y,Yt.x,_i+Yt.y,vn.x,vn.y+vn.h,a,ei,gn.x,Mn.y,bn,Wn),im(Ie,k.x,k.y,pn.x,_i+pn.y,vn.x+vn.w,vn.y+vn.h,a,ei,Mn.x,Mn.y,bn,Wn),P){const Nr=P.anchor,Kn=P.up;om(Ue,Nr.x,Nr.y,Nr.z,Kn[0],Kn[1],Kn[2]),om(Ue,Nr.x,Nr.y,Nr.z,Kn[0],Kn[1],Kn[2]),om(Ue,Nr.x,Nr.y,Nr.z,Kn[0],Kn[1],Kn[2]),om(Ue,Nr.x,Nr.y,Nr.z,Kn[0],Kn[1],Kn[2]),sm(e.dynamicLayoutVertexArray,Nr.x,Nr.y,Nr.z,pt)}else sm(e.dynamicLayoutVertexArray,k.x,k.y,k.z,pt);pe.emplaceBack(zn,zn+1,zn+2),pe.emplaceBack(zn+1,zn+2,zn+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jr[0]),Ht!==r.length-1&&yr===r[Ht+1].sectionIndex||e.programConfigurations.populatePaintArrays(Ie.length,_,_.index,{},Y,re,nt&&nt[yr])}const Gt=P?P.anchor:k;e.placedSymbolArray.emplaceBack(Gt.x,Gt.y,Gt.z,k.x,k.y,$e,this.glyphOffsetArray.length-$e,Qe,j,$,k.segment,a?a[0]:0,a?a[1]:0,h[0],h[1],w,0,!1,0,G,0)}_commitLayoutVertex(e,r,a,h,m,_,w){e.emplaceBack(r,a,h,m,_,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(e,r,a,h,m,_,w){const P=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),k=P.vertexLength,j=w.tileAnchorX,$=w.tileAnchorY;for(let Y=0;Y<4;Y++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,h,m,_,j,$,new se(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,h,m,_,j,$,new se(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,h,m,_,j,$,new se(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,h,m,_,j,$,new se(e.x1,e.y2)),P.vertexLength+=4;const G=a.indexArray;G.emplaceBack(k,k+1),G.emplaceBack(k+1,k+2),G.emplaceBack(k+2,k+3),G.emplaceBack(k+3,k),P.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,a,h,m,_){for(let w=h;w<m;w++){const P=a.get(w),k=this.getSymbolInstanceTextSize(e,_,r,w);this._addCollisionDebugVertices(P,k,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(e,r,a,h,m,_){for(let w=h;w<m;w++){const P=a.get(w),k=this.getSymbolInstanceIconSize(e,r,w);this._addCollisionDebugVertices(P,k,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,_)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nd(Qo,Pf.members,ds),this.iconCollisionBox=new Nd(Qo,Pf.members,ds);const a=kd(this.iconSizeData,e),h=kd(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,e,r,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(h,e,r,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(a,e,r,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(a,e,r,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(e,r,a,h){const m=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:h),_=kf(this.textSizeData,e,m)/24;return this.tilePixelRatio*_}getSymbolInstanceIconSize(e,r,a){const h=this.icon.placedSymbolArray.get(a),m=kf(this.iconSizeData,e,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(e,r,a){e.emplaceBack(r,-a,-a),e.emplaceBack(r,a,-a),e.emplaceBack(r,a,a),e.emplaceBack(r,-a,a)}_updateTextDebugCollisionBoxes(e,r,a,h,m,_){for(let w=h;w<m;w++){const P=a.get(w),k=this.getSymbolInstanceTextSize(e,_,r,w);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,P.padding)}}_updateIconDebugCollisionBoxes(e,r,a,h,m){for(let _=h;_<m;_++){const w=a.get(_),P=this.getSymbolInstanceIconSize(e,r,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,w.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=kd(this.iconSizeData,e),h=kd(this.textSizeData,e);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,e,r,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(h,e,r,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(a,e,r,_.iconBoxStartIndex,_.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(a,e,r,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,a,h,m,_,w,P,k){const j={};for(let $=r;$<a;$++){const G=e.get($);j.textBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,padding:G.padding,projectedAnchorX:G.projectedAnchorX,projectedAnchorY:G.projectedAnchorY,projectedAnchorZ:G.projectedAnchorZ,tileAnchorX:G.tileAnchorX,tileAnchorY:G.tileAnchorY},j.textFeatureIndex=G.featureIndex;break}for(let $=h;$<m;$++){const G=e.get($);j.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,padding:G.padding,projectedAnchorX:G.projectedAnchorX,projectedAnchorY:G.projectedAnchorY,projectedAnchorZ:G.projectedAnchorZ,tileAnchorX:G.tileAnchorX,tileAnchorY:G.tileAnchorY},j.verticalTextFeatureIndex=G.featureIndex;break}for(let $=_;$<w;$++){const G=e.get($);j.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,padding:G.padding,projectedAnchorX:G.projectedAnchorX,projectedAnchorY:G.projectedAnchorY,projectedAnchorZ:G.projectedAnchorZ,tileAnchorX:G.tileAnchorX,tileAnchorY:G.tileAnchorY},j.iconFeatureIndex=G.featureIndex;break}for(let $=P;$<k;$++){const G=e.get($);j.verticalIconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,padding:G.padding,projectedAnchorX:G.projectedAnchorX,projectedAnchorY:G.projectedAnchorY,projectedAnchorZ:G.projectedAnchorZ,tileAnchorX:G.tileAnchorX,tileAnchorY:G.tileAnchorY},j.verticalIconFeatureIndex=G.featureIndex;break}return j}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const a=e.placedSymbolArray.get(r),h=a.vertexStartIndex+4*a.numGlyphs;for(let m=a.vertexStartIndex;m<h;m+=4)e.indexArray.emplaceBack(m,m+1,m+2),e.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const r=Math.sin(e),a=Math.cos(e),h=[],m=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const P=this.symbolInstances.get(w);h.push(0|Math.round(r*P.tileAnchorX+a*P.tileAnchorY)),m.push(P.featureIndex)}return _.sort((w,P)=>h[w]-h[P]||m[P]-m[w]),_}addToSortKeyRanges(e,r){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===r?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((h,m,_)=>{h>=0&&_.indexOf(h)===m&&this.addIndicesForPlacedSymbol(this.text,h)}),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}$n(gh,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),gh.MAX_GLYPHS=65535,gh.addDynamicAttributes=sm;const uu=new sn({"symbol-placement":new tt(ut.layout_symbol["symbol-placement"]),"symbol-spacing":new tt(ut.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tt(ut.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gt(ut.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tt(ut.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new tt(ut.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new tt(ut.layout_symbol["icon-ignore-placement"]),"icon-optional":new tt(ut.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tt(ut.layout_symbol["icon-rotation-alignment"]),"icon-size":new gt(ut.layout_symbol["icon-size"]),"icon-text-fit":new tt(ut.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new tt(ut.layout_symbol["icon-text-fit-padding"]),"icon-image":new gt(ut.layout_symbol["icon-image"]),"icon-rotate":new gt(ut.layout_symbol["icon-rotate"]),"icon-padding":new tt(ut.layout_symbol["icon-padding"]),"icon-keep-upright":new tt(ut.layout_symbol["icon-keep-upright"]),"icon-offset":new gt(ut.layout_symbol["icon-offset"]),"icon-anchor":new gt(ut.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tt(ut.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tt(ut.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tt(ut.layout_symbol["text-rotation-alignment"]),"text-field":new gt(ut.layout_symbol["text-field"]),"text-font":new gt(ut.layout_symbol["text-font"]),"text-size":new gt(ut.layout_symbol["text-size"]),"text-max-width":new gt(ut.layout_symbol["text-max-width"]),"text-line-height":new gt(ut.layout_symbol["text-line-height"]),"text-letter-spacing":new gt(ut.layout_symbol["text-letter-spacing"]),"text-justify":new gt(ut.layout_symbol["text-justify"]),"text-radial-offset":new gt(ut.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tt(ut.layout_symbol["text-variable-anchor"]),"text-anchor":new gt(ut.layout_symbol["text-anchor"]),"text-max-angle":new tt(ut.layout_symbol["text-max-angle"]),"text-writing-mode":new tt(ut.layout_symbol["text-writing-mode"]),"text-rotate":new gt(ut.layout_symbol["text-rotate"]),"text-padding":new tt(ut.layout_symbol["text-padding"]),"text-keep-upright":new tt(ut.layout_symbol["text-keep-upright"]),"text-transform":new gt(ut.layout_symbol["text-transform"]),"text-offset":new gt(ut.layout_symbol["text-offset"]),"text-allow-overlap":new tt(ut.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new tt(ut.layout_symbol["text-ignore-placement"]),"text-optional":new tt(ut.layout_symbol["text-optional"])});var lf={paint:new sn({"icon-opacity":new gt(ut.paint_symbol["icon-opacity"]),"icon-color":new gt(ut.paint_symbol["icon-color"]),"icon-halo-color":new gt(ut.paint_symbol["icon-halo-color"]),"icon-halo-width":new gt(ut.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gt(ut.paint_symbol["icon-halo-blur"]),"icon-translate":new tt(ut.paint_symbol["icon-translate"]),"icon-translate-anchor":new tt(ut.paint_symbol["icon-translate-anchor"]),"text-opacity":new gt(ut.paint_symbol["text-opacity"]),"text-color":new gt(ut.paint_symbol["text-color"],{runtimeType:vr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new gt(ut.paint_symbol["text-halo-color"]),"text-halo-width":new gt(ut.paint_symbol["text-halo-width"]),"text-halo-blur":new gt(ut.paint_symbol["text-halo-blur"]),"text-translate":new tt(ut.paint_symbol["text-translate"]),"text-translate-anchor":new tt(ut.paint_symbol["text-translate-anchor"])}),layout:uu};class W_{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ne,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$n(W_,"FormatSectionOverride",{omit:["defaultValue"]});class am extends Ua{constructor(e){super(e,lf)}recalculate(e,r){super.recalculate(e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const h=[];for(const m of a)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,a,h){const m=this.layout.get(e).evaluate(r,{},a,h),_=this._unevaluatedLayout._values[e];return _.isDataDriven()||Ra(_.value)||!m?m:(w=r.properties,m.replace(/{([^{}]+)}/g,(k,j)=>j in w?String(w[j]):""));var w}createBucket(e){return new gh(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of lf.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),a=new W_(r),h=new _c(a,r.property.specification);let m=null;m="constant"===r.value.kind||"source"===r.value.kind?new La("source",h):new Cl("composite",h,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new Ke(r.property,m,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,a){return!(!this.layout||r.isDataDriven()||a.isDataDriven())&&am.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const a=e.get("text-field"),h=lf.paint.properties[r];let m=!1;const _=w=>{for(const P of w)if(h.overrides&&h.overrides.hasOverride(P))return void(m=!0)};if("constant"===a.value.kind&&a.value.value instanceof Fn)_(a.value.value.sections);else if("source"===a.value.kind){const w=k=>{m||(k instanceof Qa&&Wr(k.value)===ts?_(k.value.sections):k instanceof xa?_(k.sections):k.eachChild(w))},P=a.value;P._styleExpression&&w(P._styleExpression.expression)}return m}getProgramConfiguration(e){return new Tn(this,e)}}var gg={paint:new sn({"background-color":new tt(ut.paint_background["background-color"]),"background-pattern":new ln(ut.paint_background["background-pattern"]),"background-opacity":new tt(ut.paint_background["background-opacity"])})},_h={paint:new sn({"raster-opacity":new tt(ut.paint_raster["raster-opacity"]),"raster-hue-rotate":new tt(ut.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tt(ut.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tt(ut.paint_raster["raster-brightness-max"]),"raster-saturation":new tt(ut.paint_raster["raster-saturation"]),"raster-contrast":new tt(ut.paint_raster["raster-contrast"]),"raster-resampling":new tt(ut.paint_raster["raster-resampling"]),"raster-fade-duration":new tt(ut.paint_raster["raster-fade-duration"])})};class Sp extends Ua{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var hl={paint:new sn({"sky-type":new tt(ut.paint_sky["sky-type"]),"sky-atmosphere-sun":new tt(ut.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new tt(ut.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new tt(ut.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new tt(ut.paint_sky["sky-gradient-radius"]),"sky-gradient":new At(ut.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new tt(ut.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new tt(ut.paint_sky["sky-atmosphere-color"]),"sky-opacity":new tt(ut.paint_sky["sky-opacity"])})};function rd(i,e,r){const a=[0,0,1],h=sc([]);return au(h,h,r?-fe(i)+Math.PI:fe(i)),Dd(h,h,-fe(e)),wf(a,a,h),io(a,a)}const lm={circle:class extends Ua{constructor(i){super(i,$a)}createBucket(i){return new Vh(i)}queryRadius(i){const e=i;return ah("circle-radius",this,e)+ah("circle-stroke-width",this,e)+$h(this.paint.get("circle-translate"))}queryIntersectsFeature(i,e,r,a,h,m,_,w){const P=iu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),k=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return Tf(i,a,m,_,w,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),P,k)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new Tn(this,i)}},heatmap:class extends Ua{createBucket(i){return new Qd(i)}constructor(i){super(i,ul),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){"heatmap-color"===i&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ap({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return ah("heatmap-radius",this,i)}queryIntersectsFeature(i,e,r,a,h,m,_,w){const P=this.paint.get("heatmap-radius").evaluate(e,r);return Tf(i,a,m,_,w,!0,!0,new se(0,0),P)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new Tn(this,i)}},hillshade:class extends Ua{constructor(i){super(i,Vp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ua{constructor(i){super(i,Bi)}getProgramIds(){const i=this.paint.get("fill-pattern"),e=i&&i.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(i){return new Tn(this,i)}recalculate(i,e){super.recalculate(i,e);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Or(i)}queryRadius(){return $h(this.paint.get("fill-translate"))}queryIntersectsFeature(i,e,r,a,h,m){return!i.queryGeometry.isAboveHorizon&&ih(ru(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends Ua{constructor(i){super(i,c1)}createBucket(i){return new If(i)}queryRadius(){return $h(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new Tn(this,i)}queryIntersectsFeature(i,e,r,a,h,m,_,w,P){const k=iu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),j=this.paint.get("fill-extrusion-height").evaluate(e,r),$=this.paint.get("fill-extrusion-base").evaluate(e,r),G=[0,0],Y=w&&m.elevation,re=m.elevation?m.elevation.exaggeration():1,pe=i.tile.getBucket(this);if(Y&&pe instanceof If){const et=pe.centroidVertexArray,$e=P+1;if($e<et.length){const Qe=et.get($e);G[0]=Qe.a_centroid_pos0,G[1]=Qe.a_centroid_pos1}}if(0===G[0]&&1===G[1])return!1;"globe"===m.projection.name&&(a=By([a],[new se(0,0),new se(wr,wr)],i.tileID.canonical).map(et=>et.polygon).flat());const Ie=($e=a,Qe=$,pt=j,nt=k,Gt=_,Ht=Y?w:null,un=G,Pn=re,Yt=m.center.lat,"globe"===(et=m).projection.name?function(vn,gn,Mn,bn,Wn,Jr,ei,yr,zn,_i,Nr){const Kn=[],fo=[],so=vn.projection.upVectorScale(Nr,vn.center.lat,vn.worldSize).metersToTile,xo=[0,0,0,1],ti=[0,0,0,1],ji=(lo,eo,wo,Wo)=>{lo[0]=eo,lo[1]=wo,lo[2]=Wo,lo[3]=1},po=Ny();Mn>0&&(Mn+=po),bn+=po;for(const lo of gn){const eo=[],wo=[];for(const Wo of lo){const Bs=Wo.x+Wn.x,fl=Wo.y+Wn.y,Mi=vn.projection.projectTilePoint(Bs,fl,Nr),zo=vn.projection.upVector(Nr,Wo.x,Wo.y);let ta=Mn,$i=bn;if(ei){const Ao=Gp(Bs,fl,Mn,bn,ei,yr,zn,_i);ta+=Ao.base,$i+=Ao.top}0!==Mn?ji(xo,Mi.x+zo[0]*so*ta,Mi.y+zo[1]*so*ta,Mi.z+zo[2]*so*ta):ji(xo,Mi.x,Mi.y,Mi.z),ji(ti,Mi.x+zo[0]*so*$i,Mi.y+zo[1]*so*$i,Mi.z+zo[2]*so*$i),Jo(xo,xo,Jr),Jo(ti,ti,Jr),eo.push(pp(xo)),wo.push(pp(ti))}Kn.push(eo),fo.push(wo)}return[Kn,fo]}(et,$e,Qe,pt,nt,Gt,Ht,un,Pn,Yt,i.tileID.canonical):Ht?function(vn,gn,Mn,bn,Wn,Jr,ei,yr,zn){const _i=[],Nr=[],Kn=[0,0,0,1];for(const fo of vn){const so=[],xo=[];for(const ti of fo){const ji=ti.x+bn.x,po=ti.y+bn.y,lo=Gp(ji,po,gn,Mn,Jr,ei,yr,zn);Kn[0]=ji,Kn[1]=po,Kn[2]=lo.base,Kn[3]=1,qh(Kn,Kn,Wn),Kn[3]=Math.max(Kn[3],1e-5);const eo=pp([Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]]);Kn[0]=ji,Kn[1]=po,Kn[2]=lo.top,Kn[3]=1,qh(Kn,Kn,Wn),Kn[3]=Math.max(Kn[3],1e-5);const wo=pp([Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]]);so.push(eo),xo.push(wo)}_i.push(so),Nr.push(xo)}return[_i,Nr]}($e,Qe,pt,nt,Gt,Ht,un,Pn,Yt):function(vn,gn,Mn,bn,Wn){const Jr=[],ei=[],yr=Wn[8]*gn,zn=Wn[9]*gn,_i=Wn[10]*gn,Nr=Wn[11]*gn,Kn=Wn[8]*Mn,fo=Wn[9]*Mn,so=Wn[10]*Mn,xo=Wn[11]*Mn;for(const ti of vn){const ji=[],po=[];for(const lo of ti){const eo=lo.x+bn.x,wo=lo.y+bn.y,Wo=Wn[0]*eo+Wn[4]*wo+Wn[12],Bs=Wn[1]*eo+Wn[5]*wo+Wn[13],fl=Wn[2]*eo+Wn[6]*wo+Wn[14],Mi=Wn[3]*eo+Wn[7]*wo+Wn[15],zo=Wo+yr,ta=Bs+zn,$i=fl+_i,Ao=Math.max(Mi+Nr,1e-5),ya=Wo+Kn,Eo=Bs+fo,Yo=fl+so,Ss=Math.max(Mi+xo,1e-5),xs=new se(zo/Ao,ta/Ao);xs.z=$i/Ao,ji.push(xs);const qa=new se(ya/Ss,Eo/Ss);qa.z=Yo/Ss,po.push(qa)}Jr.push(ji),ei.push(po)}return[Jr,ei]}($e,Qe,pt,nt,Gt)),Ue=i.queryGeometry;var et,$e,Qe,pt,nt,Gt,Ht,un,Pn,Yt;return function(et,$e,Qe){let pt=1/0;ih(Qe,$e)&&(pt=h_(Qe,$e[0]));for(let nt=0;nt<$e.length;nt++){const Gt=$e[nt],Ht=et[nt];for(let un=0;un<Gt.length-1;un++){const Pn=Gt[un],Yt=[Pn,Gt[un+1],Ht[un+1],Ht[un],Pn];wd(Qe,Yt)&&(pt=Math.min(pt,h_(Qe,Yt)))}}return pt!==1/0&&pt}(Ie[0],Ie[1],Ue.isPointQuery()?Ue.screenBounds:Ue.screenGeometry)}},line:class extends Ua{constructor(i){super(i,p_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if("line-gradient"===i){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Pr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,e){super.recalculate(i,e),this.paint._values["line-floorwidth"]=Vm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new zm(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new Tn(this,i)}queryRadius(i){const e=i,r=m_(ah("line-width",this,e),ah("line-gap-width",this,e)),a=ah("line-offset",this,e);return r/2+Math.abs(a)+$h(this.paint.get("line-translate"))}queryIntersectsFeature(i,e,r,a,h,m){if(i.queryGeometry.isAboveHorizon)return!1;const _=ru(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),w=i.pixelToTileUnitsFactor/2*m_(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),P=this.paint.get("line-offset").evaluate(e,r);return P&&(a=function(k,j){const $=[],G=new se(0,0);for(let Y=0;Y<k.length;Y++){const re=k[Y],pe=[];for(let Ie=0;Ie<re.length;Ie++){const Ue=re[Ie-1],et=re[Ie],$e=re[Ie+1],Qe=0===Ie?G:et.sub(Ue)._unit()._perp(),pt=Ie===re.length-1?G:$e.sub(et)._unit()._perp(),nt=Qe._add(pt)._unit();nt._mult(1/(nt.x*pt.x+nt.y*pt.y)),pe.push(nt._mult(j)._add(et))}$.push(pe)}return $}(a,P*i.pixelToTileUnitsFactor)),function(k,j,$){for(let G=0;G<j.length;G++){const Y=j[G];if(k.length>=3)for(let re=0;re<Y.length;re++)if(oh(k,Y[re]))return!0;if(Ed(k,Y,$))return!0}return!1}(_,a,w)}isTileClipped(){return!0}},symbol:am,background:class extends Ua{constructor(i){super(i,gg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ua{constructor(i){super(i,_h)}getProgramIds(){return["raster"]}},sky:class extends Ua{constructor(i){super(i,hl),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){"sky-gradient"===i?this._updateColorRamp():"sky-atmosphere-sun"!==i&&"sky-atmosphere-halo-color"!==i&&"sky-atmosphere-color"!==i&&"sky-atmosphere-sun-intensity"!==i||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ap({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(i,e){if("atmosphere"===this.paint.get("sky-type")){const a=this.paint.get("sky-atmosphere-sun"),h=!a,m=i.style.light,_=m.properties.get("position");return h&&"viewport"===m.properties.get("anchor")&&Jn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?rd(_.azimuthal,90-_.polar,e):rd(a[0],90-a[1],e)}const r=this.paint.get("sky-gradient-center");return rd(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return"atmosphere"===i?["skyboxCapture","skybox"]:"gradient"===i?["skyboxGradient"]:null}}};class dl{constructor(e,r,a,h){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(r,h)}update(e,r,a){const{width:h,height:m}=e,{context:_}=this,{gl:w}=_,{HTMLImageElement:P,HTMLCanvasElement:k,HTMLVideoElement:j,ImageData:$,ImageBitmap:G}=J;if(w.bindTexture(w.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!r||!1!==r.premultiply)),a||this.size&&this.size[0]===h&&this.size[1]===m){const{x:Y,y:re}=a||{x:0,y:0};e instanceof P||e instanceof k||e instanceof j||e instanceof $||G&&e instanceof G?w.texSubImage2D(w.TEXTURE_2D,0,Y,re,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,Y,re,h,m,w.RGBA,w.UNSIGNED_BYTE,e.data)}else this.size=[h,m],e instanceof P||e instanceof k||e instanceof j||e instanceof $||G&&e instanceof G?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,h,m,0,this.format,w.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(e,r){const{context:a}=this,{gl:h}=a;h.bindTexture(h.TEXTURE_2D,this.texture),e!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,e),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?e===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ip{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Wa({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const a=this.getKey(e,r);return this.positions[a]}trim(){const e=this.width,r=this.height=xt(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,a){const h=[];let m=e.length%2==1?-e[e.length-1]*a:0,_=e[0]*a,w=!0;h.push({left:m,right:_,isDash:w,zeroLength:0===e[0]});let P=e[0];for(let k=1;k<e.length;k++){w=!w;const j=e[k];m=P*a,P+=j,_=P*a,h.push({left:m,right:_,isDash:w,zeroLength:0===j})}return h}addRoundDash(e,r,a){const h=r/2;for(let m=-a;m<=a;m++){const _=this.width*(this.nextRow+a+m);let w=0,P=e[w];for(let k=0;k<this.width;k++){k/P.right>1&&(P=e[++w]);const j=Math.abs(k-P.left),$=Math.abs(k-P.right),G=Math.min(j,$);let Y;const re=m/a*(h+1);if(P.isDash){const pe=h-Math.abs(re);Y=Math.sqrt(G*G+pe*pe)}else Y=h-Math.sqrt(G*G+re*re);this.image.data[_+k]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(e,r){for(let P=e.length-1;P>=0;--P){const k=e[P],j=e[P+1];k.zeroLength?e.splice(P,1):j&&j.isDash===k.isDash&&(j.left=k.left,e.splice(P,1))}const a=e[0],h=e[e.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const m=this.width*this.nextRow;let _=0,w=e[_];for(let P=0;P<this.width;P++){P/w.right>1&&(w=e[++_]);const k=Math.abs(P-w.left),j=Math.abs(P-w.right),$=Math.min(k,j);this.image.data[m+P]=Math.max(0,Math.min(255,(w.isDash?$:-$)+r+128))}}addDash(e,r){const a=this.getKey(e,r);if(this.positions[a])return this.positions[a];const h="round"===r,m=h?7:0,_=2*m+1;if(this.nextRow+_>this.height)return Jn("LineAtlas out of space"),null;0===e.length&&e.push(1);let w=0;for(let j=0;j<e.length;j++)e[j]<0&&(Jn("Negative value is found in line dasharray, replacing values with 0"),e[j]=0),w+=e[j];if(0!==w){const j=this.width/w,$=this.getDashRanges(e,this.width,j);h?this.addRoundDash($,j,m):this.addRegularDash($,"square"===r?.5*j:0)}const P=this.nextRow+m;this.nextRow+=_;const k={tl:[P,m],br:[w,0]};return this.positions[a]=k,k}}$n(Ip,"LineAtlas");class Xf{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Kf{constructor(){this.tasks={},this.taskQueue=[],Lt(["process"],this),this.invoker=new Xf(this.process),this.nextId=0}add(e,r){const a=this.nextId++,h=function({type:m,isSymbolTile:_,zoom:w}){return w=w||0,"message"===m?0:"maybePrepare"!==m||_?"parseTile"!==m||_?"parseTile"===m&&_?300-w:"maybePrepare"===m&&_?400-w:500:200-w:100-w}(r);if(0===h){si();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:r,priority:h,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){si();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<r&&(r=m.priority,e=h)}if(null===e)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}class cf{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const a=e[r];this._stringToNumber[a]=r,this._numberToString[r]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Yf=["tile","layer","source","sourceLayer","state"];class uf{constructor(e,r,a,h,m){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=a,this._y=h,this.properties=e.properties,this.id=m}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const r of Yf)void 0!==this[r]&&(e[r]=this[r]);return e}}const Oc=new Uint16Array(8184);for(let i=0;i<2046;i++){let e=i+2,r=0,a=0,h=0,m=0,_=0,w=0;for(1&e?h=m=_=32:r=a=w=32;(e>>=1)>1;){const k=r+h>>1,j=a+m>>1;1&e?(h=r,m=a,r=_,a=w):(r=h,a=m,h=_,m=w),_=k,w=j}const P=4*i;Oc[P+0]=r,Oc[P+1]=a,Oc[P+2]=h,Oc[P+3]=m}const Bl=new Uint16Array(2178),yh=new Uint8Array(1089),Qf=new Uint16Array(1089);function cm(i){return 0===i?-.03125:32===i?.03125:0}var um=hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const hm={type:2,extent:wr,loadGeometry:()=>[[new se(0,0),new se(8193,0),new se(8193,8193),new se(0,8193),new se(0,0)]]};class Mp{constructor(e,r,a,h,m){this.tileID=e,this.uid=Bt(),this.uses=0,this.tileSize=r,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<ri.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=of(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(h,m){const _={};if(!m)return _;for(const w of h){const P=w.layerIds.map(k=>m.getLayer(k)).filter(Boolean);if(0!==P.length){w.layers=P,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(k=>P.filter(j=>j.id===k)[0]));for(const k of P)_[k.id]=w}}return _}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof gh){if(this.hasSymbolBuckets=!0,!a)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof gh&&m.hasRTLText){this.hasRTLText=!0,Ae.isLoading()||Ae.isLoaded()||"deferred"!==ye()||Le();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(h).queryRadius(m))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Ml}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const h=this.buckets[a];h.uploadPending()&&h.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new dl(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new dl(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new dl(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,a,h,m,_,w,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:w,transform:_,params:m,tileTransform:this.tileTransform},e,r,a):{}}querySourceFeatures(e,r){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const h=a.loadVTLayers(),m=r?r.sourceLayer:"",_=h._geojsonTileLayer||h[m];if(!_)return;const w=yc(r&&r.filter),{z:P,x:k,y:j}=this.tileID.canonical,$={z:P,x:k,y:j};for(let G=0;G<_.length;G++){const Y=_.feature(G);if(w.needGeometry){const Ie=oc(Y,!0);if(!w.filter(new De(this.tileID.overscaledZ),Ie,this.tileID.canonical))continue}else if(!w.filter(new De(this.tileID.overscaledZ),Y))continue;const re=a.getId(Y,m),pe=new uf(Y,P,k,j,re);pe.tile=$,e.push(pe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const a=yi(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let h=!1;if(this.expirationTime>a)h=!1;else if(r)if(this.expirationTime<r)h=!0;else{const m=this.expirationTime-r;m?this.expirationTime=a+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!r)return;const a=this.latestFeatureIndex.loadVTLayers(),h=r.style.listImages();for(const m in this.buckets){if(!r.style.hasLayer(m))continue;const _=this.buckets[m],w=_.layers[0].sourceLayer||"_geojsonTileLayer",P=a[w],k=e[w];if(!P||!k||0===Object.keys(k).length)continue;if(_.update(k,P,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof zm||_ instanceof Or){const $=r.style._getSourceCache(_.layers[0].source);r._terrain&&r._terrain.enabled&&$&&_.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile($.id,this.tileID)}const j=r&&r.style&&r.style.getLayer(m);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(_)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ri.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=ri.now()+e}setTexture(e,r){const a=r.context,h=a.gl;this.texture=r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new dl(a,e,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),a.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax))}setDependencies(e,r){const a={};for(const h of r)a[h]=!0;this.dependencies[e]=a}hasDependency(e,r){for(const a of e){const h=this.dependencies[a];if(h)for(const m of r)if(h[m])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||"mercator"===r.name||this._tileDebugBuffer)return;const a=cl(hm,this.tileID.canonical,this.tileTransform)[0],h=new Rn,m=new ca;for(let _=0;_<a.length;_++){const{x:w,y:P}=a[_];h.emplaceBack(w,P),m.emplaceBack(_)}m.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(m),this._tileDebugBuffer=e.createVertexBuffer(h,Uf.members),this._tileDebugSegments=vo.simpleSegment(0,0,h.length,m.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||"mercator"===r.name)return;const a=cl(hm,this.tileID.canonical,this.tileTransform)[0];let h,m;if(this.isRaster){const _=function(w,P){const k=of(w,P),j=Math.pow(2,w.z);for(let Ie=0;Ie<33;Ie++)for(let Ue=0;Ue<33;Ue++){const et=bo((w.x+(Ue+cm(Ue))/32)/j),$e=Ri((w.y+(Ie+cm(Ie))/32)/j),Qe=P.project(et,$e),pt=33*Ie+Ue;Bl[2*pt+0]=Math.round((Qe.x*k.scale-k.x)*wr),Bl[2*pt+1]=Math.round((Qe.y*k.scale-k.y)*wr)}yh.fill(0),Qf.fill(0);for(let Ie=2045;Ie>=0;Ie--){const Ue=4*Ie,et=Oc[Ue+0],$e=Oc[Ue+1],Qe=Oc[Ue+2],pt=Oc[Ue+3],nt=et+Qe>>1,Gt=$e+pt>>1,Ht=nt+Gt-$e,un=Gt+et-nt,Pn=33*$e+et,Yt=33*pt+Qe,pn=33*Gt+nt,vn=Math.hypot((Bl[2*Pn+0]+Bl[2*Yt+0])/2-Bl[2*pn+0],(Bl[2*Pn+1]+Bl[2*Yt+1])/2-Bl[2*pn+1])>=16;if(yh[pn]=yh[pn]||(vn?1:0),Ie<1022){const gn=33*($e+un>>1)+(et+Ht>>1),Mn=33*(pt+un>>1)+(Qe+Ht>>1);yh[pn]=yh[pn]||yh[gn]||yh[Mn]}}const $=new ar,G=new jr;let Y=0;function re(Ie,Ue){const et=33*Ue+Ie;return 0===Qf[et]&&($.emplaceBack(Bl[2*et+0],Bl[2*et+1],Ie*wr/32,Ue*wr/32),Qf[et]=++Y),Qf[et]-1}function pe(Ie,Ue,et,$e,Qe,pt){const nt=Ie+et>>1,Gt=Ue+$e>>1;if(Math.abs(Ie-Qe)+Math.abs(Ue-pt)>1&&yh[33*Gt+nt])pe(Qe,pt,Ie,Ue,nt,Gt),pe(et,$e,Qe,pt,nt,Gt);else{const Ht=re(Ie,Ue),un=re(et,$e),Pn=re(Qe,pt);G.emplaceBack(Ht,un,Pn)}}return pe(0,0,32,32,32,0),pe(32,32,0,0,0,32),{vertices:$,indices:G}}(this.tileID.canonical,r);h=_.vertices,m=_.indices}else{h=new ar,m=new jr;for(const{x:w,y:P}of a)h.emplaceBack(w,P,0,0);const _=Id(h.int16,void 0,4);for(let w=0;w<_.length;w+=3)m.emplaceBack(_[w],_[w+1],_[w+2])}this._tileBoundsBuffer=e.createVertexBuffer(h,um.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(m),this._tileBoundsSegments=vo.simpleSegment(0,0,h.length,m.length)}_makeGlobeTileDebugBuffers(e,r){const a=r.projection;if(!a||"globe"!==a.name||r.freezeTileCoverage)return;const h=this.tileID.canonical,m=$f(lg(h,r)),_=Gf(r.zoom);let w;_>0&&(w=Gh(new Float64Array(16),r.globeMatrix));const P=(h.x+.5)/(1<<h.z)-ha(r.center.lng);let k=0;P>.5?k=-1:P<-.5&&(k=1),this._makeGlobeTileDebugBorderBuffer(e,h,r,m,w,_,k),this._makeGlobeTileDebugTextBuffer(e,h,r,m,w,_,k)}_globePoint(e,r,a,h,m,_,w,P){let k=rf(e,r,a);if(_){const j=1<<a.z,$=[((e/wr+a.x)/j+P)*h,(r/wr+a.y)/j*h,0];Jo($,$,_),k=gi(k,$,w)}return Jo(k,k,m)}_makeGlobeTileDebugBorderBuffer(e,r,a,h,m,_,w){const P=new Rn,k=new ca,j=new Qn,$=(Y,re,pe,Ie,Ue)=>{const et=(pe-Y)/(Ue-1),$e=(Ie-re)/(Ue-1),Qe=P.length;for(let pt=0;pt<Ue;pt++){const nt=Y+pt*et,Gt=re+pt*$e;P.emplaceBack(nt,Gt);const Ht=this._globePoint(nt,Gt,r,a.worldSize,h,m,_,w);j.emplaceBack(Ht[0],Ht[1],Ht[2]),k.emplaceBack(Qe+pt)}},G=wr;$(0,0,G,0,16),$(G,0,G,G,16),$(G,G,0,G,16),$(0,G,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(k),this._tileDebugBuffer=e.createVertexBuffer(P,Uf.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(j,iv.members),this._tileDebugSegments=vo.simpleSegment(0,0,P.length,k.length)}_makeGlobeTileDebugTextBuffer(e,r,a,h,m,_,w){const P=new Rn,k=new jr,j=new Qn,$=25;k.reserve(32),P.reserve($),j.reserve($);const G=(Y,re)=>$*Y+re;for(let Y=0;Y<$;Y++){const re=2048*Y;for(let pe=0;pe<$;pe++){const Ie=2048*pe;P.emplaceBack(Ie,re);const Ue=this._globePoint(Ie,re,r,a.worldSize,h,m,_,w);j.emplaceBack(Ue[0],Ue[1],Ue[2])}}for(let Y=0;Y<4;Y++)for(let re=0;re<4;re++){const pe=G(Y,re),Ie=G(Y,re+1),Ue=G(Y+1,re),et=G(Y+1,re+1);k.emplaceBack(pe,Ie,Ue),k.emplaceBack(Ue,Ie,et)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(k),this._tileDebugTextBuffer=e.createVertexBuffer(P,Uf.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(j,iv.members),this._tileDebugTextSegments=vo.simpleSegment(0,0,$,32)}}class _g{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,a){const h=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},Tt(this.stateChanges[e][h],a),null===this.deletedStates[e]){this.deletedStates[e]={};for(const m in this.state[e])m!==h&&(this.deletedStates[e][m]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][h]){this.deletedStates[e][h]={};for(const m in this.state[e][h])a[m]||(this.deletedStates[e][h][m]=null)}else for(const m in a)this.deletedStates[e]&&this.deletedStates[e][h]&&null===this.deletedStates[e][h][m]&&delete this.deletedStates[e][h][m]}removeFeatureState(e,r,a){if(null===this.deletedStates[e])return;const h=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&void 0!==r)null!==this.deletedStates[e][h]&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][a]=null);else if(void 0!==r)if(this.stateChanges[e]&&this.stateChanges[e][h])for(a in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][a]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,r){const a=String(r),h=Tt({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const m=this.deletedStates[e][r];if(null===m)return{};for(const _ in m)delete h[_]}return h}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const a={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const _ in this.stateChanges[h])this.state[h][_]||(this.state[h][_]={}),Tt(this.state[h][_],this.stateChanges[h][_]),m[_]=this.state[h][_];a[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(null===this.deletedStates[h])for(const _ in this.state[h])m[_]={},this.state[h][_]={};else for(const _ in this.deletedStates[h]){if(null===this.deletedStates[h][_])this.state[h][_]={};else for(const w of Object.keys(this.deletedStates[h][_]))delete this.state[h][_][w];m[_]=this.state[h][_]}a[h]=a[h]||{},Tt(a[h],m)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(a).length)for(const h in e)e[h].setFeatureState(a,r)}}class dm{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const a=this.toIdx(e,r);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function fm(i,e,r,a){let h=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(a[_])<1e-15){if(r[_]<i[_]||r[_]>e[_])return null}else{const w=1/a[_];let P=(i[_]-r[_])*w,k=(e[_]-r[_])*w;if(P>k){const j=P;P=k,k=j}if(P>h&&(h=P),k<m&&(m=k),h>m)return null}return h}function Z_(i,e,r,a,h,m,_,w,P,k,j){const $=a-i,G=h-e,Y=m-r,re=_-i,pe=w-e,Ie=P-r,Ue=j[1]*Ie-j[2]*pe,et=j[2]*re-j[0]*Ie,$e=j[0]*pe-j[1]*re,Qe=$*Ue+G*et+Y*$e;if(Math.abs(Qe)<1e-15)return null;const pt=1/Qe,nt=k[0]-i,Gt=k[1]-e,Ht=k[2]-r,un=(nt*Ue+Gt*et+Ht*$e)*pt;if(un<0||un>1)return null;const Pn=Gt*Y-Ht*G,Yt=Ht*$-nt*Y,pn=nt*G-Gt*$,vn=(j[0]*Pn+j[1]*Yt+j[2]*pn)*pt;return vn<0||un+vn>1?null:(re*Pn+pe*Yt+Ie*pn)*pt}function yg(i,e,r){return(i-e)/(r-e)}function vg(i,e,r,a,h,m,_,w,P){const k=1<<r,j=m-a,$=_-h,G=(i+1)/k*j+a,Y=(e+0)/k*$+h,re=(e+1)/k*$+h;w[0]=(i+0)/k*j+a,w[1]=Y,P[0]=G,P[1]=re}class bg{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(m){const _=Math.ceil(Math.log2(m.dim/8)),w=[];let P=Math.ceil(Math.pow(2,_));const k=1/P,j=(Y,re,pe,Ie,Ue)=>{const et=Ie?1:0,$e=(Y+1)*pe-et,Qe=re*pe,pt=(re+1)*pe-et;Ue[0]=Y*pe,Ue[1]=Qe,Ue[2]=$e,Ue[3]=pt};let $=new dm(P);const G=[];for(let Y=0;Y<P*P;Y++){j(Y%P,Math.floor(Y/P),k,!1,G);const re=Bd(G[0],G[1],m),pe=Bd(G[2],G[1],m),Ie=Bd(G[2],G[3],m),Ue=Bd(G[0],G[3],m);$.minimums.push(Math.min(re,pe,Ie,Ue)),$.maximums.push(Math.max(re,pe,Ie,Ue)),$.leaves.push(1)}for(w.push($),P/=2;P>=1;P/=2){const Y=w[w.length-1];$=new dm(P);for(let re=0;re<P*P;re++){j(re%P,Math.floor(re/P),2,!0,G);const pe=Y.getElevation(G[0],G[1]),Ie=Y.getElevation(G[2],G[1]),Ue=Y.getElevation(G[2],G[3]),et=Y.getElevation(G[0],G[3]),$e=Y.isLeaf(G[0],G[1]),Qe=Y.isLeaf(G[2],G[1]),pt=Y.isLeaf(G[2],G[3]),nt=Y.isLeaf(G[0],G[3]),Gt=Math.min(pe.min,Ie.min,Ue.min,et.min),Ht=Math.max(pe.max,Ie.max,Ue.max,et.max),un=$e&&Qe&&pt&&nt;$.maximums.push(Ht),$.minimums.push(Gt),$.leaves.push(Ht-Gt<=5&&un?1:0)}w.push($)}return w}(this.dem),a=r.length-1,h=r[a];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(r,0,0,a,0)}raycastRoot(e,r,a,h,m,_,w=1){return fm([e,r,-100],[a,h,this.maximums[0]*w],m,_)}raycast(e,r,a,h,m,_,w=1){if(!this.nodeCount)return null;const P=this.raycastRoot(e,r,a,h,m,_,w);if(null==P)return null;const k=[],j=[],$=[],G=[],Y=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;Y.length>0;){const{idx:re,t:pe,nodex:Ie,nodey:Ue,depth:et}=Y.pop();if(this.leaves[re]){vg(Ie,Ue,et,e,r,a,h,$,G);const Qe=1<<et,pt=(Ie+0)/Qe,nt=(Ie+1)/Qe,Gt=(Ue+0)/Qe,Ht=(Ue+1)/Qe,un=Bd(pt,Gt,this.dem)*w,Pn=Bd(nt,Gt,this.dem)*w,Yt=Bd(nt,Ht,this.dem)*w,pn=Bd(pt,Ht,this.dem)*w,vn=Z_($[0],$[1],un,G[0],$[1],Pn,G[0],G[1],Yt,m,_),gn=Z_(G[0],G[1],Yt,$[0],G[1],pn,$[0],$[1],un,m,_),Mn=Math.min(null!==vn?vn:Number.MAX_VALUE,null!==gn?gn:Number.MAX_VALUE);if(Mn!==Number.MAX_VALUE)return Mn;{const bn=kl([],m,_,pe);if(xg(un,Pn,pn,Yt,yg(bn[0],$[0],G[0]),yg(bn[1],$[1],G[1]))>=bn[2])return pe}continue}let $e=0;for(let Qe=0;Qe<this._siblingOffset.length;Qe++){vg((Ie<<1)+this._siblingOffset[Qe][0],(Ue<<1)+this._siblingOffset[Qe][1],et+1,e,r,a,h,$,G),$[2]=-100,G[2]=this.maximums[this.childOffsets[re]+Qe]*w;const pt=fm($,G,m,_);if(null!=pt){const nt=pt;k[Qe]=nt;let Gt=!1;for(let Ht=0;Ht<$e&&!Gt;Ht++)nt>=k[j[Ht]]&&(j.splice(Ht,0,Qe),Gt=!0);Gt||(j[$e]=Qe),$e++}}for(let Qe=0;Qe<$e;Qe++){const pt=j[Qe];Y.push({idx:this.childOffsets[re]+pt,t:k[pt],nodex:(Ie<<1)+this._siblingOffset[pt][0],nodey:(Ue<<1)+this._siblingOffset[pt][1],depth:et+1})}}return null}_addNode(e,r,a){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,a,h,m){if(1===e[h].isLeaf(r,a))return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=h-1,w=e[_];let P=0,k=0;for(let j=0;j<this._siblingOffset.length;j++){const $=2*r+this._siblingOffset[j][0],G=2*a+this._siblingOffset[j][1],Y=w.getElevation($,G),re=w.isLeaf($,G),pe=this._addNode(Y.min,Y.max,re);re&&(P|=1<<j),k||(k=pe)}for(let j=0;j<this._siblingOffset.length;j++)P&1<<j||this._construct(e,2*r+this._siblingOffset[j][0],2*a+this._siblingOffset[j][1],_,k+j)}}function xg(i,e,r,a,h,m){return ur(ur(i,r,m),ur(e,a,m),h)}function Bd(i,e,r){const a=r.dim,h=Je(i*a-.5,0,a-1),m=Je(e*a-.5,0,a-1),_=Math.floor(h),w=Math.floor(m),P=Math.min(_+1,a-1),k=Math.min(w+1,a-1);return xg(r.get(_,w),r.get(P,w),r.get(_,k),r.get(P,k),h-_,m-w)}const cv={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class pm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,a,h=!1,m=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(a&&"mapbox"!==a&&"terrarium"!==a)return Jn(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const _=this.dim=r.height-2,w=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=a||"mapbox",this.borderReady=h,!h){for(let P=0;P<_;P++)w[this._idx(-1,P)]=w[this._idx(0,P)],w[this._idx(_,P)]=w[this._idx(_-1,P)],w[this._idx(P,-1)]=w[this._idx(P,0)],w[this._idx(P,_)]=w[this._idx(P,_-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(_,-1)]=w[this._idx(_-1,0)],w[this._idx(-1,_)]=w[this._idx(0,_-1)],w[this._idx(_,_)]=w[this._idx(_-1,_-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new bg(this)}get(e,r,a=!1){a&&(e=Je(e,-1,this.dim),r=Je(r,-1,this.dim));const h=4*this._idx(e,r);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(e){return cv[e]}get unpackVector(){return cv[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}_unpackMapbox(e,r,a){return(256*e*256+256*r+a)/10-1e4}_unpackTerrarium(e,r,a){return 256*e+r+a/256-32768}static pack(e,r){const a=[0,0,0,0],h=pm.getUnpackVector(r);let m=Math.floor((e+h[3])/h[2]);return a[2]=m%256,m=Math.floor(m/256),a[1]=m%256,m=Math.floor(m/256),a[0]=m,a}getPixels(){return new Ds({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=r*this.dim,m=r*this.dim+this.dim,_=a*this.dim,w=a*this.dim+this.dim;switch(r){case-1:h=m-1;break;case 1:m=h+1}switch(a){case-1:_=w-1;break;case 1:w=_+1}const P=-r*this.dim,k=-a*this.dim;for(let j=_;j<w;j++)for(let $=h;$<m;$++){const G=4*this._idx($,j),Y=4*this._idx($+P,j+k);this.pixels[G+0]=e.pixels[Y+0],this.pixels[G+1]=e.pixels[Y+1],this.pixels[G+2]=e.pixels[Y+2],this.pixels[G+3]=e.pixels[Y+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}$n(pm,"DEMData"),$n(bg,"DemMinMaxQuadTree",{omit:["dem"]});class q_{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,a){const h=e.wrapped().key;void 0===this.data[h]&&(this.data[h]=[]);const m={value:r,timeout:void 0};if(void 0!==a&&(m.timeout=setTimeout(()=>{this.remove(e,m)},a)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const a=e.wrapped().key,h=void 0===r?0:this.data[a].indexOf(r),m=this.data[a][h];return this.data[a].splice(h,1),m.timeout&&clearTimeout(m.timeout),0===this.data[a].length&&delete this.data[a],this.onRemove(m.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const a in this.data)for(const h of this.data[a])e(h.value)||r.push(h);for(const a of r)this.remove(a.value.tileID,a)}}class Jf{constructor(e,r,a){this.func=e,this.mask=r,this.range=a}}Jf.ReadOnly=!1,Jf.ReadWrite=!0,Jf.disabled=new Jf(519,Jf.ReadOnly,[0,1]);class wg{constructor(e,r,a,h,m,_){this.test=e,this.ref=r,this.mask=a,this.fail=h,this.depthFail=m,this.pass=_}}wg.disabled=new wg({func:519,mask:0},0,0,7680,7680,7680);class vh{constructor(e,r,a){this.blendFunction=e,this.blendColor=r,this.mask=a}}vh.Replace=[1,0],vh.disabled=new vh(vh.Replace,Mt.transparent,[!1,!1,!1,!1]),vh.unblended=new vh(vh.Replace,Mt.transparent,[!0,!0,!0,!0]),vh.alphaBlended=new vh([1,771],Mt.transparent,[!0,!0,!0,!0]);class hu{constructor(e,r,a){this.enable=e,this.mode=r,this.frontFace=a}}hu.disabled=new hu(!1,1029,2305),hu.backCCW=new hu(!0,1029,2305),hu.backCW=new hu(!0,1029,2304),hu.frontCW=new hu(!0,1028,2304),hu.frontCCW=new hu(!0,1028,2305);class ep extends qn{constructor(e,r,a){super(),this.id=e,this._onlySymbols=a,r.on("data",h=>{"source"===h.dataType&&"metadata"===h.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===h.dataType&&"content"===h.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new q_(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new _g,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if("loaded"!==r.state&&"errored"!==r.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const r in this._tiles){const a=this._tiles[r];this._source.prepareTile(a)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,a.tileID),a.upload(e),a.prepare(this.map.style.imageManager)}else for(const r in this._tiles){const a=this._tiles[r];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return $t(this._tiles).map(e=>e.tileID).sort(K_).map(e=>e.key)}getRenderableIds(e){const r=[];for(const a in this._tiles)this._isIdRenderable(+a,e)&&r.push(this._tiles[a]);return e?r.sort((a,h)=>{const m=a.tileID,_=h.tileID,w=new se(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),P=new se(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-_.overscaledZ||P.y-w.y||P.x-w.x}).map(a=>a.tileID.key):r.map(a=>a.tileID).sort(K_).map(a=>a.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const a=this._tiles[e];a&&("loading"!==a.state&&(a.state=r),this._loadTile(a,this._tileLoaded.bind(this,a,e,r)))}_tileLoaded(e,r,a,h){if(h)if(e.state="errored",404!==h.status)this._source.fire(new ai(h,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=ri.now(),"expired"===a&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Mr("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let h=0;h<r.length;h++){const m=r[h];if(e.neighboringTiles&&e.neighboringTiles[m]){const _=this.getTileByID(m);a(e,_),a(_,e)}}function a(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let _=m.tileID.canonical.x-h.tileID.canonical.x;const w=m.tileID.canonical.y-h.tileID.canonical.y,P=Math.pow(2,h.tileID.canonical.z),k=m.tileID.key;0===_&&0===w||Math.abs(w)>1||(Math.abs(_)>1&&(1===Math.abs(_+P)?_+=P:1===Math.abs(_-P)&&(_-=P)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,_,w),h.neighboringTiles&&h.neighboringTiles[k]&&(h.neighboringTiles[k].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,a,h){for(const m in this._tiles){let _=this._tiles[m];if(h[m]||!_.hasData()||_.tileID.overscaledZ<=r||_.tileID.overscaledZ>a)continue;let w=_.tileID;for(;_&&_.tileID.overscaledZ>r+1;){const k=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[k.key],_&&_.hasData()&&(w=k)}let P=w;for(;P.overscaledZ>r;)if(P=P.scaledTo(P.overscaledZ-1),e[P.key]){h[w.key]=w;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=r?a:null}for(let a=e.overscaledZ-1;a>=r;a--){const h=e.scaledTo(a),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const a=Math.ceil(e.width/r)+1,h=Math.ceil(e.height/r)+1,m=Math.floor(a*h*5),_="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,m):m,w="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(e){const r=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,r){const a={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+r),a[m.tileID.key]=m}this._tiles=a;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(e,r,a){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let h;this.updateCacheSize(e,r),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(w=>new Ll(w.canonical.z,w.wrap,w.canonical.z,w.canonical.x,w.canonical.y)):(h=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(w=>this._source.hasTile(w)))):h=[];const m=this._updateRetainedTiles(h);if(uv(this._source.type)&&0!==h.length){const w={},P={},k=Object.keys(m);for(const $ of k){const G=m[$],Y=this._tiles[$];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=ri.now())continue;const re=this.findLoadedParent(G,Math.max(G.overscaledZ-ep.maxOverzooming,this._source.minzoom));re&&(this._addTile(re.tileID),w[re.tileID.key]=re.tileID),P[$]=G}const j=h[h.length-1].overscaledZ;for(const $ in this._tiles){const G=this._tiles[$];if(m[$]||!G.hasData())continue;let Y=G.tileID;for(;Y.overscaledZ>j;){Y=Y.scaledTo(Y.overscaledZ-1);const re=this._tiles[Y.key];if(re&&re.hasData()&&P[Y.key]){m[$]=G.tileID;break}}}for(const $ in w)m[$]||(this._coveredTiles[$]=!0,m[$]=w[$])}for(const w in m)this._tiles[w].clearFadeHold();const _=function(w,P){const k=[];for(const j in w)j in P||k.push(j);return k}(this._tiles,m);for(const w of _){const P=this._tiles[w];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(+w)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(0===e.length)return r;const a={},h=e.reduce((k,j)=>Math.min(k,j.overscaledZ),1/0),m=e[0].overscaledZ,_=Math.max(m-ep.maxOverzooming,this._source.minzoom),w=Math.max(m+ep.maxUnderzooming,this._source.minzoom),P={};for(const k of e){const j=this._addTile(k);r[k.key]=k,j.hasData()||h<this._source.maxzoom&&(P[k.key]=k)}this._retainLoadedChildren(P,h,w,r);for(const k of e){let j=this._tiles[k.key];if(j.hasData())continue;if(k.canonical.z>=this._source.maxzoom){const G=k.children(this._source.maxzoom)[0],Y=this.getTile(G);if(Y&&Y.hasData()){r[G.key]=G;continue}}else{const G=k.children(this._source.maxzoom);if(r[G[0].key]&&r[G[1].key]&&r[G[2].key]&&r[G[3].key])continue}let $=j.wasRequested();for(let G=k.overscaledZ-1;G>=_;--G){const Y=k.scaledTo(G);if(a[Y.key]||(a[Y.key]=!0,j=this.getTile(Y),!j&&$&&(j=this._addTile(Y)),j&&(r[Y.key]=Y,$=j.wasRequested(),j.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let a,h=this._tiles[e].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){a=this._loadedParentTiles[h.key];break}r.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(a=this._getLoadedTile(m),a)break;h=m}for(const m of r)this._loadedParentTiles[m]=a}}_addTile(e){let r=this._tiles[e.key];if(r)return this._source.prepareTile&&this._source.prepareTile(r),r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const a=Boolean(r);if(!a){const h=this.map?this.map.painter:null;r=new Mp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._source.prepareTile&&this._source.prepareTile(r)||this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,a||this._source.fire(new Mr("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=r.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&"reloading"!==r.state?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,a){const h=[],m=this.transform;if(!m)return h;const _="globe"===m.projection.name,w=ha(m.center.lng);for(const P in this._tiles){const k=this._tiles[P];if(a&&k.clearQueryDebugViz(),k.holdingForFade())continue;let j;if(_){const $=k.tileID.canonical;if(0===$.z){const G=[Math.abs(Je(w,...tp($,-1))-w),Math.abs(Je(w,...tp($,1))-w)];j=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(Je(w,...tp($,-1))-w),Math.abs(Je(w,...tp($,0))-w),Math.abs(Je(w,...tp($,1))-w)];j=[G.indexOf(Math.min(...G))-1]}}else j=[0];for(const $ of j){const G=e.containsTile(k,m,r,$);G&&h.push(G)}}return h}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);for(const a of r)a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(uv(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=ri.now())return!0}return!1}setFeatureState(e,r,a){this._state.updateState(e=e||"_geojsonTileLayer",r,a)}removeFeatureState(e,r,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,a)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,a){const h=this._tiles[e];h&&h.setDependencies(r,a)}reloadTilesForDependencies(e,r){for(const a in this._tiles)this._tiles[a].hasDependency(e,r)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,r))}_preloadTiles(e,r){const a=new Map,h=Array.isArray(e)?e:[e],m=this.map.painter.terrain,_=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const w of h){const P=w.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const k of P)a.set(k.key,k);this.usedForTerrain&&w.updateElevation(!1)}St(Array.from(a.values()),(w,P)=>{const k=new Mp(w,this._source.tileSize*w.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(k,j=>{"raster-dem"===this._source.type&&k.dem&&this._backfillDEM(k),P(j,k)})},r)}}function K_(i,e){const r=Math.abs(2*i.wrap)-+(i.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return i.overscaledZ-e.overscaledZ||a-r||e.canonical.y-i.canonical.y||e.canonical.x-i.canonical.x}function uv(i){return"raster"===i||"image"===i||"video"===i}function tp(i,e){const r=1<<i.z;return[i.x/r+e,(i.x+1)/r+e]}ep.maxOverzooming=10,ep.maxUnderzooming=3;class Cg{constructor(e,r,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=a}static create(e,r,a){const h=a||e.findDEMTileFor(r);if(!h||!h.dem)return;const m=h.dem,_=h.tileID,w=1<<r.canonical.z-_.canonical.z;return new Cg(h,h.tileSize/wr/w,[(r.canonical.x/w-_.canonical.x)*m.dim,(r.canonical.y/w-_.canonical.y)*m.dim])}tileCoordToPixel(e,r){const a=r*this._scale+this._offset[1],h=Math.floor(e*this._scale+this._offset[0]),m=Math.floor(a);return new se(h,m)}getElevationAt(e,r,a,h){const m=e*this._scale+this._offset[0],_=r*this._scale+this._offset[1],w=Math.floor(m),P=Math.floor(_),k=this._dem;return h=!!h,a?ur(ur(k.get(w,P,h),k.get(w,P+1,h),_-P),ur(k.get(w+1,P,h),k.get(w+1,P+1,h),_-P),m-w):k.get(w,P,h)}getElevationAtPixel(e,r,a){return this._dem.get(e,r,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Cs(1,e)*this._dem.stride}}class Y_{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Il(wr,16,0),this.featureIndexArray=new Ys,this.promoteId=r}insert(e,r,a,h,m,_=0){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,h,m,_);const P=this.grid;for(let k=0;k<r.length;k++){const j=r[k],$=[1/0,1/0,-1/0,-1/0];for(let G=0;G<j.length;G++){const Y=j[G];$[0]=Math.min($[0],Y.x),$[1]=Math.min($[1],Y.y),$[2]=Math.max($[2],Y.x),$[3]=Math.max($[3],Y.y)}$[0]<wr&&$[1]<wr&&$[2]>=0&&$[3]>=0&&P.insert(w,$[0],$[1],$[2],$[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Pc.VectorTile(new _p(this.rawTileData)).layers,this.sourceLayerCoder=new cf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,a,h){this.loadVTLayers();const m=e.params||{},_=yc(m.filter),w=e.tileResult,P=e.transform,k=w.bufferedTilespaceBounds,j=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,(re,pe,Ie,Ue)=>Xd(w.bufferedTilespaceGeometry,re,pe,Ie,Ue));j.sort(Tg);let $=null;P.elevation&&j.length>0&&($=Cg.create(P.elevation,this.tileID));const G={};let Y;for(let re=0;re<j.length;re++){const pe=j[re];if(pe===Y)continue;Y=pe;const Ie=this.featureIndexArray.get(pe);let Ue=null;this.loadMatchingFeature(G,Ie,_,m.layers,m.availableImages,r,a,h,(et,$e,Qe,pt=0)=>(Ue||(Ue=cl(et,this.tileID.canonical,e.tileTransform)),$e.queryIntersectsFeature(w,et,Qe,Ue,this.z,e.transform,e.pixelPosMatrix,$,pt)))}return G}loadMatchingFeature(e,r,a,h,m,_,w,P,k){const{featureIndex:j,bucketIndex:$,sourceLayerIndex:G,layoutVertexArrayOffset:Y}=r,re=this.bucketLayerIDs[$];if(h&&!function(et,$e){for(let Qe=0;Qe<et.length;Qe++)if($e.indexOf(et[Qe])>=0)return!0;return!1}(h,re))return;const pe=this.sourceLayerCoder.decode(G),Ie=this.vtLayers[pe].feature(j);if(a.needGeometry){const et=oc(Ie,!0);if(!a.filter(new De(this.tileID.overscaledZ),et,this.tileID.canonical))return}else if(!a.filter(new De(this.tileID.overscaledZ),Ie))return;const Ue=this.getId(Ie,pe);for(let et=0;et<re.length;et++){const $e=re[et];if(h&&h.indexOf($e)<0)continue;const Qe=_[$e];if(!Qe)continue;let pt={};void 0!==Ue&&P&&(pt=P.getState(Qe.sourceLayer||"_geojsonTileLayer",Ue));const nt=Tt({},w[$e]);nt.paint=Q_(nt.paint,Qe.paint,Ie,pt,m),nt.layout=Q_(nt.layout,Qe.layout,Ie,pt,m);const Gt=!k||k(Ie,Qe,pt,Y);if(!Gt)continue;const Ht=new uf(Ie,this.z,this.x,this.y,Ue);Ht.layer=nt;let un=e[$e];void 0===un&&(un=e[$e]=[]),un.push({featureIndex:j,feature:Ht,intersectionZ:Gt})}}lookupSymbolFeatures(e,r,a,h,m,_,w,P){const k={};this.loadVTLayers();const j=yc(m);for(const $ of e)this.loadMatchingFeature(k,{bucketIndex:a,sourceLayerIndex:h,featureIndex:$,layoutVertexArrayOffset:0},j,_,w,P,r);return k}loadFeature(e){const{featureIndex:r,sourceLayerIndex:a}=e;this.loadVTLayers();const h=this.sourceLayerCoder.decode(a),m=this.vtFeatures[h];if(m[r])return m[r];const _=this.vtLayers[h].feature(r);return m[r]=_,_}hasLayer(e){for(const r of this.bucketLayerIDs)for(const a of r)if(e===a)return!0;return!1}getId(e,r){let a=e.id;return this.promoteId&&(a=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[r]],"boolean"==typeof a&&(a=Number(a))),a}}function Q_(i,e,r,a,h){return Zt(i,(m,_)=>{const w=e instanceof st?e.get(_):null;return w&&w.evaluate?w.evaluate(r,a,h):w})}function Tg(i,e){return e-i}$n(Y_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class gm{constructor(e){const r={},a=[];for(const w in e){const P=e[w],k=r[w]={};for(const j in P.glyphs){const $=P.glyphs[+j];if(!$||0===$.bitmap.width||0===$.bitmap.height)continue;const G=$.metrics.localGlyph?2:1,Y={x:0,y:0,w:$.bitmap.width+2*G,h:$.bitmap.height+2*G};a.push(Y),k[j]=Y}}const{w:h,h:m}=qp(a),_=new Wa({width:h||1,height:m||1});for(const w in e){const P=e[w];for(const k in P.glyphs){const j=P.glyphs[+k];if(!j||0===j.bitmap.width||0===j.bitmap.height)continue;const $=r[w][k],G=j.metrics.localGlyph?2:1;Wa.copy(j.bitmap,_,{x:0,y:0},{x:$.x+G,y:$.y+G},j.bitmap)}}this.image=_,this.positions=r}}$n(gm,"GlyphAtlas");class hv{constructor(e){this.tileID=new Ll(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=of(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,a,h,m){this.status="parsing",this.data=e,this.collisionBoxArray=new Ml;const _=new cf(Object.keys(e.layers).sort()),w=new Y_(this.tileID,this.promoteId);w.bucketLayerIDs=[];const P={},k=new Ip(256,256),j={featureIndex:w,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:k,availableImages:a},$=r.familiesBySource[this.source];for(const pt in $){const nt=e.layers[pt];if(!nt)continue;let Gt=!1,Ht=!1;for(const Yt of $[pt])"symbol"===Yt[0].type?Gt=!0:Ht=!0;if(!0===this.isSymbolTile&&!Gt||!1===this.isSymbolTile&&!Ht)continue;1===nt.version&&Jn(`Vector tile source "${this.source}" layer "${pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const un=_.encode(pt),Pn=[];for(let Yt=0;Yt<nt.length;Yt++){const pn=nt.feature(Yt),vn=w.getId(pn,pt);Pn.push({feature:pn,id:vn,index:Yt,sourceLayerIndex:un})}for(const Yt of $[pt]){const pn=Yt[0];void 0!==this.isSymbolTile&&"symbol"===pn.type!==this.isSymbolTile||pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||"none"!==pn.visibility&&(Dg(Yt,this.zoom,a),(P[pn.id]=pn.createBucket({index:w.bucketLayerIDs.length,layers:Yt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:un,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:a})).populate(Pn,j,this.tileID.canonical,this.tileTransform),w.bucketLayerIDs.push(Yt.map(vn=>vn.id)))}}let G,Y,re,pe;k.trim();const Ie={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ue=Zt(j.glyphDependencies,pt=>Object.keys(pt).map(Number));Object.keys(Ue).length?h.send("getGlyphs",{uid:this.uid,stacks:Ue},(pt,nt)=>{G||(G=pt,Y=nt,Qe.call(this))},void 0,!1,Ie):Y={};const et=Object.keys(j.iconDependencies);et.length?h.send("getImages",{icons:et,source:this.source,tileID:this.tileID,type:"icons"},(pt,nt)=>{G||(G=pt,re=nt,Qe.call(this))},void 0,!1,Ie):re={};const $e=Object.keys(j.patternDependencies);function Qe(){if(G)return m(G);if(Y&&re&&pe){const pt=new gm(Y),nt=new zu(re,pe);for(const Gt in P){const Ht=P[Gt];Ht instanceof gh?(Dg(Ht.layers,this.zoom,a),tv(Ht,Y,pt.positions,re,nt.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection)):Ht.hasPattern&&(Ht instanceof zm||Ht instanceof Or||Ht instanceof If)&&(Dg(Ht.layers,this.zoom,a),Ht.addFeatures(j,this.tileID.canonical,nt.patternPositions,a,this.tileTransform))}this.status="done",m(null,{buckets:$t(P).filter(Gt=>!Gt.isEmpty()),featureIndex:w,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pt.image,lineAtlas:k,imageAtlas:nt,glyphMap:this.returnDependencies?Y:null,iconMap:this.returnDependencies?re:null,glyphPositions:this.returnDependencies?pt.positions:null})}}$e.length?h.send("getImages",{icons:$e,source:this.source,tileID:this.tileID,type:"patterns"},(pt,nt)=>{G||(G=pt,pe=nt,Qe.call(this))},void 0,!1,Ie):pe={},Qe.call(this)}}function Dg(i,e,r){const a=new De(e);for(const h of i)h.recalculate(a,r)}class J_{constructor(e){this.entries={},this.scheduler=e}request(e,r,a,h){const m=this.entries[e]=this.entries[e]||{callbacks:[]};if(m.result){const[_,w]=m.result;return this.scheduler?this.scheduler.add(()=>{h(_,w)},r):h(_,w),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=a((_,w)=>{m.result=[_,w];for(const P of m.callbacks)this.scheduler?this.scheduler.add(()=>{P(_,w)},r):P(_,w);setTimeout(()=>delete this.entries[e],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(_=>_!==h),m.callbacks.length||(m.cancel(),delete this.entries[e]))}}}function ey(i,e,r){const a=JSON.stringify(i.request);return i.data&&(this.deduped.entries[a]={result:[null,i.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},h=>{const m=It(i.request,(_,w,P,k)=>{_?h(_):w&&h(null,{vectorTile:r?void 0:new Pc.VectorTile(new _p(w)),rawData:w,cacheControl:P,expires:k})});return()=>{m.cancel(),h()}},e)}l.ARRAY_TYPE=Qs,l.AUTH_ERR_MSG=Gr,l.Aabb=ma,l.Actor=class{constructor(i,e,r){this.target=i,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},Lt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=si()?i:J,this.scheduler=new Kf}send(i,e,r,a,h=!1,m){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=m,this.callbacks[_]=r);const w=Pi(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:i,hasCallback:!!r,targetMapId:a,mustQueue:h,sourceMapId:this.mapId,data:To(e,w)},w),{cancel:()=>{r&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(i){const e=i.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const a=this.cancelCallbacks[r];delete this.cancelCallbacks[r],a&&a.cancel()}else if(e.mustQueue||si()){const a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),a&&a.metadata||{type:"message"})}else this.processTask(r,e)}processTask(i,e){if("<response>"===e.type){const r=this.callbacks[i];delete this.callbacks[i],r&&(e.error?r(Es(e.error)):r(null,Es(e.data)))}else{const r=Pi(this.globalScope)?void 0:[],a=e.hasCallback?(m,_)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:m?To(m):null,data:To(_,r)},r)}:m=>{},h=Es(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,h,a);else if(this.parent.getWorkerSource){const m=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,m[0],h.source)[m[1]](h,a)}else a(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.CanonicalTileID=Nm,l.Color=Mt,l.ColorMode=vh,l.CullFaceMode=hu,l.DEMData=pm,l.DataConstantProperty=tt,l.DedupedRequest=J_,l.DepthMode=Jf,l.EXTENT=wr,l.Elevation=class{isDataAvailableAtPoint(i){const e=this._source();if(!e||i.y<0||i.y>1)return!1;const r=e.getSource().maxzoom,a=1<<r,h=Math.floor(i.x),m=Math.floor((i.x-h)*a),_=Math.floor(i.y*a),w=this.findDEMTileFor(new Ll(r,h,r,m,_));return!(!w||!w.dem)}getAtPointOrZero(i,e=0){return this.getAtPoint(i,e)||0}getAtPoint(i,e,r=!0){null==e&&(e=null);const a=this._source();if(!a||i.y<0||i.y>1)return e;const h=a.getSource().maxzoom,m=1<<h,_=Math.floor(i.x),w=i.x-_,P=new Ll(h,_,h,Math.floor(w*m),Math.floor(i.y*m)),k=this.findDEMTileFor(P);if(!k||!k.dem)return e;const j=k.dem,$=1<<k.tileID.canonical.z,G=(w*$-k.tileID.canonical.x)*j.dim,Y=(i.y*$-k.tileID.canonical.y)*j.dim,re=Math.floor(G),pe=Math.floor(Y);return(r?this.exaggeration():1)*ur(ur(j.get(re,pe),j.get(re,pe+1),Y-pe),ur(j.get(re+1,pe),j.get(re+1,pe+1),Y-pe),G-re)}getAtTileOffset(i,e,r){const a=1<<i.canonical.z;return this.getAtPointOrZero(new Xo(i.wrap+(i.canonical.x+e/wr)/a,(i.canonical.y+r/wr)/a))}getAtTileOffsetFunc(i,e,r,a){return h=>{const m=this.getAtTileOffset(i,h.x,h.y),_=a.upVector(i.canonical,h.x,h.y);return is(_,_,m*a.upVectorScale(i.canonical,e,r).metersToTile),_}}getForTilePoints(i,e,r,a){const h=Cg.create(this,i,a);return!!h&&(e.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],r)}),!0)}getMinMaxForTile(i){const e=this.findDEMTileFor(i);if(!e||!e.dem)return null;const r=e.dem.tree,a=e.tileID,h=1<<i.canonical.z-a.canonical.z;let m=i.canonical.x/h-a.canonical.x,_=i.canonical.y/h-a.canonical.y,w=0;for(let P=0;P<i.canonical.z-a.canonical.z&&!r.leaves[w];P++){m*=2,_*=2;const k=2*Math.floor(_)+Math.floor(m);w=r.childOffsets[w]+k,m%=1,_%=1}return{min:this.exaggeration()*r.minimums[w],max:this.exaggeration()*r.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},l.ErrorEvent=ai,l.EvaluationParameters=De,l.Event=Mr,l.Evented=qn,l.FillExtrusionBucket=If,l.Frustum=Yd,l.FrustumCorners=Kd,l.GLOBE_METERS_TO_ECEF=Mo,l.GLOBE_RADIUS=fh,l.GLOBE_SCALE_MATCH_LATITUDE=45,l.GLOBE_ZOOM_THRESHOLD_MAX=6,l.GLOBE_ZOOM_THRESHOLD_MIN=5,l.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_createGrid(i){const e=new Rn,r=new jr,a=65;for(let h=0;h<a;h++)for(let m=0;m<a;m++)e.emplaceBack(m,h);this._gridSegments=[];for(let h=0,m=0;h<Ld.length;h++){const _=Ld[h];for(let P=0;P<_;P++)for(let k=0;k<64;k++){const j=P*a+k;r.emplaceBack(j+1,j,j+a),r.emplaceBack(j+a,j+a+1,j+1)}const w=64*_*2;this._gridSegments.push(vo.simpleSegment(0,m,(_+1)*a,w)),m+=w}this._gridBuffer=i.createVertexBuffer(e,Uf.members),this._gridIndexBuffer=i.createIndexBuffer(r,!0)}_createPoles(i){const e=new jr;for(let h=0;h<=64;h++)e.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=i.createIndexBuffer(e,!0);const r=new $o,a=new $o;this._poleSegments=[];for(let h=0,m=0;h<5;h++){const _=360/(1<<h);r.emplaceBack(0,-fh,0,.5,0),a.emplaceBack(0,-fh,0,.5,1);for(let w=0;w<=64;w++){const P=w/64,k=ur(0,_,P),[j,$,G]=Hf(dg,p1,k,fh);r.emplaceBack(j,$,G,P,0),a.emplaceBack(j,$,G,P,1)}this._poleSegments.push(vo.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(r,F_,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(a,F_,!1)}getGridBuffers(i){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[i]]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,e){if(!this._wireframeSegments){const r=new ds,a=64,h=a+1;this._wireframeSegments=[];for(let m=0,_=0;m<Ld.length;m++){const w=Ld[m];for(let k=0;k<w;k++)for(let j=0;j<a;j++){const $=k*h+j;r.emplaceBack($,$+1),r.emplaceBack($,$+h),r.emplaceBack($,$+h+1)}const P=w*a*3;this._wireframeSegments.push(vo.simpleSegment(0,_,(w+1)*h,P)),_+=P}this._wireframeIndexBuffer=i.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},l.GlyphManager=tf,l.ImagePosition=qm,l.LineAtlas=Ip,l.LngLat=li,l.LngLatBounds=eu,l.LocalGlyphMode=zf,l.MAX_MERCATOR_LATITUDE=da,l.MercatorCoordinate=Xo,l.ONE_EM=24,l.OverscaledTileID=Ll,l.Properties=sn,l.RGBAImage=Ds,l.Ray=pa,l.RequestManager=class{constructor(i,e,r){this._transformRequestFn=i,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const i=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Hr,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,e){return this._transformRequestFn&&this._transformRequestFn(i,e)||{url:i}}normalizeStyleURL(i,e){if(!Er(i))return i;const r=ir(i);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(i,e){if(!Er(i))return i;const r=ir(i);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(i,e,r,a){if(!Er(i))return i;const h=ir(i);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),r&&h.params.push(`language=${r}`),a&&h.params.push(`worldview=${a}`),this._makeAPIURL(h,this._customAccessToken||e)}normalizeSpriteURL(i,e,r,a){const h=ir(i);return Er(i)?(h.path=`/styles/v1${h.path}/sprite${e}${r}`,this._makeAPIURL(h,this._customAccessToken||a)):(h.path+=`${e}${r}`,Pt(h))}normalizeTileURL(i,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Er(i))return i;const a=ir(i);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&"raster"!==a.authority&&512===r?"@2x":""}${_o.supported?".webp":"$1"}`),"raster"===a.authority?a.path=`/${pr.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${pr.TILE_URL_VERSION}${a.path}`);const h=this._customAccessToken||function(m){for(const _ of m){const w=_.match(/^access_token=(.*)$/);if(w)return w[1]}return null}(a.params)||pr.ACCESS_TOKEN;return pr.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&a.params.push(`sku=${this._skuToken}`),this._makeAPIURL(a,h)}canonicalizeTileURL(i,e){const r=ir(i);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return i;let a="mapbox://";r.path.match(/^\/raster\/v1\//)?a+=`raster/${r.path.replace(`/${pr.RASTER_URL_PREFIX}/`,"")}`:a+=`tiles/${r.path.replace(`/${pr.TILE_URL_VERSION}/`,"")}`;let h=r.params;return e&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(a+=`?${h.join("&")}`),a}canonicalizeTileset(i,e){const r=!!e&&Er(e),a=[];for(const h of i.tiles||[])Cr(h)?a.push(this.canonicalizeTileURL(h,r)):a.push(h);return a}_makeAPIURL(i,e){const r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=ir(pr.API_URL);if(i.protocol=a.protocol,i.authority=a.authority,"http"===i.protocol){const h=i.params.indexOf("secure");h>=0&&i.params.splice(h,1)}if("/"!==a.path&&(i.path=`${a.path}${i.path}`),!pr.REQUIRE_ACCESS_TOKEN)return Pt(i);if(e=e||pr.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return i.params=i.params.filter(h=>-1===h.indexOf("access_token")),i.params.push(`access_token=${e||""}`),Pt(i)}},l.ResourceType=it,l.SegmentVector=vo,l.SourceCache=ep,l.StencilMode=wg,l.StructArrayLayout1ui2=ca,l.StructArrayLayout2f1f2i16=Ks,l.StructArrayLayout2i4=Rn,l.StructArrayLayout2ui4=ds,l.StructArrayLayout3f12=Gi,l.StructArrayLayout3ui6=jr,l.StructArrayLayout4i8=ar,l.StructArrayLayout5f20=$o,l.Texture=dl,l.Tile=Mp,l.Transitionable=Ve,l.Uniform1f=Qc,l.Uniform1i=class extends Tc{constructor(i){super(i),this.current=0}set(i,e,r){this.fetchUniformLocation(i,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},l.Uniform2f=class extends Tc{constructor(i){super(i),this.current=[0,0]}set(i,e,r){this.fetchUniformLocation(i,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},l.Uniform3f=class extends Tc{constructor(i){super(i),this.current=[0,0,0]}set(i,e,r){this.fetchUniformLocation(i,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},l.Uniform4f=nc,l.UniformColor=Dc,l.UniformMatrix2f=class extends Tc{constructor(i){super(i),this.current=vd}set(i,e,r){if(this.fetchUniformLocation(i,e))for(let a=0;a<4;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},l.UniformMatrix3f=class extends Tc{constructor(i){super(i),this.current=_r}set(i,e,r){if(this.fetchUniformLocation(i,e))for(let a=0;a<9;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},l.UniformMatrix4f=class extends Tc{constructor(i){super(i),this.current=rc}set(i,e,r){if(this.fetchUniformLocation(i,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let a=1;a<16;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},l.UnwrappedTileID=jy,l.ValidationError=Un,l.VectorTileWorkerSource=class extends qn{constructor(i,e,r,a,h){super(),this.actor=i,this.layerIndex=e,this.availableImages=r,this.loadVectorData=h||ey,this.loading={},this.loaded={},this.deduped=new J_(i.scheduler),this.isSpriteLoaded=a,this.scheduler=i.scheduler}loadTile(i,e){const r=i.uid,a=i&&i.request,h=a&&a.collectResourceTiming,m=this.loading[r]=new hv(i);m.abort=this.loadVectorData(i,(_,w)=>{const P=!this.loading[r];if(delete this.loading[r],P||_||!w)return m.status="done",P||(this.loaded[r]=m),e(_);const k=w.rawData,j={};w.expires&&(j.expires=w.expires),w.cacheControl&&(j.cacheControl=w.cacheControl),m.vectorTile=w.vectorTile||new Pc.VectorTile(new _p(k));const $=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(G,Y)=>{if(G||!Y)return e(G);const re={};if(h){const pe=ui(a);pe.length>0&&(re.resourceTiming=JSON.parse(JSON.stringify(pe)))}e(null,Tt({rawTileData:k.slice(0)},Y,j,re))})};this.isSpriteLoaded?$():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add($,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):$()}),this.loaded=this.loaded||{},this.loaded[r]=m})}reloadTile(i,e){const r=this.loaded,a=i.uid,h=this;if(r&&r[a]){const m=r[a];m.showCollisionBoxes=i.showCollisionBoxes,m.enableTerrain=!!i.enableTerrain,m.projection=i.projection,m.tileTransform=of(i.tileID.canonical,i.projection);const _=(w,P)=>{const k=m.reloadCallback;k&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,k)),e(w,P)};"parsing"===m.status?m.reloadCallback=_:"done"===m.status&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(i,e){const r=i.uid,a=this.loading[r];a&&(a.abort&&a.abort(),delete this.loading[r]),e()}removeTile(i,e){const r=this.loaded,a=i.uid;r&&r[a]&&delete r[a],e()}},l.WritingMode=Fl,l.ZoomHistory=pd,l.add=Dr,l.addDynamicAttributes=sm,l.adjoint=function(i,e){var r=e[0],a=e[1],h=e[2],m=e[3],_=e[4],w=e[5],P=e[6],k=e[7],j=e[8];return i[0]=_*j-w*k,i[1]=h*k-a*j,i[2]=a*w-h*_,i[3]=w*P-m*j,i[4]=r*j-h*P,i[5]=h*m-r*w,i[6]=m*k-_*P,i[7]=a*P-r*k,i[8]=r*_-a*m,i},l.asyncAll=St,l.bezier=Ye,l.bindAll=Lt,l.boundsAttributes=um,l.bufferConvexPolygon=function(i,e){const r=[];for(let a=0;a<i.length;a++){const h=yt(a-1,-1,i.length-1),m=yt(a+1,-1,i.length-1),_=i[a],w=i[m],P=i[h].sub(_).unit(),k=w.sub(_).unit(),j=k.angleWithSep(P.x,P.y),$=P.add(k).unit().mult(-1*e/Math.sin(j/2));r.push(_.add($))}return r},l.cacheEntryPossiblyAdded=function(i){Ge++,Ge>Tr&&(i.getActor().send("enforceCacheSizeLimit",ao),Ge=0)},l.calculateGlobeLabelMatrix=function(i,e){const{x:r,y:a}=i.point,h=B_(r,a,i.worldSize/i._pixelsPerMercatorPixel,0,0);return ou(h,h,Jp(mh(e)))},l.calculateGlobeMatrix=function(i){const{x:e,y:r}=i.point,{lng:a,lat:h}=i._center;return B_(e,r,i.worldSize,a,h)},l.calculateGlobeMercatorMatrix=function(i){const e=i.pixelsPerMeter,r=e/Cs(1,i.center.lat),a=No(new Float64Array(16));return T(a,a,[i.point.x,i.point.y,0]),x(a,a,[r,r,e]),Float32Array.from(a)},l.circumferenceAtLatitude=rh,l.clamp=Je,l.clearTileCache=function(i){const e=ke(),r=[];for(const a in Nn)e&&r.push(e.delete(a)),delete Nn[a];i&&Promise.all(r).catch(i).then(()=>i())},l.clipLine=Qm,l.clone=function(i){var e=new Qs(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},l.clone$1=mn,l.collisionCircleLayout=Of,l.config=pr,l.conjugate=function(i,e){return i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i[3]=e[3],i},l.create=function(){var i=new Qs(16);return Qs!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=Nu,l.createExpression=ia,l.createLayout=hn,l.createStyleLayer=function(i){return"custom"===i.type?new Sp(i):new lm[i.type](i)},l.cross=su,l.degToRad=fe,l.distance=function(i,e){return Math.hypot(e[0]-i[0],e[1]-i[1],e[2]-i[2])},l.div=function(i,e,r){return i[0]=e[0]/r[0],i[1]=e[1]/r[1],i[2]=e[2]/r[2],i},l.dot=Go,l.ease=Se,l.easeCubicInOut=Fe,l.emitValidationErrors=Sl,l.endsWith=Xt,l.enforceCacheSizeLimit=function(i){for(const e in Nn)ne(e),Nn[e].then(r=>{r.keys().then(a=>{for(let h=0;h<a.length-i;h++)r.delete(a[h])})})},l.evaluateSizeForFeature=kf,l.evaluateSizeForZoom=kd,l.evaluateVariableOffset=k_,l.evented=ae,l.exactEquals=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]&&i[3]===e[3]},l.exactEquals$1=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]},l.exported=ri,l.exported$1=_o,l.extend=Tt,l.extend$1=hr,l.fillExtrusionHeightLift=Ny,l.filterObject=cn,l.fromMat4=function(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],i},l.fromQuat=function(i,e){var r=e[0],a=e[1],h=e[2],m=e[3],_=r+r,w=a+a,P=h+h,k=r*_,j=a*_,$=a*w,G=h*_,Y=h*w,re=h*P,pe=m*_,Ie=m*w,Ue=m*P;return i[0]=1-$-re,i[1]=j+Ue,i[2]=G-Ie,i[3]=0,i[4]=j-Ue,i[5]=1-k-re,i[6]=Y+pe,i[7]=0,i[8]=G+Ie,i[9]=Y-pe,i[10]=1-k-$,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.fromRotation=function(i,e){var r=Math.sin(e),a=Math.cos(e);return i[0]=a,i[1]=r,i[2]=0,i[3]=-r,i[4]=a,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=W,l.furthestTileCorner=function(i){const e=Math.round((i+45+360)%360/90)%4;return xe[e]},l.getAABBPointSquareDist=function(i,e,r){let a=0;for(let h=0;h<2;++h){const m=r?r[h]:0;i[h]>m&&(a+=(i[h]-m)*(i[h]-m)),e[h]<m&&(a+=(m-e[h])*(m-e[h]))}return a},l.getAnchorAlignment=xp,l.getAnchorJustification=Yp,l.getBounds=function(i){let e=1/0,r=1/0,a=-1/0,h=-1/0;for(const m of i)e=Math.min(e,m.x),r=Math.min(r,m.y),a=Math.max(a,m.x),h=Math.max(h,m.y);return{min:new se(e,r),max:new se(a,h)}},l.getColumn=An,l.getGridMatrix=function(i,e,r){const a=e.getNorth(),h=e.getSouth(),m=e.getWest(),_=.015625;return[0,(e.getEast()-m)*_,1<<i.z,(h-a)/Ld[r],0,i.y,a,m,_]},l.getImage=Xn,l.getJSON=function(i,e){return at(Tt(i,{type:"json"}),e)},l.getLatitudinalLod=function(i){const e=80.051129;i=Je(i,-80.051129,e)/e*90;const r=Math.pow(Math.abs(Math.sin(fe(i))),3);return Math.round(r*(Ld.length-1))},l.getMapSessionAPI=fn,l.getPerformanceMeasurement=ui,l.getProjection=rm,l.getRTLTextPluginStatus=ye,l.getReferrer=wt,l.getTilePoint=function(i,{x:e,y:r},a=0){return new se(((e-a)*i.scale-i.x)*wr,(r*i.scale-i.y)*wr)},l.getTileVec3=function(i,e,r=0){return Ii(((e.x-r)*i.scale-i.x)*wr,(e.y*i.scale-i.y)*wr,Bh(e.z,e.y))},l.getVideo=function(i,e){const r=J.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let a=0;a<i.length;a++){const h=J.document.createElement("source");Jt(i[a])||(r.crossOrigin="Anonymous"),h.src=i[a],r.appendChild(h)}return{cancel:()=>{}}},l.globeCenterToScreenPoint=function(i){const e=[0,0,0],r=No(new Float64Array(16));return ou(r,i.pixelMatrix,i.globeMatrix),Jo(e,e,r),new se(e[0],e[1])},l.globeDenormalizeECEF=Jp,l.globeECEFOrigin=function(i,e){const r=[0,0,0];return Jo(r,r,$f(mh(e.canonical))),Jo(r,r,i),r},l.globeNormalizeECEF=$f,l.globePixelsToTileUnits=function(i,e){return wr/(512*Math.pow(2,i))*Cp(mh(e))},l.globePoleMatrixForTile=function(i,e,r){const a=No(new Float64Array(16)),h=(e/(1<<i)-.5)*Math.PI*2;return R(a,r.globeMatrix,h),Float32Array.from(a)},l.globeTileBounds=mh,l.globeTiltAtLngLat=z_,l.globeToMercatorTransition=Gf,l.globeUseCustomAntiAliasing=function(i,e,r){const a=Gf(r.zoom),h=i.style.map._antialias,m=!!e.extStandardDerivatives,_=e.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return 0===a&&!h&&!_&&m},l.identity=No,l.identity$1=sc,l.invert=Gh,l.isFullscreen=function(){return!!J.document.fullscreenElement||!!J.document.webkitFullscreenElement},l.isLngLatBehindGlobe=function(i,e){return z_(i,e)>Math.PI/2*1.01},l.isMapAuthenticated=function(i){return Rr.has(i)},l.isMapboxURL=Er,l.isSafariWithAntialiasingBug=function(i){const e=i.navigator?i.navigator.userAgent:null;return!!Pi(i)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.latFromMercatorY=Ri,l.len=Ef,l.length=cr,l.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},l.loadVectorTile=ey,l.makeRequest=at,l.mapValue=function(i,e,r,a,h){return Je((i-e)/(r-e)*(h-a)+a,a,h)},l.mercatorScale=Ha,l.mercatorXfromLng=ha,l.mercatorYfromLat=qo,l.mercatorZfromAltitude=Cs,l.mul=Ze,l.mul$1=Zh,l.multiply=ou,l.multiply$1=function(i,e,r){var a=e[0],h=e[1],m=e[2],_=e[3],w=e[4],P=e[5],k=e[6],j=e[7],$=e[8],G=r[0],Y=r[1],re=r[2],pe=r[3],Ie=r[4],Ue=r[5],et=r[6],$e=r[7],Qe=r[8];return i[0]=G*a+Y*_+re*k,i[1]=G*h+Y*w+re*j,i[2]=G*m+Y*P+re*$,i[3]=pe*a+Ie*_+Ue*k,i[4]=pe*h+Ie*w+Ue*j,i[5]=pe*m+Ie*P+Ue*$,i[6]=et*a+$e*_+Qe*k,i[7]=et*h+$e*w+Qe*j,i[8]=et*m+$e*P+Qe*$,i},l.multiply$2=$r,l.nextPowerOfTwo=xt,l.normalize=io,l.normalize$1=function(i,e){var r=e[0],a=e[1],h=e[2],m=e[3],_=r*r+a*a+h*h+m*m;return _>0&&(_=1/Math.sqrt(_)),i[0]=r*_,i[1]=a*_,i[2]=h*_,i[3]=m*_,i},l.number=ur,l.ortho=function(i,e,r,a,h,m,_){var w=1/(e-r),P=1/(a-h),k=1/(m-_);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*P,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*k,i[11]=0,i[12]=(e+r)*w,i[13]=(h+a)*P,i[14]=(_+m)*k,i[15]=1,i},l.pbf=_p,l.perspective=function(i,e,r,a,h){var m,_=1/Math.tan(e/2);return i[0]=_/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=_,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,null!=h&&h!==1/0?(i[10]=(h+a)*(m=1/(a-h)),i[14]=2*h*a*m):(i[10]=-1,i[14]=-2*a),i},l.pick=function(i,e){const r={};for(let a=0;a<e.length;a++){const h=e[a];h in i&&(r[h]=i[h])}return r},l.plugin=Ae,l.pointGeometry=se,l.polygonContainsPoint=oh,l.polygonIntersectsBox=Xd,l.polygonIntersectsPolygon=wd,l.polygonizeBounds=function(i,e,r=0,a=!0){const h=new se(r,r),m=i.sub(h),_=e.add(h),w=[m,new se(_.x,m.y),_,new se(m.x,_.y)];return a&&w.push(m.clone()),w},l.posAttributes=Uf,l.postMapLoadEvent=Wt,l.postTurnstileEvent=Qt,l.potpack=qp,l.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},l.radToDeg=be,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.registerForPluginStateChange=function(i){return i({pluginStatus:z,pluginURL:U}),ae.on("pluginStateChange",i),i},l.removeAuthState=function(i){Rr.delete(i)},l.renderColorRamp=ap,l.resample=fa,l.rotateX=y,l.rotateX$1=Dd,l.rotateY=R,l.rotateY$1=au,l.rotateZ=function(i,e,r){var a=Math.sin(r),h=Math.cos(r),m=e[0],_=e[1],w=e[2],P=e[3],k=e[4],j=e[5],$=e[6],G=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=m*h+k*a,i[1]=_*h+j*a,i[2]=w*h+$*a,i[3]=P*h+G*a,i[4]=k*h-m*a,i[5]=j*h-_*a,i[6]=$*h-w*a,i[7]=G*h-P*a,i},l.rotateZ$1=function(i,e,r){r*=.5;var a=e[0],h=e[1],m=e[2],_=e[3],w=Math.sin(r),P=Math.cos(r);return i[0]=a*P+h*w,i[1]=h*P-a*w,i[2]=m*P+_*w,i[3]=_*P-m*w,i},l.scale=x,l.scale$1=Cf,l.scale$2=is,l.scaleAndAdd=kl,l.setCacheLimits=function(i,e){ao=i,Tr=e},l.setColumn=function(i,e,r){i[4*e+0]=r[0],i[4*e+1]=r[1],i[4*e+2]=r[2],i[4*e+3]=r[3]},l.setRTLTextPlugin=function(i,e,r=!1){if(z===g||z===E||z===I)throw new Error("setRTLTextPlugin cannot be called multiple times.");U=ri.resolveURL(i),z=g,B=e,X(),r||Le()},l.smoothstep=ht,l.spec=ut,l.storeAuthState=function(i,e){e?Rr.add(i):Rr.delete(i)},l.sub=Ic,l.subtract=Zi,l.symbolSize=g_,l.tileAABB=function(i,e,r,a,h,m,_,w,P){if("globe"===P.name)return function(i,e,r){const a=e/i.worldSize,h=Number.MAX_VALUE,m=[-h,-h,-h],_=[h,h,h],w=i.globeMatrix;if(r.z<=1)return cg(_,m,mh(r).getCorners(),w,a),new ma(_,m);const P=Ep(r),k=ug(P);if(cg(_,m,k,w,a),P.contains(i.center)){m[2]=0;const Gt=i.point,Ht=[Gt.x*a,Gt.y*a,0];return Ga(_,_,Ht),Js(m,m,Ht),new ma(_,m)}const j=[w[12]*a,w[13]*a,w[14]*a],$=P.getCenter(),G=Je(i.center.lat,-85.051129,da),Y=Je($.lat,-85.051129,da),re=ha(i.center.lng),pe=qo(G);let Ie=re-ha($.lng);const Ue=pe-qo(Y);Ie>.5?Ie-=1:Ie<-.5&&(Ie+=1);let et=0;Math.abs(Ie)>Math.abs(Ue)?et=Ie>=0?1:3:(et=Ue>=0?0:2,kl(j,j,[w[4]*a,w[5]*a,w[6]*a],-Math.sin(fe(Ue>=0?P.getSouth():P.getNorth()))*fh));const $e=k[et],Qe=k[(et+1)%4],pt=new f1($e,Qe,j),nt=[ag(pt,0)||$e[0],ag(pt,1)||$e[1],ag(pt,2)||$e[2]];return _[2]=Math.min($e[2],Qe[2]),Ga(_,_,nt),Js(m,m,nt),new ma(_,m)}(i,e,new Nm(r,a,h));const k=of({z:r,x:a,y:h},P);return new ma([(m+k.x/k.scale)*e,e*(k.y/k.scale),_],[(m+k.x2/k.scale)*e,e*(k.y2/k.scale),w])},l.tileCornersToBounds=Ep,l.tileTransform=of,l.transformMat3=function(i,e,r){var a=e[0],h=e[1],m=e[2];return i[0]=a*r[0]+h*r[3]+m*r[6],i[1]=a*r[1]+h*r[4]+m*r[7],i[2]=a*r[2]+h*r[5]+m*r[8],i},l.transformMat4=Jo,l.transformMat4$1=qh,l.transformQuat=wf,l.transitionTileAABBinECEF=lg,l.translate=T,l.transpose=function(i,e){if(i===e){var r=e[1],a=e[2],h=e[5];i[1]=e[3],i[2]=e[6],i[3]=r,i[5]=e[7],i[6]=a,i[7]=h}else i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8];return i},l.triggerPluginCompletionEvent=Z,l.uniqueId=Bt,l.updateGlobeVertexNormal=function(i,e,r,a,h){const m=5*e+2;i.float32[m+0]=r,i.float32[m+1]=a,i.float32[m+2]=h},l.validateCustomStyleLayer=function(i){const e=[],r=i.id;return void 0===r&&e.push({message:`layers.${r}: missing required property "id"`}),void 0===i.render&&e.push({message:`layers.${r}: missing required method "render"`}),i.renderingMode&&"2d"!==i.renderingMode&&"3d"!==i.renderingMode&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},l.validateFilter=i=>Na(Zs(i)),l.validateFog=i=>Na(Ah(i)),l.validateLayer=i=>Na($c(i)),l.validateLight=i=>Na(xc(i)),l.validateSource=i=>Na(Mh(i)),l.validateStyle=Du,l.validateTerrain=i=>Na(us(i)),l.values=$t,l.vectorTile=Pc,l.version="2.10.0",l.warnOnce=Jn,l.window=J,l.wrap=yt}),d(0,function(l){function J(ke){if("number"==typeof ke||"boolean"==typeof ke||"string"==typeof ke||null==ke)return JSON.stringify(ke);if(Array.isArray(ke)){let ue="[";for(const Re of ke)ue+=`${J(Re)},`;return`${ue}]`}let ne="{";for(const ue of Object.keys(ke).sort())ne+=`${ue}:${J(ke[ue])},`;return`${ne}}`}function de(ke){let ne="";for(const ue of l.refProperties)ne+=`/${J(ke[ue])}`;return ne}class _e{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,ue){for(const Ge of ne)this._layerConfigs[Ge.id]=Ge,(this._layers[Ge.id]=l.createStyleLayer(Ge)).compileFilter(),this.keyCache[Ge.id]&&delete this.keyCache[Ge.id];for(const Ge of ue)delete this.keyCache[Ge],delete this._layerConfigs[Ge],delete this._layers[Ge];this.familiesBySource={};const Re=function(Ge,it){const vt={};for(let at=0;at<Ge.length;at++){const It=it&&it[Ge[at].id]||de(Ge[at]);it&&(it[Ge[at].id]=It);let an=vt[It];an||(an=vt[It]=[]),an.push(Ge[at])}const wt=[];for(const at in vt)wt.push(vt[at]);return wt}(l.values(this._layerConfigs),this.keyCache);for(const Ge of Re){const it=Ge.map(wn=>this._layers[wn.id]),vt=it[0];if("none"===vt.visibility)continue;const wt=vt.source||"";let at=this.familiesBySource[wt];at||(at=this.familiesBySource[wt]={});const It=vt.sourceLayer||"_geojsonTileLayer";let an=at[It];an||(an=at[It]=[]),an.push(it)}}}class se{loadTile(ne,ue){const{uid:Re,encoding:Ge,rawImageData:it,padding:vt,buildQuadTree:wt}=ne,at=l.window.ImageBitmap&&it instanceof l.window.ImageBitmap?this.getImageData(it,vt):it;ue(null,new l.DEMData(Re,at,Ge,vt<1,wt))}getImageData(ne,ue){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ne.width,ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ne.width,this.offscreenCanvas.height=ne.height,this.offscreenCanvasContext.drawImage(ne,0,0,ne.width,ne.height);const Re=this.offscreenCanvasContext.getImageData(-ue,-ue,ne.width+2*ue,ne.height+2*ue);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Re}}var he=function ke(ne,ue){var Re,Ge=ne&&ne.type;if("FeatureCollection"===Ge)for(Re=0;Re<ne.features.length;Re++)ke(ne.features[Re],ue);else if("GeometryCollection"===Ge)for(Re=0;Re<ne.geometries.length;Re++)ke(ne.geometries[Re],ue);else if("Feature"===Ge)ke(ne.geometry,ue);else if("Polygon"===Ge)ce(ne.coordinates,ue);else if("MultiPolygon"===Ge)for(Re=0;Re<ne.coordinates.length;Re++)ce(ne.coordinates[Re],ue);return ne};function ce(ke,ne){if(0!==ke.length){ie(ke[0],ne);for(var ue=1;ue<ke.length;ue++)ie(ke[ue],!ne)}}function ie(ke,ne){for(var ue=0,Re=0,Ge=0,it=ke.length,vt=it-1;Ge<it;vt=Ge++){var wt=(ke[Ge][0]-ke[vt][0])*(ke[vt][1]+ke[Ge][1]),at=ue+wt;Re+=Math.abs(ue)>=Math.abs(wt)?ue-at+wt:wt-at+ue,ue=at}ue+Re>=0!=!!ne&&ke.reverse()}const fe=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class be{constructor(ne){this._feature=ne,this.extent=l.EXTENT,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))}loadGeometry(){if(1===this._feature.type){const ne=[];for(const ue of this._feature.geometry)ne.push([new l.pointGeometry(ue[0],ue[1])]);return ne}{const ne=[];for(const ue of this._feature.geometry){const Re=[];for(const Ge of ue)Re.push(new l.pointGeometry(Ge[0],Ge[1]));ne.push(Re)}return ne}}toGeoJSON(ne,ue,Re){return fe.call(this,ne,ue,Re)}}class xe{constructor(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=ne.length,this._features=ne}feature(ne){return new be(this._features[ne])}}var Fe=l.vectorTile.VectorTileFeature,Ye=Se;function Se(ke,ne){this.options=ne||{},this.features=ke,this.length=ke.length}function Je(ke,ne){this.id="number"==typeof ke.id?ke.id:void 0,this.type=ke.type,this.rawGeometry=1===ke.type?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=ne||4096}Se.prototype.feature=function(ke){return new Je(this.features[ke],this.options.extent)},Je.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var ne=0;ne<ke.length;ne++){for(var ue=ke[ne],Re=[],Ge=0;Ge<ue.length;Ge++)Re.push(new l.pointGeometry(ue[Ge][0],ue[Ge][1]));this.geometry.push(Re)}return this.geometry},Je.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,ne=1/0,ue=-1/0,Re=1/0,Ge=-1/0,it=0;it<ke.length;it++)for(var vt=ke[it],wt=0;wt<vt.length;wt++){var at=vt[wt];ne=Math.min(ne,at.x),ue=Math.max(ue,at.x),Re=Math.min(Re,at.y),Ge=Math.max(Ge,at.y)}return[ne,Re,ue,Ge]},Je.prototype.toGeoJSON=Fe.prototype.toGeoJSON;var ht=St,yt=Ye;function St(ke){var ne=new l.pbf;return function(ue,Re){for(var Ge in ue.layers)Re.writeMessage(3,$t,ue.layers[Ge])}(ke,ne),ne.finish()}function $t(ke,ne){var ue;ne.writeVarintField(15,ke.version||1),ne.writeStringField(1,ke.name||""),ne.writeVarintField(5,ke.extent||4096);var Re={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<ke.length;ue++)Re.feature=ke.feature(ue),ne.writeMessage(2,Tt,Re);var Ge=Re.keys;for(ue=0;ue<Ge.length;ue++)ne.writeStringField(3,Ge[ue]);var it=Re.values;for(ue=0;ue<it.length;ue++)ne.writeMessage(4,jt,it[ue])}function Tt(ke,ne){var ue=ke.feature;void 0!==ue.id&&ne.writeVarintField(1,ue.id),ne.writeMessage(2,Ct,ke),ne.writeVarintField(3,ue.type),ne.writeMessage(4,xt,ue)}function Ct(ke,ne){var ue=ke.feature,Re=ke.keys,Ge=ke.values,it=ke.keycache,vt=ke.valuecache;for(var wt in ue.properties){var at=ue.properties[wt],It=it[wt];if(null!==at){void 0===It&&(Re.push(wt),it[wt]=It=Re.length-1),ne.writeVarint(It);var an=typeof at;"string"!==an&&"boolean"!==an&&"number"!==an&&(at=JSON.stringify(at));var wn=an+":"+at,Jt=vt[wn];void 0===Jt&&(Ge.push(at),vt[wn]=Jt=Ge.length-1),ne.writeVarint(Jt)}}}function Bt(ke,ne){return(ne<<3)+(7&ke)}function Kt(ke){return ke<<1^ke>>31}function xt(ke,ne){for(var ue=ke.loadGeometry(),Re=ke.type,Ge=0,it=0,vt=ue.length,wt=0;wt<vt;wt++){var at=ue[wt],It=1;1===Re&&(It=at.length),ne.writeVarint(Bt(1,It));for(var an=3===Re?at.length-1:at.length,wn=0;wn<an;wn++){1===wn&&1!==Re&&ne.writeVarint(Bt(2,an-1));var Jt=at[wn].x-Ge,er=at[wn].y-it;ne.writeVarint(Kt(Jt)),ne.writeVarint(Kt(er)),Ge+=Jt,it+=er}3===Re&&ne.writeVarint(Bt(7,1))}}function jt(ke,ne){var ue=typeof ke;"string"===ue?ne.writeStringField(1,ke):"boolean"===ue?ne.writeBooleanField(7,ke):"number"===ue&&(ke%1!=0?ne.writeDoubleField(3,ke):ke<0?ne.writeSVarintField(6,ke):ne.writeVarintField(5,ke))}function Lt(ke,ne,ue,Re,Ge,it){if(Ge-Re<=ue)return;const vt=Re+Ge>>1;Xt(ke,ne,vt,Re,Ge,it%2),Lt(ke,ne,ue,Re,vt-1,it+1),Lt(ke,ne,ue,vt+1,Ge,it+1)}function Xt(ke,ne,ue,Re,Ge,it){for(;Ge>Re;){if(Ge-Re>600){const It=Ge-Re+1,an=ue-Re+1,wn=Math.log(It),Jt=.5*Math.exp(2*wn/3),er=.5*Math.sqrt(wn*Jt*(It-Jt)/It)*(an-It/2<0?-1:1);Xt(ke,ne,ue,Math.max(Re,Math.floor(ue-an*Jt/It+er)),Math.min(Ge,Math.floor(ue+(It-an)*Jt/It+er)),it)}const vt=ne[2*ue+it];let wt=Re,at=Ge;for(Zt(ke,ne,Re,ue),ne[2*Ge+it]>vt&&Zt(ke,ne,Re,Ge);wt<at;){for(Zt(ke,ne,wt,at),wt++,at--;ne[2*wt+it]<vt;)wt++;for(;ne[2*at+it]>vt;)at--}ne[2*Re+it]===vt?Zt(ke,ne,Re,at):(at++,Zt(ke,ne,at,Ge)),at<=ue&&(Re=at+1),ue<=at&&(Ge=at-1)}}function Zt(ke,ne,ue,Re){cn(ke,ue,Re),cn(ne,2*ue,2*Re),cn(ne,2*ue+1,2*Re+1)}function cn(ke,ne,ue){const Re=ke[ne];ke[ne]=ke[ue],ke[ue]=Re}function mn(ke,ne,ue,Re){const Ge=ke-ue,it=ne-Re;return Ge*Ge+it*it}ht.fromVectorTileJs=St,ht.fromGeojsonVt=function(ke,ne){ne=ne||{};var ue={};for(var Re in ke)ue[Re]=new Ye(ke[Re].features,ne),ue[Re].name=Re,ue[Re].version=ne.version,ue[Re].extent=ne.extent;return St({layers:ue})},ht.GeoJSONWrapper=yt;const Lr=ke=>ke[0],Jn=ke=>ke[1];class fr{constructor(ne,ue=Lr,Re=Jn,Ge=64,it=Float64Array){this.nodeSize=Ge,this.points=ne;const vt=ne.length<65536?Uint16Array:Uint32Array,wt=this.ids=new vt(ne.length),at=this.coords=new it(2*ne.length);for(let It=0;It<ne.length;It++)wt[It]=It,at[2*It]=ue(ne[It]),at[2*It+1]=Re(ne[It]);Lt(wt,at,Ge,0,wt.length-1,0)}range(ne,ue,Re,Ge){return function(it,vt,wt,at,It,an,wn){const Jt=[0,it.length-1,0],er=[];let sr,tr;for(;Jt.length;){const Xn=Jt.pop(),mr=Jt.pop(),Vr=Jt.pop();if(mr-Vr<=wn){for(let qn=Vr;qn<=mr;qn++)sr=vt[2*qn],tr=vt[2*qn+1],sr>=wt&&sr<=It&&tr>=at&&tr<=an&&er.push(it[qn]);continue}const Mr=Math.floor((Vr+mr)/2);sr=vt[2*Mr],tr=vt[2*Mr+1],sr>=wt&&sr<=It&&tr>=at&&tr<=an&&er.push(it[Mr]);const ai=(Xn+1)%2;(0===Xn?wt<=sr:at<=tr)&&(Jt.push(Vr),Jt.push(Mr-1),Jt.push(ai)),(0===Xn?It>=sr:an>=tr)&&(Jt.push(Mr+1),Jt.push(mr),Jt.push(ai))}return er}(this.ids,this.coords,ne,ue,Re,Ge,this.nodeSize)}within(ne,ue,Re){return function(Ge,it,vt,wt,at,It){const an=[0,Ge.length-1,0],wn=[],Jt=at*at;for(;an.length;){const er=an.pop(),sr=an.pop(),tr=an.pop();if(sr-tr<=It){for(let ai=tr;ai<=sr;ai++)mn(it[2*ai],it[2*ai+1],vt,wt)<=Jt&&wn.push(Ge[ai]);continue}const Xn=Math.floor((tr+sr)/2),mr=it[2*Xn],Vr=it[2*Xn+1];mn(mr,Vr,vt,wt)<=Jt&&wn.push(Ge[Xn]);const Mr=(er+1)%2;(0===er?vt-at<=mr:wt-at<=Vr)&&(an.push(tr),an.push(Xn-1),an.push(Mr)),(0===er?vt+at>=mr:wt+at>=Vr)&&(an.push(Xn+1),an.push(sr),an.push(Mr))}return wn}(this.ids,this.coords,ne,ue,Re,this.nodeSize)}}const Fr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},si=Math.fround||(yi=new Float32Array(1),ke=>(yi[0]=+ke,yi[0]));var yi;class Ti{constructor(ne){this.options=Oi(Object.create(Fr),ne),this.trees=new Array(this.options.maxZoom+1)}load(ne){const{log:ue,minZoom:Re,maxZoom:Ge,nodeSize:it}=this.options;ue&&console.time("total time");const vt=`prepare ${ne.length} points`;ue&&console.time(vt),this.points=ne;let wt=[];for(let at=0;at<ne.length;at++)ne[at].geometry&&wt.push(Nt(ne[at],at));this.trees[Ge+1]=new fr(wt,Ur,gr,it,Float32Array),ue&&console.timeEnd(vt);for(let at=Ge;at>=Re;at--){const It=+Date.now();wt=this._cluster(wt,at),this.trees[at]=new fr(wt,Ur,gr,it,Float32Array),ue&&console.log("z%d: %d clusters in %dms",at,wt.length,+Date.now()-It)}return ue&&console.timeEnd("total time"),this}getClusters(ne,ue){let Re=((ne[0]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,ne[1]));let it=180===ne[2]?180:((ne[2]+180)%360+360)%360-180;const vt=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)Re=-180,it=180;else if(Re>it){const an=this.getClusters([Re,Ge,180,vt],ue),wn=this.getClusters([-180,Ge,it,vt],ue);return an.concat(wn)}const wt=this.trees[this._limitZoom(ue)],at=wt.range(ui(Re),vi(vt),ui(it),vi(Ge)),It=[];for(const an of at){const wn=wt.points[an];It.push(wn.numPoints?An(wn):this.points[wn.index])}return It}getChildren(ne){const ue=this._getOriginId(ne),Re=this._getOriginZoom(ne),Ge="No cluster with the specified id.",it=this.trees[Re];if(!it)throw new Error(Ge);const vt=it.points[ue];if(!vt)throw new Error(Ge);const wt=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),at=it.within(vt.x,vt.y,wt),It=[];for(const an of at){const wn=it.points[an];wn.parentId===ne&&It.push(wn.numPoints?An(wn):this.points[wn.index])}if(0===It.length)throw new Error(Ge);return It}getLeaves(ne,ue,Re){const Ge=[];return this._appendLeaves(Ge,ne,ue=ue||10,Re=Re||0,0),Ge}getTile(ne,ue,Re){const Ge=this.trees[this._limitZoom(ne)],it=Math.pow(2,ne),{extent:vt,radius:wt}=this.options,at=wt/vt,It=(Re-at)/it,an=(Re+1+at)/it,wn={features:[]};return this._addTileFeatures(Ge.range((ue-at)/it,It,(ue+1+at)/it,an),Ge.points,ue,Re,it,wn),0===ue&&this._addTileFeatures(Ge.range(1-at/it,It,1,an),Ge.points,it,Re,it,wn),ue===it-1&&this._addTileFeatures(Ge.range(0,It,at/it,an),Ge.points,-1,Re,it,wn),wn.features.length?wn:null}getClusterExpansionZoom(ne){let ue=this._getOriginZoom(ne)-1;for(;ue<=this.options.maxZoom;){const Re=this.getChildren(ne);if(ue++,1!==Re.length)break;ne=Re[0].properties.cluster_id}return ue}_appendLeaves(ne,ue,Re,Ge,it){const vt=this.getChildren(ue);for(const wt of vt){const at=wt.properties;if(at&&at.cluster?it+at.point_count<=Ge?it+=at.point_count:it=this._appendLeaves(ne,at.cluster_id,Re,Ge,it):it<Ge?it++:ne.push(wt),ne.length===Re)break}return it}_addTileFeatures(ne,ue,Re,Ge,it,vt){for(const wt of ne){const at=ue[wt],It=at.numPoints;let an,wn,Jt;if(It)an=ni(at),wn=at.x,Jt=at.y;else{const tr=this.points[at.index];an=tr.properties,wn=ui(tr.geometry.coordinates[0]),Jt=vi(tr.geometry.coordinates[1])}const er={type:1,geometry:[[Math.round(this.options.extent*(wn*it-Re)),Math.round(this.options.extent*(Jt*it-Ge))]],tags:an};let sr;It?sr=at.id:this.options.generateId?sr=at.index:this.points[at.index].id&&(sr=this.points[at.index].id),void 0!==sr&&(er.id=sr),vt.features.push(er)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(+ne,this.options.maxZoom+1))}_cluster(ne,ue){const Re=[],{radius:Ge,extent:it,reduce:vt,minPoints:wt}=this.options,at=Ge/(it*Math.pow(2,ue));for(let It=0;It<ne.length;It++){const an=ne[It];if(an.zoom<=ue)continue;an.zoom=ue;const wn=this.trees[ue+1],Jt=wn.within(an.x,an.y,at),er=an.numPoints||1;let sr=er;for(const tr of Jt){const Xn=wn.points[tr];Xn.zoom>ue&&(sr+=Xn.numPoints||1)}if(sr>er&&sr>=wt){let tr=an.x*er,Xn=an.y*er,mr=vt&&er>1?this._map(an,!0):null;const Vr=(It<<5)+(ue+1)+this.points.length;for(const Mr of Jt){const ai=wn.points[Mr];if(ai.zoom<=ue)continue;ai.zoom=ue;const qn=ai.numPoints||1;tr+=ai.x*qn,Xn+=ai.y*qn,ai.parentId=Vr,vt&&(mr||(mr=this._map(an,!0)),vt(mr,this._map(ai)))}an.parentId=Vr,Re.push(Pi(tr/sr,Xn/sr,Vr,sr,mr))}else if(Re.push(an),sr>1)for(const tr of Jt){const Xn=wn.points[tr];Xn.zoom<=ue||(Xn.zoom=ue,Re.push(Xn))}}return Re}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ue){if(ne.numPoints)return ue?Oi({},ne.properties):ne.properties;const Re=this.points[ne.index].properties,Ge=this.options.map(Re);return ue&&Ge===Re?Oi({},Ge):Ge}}function Pi(ke,ne,ue,Re,Ge){return{x:si(ke),y:si(ne),zoom:1/0,id:ue,parentId:-1,numPoints:Re,properties:Ge}}function Nt(ke,ne){const[ue,Re]=ke.geometry.coordinates;return{x:si(ui(ue)),y:si(vi(Re)),zoom:1/0,index:ne,parentId:-1}}function An(ke){return{type:"Feature",id:ke.id,properties:ni(ke),geometry:{type:"Point",coordinates:[(ne=ke.x,360*(ne-.5)),Zn(ke.y)]}};var ne}function ni(ke){const ne=ke.numPoints,ue=ne>=1e4?`${Math.round(ne/1e3)}k`:ne>=1e3?Math.round(ne/100)/10+"k":ne;return Oi(Oi({},ke.properties),{cluster:!0,cluster_id:ke.id,point_count:ne,point_count_abbreviated:ue})}function ui(ke){return ke/360+.5}function vi(ke){const ne=Math.sin(ke*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function Zn(ke){const ne=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Oi(ke,ne){for(const ue in ne)ke[ue]=ne[ue];return ke}function Ur(ke){return ke.x}function gr(ke){return ke.y}function ri(ke,ne,ue,Re){for(var Ge,it=Re,vt=ue-ne>>1,wt=ue-ne,at=ke[ne],It=ke[ne+1],an=ke[ue],wn=ke[ue+1],Jt=ne+3;Jt<ue;Jt+=3){var er=bi(ke[Jt],ke[Jt+1],at,It,an,wn);if(er>it)Ge=Jt,it=er;else if(er===it){var sr=Math.abs(Jt-vt);sr<wt&&(Ge=Jt,wt=sr)}}it>Re&&(Ge-ne>3&&ri(ke,ne,Ge,Re),ke[Ge+2]=it,ue-Ge>3&&ri(ke,Ge,ue,Re))}function bi(ke,ne,ue,Re,Ge,it){var vt=Ge-ue,wt=it-Re;if(0!==vt||0!==wt){var at=((ke-ue)*vt+(ne-Re)*wt)/(vt*vt+wt*wt);at>1?(ue=Ge,Re=it):at>0&&(ue+=vt*at,Re+=wt*at)}return(vt=ke-ue)*vt+(wt=ne-Re)*wt}function pr(ke,ne,ue,Re){var Ge={id:void 0===ke?null:ke,type:ne,geometry:ue,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(it){var vt=it.geometry,wt=it.type;if("Point"===wt||"MultiPoint"===wt||"LineString"===wt)_o(it,vt);else if("Polygon"===wt||"MultiLineString"===wt)for(var at=0;at<vt.length;at++)_o(it,vt[at]);else if("MultiPolygon"===wt)for(at=0;at<vt.length;at++)for(var It=0;It<vt[at].length;It++)_o(it,vt[at][It])}(Ge),Ge}function _o(ke,ne){for(var ue=0;ue<ne.length;ue+=3)ke.minX=Math.min(ke.minX,ne[ue]),ke.minY=Math.min(ke.minY,ne[ue+1]),ke.maxX=Math.max(ke.maxX,ne[ue]),ke.maxY=Math.max(ke.maxY,ne[ue+1])}function fi(ke,ne,ue,Re){if(ne.geometry){var Ge=ne.geometry.coordinates,it=ne.geometry.type,vt=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),wt=[],at=ne.id;if(ue.promoteId?at=ne.properties[ue.promoteId]:ue.generateId&&(at=Re||0),"Point"===it)pi(Ge,wt);else if("MultiPoint"===it)for(var It=0;It<Ge.length;It++)pi(Ge[It],wt);else if("LineString"===it)ii(Ge,wt,vt,!1);else if("MultiLineString"===it){if(ue.lineMetrics){for(It=0;It<Ge.length;It++)ii(Ge[It],wt=[],vt,!1),ke.push(pr(at,"LineString",wt,ne.properties));return}Li(Ge,wt,vt,!1)}else if("Polygon"===it)Li(Ge,wt,vt,!0);else{if("MultiPolygon"!==it){if("GeometryCollection"===it){for(It=0;It<ne.geometry.geometries.length;It++)fi(ke,{id:at,geometry:ne.geometry.geometries[It],properties:ne.properties},ue,Re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(It=0;It<Ge.length;It++){var an=[];Li(Ge[It],an,vt,!0),wt.push(an)}}ke.push(pr(at,it,wt,ne.properties))}}function pi(ke,ne){ne.push(nr(ke[0])),ne.push(Hr(ke[1])),ne.push(0)}function ii(ke,ne,ue,Re){for(var Ge,it,vt=0,wt=0;wt<ke.length;wt++){var at=nr(ke[wt][0]),It=Hr(ke[wt][1]);ne.push(at),ne.push(It),ne.push(0),wt>0&&(vt+=Re?(Ge*It-at*it)/2:Math.sqrt(Math.pow(at-Ge,2)+Math.pow(It-it,2))),Ge=at,it=It}var an=ne.length-3;ne[2]=1,ri(ne,0,an,ue),ne[an+2]=1,ne.size=Math.abs(vt),ne.start=0,ne.end=ne.size}function Li(ke,ne,ue,Re){for(var Ge=0;Ge<ke.length;Ge++){var it=[];ii(ke[Ge],it,ue,Re),ne.push(it)}}function nr(ke){return ke/360+.5}function Hr(ke){var ne=Math.sin(ke*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function Gr(ke,ne,ue,Re,Ge,it,vt,wt){if(Re/=ne,it>=(ue/=ne)&&vt<Re)return ke;if(vt<ue||it>=Re)return null;for(var at=[],It=0;It<ke.length;It++){var an=ke[It],wn=an.geometry,Jt=an.type,er=0===Ge?an.minX:an.minY,sr=0===Ge?an.maxX:an.maxY;if(er>=ue&&sr<Re)at.push(an);else if(!(sr<ue||er>=Re)){var tr=[];if("Point"===Jt||"MultiPoint"===Jt)Er(wn,tr,ue,Re,Ge);else if("LineString"===Jt)Cr(wn,tr,ue,Re,Ge,!1,wt.lineMetrics);else if("MultiLineString"===Jt)ir(wn,tr,ue,Re,Ge,!1);else if("Polygon"===Jt)ir(wn,tr,ue,Re,Ge,!0);else if("MultiPolygon"===Jt)for(var Xn=0;Xn<wn.length;Xn++){var mr=[];ir(wn[Xn],mr,ue,Re,Ge,!0),mr.length&&tr.push(mr)}if(tr.length){if(wt.lineMetrics&&"LineString"===Jt){for(Xn=0;Xn<tr.length;Xn++)at.push(pr(an.id,Jt,tr[Xn],an.tags));continue}"LineString"!==Jt&&"MultiLineString"!==Jt||(1===tr.length?(Jt="LineString",tr=tr[0]):Jt="MultiLineString"),"Point"!==Jt&&"MultiPoint"!==Jt||(Jt=3===tr.length?"Point":"MultiPoint"),at.push(pr(an.id,Jt,tr,an.tags))}}}return at.length?at:null}function Er(ke,ne,ue,Re,Ge){for(var it=0;it<ke.length;it+=3){var vt=ke[it+Ge];vt>=ue&&vt<=Re&&(ne.push(ke[it]),ne.push(ke[it+1]),ne.push(ke[it+2]))}}function Cr(ke,ne,ue,Re,Ge,it,vt){for(var wt,at,It=lr(ke),an=0===Ge?qe:Xe,wn=ke.start,Jt=0;Jt<ke.length-3;Jt+=3){var er=ke[Jt],sr=ke[Jt+1],tr=ke[Jt+2],Xn=ke[Jt+3],mr=ke[Jt+4],Vr=0===Ge?er:sr,Mr=0===Ge?Xn:mr,ai=!1;vt&&(wt=Math.sqrt(Math.pow(er-Xn,2)+Math.pow(sr-mr,2))),Vr<ue?Mr>ue&&(at=an(It,er,sr,Xn,mr,ue),vt&&(It.start=wn+wt*at)):Vr>Re?Mr<Re&&(at=an(It,er,sr,Xn,mr,Re),vt&&(It.start=wn+wt*at)):Pt(It,er,sr,tr),Mr<ue&&Vr>=ue&&(at=an(It,er,sr,Xn,mr,ue),ai=!0),Mr>Re&&Vr<=Re&&(at=an(It,er,sr,Xn,mr,Re),ai=!0),!it&&ai&&(vt&&(It.end=wn+wt*at),ne.push(It),It=lr(ke)),vt&&(wn+=wt)}var qn=ke.length-3;er=ke[qn],sr=ke[qn+1],tr=ke[qn+2],(Vr=0===Ge?er:sr)>=ue&&Vr<=Re&&Pt(It,er,sr,tr),qn=It.length-3,it&&qn>=3&&(It[qn]!==It[0]||It[qn+1]!==It[1])&&Pt(It,It[0],It[1],It[2]),It.length&&ne.push(It)}function lr(ke){var ne=[];return ne.size=ke.size,ne.start=ke.start,ne.end=ke.end,ne}function ir(ke,ne,ue,Re,Ge,it){for(var vt=0;vt<ke.length;vt++)Cr(ke[vt],ne,ue,Re,Ge,it,!1)}function Pt(ke,ne,ue,Re){ke.push(ne),ke.push(ue),ke.push(Re)}function qe(ke,ne,ue,Re,Ge,it){var vt=(it-ne)/(Re-ne);return ke.push(it),ke.push(ue+(Ge-ue)*vt),ke.push(1),vt}function Xe(ke,ne,ue,Re,Ge,it){var vt=(it-ue)/(Ge-ue);return ke.push(ne+(Re-ne)*vt),ke.push(it),ke.push(1),vt}function zt(ke,ne){for(var ue=[],Re=0;Re<ke.length;Re++){var Ge,it=ke[Re],vt=it.type;if("Point"===vt||"MultiPoint"===vt||"LineString"===vt)Ge=Qt(it.geometry,ne);else if("MultiLineString"===vt||"Polygon"===vt){Ge=[];for(var wt=0;wt<it.geometry.length;wt++)Ge.push(Qt(it.geometry[wt],ne))}else if("MultiPolygon"===vt)for(Ge=[],wt=0;wt<it.geometry.length;wt++){for(var at=[],It=0;It<it.geometry[wt].length;It++)at.push(Qt(it.geometry[wt][It],ne));Ge.push(at)}ue.push(pr(it.id,vt,Ge,it.tags))}return ue}function Qt(ke,ne){var ue=[];ue.size=ke.size,void 0!==ke.start&&(ue.start=ke.start,ue.end=ke.end);for(var Re=0;Re<ke.length;Re+=3)ue.push(ke[Re]+ne,ke[Re+1],ke[Re+2]);return ue}function jn(ke,ne){if(ke.transformed)return ke;var ue,Re,Ge,it=1<<ke.z,vt=ke.x,wt=ke.y;for(ue=0;ue<ke.features.length;ue++){var at=ke.features[ue],It=at.geometry,an=at.type;if(at.geometry=[],1===an)for(Re=0;Re<It.length;Re+=2)at.geometry.push(Wt(It[Re],It[Re+1],ne,it,vt,wt));else for(Re=0;Re<It.length;Re++){var wn=[];for(Ge=0;Ge<It[Re].length;Ge+=2)wn.push(Wt(It[Re][Ge],It[Re][Ge+1],ne,it,vt,wt));at.geometry.push(wn)}}return ke.transformed=!0,ke}function Wt(ke,ne,ue,Re,Ge,it){return[Math.round(ue*(ke*Re-Ge)),Math.round(ue*(ne*Re-it))]}function On(ke,ne,ue,Re,Ge){for(var it=ne===Ge.maxZoom?0:Ge.tolerance/((1<<ne)*Ge.extent),vt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:Re,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},wt=0;wt<ke.length;wt++){vt.numFeatures++,fn(vt,ke[wt],it,Ge);var at=ke[wt].minX,It=ke[wt].minY,an=ke[wt].maxX,wn=ke[wt].maxY;at<vt.minX&&(vt.minX=at),It<vt.minY&&(vt.minY=It),an>vt.maxX&&(vt.maxX=an),wn>vt.maxY&&(vt.maxY=wn)}return vt}function fn(ke,ne,ue,Re){var Ge=ne.geometry,it=ne.type,vt=[];if("Point"===it||"MultiPoint"===it)for(var wt=0;wt<Ge.length;wt+=3)vt.push(Ge[wt]),vt.push(Ge[wt+1]),ke.numPoints++,ke.numSimplified++;else if("LineString"===it)Rr(vt,Ge,ke,ue,!1,!1);else if("MultiLineString"===it||"Polygon"===it)for(wt=0;wt<Ge.length;wt++)Rr(vt,Ge[wt],ke,ue,"Polygon"===it,0===wt);else if("MultiPolygon"===it)for(var at=0;at<Ge.length;at++){var It=Ge[at];for(wt=0;wt<It.length;wt++)Rr(vt,It[wt],ke,ue,!0,0===wt)}if(vt.length){var an=ne.tags||null;if("LineString"===it&&Re.lineMetrics){for(var wn in an={},ne.tags)an[wn]=ne.tags[wn];an.mapbox_clip_start=Ge.start/Ge.size,an.mapbox_clip_end=Ge.end/Ge.size}var Jt={geometry:vt,type:"Polygon"===it||"MultiPolygon"===it?3:"LineString"===it||"MultiLineString"===it?2:1,tags:an};null!==ne.id&&(Jt.id=ne.id),ke.features.push(Jt)}}function Rr(ke,ne,ue,Re,Ge,it){var vt=Re*Re;if(Re>0&&ne.size<(Ge?vt:Re))ue.numPoints+=ne.length/3;else{for(var wt=[],at=0;at<ne.length;at+=3)(0===Re||ne[at+2]>vt)&&(ue.numSimplified++,wt.push(ne[at]),wt.push(ne[at+1])),ue.numPoints++;Ge&&function(It,an){for(var wn=0,Jt=0,er=It.length,sr=er-2;Jt<er;sr=Jt,Jt+=2)wn+=(It[Jt]-It[sr])*(It[Jt+1]+It[sr+1]);if(wn>0===an)for(Jt=0,er=It.length;Jt<er/2;Jt+=2){var tr=It[Jt],Xn=It[Jt+1];It[Jt]=It[er-2-Jt],It[Jt+1]=It[er-1-Jt],It[er-2-Jt]=tr,It[er-1-Jt]=Xn}}(wt,it),ke.push(wt)}}function Vi(ke,ne){var ue=(ne=this.options=function(Ge,it){for(var vt in it)Ge[vt]=it[vt];return Ge}(Object.create(this.options),ne)).debug;if(ue&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge,it,vt,wt,at,It,Re=function(Ge,it){var vt=[];if("FeatureCollection"===Ge.type)for(var wt=0;wt<Ge.features.length;wt++)fi(vt,Ge.features[wt],it,wt);else fi(vt,"Feature"===Ge.type?Ge:{geometry:Ge},it);return vt}(ke,ne);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ge=Re,it=ne,vt=it.buffer/it.extent,wt=Ge,at=Gr(Ge,1,-1-vt,vt,0,-1,2,it),It=Gr(Ge,1,1-vt,2+vt,0,-1,2,it),(at||It)&&(wt=Gr(Ge,1,-vt,1+vt,0,-1,2,it)||[],at&&(wt=zt(at,1).concat(wt)),It&&(wt=wt.concat(zt(It,-1)))),Re=wt).length&&this.splitTile(Re,0,0,0),ue&&(Re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ao(ke,ne,ue){return 32*((1<<ke)*ue+ne)+ke}function Tr(ke,ne){const ue=ke.tileID.canonical;if(!this._geoJSONIndex)return ne(null,null);const Re=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!Re)return ne(null,null);const Ge=new xe(Re.features);let it=ht(Ge);0===it.byteOffset&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),ne(null,{vectorTile:Ge,rawData:it.buffer})}Vi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vi.prototype.splitTile=function(ke,ne,ue,Re,Ge,it,vt){for(var wt=[ke,ne,ue,Re],at=this.options,It=at.debug;wt.length;){Re=wt.pop(),ue=wt.pop(),ne=wt.pop(),ke=wt.pop();var an=1<<ne,wn=ao(ne,ue,Re),Jt=this.tiles[wn];if(!Jt&&(It>1&&console.time("creation"),Jt=this.tiles[wn]=On(ke,ne,ue,Re,at),this.tileCoords.push({z:ne,x:ue,y:Re}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ue,Re,Jt.numFeatures,Jt.numPoints,Jt.numSimplified),console.timeEnd("creation"));var er="z"+ne;this.stats[er]=(this.stats[er]||0)+1,this.total++}if(Jt.source=ke,Ge){if(ne===at.maxZoom||ne===Ge)continue;var sr=1<<Ge-ne;if(ue!==Math.floor(it/sr)||Re!==Math.floor(vt/sr))continue}else if(ne===at.indexMaxZoom||Jt.numPoints<=at.indexMaxPoints)continue;if(Jt.source=null,0!==ke.length){It>1&&console.time("clipping");var tr,Xn,mr,Vr,Mr,ai,qn=.5*at.buffer/at.extent,ut=.5-qn,hr=.5+qn,Bn=1+qn;tr=Xn=mr=Vr=null,Mr=Gr(ke,an,ue-qn,ue+hr,0,Jt.minX,Jt.maxX,at),ai=Gr(ke,an,ue+ut,ue+Bn,0,Jt.minX,Jt.maxX,at),ke=null,Mr&&(tr=Gr(Mr,an,Re-qn,Re+hr,1,Jt.minY,Jt.maxY,at),Xn=Gr(Mr,an,Re+ut,Re+Bn,1,Jt.minY,Jt.maxY,at),Mr=null),ai&&(mr=Gr(ai,an,Re-qn,Re+hr,1,Jt.minY,Jt.maxY,at),Vr=Gr(ai,an,Re+ut,Re+Bn,1,Jt.minY,Jt.maxY,at),ai=null),It>1&&console.timeEnd("clipping"),wt.push(tr||[],ne+1,2*ue,2*Re),wt.push(Xn||[],ne+1,2*ue,2*Re+1),wt.push(mr||[],ne+1,2*ue+1,2*Re),wt.push(Vr||[],ne+1,2*ue+1,2*Re+1)}}},Vi.prototype.getTile=function(ke,ne,ue){var Re=this.options,Ge=Re.extent,it=Re.debug;if(ke<0||ke>24)return null;var vt=1<<ke,wt=ao(ke,ne=(ne%vt+vt)%vt,ue);if(this.tiles[wt])return jn(this.tiles[wt],Ge);it>1&&console.log("drilling down to z%d-%d-%d",ke,ne,ue);for(var at,It=ke,an=ne,wn=ue;!at&&It>0;)It--,an=Math.floor(an/2),wn=Math.floor(wn/2),at=this.tiles[ao(It,an,wn)];return at&&at.source?(it>1&&console.log("found parent tile z%d-%d-%d",It,an,wn),it>1&&console.time("drilling down"),this.splitTile(at.source,It,an,wn,ke,ne,ue),it>1&&console.timeEnd("drilling down"),this.tiles[wt]?jn(this.tiles[wt],Ge):null):null};class Nn extends l.VectorTileWorkerSource{constructor(ne,ue,Re,Ge,it){super(ne,ue,Re,Ge,Tr),it&&(this.loadGeoJSON=it)}loadData(ne,ue){const Re=ne&&ne.request,Ge=Re&&Re.collectResourceTiming;this.loadGeoJSON(ne,(it,vt)=>{if(it||!vt)return ue(it);if("object"!=typeof vt)return ue(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));{he(vt,!0);try{if(ne.filter){const at=l.createExpression(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===at.result)throw new Error(at.value.map(an=>`${an.key}: ${an.message}`).join(", "));const It=vt.features.filter(an=>at.value.evaluate({zoom:0},an));vt={type:"FeatureCollection",features:It}}this._geoJSONIndex=ne.cluster?new Ti(function({superclusterOptions:at,clusterProperties:It}){if(!It||!at)return at;const an={},wn={},Jt={accumulated:null,zoom:0},er={properties:null},sr=Object.keys(It);for(const tr of sr){const[Xn,mr]=It[tr],Vr=l.createExpression(mr),Mr=l.createExpression("string"==typeof Xn?[Xn,["accumulated"],["get",tr]]:Xn);an[tr]=Vr.value,wn[tr]=Mr.value}return at.map=tr=>{er.properties=tr;const Xn={};for(const mr of sr)Xn[mr]=an[mr].evaluate(Jt,er);return Xn},at.reduce=(tr,Xn)=>{er.properties=Xn;for(const mr of sr)Jt.accumulated=tr[mr],tr[mr]=wn[mr].evaluate(Jt,er)},at}(ne)).load(vt.features):new Vi(at=vt,ne.geojsonVtOptions)}catch(at){return ue(at)}this.loaded={};const wt={};if(Ge){const at=l.getPerformanceMeasurement(Re);at&&(wt.resourceTiming={},wt.resourceTiming[ne.source]=JSON.parse(JSON.stringify(at)))}ue(null,wt)}var at})}reloadTile(ne,ue){const Re=this.loaded;return Re&&Re[ne.uid]?super.reloadTile(ne,ue):this.loadTile(ne,ue)}loadGeoJSON(ne,ue){if(ne.request)l.getJSON(ne.request,ue);else{if("string"!=typeof ne.data)return ue(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));try{return ue(null,JSON.parse(ne.data))}catch(Re){return ue(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ne,ue){try{ue(null,this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId))}catch(Re){ue(Re)}}getClusterChildren(ne,ue){try{ue(null,this._geoJSONIndex.getChildren(ne.clusterId))}catch(Re){ue(Re)}}getClusterLeaves(ne,ue){try{ue(null,this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset))}catch(Re){ue(Re)}}}class mi{constructor(ne){this.self=ne,this.actor=new l.Actor(ne,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.getProjection({name:"mercator"}),this.workerSourceTypes={vector:l.VectorTileWorkerSource,geojson:Nn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ue,Re)=>{if(this.workerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.workerSourceTypes[ue]=Re},this.self.registerRTLTextPlugin=ue=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=ue.applyArabicShaping,l.plugin.processBidirectionalText=ue.processBidirectionalText,l.plugin.processStyledBidirectionalText=ue.processStyledBidirectionalText}}clearCaches(ne,ue,Re){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],Re()}checkIfReady(ne,ue,Re){Re()}setReferrer(ne,ue){this.referrer=ue}spriteLoaded(ne,ue){this.isSpriteLoaded[ne]=ue;for(const Re in this.workerSources[ne]){const Ge=this.workerSources[ne][Re];for(const it in Ge)Ge[it]instanceof l.VectorTileWorkerSource&&(Ge[it].isSpriteLoaded=ue,Ge[it].fire(new l.Event("isSpriteLoaded")))}}setImages(ne,ue,Re){this.availableImages[ne]=ue;for(const Ge in this.workerSources[ne]){const it=this.workerSources[ne][Ge];for(const vt in it)it[vt].availableImages=ue}Re()}enableTerrain(ne,ue,Re){this.terrain=ue,Re()}setProjection(ne,ue){this.projections[ne]=l.getProjection(ue)}setLayers(ne,ue,Re){this.getLayerIndex(ne).replace(ue),Re()}updateLayers(ne,ue,Re){this.getLayerIndex(ne).update(ue.layers,ue.removedIds),Re()}loadTile(ne,ue,Re){const Ge=this.enableTerrain?l.extend({enableTerrain:this.terrain},ue):ue;Ge.projection=this.projections[ne]||this.defaultProjection,this.getWorkerSource(ne,ue.type,ue.source).loadTile(Ge,Re)}loadDEMTile(ne,ue,Re){const Ge=this.enableTerrain?l.extend({buildQuadTree:this.terrain},ue):ue;this.getDEMWorkerSource(ne,ue.source).loadTile(Ge,Re)}reloadTile(ne,ue,Re){const Ge=this.enableTerrain?l.extend({enableTerrain:this.terrain},ue):ue;Ge.projection=this.projections[ne]||this.defaultProjection,this.getWorkerSource(ne,ue.type,ue.source).reloadTile(Ge,Re)}abortTile(ne,ue,Re){this.getWorkerSource(ne,ue.type,ue.source).abortTile(ue,Re)}removeTile(ne,ue,Re){this.getWorkerSource(ne,ue.type,ue.source).removeTile(ue,Re)}removeSource(ne,ue,Re){if(!this.workerSources[ne]||!this.workerSources[ne][ue.type]||!this.workerSources[ne][ue.type][ue.source])return;const Ge=this.workerSources[ne][ue.type][ue.source];delete this.workerSources[ne][ue.type][ue.source],void 0!==Ge.removeSource?Ge.removeSource(ue,Re):Re()}loadWorkerSource(ne,ue,Re){try{this.self.importScripts(ue.url),Re()}catch(Ge){Re(Ge.toString())}}syncRTLPluginState(ne,ue,Re){try{l.plugin.setState(ue);const Ge=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=Ge){this.self.importScripts(Ge);const it=l.plugin.isParsed();Re(it?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ge}`),it)}}catch(Ge){Re(Ge.toString())}}getAvailableImages(ne){let ue=this.availableImages[ne];return ue||(ue=[]),ue}getLayerIndex(ne){let ue=this.layerIndexes[ne];return ue||(ue=this.layerIndexes[ne]=new _e),ue}getWorkerSource(ne,ue,Re){return this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ue]||(this.workerSources[ne][ue]={}),this.workerSources[ne][ue][Re]||(this.workerSources[ne][ue][Re]=new this.workerSourceTypes[ue]({send:(Ge,it,vt,wt,at,It)=>{this.actor.send(Ge,it,vt,ne,at,It)},scheduler:this.actor.scheduler},this.getLayerIndex(ne),this.getAvailableImages(ne),this.isSpriteLoaded[ne])),this.workerSources[ne][ue][Re]}getDEMWorkerSource(ne,ue){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ue]||(this.demWorkerSources[ne][ue]=new se),this.demWorkerSources[ne][ue]}enforceCacheSizeLimit(ne,ue){l.enforceCacheSizeLimit(ue)}getWorkerPerformanceMetrics(ne,ue,Re){Re(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new mi(self)),mi}),d(0,function(l){function J(p,o){if(Array.isArray(p)){if(!Array.isArray(o)||p.length!==o.length)return!1;for(let u=0;u<p.length;u++)if(!J(p[u],o[u]))return!1;return!0}if("object"==typeof p&&null!==p&&null!==o){if("object"!=typeof o||Object.keys(p).length!==Object.keys(o).length)return!1;for(const u in p)if(!J(p[u],o[u]))return!1;return!0}return p===o}var de=_e;function _e(p){return o=p,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,E,I=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(I);try{E=new Worker(B),g=!0}catch(z){g=!1}return E&&E.terminate(),URL.revokeObjectURL(B),g}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var g=document.createElement("canvas");g.width=g.height=1;var E=g.getContext("2d");if(!E)return!1;var I=E.getImageData(0,0,1,1);return I&&I.width===g.width}()||(void 0===se[u=o&&o.failIfMajorPerformanceCaveat]&&(se[u]=function(g){var E,B,z,U,I=(B=g,z=document.createElement("canvas"),(U=Object.create(_e.webGLContextAttributes)).failIfMajorPerformanceCaveat=B,z.getContext("webgl",U)||z.getContext("experimental-webgl",U));if(!I)return!1;try{E=I.createShader(I.VERTEX_SHADER)}catch(B){return!1}return!(!E||I.isContextLost())&&(I.shaderSource(E,"void main() {}"),I.compileShader(E),!0===I.getShaderParameter(E,I.COMPILE_STATUS))}(u)),!se[u]||document.documentMode));var o,u}var se={};function he(p,o,u){const g=l.window.document.createElement(p);return void 0!==o&&(g.className=o),u&&u.appendChild(g),g}function ce(p,o,u){const g=l.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const E of Object.keys(o))g.setAttributeNS(null,E,o[E]);return u&&u.appendChild(g),g}_e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ie=l.window.document&&l.window.document.documentElement.style,fe=ie&&void 0!==ie.userSelect?"userSelect":"WebkitUserSelect";let be;function xe(){ie&&fe&&(be=ie[fe],ie[fe]="none")}function Fe(){ie&&fe&&(ie[fe]=be)}function Ye(p){p.preventDefault(),p.stopPropagation(),l.window.removeEventListener("click",Ye,!0)}function Se(){l.window.addEventListener("click",Ye,!0),l.window.setTimeout(()=>{l.window.removeEventListener("click",Ye,!0)},0)}function Je(p,o){const u=p.getBoundingClientRect();return St(p,u,o)}function ht(p,o){const u=p.getBoundingClientRect(),g=[];for(let E=0;E<o.length;E++)g.push(St(p,u,o[E]));return g}function yt(p){return void 0!==l.window.InstallTrigger&&2===p.button&&p.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function St(p,o,u){const g=p.offsetWidth===o.width?1:p.offsetWidth/o.width;return new l.pointGeometry((u.clientX-o.left)*g,(u.clientY-o.top)*g)}function $t(p,o){var u=o[0],g=o[1],E=o[2],I=o[3],B=u*I-E*g;return B?(p[0]=I*(B=1/B),p[1]=-g*B,p[2]=-E*B,p[3]=u*B,p):null}function Tt(p){const{userImage:o}=p;return!!(o&&o.render&&o.render())&&(p.data.replace(new Uint8Array(o.data.buffer)),!0)}class Ct extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:u,callback:g}of this.requestors)this._notify(u,g);this.requestors=[]}}hasImage(o){return!!this.getImage(o)}getImage(o){return this.images[o]}addImage(o,u){this._validate(o,u)&&(this.images[o]=u)}_validate(o,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),g=!1),g}_validateStretch(o,u){if(!o)return!0;let g=0;for(const E of o){if(E[0]<g||E[1]<E[0]||u<E[1])return!1;g=E[1]}return!0}_validateContent(o,u){return!(o&&(4!==o.length||o[0]<0||u.data.width<o[0]||o[1]<0||u.data.height<o[1]||o[2]<0||u.data.width<o[2]||o[3]<0||u.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,u){u.version=this.images[o].version+1,this.images[o]=u,this.updatedImages[o]=!0}removeImage(o){const u=this.images[o];delete this.images[o],delete this.patterns[o],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,u){let g=!0;if(!this.isLoaded())for(const E of o)this.images[E]||(g=!1);this.isLoaded()||g?this._notify(o,u):this.requestors.push({ids:o,callback:u})}_notify(o,u){const g={};for(const E of o){this.images[E]||this.fire(new l.Event("styleimagemissing",{id:E}));const I=this.images[E];I?g[E]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:Boolean(I.userImage&&I.userImage.render)}:l.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,g)}getPixelSize(){const{width:o,height:u}=this.atlasImage;return{width:o,height:u}}getPattern(o){const u=this.patterns[o],g=this.getImage(o);if(!g)return null;if(u&&u.position.version===g.version)return u.position;if(u)u.position.version=g.version;else{const E={w:g.data.width+2,h:g.data.height+2,x:0,y:0},I=new l.ImagePosition(E,g);this.patterns[o]={bin:E,position:I}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const u=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(o,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const I in this.patterns)o.push(this.patterns[I].bin);const{w:u,h:g}=l.potpack(o),E=this.atlasImage;E.resize({width:u||1,height:g||1});for(const I in this.patterns){const{bin:B}=this.patterns[I],z=B.x+1,U=B.y+1,Z=this.images[I].data,X=Z.width,ae=Z.height;l.RGBAImage.copy(Z,E,{x:0,y:0},{x:z,y:U},{width:X,height:ae}),l.RGBAImage.copy(Z,E,{x:0,y:ae-1},{x:z,y:U-1},{width:X,height:1}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:z,y:U+ae},{width:X,height:1}),l.RGBAImage.copy(Z,E,{x:X-1,y:0},{x:z-1,y:U},{width:1,height:ae}),l.RGBAImage.copy(Z,E,{x:0,y:0},{x:z+X,y:U},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const u of o){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const g=this.images[u];Tt(g)&&this.updateImage(u,g)}}}const Bt=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,o){return function([u,g,E]){const I=l.degToRad(g+90),B=l.degToRad(E);return{x:u*Math.cos(I)*Math.sin(B),y:u*Math.sin(I)*Math.sin(B),z:u*Math.cos(B),azimuthal:g,polar:E}}(p.expression.evaluate(o))}interpolate(p,o,u){return{x:l.number(p.x,o.x,u),y:l.number(p.y,o.y,u),z:l.number(p.z,o.z,u),azimuthal:l.number(p.azimuthal,o.azimuthal,u),polar:l.number(p.polar,o.polar,u)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),Kt="-transition";class xt extends l.Evented{constructor(o){super(),this._transitionable=new l.Transitionable(Bt),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,u={}){if(!this._validate(l.validateLight,o,u))for(const g in o){const E=o[g];l.endsWith(g,Kt)?this._transitionable.setTransition(g.slice(0,-Kt.length),E):this._transitionable.setValue(g,E)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,u,g){return(!g||!1!==g.validate)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}const jt=new l.Properties({source:new l.DataConstantProperty(l.spec.terrain.source),exaggeration:new l.DataConstantProperty(l.spec.terrain.exaggeration)}),Lt="-transition";class Xt extends l.Evented{constructor(o,u){super(),this._transitionable=new l.Transitionable(jt),this.set(o),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(o){for(const u in o){const g=o[u];l.endsWith(u,Lt)?this._transitionable.setTransition(u.slice(0,-Lt.length),g):this._transitionable.setValue(u,g)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}}function Zt(p,o,u,g){const E=l.smoothstep(45,65,u),[I,B]=cn(p,g),z=l.length(o);let U=1-Math.min(1,Math.exp((z-I)/(B-I)*-6));return U*=U*U,U=Math.min(1,1.00747*U),U*E*p.alpha}function cn(p,o){const u=.5/Math.tan(.5*o);return[p.range[0]+u,p.range[1]+u]}const mn=new l.Properties({range:new l.DataConstantProperty(l.spec.fog.range),color:new l.DataConstantProperty(l.spec.fog.color),"high-color":new l.DataConstantProperty(l.spec.fog["high-color"]),"space-color":new l.DataConstantProperty(l.spec.fog["space-color"]),"horizon-blend":new l.DataConstantProperty(l.spec.fog["horizon-blend"]),"star-intensity":new l.DataConstantProperty(l.spec.fog["star-intensity"])}),Lr="-transition";class Jn extends l.Evented{constructor(o,u){super(),this._transitionable=new l.Transitionable(mn),this.set(o),this._transitioning=this._transitionable.untransitioned(),this._transform=u}get state(){const o=this._transform,u="globe"===o.projection.name,g=l.globeToMercatorTransition(o.zoom),E=this.properties.get("range"),I=[.5,3];return{range:u?[l.number(I[0],E[0],g),l.number(I[1],E[1],g)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,u={}){if(!this._validate(l.validateFog,o,u)){for(const g of Object.keys(l.spec.fog))o&&void 0===o[g]&&(o[g]=l.spec.fog[g].default);for(const g in o){const E=o[g];l.endsWith(g,Lr)?this._transitionable.setTransition(g.slice(0,-Lr.length),E):this._transitionable.setValue(g,E)}}}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:l.smoothstep(45,65,o))*u.a}getOpacityAtLatLng(o,u){return this._transform.projection.supportsFog?function(g,E,I){const B=l.MercatorCoordinate.fromLngLat(E),z=I.elevation?I.elevation.getAtPointOrZero(B):0,U=[B.x,B.y,z];return l.transformMat4(U,U,I.mercatorFogMatrix),Zt(g,U,I.pitch,I._fov)}(this.state,o,u):0}getFovAdjustedRange(o){return this._transform.projection.supportsFog?cn(this.state,o):[0,1]}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,u,g){return(!g||!1!==g.validate)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class fr{constructor(o,u){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const g=this.workerPool.acquire(this.id);for(let E=0;E<g.length;E++){const I=new fr.Actor(g[E],u,this.id);I.name=`Worker ${E}`,this.actors.push(I)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,u,g){l.asyncAll(this.actors,(E,I)=>{E.send(o,u,I)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Fr(p,o,u){return o*(l.EXTENT/(p.tileSize*Math.pow(2,u-p.tileID.overscaledZ)))}fr.Actor=l.Actor;class si{constructor(o,u,g,E){this.screenBounds=o,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(o,u){let g,E;if(o instanceof l.pointGeometry||"number"==typeof o[0]){const I=l.pointGeometry.convert(o);g=[l.pointGeometry.convert(o)],E=u.isPointAboveHorizon(I)}else{const I=l.pointGeometry.convert(o[0]),B=l.pointGeometry.convert(o[1]);g=[I,B],E=l.polygonizeBounds(I,B).every(z=>u.isPointAboveHorizon(z))}return new si(g,u.getCameraPoint(),E,u)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(o){return l.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const u=this.screenBounds[0],g=1===this.screenBounds.length?this.screenBounds[0].add(new l.pointGeometry(1,1)):this.screenBounds[1],E=l.polygonizeBounds(u,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<g.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?E[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(E[3]=this.cameraPoint)),l.bufferConvexPolygon(E,o)}bufferedCameraGeometryGlobe(o){const u=this.screenBounds[0],g=1===this.screenBounds.length?this.screenBounds[0].add(new l.pointGeometry(1,1)):this.screenBounds[1],E=l.polygonizeBounds(u,g,o),I=this.cameraPoint.clone();switch(3*((I.y>u.y)+(I.y>g.y))+((I.x>u.x)+(I.x>g.x))){case 0:E[0]=I,E[4]=I.clone();break;case 1:E.splice(1,0,I);break;case 2:E[1]=I;break;case 3:E.splice(4,0,I);break;case 5:E.splice(2,0,I);break;case 6:E[3]=I;break;case 7:E.splice(3,0,I);break;case 8:E[2]=I}return E}containsTile(o,u,g,E=0){const I=o.queryPadding/u._pixelsPerMercatorPixel+1,B=g?this._bufferedCameraMercator(I,u):this._bufferedScreenMercator(I,u);let z=o.tileID.wrap+(B.unwrapped?E:0);const U=B.polygon.map(Oe=>l.getTilePoint(o.tileTransform,Oe,z));if(!l.polygonIntersectsBox(U,0,0,l.EXTENT,l.EXTENT))return;z=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const Z=this.screenGeometryMercator.polygon.map(Oe=>l.getTileVec3(o.tileTransform,Oe,z)),X=Z.map(Oe=>new l.pointGeometry(Oe[0],Oe[1])),ae=u.getFreeCameraOptions().position||new l.MercatorCoordinate(0,0,0),ye=l.getTileVec3(o.tileTransform,ae,z),Le=Z.map(Oe=>{const Ce=l.sub(Oe,Oe,ye);return l.normalize(Ce,Ce),new l.Ray(ye,Ce)}),Ae=Fr(o,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:Le,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(De=l.getBounds(U),De.min.x=l.clamp(De.min.x,0,l.EXTENT),De.min.y=l.clamp(De.min.y,0,l.EXTENT),De.max.x=l.clamp(De.max.x,0,l.EXTENT),De.max.y=l.clamp(De.max.y,0,l.EXTENT),De),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Ae};var De}_bufferedScreenMercator(o,u){const g=Pi(o);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let E;return E="globe"===u.projection.name?this._projectAndResample(this.bufferedScreenGeometry(o),u):{polygon:this.bufferedScreenGeometry(o).map(I=>u.pointCoordinate3D(I)),unwrapped:!0},this._screenRaycastCache[g]=E,E}}_bufferedCameraMercator(o,u){const g=Pi(o);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let E;return E="globe"===u.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),u):{polygon:this.bufferedCameraGeometry(o).map(I=>u.pointCoordinate3D(I)),unwrapped:!0},this._cameraRaycastCache[g]=E,E}}_projectAndResample(o,u){const g=function(I,B){const z=l.multiply([],B.pixelMatrix,B.globeMatrix),U=[0,-l.GLOBE_RADIUS,0,1],Z=[0,l.GLOBE_RADIUS,0,1],X=[0,0,0,1];l.transformMat4$1(U,U,z),l.transformMat4$1(Z,Z,z),l.transformMat4$1(X,X,z);const ae=new l.pointGeometry(U[0]/U[3],U[1]/U[3]),ye=new l.pointGeometry(Z[0]/Z[3],Z[1]/Z[3]),Le=l.polygonContainsPoint(I,ae)&&U[3]<X[3],Ae=l.polygonContainsPoint(I,ye)&&Z[3]<X[3];if(!Le&&!Ae)return null;const De=function(st,tt,gt){for(let kt=1;kt<st.length;kt++){const ln=Ti(tt.pointCoordinate3D(st[kt-1]).x),At=Ti(tt.pointCoordinate3D(st[kt]).x);if(gt<0){if(ln<At)return{idx:kt,t:-ln/(At-1-ln)}}else if(At<ln)return{idx:kt,t:(1-ln)/(At+1-ln)}}return null}(I,B,Le?-1:1);if(!De)return null;const{idx:Oe,t:Ce}=De;let Ve=Oe>1?yi(I.slice(0,Oe),B):[],ze=Oe<I.length?yi(I.slice(Oe),B):[];Ve=Ve.map(st=>new l.pointGeometry(Ti(st.x),st.y)),ze=ze.map(st=>new l.pointGeometry(Ti(st.x),st.y));const ft=[...Ve];0===ft.length&&ft.push(ze[ze.length-1]);const ot=l.number(ft[ft.length-1].y,(0===ze.length?Ve[0]:ze[0]).y,Ce);let Ke;return Ke=Le?[new l.pointGeometry(0,ot),new l.pointGeometry(0,0),new l.pointGeometry(1,0),new l.pointGeometry(1,ot)]:[new l.pointGeometry(1,ot),new l.pointGeometry(1,1),new l.pointGeometry(0,1),new l.pointGeometry(0,ot)],ft.push(...Ke),0===ze.length?ft.push(Ve[0]):ft.push(...ze),{polygon:ft.map(st=>new l.MercatorCoordinate(st.x,st.y)),unwrapped:!1}}(o,u);if(g)return g;const E=function(I,B){let z=!1,U=-1/0,Z=0;for(let ae=0;ae<I.length-1;ae++)I[ae].x>U&&(U=I[ae].x,Z=ae);for(let ae=0;ae<I.length-1;ae++){const ye=(Z+ae)%(I.length-1),Le=I[ye],Ae=I[ye+1];Math.abs(Le.x-Ae.x)>.5&&(Le.x<Ae.x?(Le.x+=1,0===ye&&(I[I.length-1].x+=1)):(Ae.x+=1,ye+1===I.length-1&&(I[0].x+=1)),z=!0)}const X=l.mercatorXfromLng(B.center.lng);return z&&X<Math.abs(X-1)&&I.forEach(ae=>{ae.x-=1}),{polygon:I,unwrapped:z}}(yi(o,u).map(I=>new l.pointGeometry(Ti(I.x),I.y)),u);return{polygon:E.polygon.map(I=>new l.MercatorCoordinate(I.x,I.y)),unwrapped:E.unwrapped}}}function yi(p,o){return l.resample(p,u=>{const g=o.pointCoordinate3D(u);u.x=g.x,u.y=g.y},1/256)}function Ti(p){return p<0?1+p%1:p%1}function Pi(p){return 100*p|0}function Nt(p,o,u,g,E){const I=function(B,z){if(B)return E(B);if(z){const U=l.pick(l.extend(z,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(U.vectorLayers=z.vector_layers,U.vectorLayerIds=U.vectorLayers.map(Z=>Z.id)),z.language_options&&(U.languageOptions=z.language_options),z.language&&z.language[z.id]&&(U.language=z.language[z.id]),z.worldview_options&&(U.worldviewOptions=z.worldview_options),z.worldview?U.worldview=z.worldview[z.id]:z.worldview_default&&(U.worldview=z.worldview_default),U.tiles=o.canonicalizeTileset(U,p.url),E(null,U)}};return p.url?l.getJSON(o.transformRequest(o.normalizeSourceURL(p.url,null,u,g),l.ResourceType.Source),I):l.exported.frame(()=>I(null,p))}class An{constructor(o,u,g){this.bounds=l.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(o){return Array.isArray(o)&&4===o.length?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const u=Math.pow(2,o.z),g=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),E=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),I=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),B=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return o.x>=g&&o.x<I&&o.y>=E&&o.y<B}}class ni{constructor(o,u,g){this.context=o;const E=o.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ui={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vi{constructor(o,u,g,E){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=E,this.context=o;const I=o.gl;this.buffer=I.createBuffer(),o.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,u){for(let g=0;g<this.attributes.length;g++){const E=u.attributes[this.attributes[g].name];void 0!==E&&o.enableVertexAttribArray(E)}}setVertexAttribPointers(o,u,g){for(let E=0;E<this.attributes.length;E++){const I=this.attributes[E],B=u.attributes[I.name];void 0!==B&&o.vertexAttribPointer(B,I.components,o[ui[I.type]],!1,this.itemSize,I.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Oi extends Zn{getDefault(){return l.Color.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Ur extends Zn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class gr extends Zn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class ri extends Zn{getDefault(){return[!0,!0,!0,!0]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class bi extends Zn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class pr extends Zn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class _o extends Zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const u=this.current;(o.func!==u.func||o.ref!==u.ref||o.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class fi extends Zn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class pi extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=o,this.dirty=!1}}class ii extends Zn{getDefault(){return[0,1]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Li extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=o,this.dirty=!1}}class nr extends Zn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Hr extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.BLEND):u.disable(u.BLEND),this.current=o,this.dirty=!1}}class Gr extends Zn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Er extends Zn{getDefault(){return l.Color.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Cr extends Zn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class lr extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=o,this.dirty=!1}}class ir extends Zn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Pt extends Zn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class qe extends Zn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Xe extends Zn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class zt extends Zn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Qt extends Zn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class jn extends Zn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Wt extends Zn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class On extends Zn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class fn extends Zn{getDefault(){return null}set(o){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Rr extends Zn{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class Vi extends Zn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class ao extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Tr extends Zn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Nn extends Zn{constructor(o,u){super(o),this.context=o,this.parent=u}getDefault(){return null}}class mi extends Nn{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class ke extends Nn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ne extends ke{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ue{constructor(o,u,g,E){this.context=o,this.width=u,this.height=g;const I=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new mi(o,I),E&&(this.depthAttachment=new ke(o,I))}destroy(){const o=this.context.gl,u=this.colorAttachment.get();if(u&&o.deleteTexture(u),this.depthAttachment){const g=this.depthAttachment.get();g&&o.deleteRenderbuffer(g)}o.deleteFramebuffer(this.framebuffer)}}class Re{constructor(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oi(this),this.clearDepth=new Ur(this),this.clearStencil=new gr(this),this.colorMask=new ri(this),this.depthMask=new bi(this),this.stencilMask=new pr(this),this.stencilFunc=new _o(this),this.stencilOp=new fi(this),this.stencilTest=new pi(this),this.depthRange=new ii(this),this.depthTest=new Li(this),this.depthFunc=new nr(this),this.blend=new Hr(this),this.blendFunc=new Gr(this),this.blendColor=new Er(this),this.blendEquation=new Cr(this),this.cullFace=new lr(this),this.cullFaceSide=new ir(this),this.frontFace=new Pt(this),this.program=new qe(this),this.activeTexture=new Xe(this),this.viewport=new zt(this),this.bindFramebuffer=new Qt(this),this.bindRenderbuffer=new jn(this),this.bindTexture=new Wt(this),this.bindVertexBuffer=new On(this),this.bindElementBuffer=new fn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Rr(this),this.pixelStoreUnpack=new Vi(this),this.pixelStoreUnpackPremultiplyAlpha=new ao(this),this.pixelStoreUnpackFlipY=new Tr(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=o.getExtension("OES_standard_derivatives"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,u){return new ni(this,o,u)}createVertexBuffer(o,u,g){return new vi(this,o,u,g)}createRenderbuffer(o,u,g){const E=this.gl,I=E.createRenderbuffer();return this.bindRenderbuffer.set(I),E.renderbufferStorage(E.RENDERBUFFER,o,u,g),this.bindRenderbuffer.set(null),I}createFramebuffer(o,u,g){return new ue(this,o,u,g)}clear({color:o,depth:u,stencil:g}){const E=this.gl;let I=0;o&&(I|=E.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(I|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),void 0!==g&&(I|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),E.clear(I)}setCullFace(o){!1===o.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){J(o.blendFunction,l.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ge extends l.Evented{constructor(o,u,g,E){super(),this.id=o,this.dispatcher=g,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Nt(this._options,this.map._requestManager,null,null,(o,u)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new An(u.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(u.tiles),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,u){const g=l.exported.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);o.request=l.getImage(this.map._requestManager.transformRequest(E,l.ResourceType.Tile),(I,B,z,U)=>(delete o.request,o.aborted?(o.state="unloaded",u(null)):I?(o.state="errored",u(I)):B?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:z,expires:U}),o.setTexture(B,this.map.painter),o.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),void u(null)):u(null)))}static loadTileData(o,u,g){o.setTexture(u,g)}static unloadTileData(o,u){o.texture&&u.saveTileTexture(o.texture)}abortTile(o,u){o.request&&(o.request.cancel(),delete o.request),u()}unloadTile(o,u){o.texture&&this.map.painter.saveTileTexture(o.texture),u()}hasTransition(){return!1}}let it;function vt(p,o,u,g,E,I,B,z){const U=[p,u,E,o,g,I,1,1,1],Z=[B,z,1],X=l.adjoint([],U),[ae,ye,Le]=l.transformMat3(Z,Z,l.transpose(X,X));return l.multiply$1(U,[ae,0,0,0,ye,0,0,0,Le],U)}class wt extends l.Evented{constructor(o,u,g,E){super(),this.id=o,this.dispatcher=g,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=u}load(o,u){this._loaded=u||!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(g,E)=>{if(this._loaded=!0,g)this.fire(new l.ErrorEvent(g));else if(E){const{HTMLImageElement:I}=l.window;this.image=E instanceof I?l.exported.getImageData(E):E,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading()}})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(o){this.coordinates=o,this._boundsArray=void 0;const u=o.map(l.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let E=1/0,I=1/0,B=-1/0,z=-1/0;for(const ae of g)E=Math.min(E,ae.x),I=Math.min(I,ae.y),B=Math.max(B,ae.x),z=Math.max(z,ae.y);const U=Math.max(B-E,z-I),Z=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),X=Math.pow(2,Z);return new l.CanonicalTileID(Z,Math.floor((E+B)/2*X),Math.floor((I+z)/2*X))}(u),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(o){for(const U in this.tiles){const Z=this.tiles[U];"loaded"!==Z.state&&(Z.state="loaded",Z.texture=this.texture)}if(this._boundsArray)return;const u=l.tileTransform(this.tileID,this.map.transform.projection),[g,E,I,B]=this.coordinates.map(U=>{const Z=u.projection.project(U[0],U[1]);return l.getTilePoint(u,Z)._round()});this.perspectiveTransform=function(U,Z,X,ae,ye,Le,Ae,De,Oe,Ce){const Ve=vt(0,0,U,0,0,Z,U,Z),ze=vt(X,ae,ye,Le,Ae,De,Oe,Ce);return l.multiply$1(ze,l.adjoint(Ve,Ve),ze),[ze[6]/ze[8]*U/l.EXTENT,ze[7]/ze[8]*Z/l.EXTENT]}(this.width,this.height,g.x,g.y,E.x,E.y,B.x,B.y,I.x,I.y);const z=this._boundsArray=new l.StructArrayLayout4i8;z.emplaceBack(g.x,g.y,0,0),z.emplaceBack(E.x,E.y,l.EXTENT,0),z.emplaceBack(B.x,B.y,0,l.EXTENT),z.emplaceBack(I.x,I.y,l.EXTENT,l.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=o.createVertexBuffer(z,l.boundsAttributes.members),this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const o=this.map.painter.context,u=o.gl;this.texture?this.texture.update(this.image):(this.texture=new l.Texture(o,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._prepareData(o)}loadTile(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const at={vector:class extends l.Evented{constructor(p,o,u,g){if(super(),this.id=p,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(o,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g),this._tileWorkers={},this._deduped=new l.DedupedRequest}load(p){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"}));const o=this.language||this.map._language,u=this.worldview||this.map._worldview;this._tileJSONRequest=Nt(this._options,this.map._requestManager,o,u,(g,E)=>{this._tileJSONRequest=null,this._loaded=!0,g?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${o}`),u&&2!==u.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new l.ErrorEvent(g))):E&&(l.extend(this,E),E.bounds&&(this.tileBounds=new An(E.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(E.tiles,this.map._requestManager._customAccessToken),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),p&&p(g)})}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load(()=>{const o=this.map.style._getSourceCaches(this.id);for(const u of o)u.clearTiles()})}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}_setLanguage(p){return p===this.language||this.setSourceProperty(()=>{this.language=p}),this}_setWorldview(p){return p===this.worldview?this:this.worldviewOptions&&p&&!this.worldviewOptions[p]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${p}".`),this):(this.setSourceProperty(()=>{this.worldview=p}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(p,o){const u=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(u,l.ResourceType.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:p.isSymbolTile};if(g.request.collectResourceTiming=this._collectResourceTiming,p.actor&&"expired"!==p.state)"loading"===p.state?p.reloadCallback=o:p.request=p.actor.send("reloadTile",g,E.bind(this));else if(p.actor=this._tileWorkers[u]=this._tileWorkers[u]||this.dispatcher.getActor(),this.dispatcher.ready)p.request=p.actor.send("loadTile",g,E.bind(this),void 0,!0);else{const I=l.loadVectorTile.call({deduped:this._deduped},g,(B,z)=>{B||!z?E.call(this,B):(g.data={cacheControl:z.cacheControl,expires:z.expires,rawData:z.rawData.slice(0)},p.actor&&p.actor.send("loadTile",g,E.bind(this),void 0,!0))},!0);p.request={cancel:I}}function E(I,B){return delete p.request,p.aborted?o(null):I&&404!==I.status?o(I):(B&&B.resourceTiming&&(p.resourceTiming=B.resourceTiming),this.map._refreshExpiredTiles&&B&&p.setExpiryData(B),p.loadVectorData(B,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),o(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id})}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ge,"raster-dem":class extends Ge{constructor(p,o,u,g){super(p,o,u,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(p,o){const u=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(E,I){E&&(p.state="errored",o(E)),I&&(p.dem=I,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",o(null))}p.request=l.getImage(this.map._requestManager.transformRequest(u,l.ResourceType.Tile),function(E,I,B,z){if(delete p.request,p.aborted)p.state="unloaded",o(null);else if(E)p.state="errored",o(E);else if(I){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:B,expires:z});const U=l.window.ImageBitmap&&I instanceof l.window.ImageBitmap&&(null==it&&(it=l.window.OffscreenCanvas&&new l.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof l.window.createImageBitmap),it),Z=1-(I.width-l.prevPowerOfTwo(I.width))/2;Z<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const X=U?I:l.exported.getImageData(I,Z),ae={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:Z};p.actor&&"expired"!==p.state||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",ae,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const o=p.canonical,u=Math.pow(2,o.z),g=(o.x-1+u)%u,E=0===o.x?p.wrap-1:p.wrap,I=(o.x+1+u)%u,B=o.x+1===u?p.wrap+1:p.wrap,z={};return z[new l.OverscaledTileID(p.overscaledZ,E,o.z,g,o.y).key]={backfilled:!1},z[new l.OverscaledTileID(p.overscaledZ,B,o.z,I,o.y).key]={backfilled:!1},o.y>0&&(z[new l.OverscaledTileID(p.overscaledZ,E,o.z,g,o.y-1).key]={backfilled:!1},z[new l.OverscaledTileID(p.overscaledZ,p.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},z[new l.OverscaledTileID(p.overscaledZ,B,o.z,I,o.y-1).key]={backfilled:!1}),o.y+1<u&&(z[new l.OverscaledTileID(p.overscaledZ,E,o.z,g,o.y+1).key]={backfilled:!1},z[new l.OverscaledTileID(p.overscaledZ,p.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},z[new l.OverscaledTileID(p.overscaledZ,B,o.z,I,o.y+1).key]={backfilled:!1}),z}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends l.Evented{constructor(p,o,u,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(g),this._data=o.data,this._options=l.extend({},o),this._collectResourceTiming=o.collectResourceTiming,void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const E=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*E,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*E,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:l.EXTENT,radius:(void 0!==o.clusterRadius?o.clusterRadius:50)*E,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},o),this}getClusterChildren(p,o){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},o),this}getClusterLeaves(p,o,u,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:o,offset:u},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=l.extend({},this.workerOptions),o=this._data;"string"==typeof o?(p.request=this.map._requestManager.transformRequest(l.exported.resolveURL(o),l.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(u,g)=>{if(this._loaded=!0,this._pendingLoad=null,u)this.fire(new l.ErrorEvent(u));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(E.resourceTiming=g.resourceTiming[this.id]),this.fire(new l.Event("data",E)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,o){const u=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(u,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,E)=>(delete p.request,p.unloadVectorData(),p.aborted?o(null):g?o(g):(p.loadVectorData(E,this.map.painter,"reloadTile"===u),o(null))),void 0,"loadTile"===u)}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends wt{constructor(p,o,u,g){super(p,o,u,g),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const o of p.urls)this.urls.push(this.map._requestManager.transformRequest(o,l.ResourceType.Source).url);l.getVideo(this.urls,(o,u)=>{this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const o=this.video.seekable;p<o.start(0)||p>o.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const p=this.map.painter.context,o=p.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(p,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:wt,canvas:class extends wt{constructor(p,o,u,g){super(p,o,u,g),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(E=>!Array.isArray(E)||2!==E.length||E.some(I=>"number"!=typeof I))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const o=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(o,this.canvas,o.gl.RGBA,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends l.Evented{constructor(p,o,u,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=o,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new An(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.coveringTiles=this._coveringTiles.bind(this),l.extend(this,l.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:o,y:u,z:g}=p.canonical;return this._implementation.hasTile({x:o,y:u,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,o){const{x:u,y:g,z:E}=p.tileID.canonical,I=new l.window.AbortController,B=this._implementation.loadTile({x:u,y:g,z:E},{signal:I.signal});if(!B)return this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",o(null);B.cancel=()=>I.abort(),p.request=B.then(function(z){return delete p.request,p.aborted?(p.state="unloaded",o(null)):z?(U=z)instanceof l.window.ImageData||U instanceof l.window.ImageBitmap||U instanceof l.window.HTMLCanvasElement?(this.loadTileData(p,z),p.state="loaded",void o(null)):(p.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",o(null));var U}.bind(this)).catch(z=>{20!==z.code&&(p.state="errored",o(z))})}loadTileData(p,o){Ge.loadTileData(p,o,this._map.painter)}unloadTileData(p){Ge.unloadTileData(p,this._map.painter)}prepareTile(p){if(!this._implementation.prepareTile)return null;const{x:o,y:u,z:g}=p.tileID.canonical,E=this._implementation.prepareTile({x:o,y:u,z:g});return E?(this.loadTileData(p,E),p.state="loaded",E):null}unloadTile(p,o){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:u,y:g,z:E}=p.tileID.canonical;this._implementation.unloadTile({x:u,y:g,z:E})}o()}abortTile(p,o){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),o()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_update(){this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}}},It=function(p,o,u,g){const E=new at[o.type](p,o,u,g);if(E.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${E.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],E),E};function an(p,o){const u=l.identity([]);return l.scale(u,u,[.5*p.width,.5*-p.height,1]),l.translate(u,u,[1,-1,0]),l.multiply(u,u,p.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(u)}function wn(p,o,u,g,E,I,B,z=!1){const U=p.tilesIn(g,B,z);U.sort(er);const Z=[];for(const ae of U)Z.push({wrappedTileID:ae.tile.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(o,u,p._state,ae,E,I,an(p.transform,ae.tile.tileID),z)});const X=function(ae){const ye={},Le={};for(const Ae of ae){const De=Ae.queryResults,Oe=Ae.wrappedTileID,Ce=Le[Oe]=Le[Oe]||{};for(const Ve in De){const ze=De[Ve],ft=Ce[Ve]=Ce[Ve]||{},ot=ye[Ve]=ye[Ve]||[];for(const Ke of ze)ft[Ke.featureIndex]||(ft[Ke.featureIndex]=!0,ot.push(Ke))}}return ye}(Z);for(const ae in X)X[ae].forEach(ye=>{const Le=ye.feature,Ae=Le.layer;Ae&&"background"!==Ae.type&&"sky"!==Ae.type&&(Le.source=Ae.source,Ae["source-layer"]&&(Le.sourceLayer=Ae["source-layer"]),Le.state=void 0!==Le.id?p.getFeatureState(Ae["source-layer"],Le.id):{})});return X}function Jt(p,o){const u=p.getRenderableIds().map(I=>p.getTileByID(I)),g=[],E={};for(let I=0;I<u.length;I++){const B=u[I],z=B.tileID.canonical.key;E[z]||(E[z]=!0,B.querySourceFeatures(g,o))}return g}function er(p,o){const u=p.tileID,g=o.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}function sr(){return null!=Xc.workerClass?new Xc.workerClass:new l.window.Worker(Xc.workerUrl)}const tr="mapboxgl_preloaded_worker_pool";class Xn{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Xn.workerCount;)this.workers.push(new sr);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[tr]}numActive(){return Object.keys(this.active).length}}let mr;function Vr(){return mr||(mr=new Xn),mr}function Mr(p,o){const u={};for(const g in p)"ref"!==g&&(u[g]=p[g]);return l.refProperties.forEach(g=>{g in o&&(u[g]=o[g])}),u}function ai(p){p=p.slice();const o=Object.create(null);for(let u=0;u<p.length;u++)o[p[u].id]=p[u];for(let u=0;u<p.length;u++)"ref"in p[u]&&(p[u]=Mr(p[u],o[p[u].ref]));return p}Xn.workerCount=2;const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ut(p,o,u){u.push({command:qn.addSource,args:[p,o[p]]})}function hr(p,o,u){o.push({command:qn.removeSource,args:[p]}),u[p]=!0}function Bn(p,o,u,g){hr(p,u,g),ut(p,o,u)}function Wi(p,o,u){let g;for(g in p[u])if(p[u].hasOwnProperty(g)&&"data"!==g&&!J(p[u][g],o[u][g]))return!1;for(g in o[u])if(o[u].hasOwnProperty(g)&&"data"!==g&&!J(p[u][g],o[u][g]))return!1;return!0}function os(p,o,u,g,E,I){let B;for(B in o=o||{},p=p||{})p.hasOwnProperty(B)&&(J(p[B],o[B])||u.push({command:I,args:[g,B,o[B],E]}));for(B in o)o.hasOwnProperty(B)&&!p.hasOwnProperty(B)&&(J(p[B],o[B])||u.push({command:I,args:[g,B,o[B],E]}))}function Zr(p){return p.id}function _t(p,o){return p[o.id]=o,p}class dt{constructor(o,u){this.reset(o,u)}reset(o,u){this.points=o||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(1===this.points.length)return this.points[0];o=l.clamp(o,0,1);let u=1,g=this._distances[u];const E=o*this.paddedLength+this.padding;for(;g<E&&u<this._distances.length;)g=this._distances[++u];const I=u-1,B=this._distances[I],z=g-B,U=z>0?(E-B)/z:0;return this.points[I].mult(1-U).add(this.points[u].mult(U))}}class Ne{constructor(o,u,g){const E=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(o/g),this.yCellCount=Math.ceil(u/g);for(let B=0;B<this.xCellCount*this.yCellCount;B++)E.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=u,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,u,g,E,I){this._forEachCell(u,g,E,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(E),this.bboxes.push(I)}insertCircle(o,u,g,E){this._forEachCell(u-E,g-E,u+E,g+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(u),this.circles.push(g),this.circles.push(E)}_insertBoxCell(o,u,g,E,I,B){this.boxCells[I].push(B)}_insertCircleCell(o,u,g,E,I,B){this.circleCells[I].push(B)}_query(o,u,g,E,I,B){if(g<0||o>this.width||E<0||u>this.height)return!I&&[];const z=[];if(o<=0&&u<=0&&this.width<=g&&this.height<=E){if(I)return!0;for(let U=0;U<this.boxKeys.length;U++)z.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const Z=this.circles[3*U],X=this.circles[3*U+1],ae=this.circles[3*U+2];z.push({key:this.circleKeys[U],x1:Z-ae,y1:X-ae,x2:Z+ae,y2:X+ae})}return B?z.filter(B):z}return this._forEachCell(o,u,g,E,this._queryCell,z,{hitTest:I,seenUids:{box:{},circle:{}}},B),I?z.length>0:z}_queryCircle(o,u,g,E,I){const B=o-g,z=o+g,U=u-g,Z=u+g;if(z<0||B>this.width||Z<0||U>this.height)return!E&&[];const X=[];return this._forEachCell(B,U,z,Z,this._queryCellCircle,X,{hitTest:E,circle:{x:o,y:u,radius:g},seenUids:{box:{},circle:{}}},I),E?X.length>0:X}query(o,u,g,E,I){return this._query(o,u,g,E,!1,I)}hitTest(o,u,g,E,I){return this._query(o,u,g,E,!0,I)}hitTestCircle(o,u,g,E){return this._queryCircle(o,u,g,!0,E)}_queryCell(o,u,g,E,I,B,z,U){const Z=z.seenUids,X=this.boxCells[I];if(null!==X){const ye=this.bboxes;for(const Le of X)if(!Z.box[Le]){Z.box[Le]=!0;const Ae=4*Le;if(o<=ye[Ae+2]&&u<=ye[Ae+3]&&g>=ye[Ae+0]&&E>=ye[Ae+1]&&(!U||U(this.boxKeys[Le]))){if(z.hitTest)return B.push(!0),!0;B.push({key:this.boxKeys[Le],x1:ye[Ae],y1:ye[Ae+1],x2:ye[Ae+2],y2:ye[Ae+3]})}}}const ae=this.circleCells[I];if(null!==ae){const ye=this.circles;for(const Le of ae)if(!Z.circle[Le]){Z.circle[Le]=!0;const Ae=3*Le;if(this._circleAndRectCollide(ye[Ae],ye[Ae+1],ye[Ae+2],o,u,g,E)&&(!U||U(this.circleKeys[Le]))){if(z.hitTest)return B.push(!0),!0;{const De=ye[Ae],Oe=ye[Ae+1],Ce=ye[Ae+2];B.push({key:this.circleKeys[Le],x1:De-Ce,y1:Oe-Ce,x2:De+Ce,y2:Oe+Ce})}}}}}_queryCellCircle(o,u,g,E,I,B,z,U){const Z=z.circle,X=z.seenUids,ae=this.boxCells[I];if(null!==ae){const Le=this.bboxes;for(const Ae of ae)if(!X.box[Ae]){X.box[Ae]=!0;const De=4*Ae;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,Le[De+0],Le[De+1],Le[De+2],Le[De+3])&&(!U||U(this.boxKeys[Ae])))return B.push(!0),!0}}const ye=this.circleCells[I];if(null!==ye){const Le=this.circles;for(const Ae of ye)if(!X.circle[Ae]){X.circle[Ae]=!0;const De=3*Ae;if(this._circlesCollide(Le[De],Le[De+1],Le[De+2],Z.x,Z.y,Z.radius)&&(!U||U(this.circleKeys[Ae])))return B.push(!0),!0}}}_forEachCell(o,u,g,E,I,B,z,U){const Z=this._convertToXCellCoord(o),X=this._convertToYCellCoord(u),ae=this._convertToXCellCoord(g),ye=this._convertToYCellCoord(E);for(let Le=Z;Le<=ae;Le++)for(let Ae=X;Ae<=ye;Ae++)if(I.call(this,o,u,g,E,this.xCellCount*Ae+Le,B,z,U))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,u,g,E,I,B){const z=E-o,U=I-u,Z=g+B;return Z*Z>z*z+U*U}_circleAndRectCollide(o,u,g,E,I,B,z){const U=(B-E)/2,Z=Math.abs(o-(E+U));if(Z>U+g)return!1;const X=(z-I)/2,ae=Math.abs(u-(I+X));if(ae>X+g)return!1;if(Z<=U||ae<=X)return!0;const ye=Z-U,Le=ae-X;return ye*ye+Le*Le<=g*g}}const We=Math.tan(85*Math.PI/180);function bt(p,o,u,g,E,I,B){const z=l.create();if(u)if("globe"===I.name){const U=l.calculateGlobeLabelMatrix(E,o);l.multiply(z,z,U)}else{const U=$t([],B);z[0]=U[0],z[1]=U[1],z[4]=U[2],z[5]=U[3],g||l.rotateZ(z,z,E.angle)}else l.multiply(z,E.labelPlaneMatrix,p);return z}function Sn(p,o,u,g,E,I,B){const z=bt(p,o,u,g,E,I,B);return"globe"===I.name&&u||(z[2]=z[6]=z[10]=z[14]=0),z}function vr(p,o,u,g,E,I,B){if(u){if("globe"===I.name){const z=bt(p,o,u,g,E,I,B);return l.invert(z,z),l.multiply(z,p,z),z}{const z=l.clone(p),U=l.identity([]);return U[0]=B[0],U[1]=B[1],U[4]=B[2],U[5]=B[3],l.multiply(z,z,U),g||l.rotateZ(z,z,-E.angle),z}}return E.glCoordMatrix}function Br(p,o,u=0){const g=[p.x,p.y,u,1];u?l.transformMat4$1(g,g,o):rt(g,g,o);const E=g[3];return{point:[g[0]/E,g[1]/E,g[2]/E],signedDistanceFromCamera:E}}function or(p,o){const u=[p[0],p[1],p[2],1];l.transformMat4$1(u,u,o);const g=u[3];return{point:[u[0]/g,u[1]/g,u[2]/g],signedDistanceFromCamera:g}}function Ui(p,o){return Math.min(.5+p/o*.5,1.5)}function ts(p,o){const u=p[0]/p[3],g=p[1]/p[3];return u>=-o[0]&&u<=o[0]&&g>=-o[1]&&g<=o[1]}function ss(p,o,u,g,E,I,B,z,U,Z){const X=u.transform,ae=g?p.textSizeData:p.iconSizeData,ye=l.evaluateSizeForZoom(ae,u.transform.zoom),Le="globe"===X.projection.name,Ae=[256/u.width*2+1,256/u.height*2+1],De=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;De.clear();let Oe=null;Le&&(Oe=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const Ce=p.lineVertexArray,Ve=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,ze=u.transform.width/u.transform.height;let ft=!1;for(let ot=0;ot<Ve.length;ot++){const Ke=Ve.get(ot);if(Ke.writingMode!==l.WritingMode.vertical||ft||0!==ot&&Ve.get(ot-1).writingMode===l.WritingMode.horizontal||(ft=!0),(Ke.hidden||Ke.writingMode===l.WritingMode.vertical)&&!ft){Be(Ke.numGlyphs,De);continue}ft=!1;const st=new l.pointGeometry(Ke.tileAnchorX,Ke.tileAnchorY),tt=U?U(st):[0,0,0],gt=X.projection.projectTilePoint(st.x,st.y,Z.canonical),kt=[gt.x+tt[0],gt.y+tt[1],gt.z+tt[2]],ln=[...kt,1];if(l.transformMat4$1(ln,ln,o),!ts(ln,Ae)){Be(Ke.numGlyphs,De);continue}const At=Ui(u.transform.cameraToCenterDistance,ln[3]),sn=l.evaluateSizeForFeature(ae,ye,Ke),rn=B?sn/At:sn*At,kn=Br(new l.pointGeometry(kt[0],kt[1]),E,kt[2]);if(kn.signedDistanceFromCamera<=0){Be(Ke.numGlyphs,De);continue}let qt={};const _n=B?null:U,hn=Vs(Ke,rn,!1,z,o,E,I,p.glyphOffsetArray,Ce,De,Oe,kn.point,st,qt,ze,_n,X.projection,Z,B);ft=hn.useVertical,_n&&hn.needsFlipping&&(qt={}),(hn.notEnoughRoom||ft||hn.needsFlipping&&Vs(Ke,rn,!0,z,o,E,I,p.glyphOffsetArray,Ce,De,Oe,kn.point,st,qt,ze,_n,X.projection,Z,B).notEnoughRoom)&&Be(Ke.numGlyphs,De)}g?(p.text.dynamicLayoutVertexBuffer.updateData(De),Oe&&p.text.globeExtVertexBuffer.updateData(Oe)):(p.icon.dynamicLayoutVertexBuffer.updateData(De),Oe&&p.icon.globeExtVertexBuffer.updateData(Oe))}function qi(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De){const Oe=z.glyphStartIndex+z.numGlyphs,Ce=z.lineStartIndex,Ve=z.lineStartIndex+z.lineLength,ze=o.getoffsetX(z.glyphStartIndex),ft=o.getoffsetX(Oe-1),ot=Et(p*ze,u,g,E,I,B,z.segment,Ce,Ve,U,Z,X,ae,ye,!0,Le,Ae,De);if(!ot)return null;const Ke=Et(p*ft,u,g,E,I,B,z.segment,Ce,Ve,U,Z,X,ae,ye,!0,Le,Ae,De);return Ke?{first:ot,last:Ke}:null}function Sr(p,o,u,g){return p.writingMode===l.WritingMode.horizontal&&Math.abs(u.y-o.y)>Math.abs(u.x-o.x)*g?{useVertical:!0}:p.writingMode===l.WritingMode.vertical?o.y<u.y?{needsFlipping:!0}:null:0!==p.flipState&&function(E,I,B){const z=(I.x-E.x)*B;return 0===z||Math.abs((I.y-E.y)/z)>We}(o,u,g)?1===p.flipState?{needsFlipping:!0}:null:o.x>u.x?{needsFlipping:!0}:null}function Vs(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De,Oe,Ce,Ve){const ze=o/24,ft=p.lineOffsetX*ze,ot=p.lineOffsetY*ze;let Ke;if(p.numGlyphs>1){const st=p.glyphStartIndex+p.numGlyphs,tt=p.lineStartIndex,gt=p.lineStartIndex+p.lineLength,kt=qi(ze,z,ft,ot,u,ae,ye,p,U,I,Le,De,!1,Oe,Ce,Ve);if(!kt)return{notEnoughRoom:!0};const ln=or(kt.first.point,B).point,At=or(kt.last.point,B).point,sn=new l.pointGeometry(ln[0],ln[1]),rn=new l.pointGeometry(At[0],At[1]);if(g&&!u){const kn=Sr(p,sn,rn,Ae);if(p.flipState=kn&&kn.needsFlipping?1:2,kn)return kn}Ke=[kt.first];for(let kn=p.glyphStartIndex+1;kn<st-1;kn++)Ke.push(Et(ze*z.getoffsetX(kn),ft,ot,u,ae,ye,p.segment,tt,gt,U,I,Le,De,!1,!1,Oe,Ce,Ve));Ke.push(kt.last)}else{if(g&&!u){const tt=Br(ye,E).point,gt=p.lineStartIndex+p.segment+1,kt=new l.pointGeometry(U.getx(gt),U.gety(gt)),ln=Br(kt,E),At=ln.signedDistanceFromCamera>0?ln.point:ms(ye,kt,tt,1,E,void 0,Oe,Ce.canonical),sn=Sr(p,new l.pointGeometry(tt[0],tt[1]),new l.pointGeometry(At[0],At[1]),Ae);if(p.flipState=sn&&sn.needsFlipping?1:2,sn)return sn}const st=Et(ze*z.getoffsetX(p.glyphStartIndex),ft,ot,u,ae,ye,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,U,I,Le,De,!1,!1,Oe,Ce,Ve);if(!st)return{notEnoughRoom:!0};Ke=[st]}if(X)for(const st of Ke)l.updateGlobeVertexNormal(X,Z.length+0,st.up[0],st.up[1],st.up[2]),l.updateGlobeVertexNormal(X,Z.length+1,st.up[0],st.up[1],st.up[2]),l.updateGlobeVertexNormal(X,Z.length+2,st.up[0],st.up[1],st.up[2]),l.updateGlobeVertexNormal(X,Z.length+3,st.up[0],st.up[1],st.up[2]),l.addDynamicAttributes(Z,st.point[0],st.point[1],st.point[2],st.angle);else for(const st of Ke)l.addDynamicAttributes(Z,st.point[0],st.point[1],st.point[2],st.angle);return{}}function Ms(p,o,u,g,E){const I=g.projectTilePoint(p.x,p.y,o);if(!E)return Br(I,u,I.z);const B=E(p);return Br(new l.pointGeometry(I.x+B[0],I.y+B[1]),u,I.z+B[2])}function ms(p,o,u,g,E,I,B,z){const U=Ms(p.add(p.sub(o)._unit()),z,E,B,I).point,Z=l.sub([],u,U);return l.scaleAndAdd([],u,Z,g/l.length(Z))}function Et(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De,Oe,Ce){const Ve=g?p-o:p+o;let ze=Ve>0?1:-1,ft=0;g&&(ze*=-1,ft=Math.PI),ze<0&&(ft+=Math.PI);let ot=ze>0?z+B:z+B+1,Ke=E,st=E,tt=0,gt=0;const kt=Math.abs(Ve),ln=[],At=[];let sn=I;const rn=()=>{const rr=ot-ze;return 0===tt?I:new l.pointGeometry(Z.getx(rr),Z.gety(rr))},kn=()=>ms(rn(),sn,st,kt-tt+1,X,ye,De,Oe.canonical);for(;tt+gt<=kt;){if(ot+=ze,ot<z||ot>=U)return null;if(st=Ke,ln.push(Ke),Le&&At.push(sn||rn()),Ke=ae[ot],void 0===Ke){sn=new l.pointGeometry(Z.getx(ot),Z.gety(ot));const rr=Ms(sn,Oe.canonical,X,De,ye);Ke=rr.signedDistanceFromCamera>0?ae[ot]=rr.point:kn()}else sn=null;tt+=gt,gt=l.distance(st,Ke)}sn=sn||new l.pointGeometry(Z.getx(ot),Z.gety(ot));const qt=rn();Ae&&ye&&(ae[ot]=Ke=void 0===ae[ot]?Ke:kn(),gt=l.distance(st,Ke));const _n=(kt-tt)/gt,hn=sn.sub(qt).mult(_n)._add(qt),Vn=l.sub([],Ke,st),Rn=l.scaleAndAdd([],st,Vn,_n);let Qn=[0,0,1],ar=Vn[0],dr=Vn[1];if(Ce&&(Qn=De.upVector(Oe.canonical,hn.x,hn.y),0!==Qn[0]||0!==Qn[1]||1!==Qn[2])){const rr=[1,0,0],Ir=[0,1,0];rr[0]=Qn[2],rr[1]=0,rr[2]=-Qn[0],l.cross(Ir,Qn,rr),l.normalize(rr,rr),l.normalize(Ir,Ir),ar=l.dot(Vn,rr),dr=l.dot(Vn,Ir)}if(u){const rr=l.cross([],Qn,Vn);l.normalize(rr,rr),l.scaleAndAdd(Rn,Rn,rr,u*ze)}const qr=ft+Math.atan2(dr,ar);return ln.push(Rn),Le&&At.push(hn),{point:Rn,angle:qr,path:ln,tilePath:At,up:Qn}}const ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Be(p,o){for(let u=0;u<p;u++){const g=o.length;o.resize(g+4),o.float32.set(ge,4*g)}}function rt(p,o,u){const g=o[0],E=o[1];return p[0]=u[0]*g+u[4]*E+u[12],p[1]=u[1]*g+u[5]*E+u[13],p[3]=u[3]*g+u[7]*E+u[15],p}const Mt=100;class Ln{constructor(o,u,g=new Ne(o.width+200,o.height+200,25),E=new Ne(o.width+200,o.height+200,25)){this.transform=o,this.grid=g,this.ignoredGrid=E,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Mt,this.screenBottomBoundary=o.height+Mt,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=u}placeCollisionBox(o,u,g,E,I,B,z,U){let Z=g.projectedAnchorX,X=g.projectedAnchorY,ae=g.projectedAnchorZ;const ye=g.elevation,Le=g.tileID;if(ye&&Le){const ot=o.getProjection().upVector(Le.canonical,g.tileAnchorX,g.tileAnchorY),Ke=o.getProjection().upVectorScale(Le.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Z+=ot[0]*ye*Ke,X+=ot[1]*ye*Ke,ae+=ot[2]*ye*Ke}const Ae=this.projectAndGetPerspectiveRatio(z,[Z,X,ae],g.tileID,"globe"===o.projection.name||!!ye||this.transform.pitch>0,o.getProjection()),De=B*Ae.perspectiveRatio,Oe=(g.x1*u+E.x-g.padding)*De+Ae.point.x,Ce=(g.y1*u+E.y-g.padding)*De+Ae.point.y,Ve=(g.x2*u+E.x+g.padding)*De+Ae.point.x,ze=(g.y2*u+E.y+g.padding)*De+Ae.point.y,ft=Ae.perspectiveRatio<=.55||Ae.occluded;return!this.isInsideGrid(Oe,Ce,Ve,ze)||!I&&this.grid.hitTest(Oe,Ce,Ve,ze,U)||ft?{box:[],offscreen:!1,occluded:Ae.occluded}:{box:[Oe,Ce,Ve,ze],offscreen:this.isOffscreen(Oe,Ce,Ve,ze),occluded:!1}}placeCollisionCircles(o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De){const Oe=[],Ce=this.transform.elevation,Ve=Ce?Ce.getAtTileOffsetFunc(De,this.transform.center.lat,this.transform.worldSize,o.getProjection()):qt=>[0,0,0],ze=new l.pointGeometry(g.tileAnchorX,g.tileAnchorY),ft=o.getProjection().projectTilePoint(g.tileAnchorX,g.tileAnchorY,De.canonical),ot=Ve(ze),Ke=[ft.x+ot[0],ft.y+ot[1],ft.z+ot[2]],st="globe"===o.projection.name,tt=this.projectAndGetPerspectiveRatio(z,[Ke[0],Ke[1],Ke[2]],De,st||!!Ce||this.transform.pitch>0,o.getProjection()),{perspectiveRatio:gt}=tt,kt=(ae?B/gt:B*gt)/l.ONE_EM,ln=Br(new l.pointGeometry(Ke[0],Ke[1]),U,Ke[2]).point,At=tt.signedDistanceFromCamera>0?qi(kt,I,g.lineOffsetX*kt,g.lineOffsetY*kt,!1,ln,ze,g,E,U,{},Ce&&!ae?Ve:null,ae&&!!Ce,o.getProjection(),De,ae):null;let sn=!1,rn=!1,kn=!0;if(At&&!tt.occluded){const qt=.5*Le*gt+Ae,_n=new l.pointGeometry(-100,-100),hn=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Vn=new dt,Rn=At.first,Qn=At.last;let ar=[];for(let rr=Rn.path.length-1;rr>=1;rr--)ar.push(Rn.path[rr]);for(let rr=1;rr<Qn.path.length;rr++)ar.push(Qn.path[rr]);const dr=2.5*qt;if(Z){const rr=ar.map(Ce&&!st?(Ir,Xr)=>{const Yi=Ve(Xr<Rn.path.length-1?Rn.tilePath[Rn.path.length-1-Xr]:Qn.tilePath[Xr-Rn.path.length+2]);return Ir[2]=Yi[2],or(Ir,Z)}:Ir=>or(Ir,Z));ar=rr.some(Ir=>Ir.signedDistanceFromCamera<=0)?[]:rr.map(Ir=>Ir.point)}let qr=[];if(ar.length>0){const rr=ar.map(ki=>new l.pointGeometry(ki[0],ki[1]));let Ir=1/0,Xr=-1/0,Yi=1/0,Qi=-1/0;for(let ki=0;ki<rr.length;ki++)Ir=Math.min(Ir,rr[ki].x),Yi=Math.min(Yi,rr[ki].y),Xr=Math.max(Xr,rr[ki].x),Qi=Math.max(Qi,rr[ki].y);qr=Ir>=_n.x&&Xr<=hn.x&&Yi>=_n.y&&Qi<=hn.y?[rr]:Xr<_n.x||Ir>hn.x||Qi<_n.y||Yi>hn.y?[]:l.clipLine([rr],_n.x,_n.y,hn.x,hn.y)}for(const rr of qr){Vn.reset(rr,.25*qt);let Ir=0;Ir=Vn.length<=.5*qt?1:Math.ceil(Vn.paddedLength/dr)+1;for(let Xr=0;Xr<Ir;Xr++){const Yi=Xr/Math.max(Ir-1,1),Qi=Vn.lerp(Yi),ki=Qi.x+Mt,ro=Qi.y+Mt;Oe.push(ki,ro,qt,0);const Qo=ki-qt,Ks=ro-qt,Ji=ki+qt,Gi=ro+qt;if(kn=kn&&this.isOffscreen(Qo,Ks,Ji,Gi),rn=rn||this.isInsideGrid(Qo,Ks,Ji,Gi),!u&&this.grid.hitTestCircle(ki,ro,qt,ye)&&(sn=!0,!X))return{circles:[],offscreen:!1,collisionDetected:sn,occluded:!1}}}}return{circles:!X&&sn||!rn?[]:Oe,offscreen:kn,collisionDetected:sn,occluded:tt.occluded}}queryRenderedSymbols(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[];let g=1/0,E=1/0,I=-1/0,B=-1/0;for(const X of o){const ae=new l.pointGeometry(X.x+Mt,X.y+Mt);g=Math.min(g,ae.x),E=Math.min(E,ae.y),I=Math.max(I,ae.x),B=Math.max(B,ae.y),u.push(ae)}const z=this.grid.query(g,E,I,B).concat(this.ignoredGrid.query(g,E,I,B)),U={},Z={};for(const X of z){const ae=X.key;if(void 0===U[ae.bucketInstanceId]&&(U[ae.bucketInstanceId]={}),U[ae.bucketInstanceId][ae.featureIndex])continue;const ye=[new l.pointGeometry(X.x1,X.y1),new l.pointGeometry(X.x2,X.y1),new l.pointGeometry(X.x2,X.y2),new l.pointGeometry(X.x1,X.y2)];l.polygonIntersectsPolygon(u,ye)&&(U[ae.bucketInstanceId][ae.featureIndex]=!0,void 0===Z[ae.bucketInstanceId]&&(Z[ae.bucketInstanceId]=[]),Z[ae.bucketInstanceId].push(ae.featureIndex))}return Z}insertCollisionBox(o,u,g,E,I){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:E,collisionGroupID:I},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,u,g,E,I){const B=u?this.ignoredGrid:this.grid,z={bucketInstanceId:g,featureIndex:E,collisionGroupID:I};for(let U=0;U<o.length;U+=4)B.insertCircle(z,o[U],o[U+1],o[U+2])}projectAndGetPerspectiveRatio(o,u,g,E,I){const B=[u[0],u[1],u[2],1];let z=!1;if(u[2]||this.transform.pitch>0){l.transformMat4$1(B,B,o);const U="globe"===I.name;this.fogState&&g&&!U&&(z=function(Z,X,ae,ye,Le,Ae){const De=Ae.calculateFogTileMatrix(Le),Oe=[X,ae,ye];return l.transformMat4(Oe,Oe,De),Zt(Z,Oe,Ae.pitch,Ae._fov)}(this.fogState,u[0],u[1],u[2],g.toUnwrapped(),this.transform)>.9)}else rt(B,B,o);return{point:new l.pointGeometry((B[0]/B[3]+1)/2*this.transform.width+Mt,(-B[1]/B[3]+1)/2*this.transform.height+Mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(I)/B[3]*.5,1.5),signedDistanceFromCamera:B[3],occluded:E&&B[2]>B[3]||z}}isOffscreen(o,u,g,E){return g<Mt||o>=this.screenRightBoundary||E<Mt||u>this.screenBottomBoundary}isInsideGrid(o,u,g,E){return g>=0&&o<this.gridRightBoundary&&E>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o}}function Yn(p,o,u){const g=o.createTileMatrix(p,p.worldSize,u.toUnwrapped());return l.multiply(new Float32Array(16),p.projMatrix,g)}function Fn(p,o,u){if(o.projection.name===u.projection.name)return p.projMatrix;const g=u.clone();return g.setProjection(o.projection),Yn(g,o.getProjection(),p)}function Ar(p,o,u){return o.name===u.projection.name?p.projMatrix:Yn(u,o,p)}class oi{constructor(o,u,g,E){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?u:-u))):E&&g?1:0,this.placed=g}isHidden(){return 0===this.opacity&&!this.placed}}class zi{constructor(o,u,g,E,I,B=!1){this.text=new oi(o?o.text:null,u,g,I),this.icon=new oi(o?o.icon:null,u,E,I),this.clipped=B}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wr{constructor(o,u,g,E=!1){this.text=o,this.icon=u,this.skipFade=g,this.clipped=E}}class Vl{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class va{constructor(o,u,g,E,I){this.bucketInstanceId=o,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=E,this.tileID=I}}class Qa{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const u=++this.maxGroupID;this.collisionGroups[o]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[o]}}function Di(p,o,u,g,E){const{horizontalAlign:I,verticalAlign:B}=l.getAnchorAlignment(p),z=-(I-.5)*o,U=-(B-.5)*u,Z=l.evaluateVariableOffset(p,g);return new l.pointGeometry(z+Z[0]*E,U+Z[1]*E)}function ba(p,o,u,g,E){const I=new l.pointGeometry(p,o);return u&&I._rotate(g?E:-E),I}class Ul{constructor(o,u,g,E,I){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Ln(this.transform,I),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new Qa(g),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,u,g,E){const I=g.getBucket(u),B=g.latestFeatureIndex;if(!I||!B||u.id!==I.layerIds[0])return;const z=I.layers[0].layout,U=g.collisionBoxArray,Z=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),X=g.tileSize/l.EXTENT,ae=g.tileID.toUnwrapped();this.transform.setProjection(I.projection);const ye=(Le=g.tileID,Ae=I.getProjection(),De=this.transform,Ae.name===this.projection?De.calculateProjMatrix(Le.toUnwrapped()):Yn(De,Ae,Le));var Le,Ae,De;const Oe="map"===z.get("text-pitch-alignment"),Ce="map"===z.get("text-rotation-alignment");u.compileFilter();const Ve=u.dynamicFilter(),ze=u.dynamicFilterNeedsFeature(),ft=this.transform.calculatePixelsToTileUnitsMatrix(g),ot=Sn(ye,g.tileID.canonical,Oe,Ce,this.transform,I.getProjection(),ft);let Ke=null;if(Oe){const gt=vr(ye,g.tileID.canonical,Oe,Ce,this.transform,I.getProjection(),ft);Ke=l.multiply([],this.transform.labelPlaneMatrix,gt)}let st=null;Ve&&g.latestFeatureIndex&&(st={unwrappedTileID:ae,dynamicFilter:Ve,dynamicFilterNeedsFeature:ze,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[I.bucketInstanceId]=new va(I.bucketInstanceId,B,I.sourceLayerIndex,I.index,g.tileID);const tt={bucket:I,layout:z,posMatrix:ye,textLabelPlaneMatrix:ot,labelToScreenMatrix:Ke,clippingData:st,scale:Z,textPixelRatio:X,holdingForFade:g.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(I.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.evaluateSizeForZoom(I.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(E)for(const gt of I.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:ln,symbolInstanceEnd:At}=gt;o.push({sortKey:kt,symbolInstanceStart:ln,symbolInstanceEnd:At,parameters:tt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:tt})}attemptAnchorPlacement(o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De,Oe,Ce,Ve){const ze=[ye.textOffset0,ye.textOffset1],ft=Di(o,g,E,ze,I),ot=this.collisionIndex.placeCollisionBox(Ae,I,u,ba(ft.x,ft.y,B,z,this.transform.angle),ae,U,Z,X.predicate);if((!Oe||0!==this.collisionIndex.placeCollisionBox(Ae,Ae.getSymbolInstanceIconSize(Ve,this.transform.zoom,Le),Oe,ba(ft.x,ft.y,B,z,this.transform.angle),ae,U,Z,X.predicate).box.length)&&ot.box.length>0){let Ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),this.variableOffsets[ye.crossTileID]={textOffset:ze,width:g,height:E,anchor:o,textScale:I,prevAnchor:Ke},this.markUsedJustification(Ae,o,ye,De),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,De,ye),this.placedOrientations[ye.crossTileID]=De),{shift:ft,placedGlyphBoxes:ot}}}placeLayerBucketPart(o,u,g,E){const{bucket:I,layout:B,posMatrix:z,textLabelPlaneMatrix:U,labelToScreenMatrix:Z,clippingData:X,textPixelRatio:ae,holdingForFade:ye,collisionBoxArray:Le,partiallyEvaluatedTextSize:Ae,partiallyEvaluatedIconSize:De,collisionGroup:Oe}=o.parameters,Ce=B.get("text-optional"),Ve=B.get("icon-optional"),ze=B.get("text-allow-overlap"),ft=B.get("icon-allow-overlap"),ot="map"===B.get("text-rotation-alignment"),Ke="map"===B.get("text-pitch-alignment"),st="none"!==B.get("icon-text-fit"),tt="viewport-y"===B.get("symbol-z-order");this.transform.setProjection(I.projection);let gt=ze&&(ft||!I.hasIconData()||Ve),kt=ft&&(ze||!I.hasTextData()||Ce);!I.collisionArrays&&Le&&I.deserializeCollisionBoxes(Le),g&&E&&I.updateCollisionDebugBuffers(this.transform.zoom,Le);const ln=(At,sn,rn)=>{if(X){const Ji={zoom:this.transform.zoom,pitch:this.transform.pitch};let Gi=null;if(X.dynamicFilterNeedsFeature){const jr=this.retainedQueryData[I.bucketInstanceId];Gi=X.featureIndex.loadFeature({featureIndex:At.featureIndex,bucketIndex:jr.bucketIndex,sourceLayerIndex:jr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(Ji,Gi,this.retainedQueryData[I.bucketInstanceId].tileID.canonical,new l.pointGeometry(At.tileAnchorX,At.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[At.crossTileID]=new Wr(!1,!1,!1,!0),void(u[At.crossTileID]=!0)}if(u[At.crossTileID])return;if(ye)return void(this.placements[At.crossTileID]=new Wr(!1,!1,!1));let kn=!1,qt=!1,_n=!0,hn=!1,Vn=!1,Rn=null,Qn={box:null,offscreen:null,occluded:null},ar={box:null,offscreen:null,occluded:null},dr=null,qr=null,rr=null,Ir=0,Xr=0,Yi=0;rn.textFeatureIndex?Ir=rn.textFeatureIndex:At.useRuntimeCollisionCircles&&(Ir=At.featureIndex),rn.verticalTextFeatureIndex&&(Xr=rn.verticalTextFeatureIndex);const Qi=Ji=>{Ji.tileID=this.retainedQueryData[I.bucketInstanceId].tileID,(this.transform.elevation||Ji.elevation)&&(Ji.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[I.bucketInstanceId].tileID,Ji.tileAnchorX,Ji.tileAnchorY):0)},ki=rn.textBox;if(ki){Qi(ki);const Ji=jr=>{let Ho=l.WritingMode.horizontal;if(I.allowVerticalPlacement&&!jr&&this.prevPlacement){const So=this.prevPlacement.placedOrientations[At.crossTileID];So&&(this.placedOrientations[At.crossTileID]=So,Ho=So,this.markUsedOrientation(I,Ho,At))}return Ho},Gi=(jr,Ho)=>{if(I.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&rn.verticalTextBox){for(const So of I.writingModes)if(So===l.WritingMode.vertical?(Qn=Ho(),ar=Qn):Qn=jr(),Qn&&Qn.box&&Qn.box.length)break}else Qn=jr()};if(B.get("text-variable-anchor")){let jr=B.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[At.crossTileID]){const Ni=this.prevPlacement.variableOffsets[At.crossTileID];jr.indexOf(Ni.anchor)>0&&(jr=jr.filter($o=>$o!==Ni.anchor),jr.unshift(Ni.anchor))}const Ho=(Ni,$o,Io)=>{const ds=I.getSymbolInstanceTextSize(Ae,At,this.transform.zoom,sn),ca=(Ni.x2-Ni.x1)*ds+2*Ni.padding,Kc=(Ni.y2-Ni.y1)*ds+2*Ni.padding,ja=st&&!ft?$o:null;ja&&Qi(ja);let vs={box:[],offscreen:!1,occluded:!1};const Va=ze?2*jr.length:jr.length;for(let Ml=0;Ml<Va;++Ml){const Ou=this.attemptAnchorPlacement(jr[Ml%jr.length],Ni,ca,Kc,ds,ot,Ke,ae,z,Oe,Ml>=jr.length,At,sn,I,Io,ja,Ae,De);if(Ou&&(vs=Ou.placedGlyphBoxes,vs&&vs.box&&vs.box.length)){kn=!0,Rn=Ou.shift;break}}return vs};Gi(()=>Ho(ki,rn.iconBox,l.WritingMode.horizontal),()=>{const Ni=rn.verticalTextBox;return Ni&&Qi(Ni),I.allowVerticalPlacement&&!(Qn&&Qn.box&&Qn.box.length)&&At.numVerticalGlyphVertices>0&&Ni?Ho(Ni,rn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Qn&&(kn=Qn.box,_n=Qn.offscreen,hn=Qn.occluded);const So=Ji(Qn&&Qn.box);if(!kn&&this.prevPlacement){const Ni=this.prevPlacement.variableOffsets[At.crossTileID];Ni&&(this.variableOffsets[At.crossTileID]=Ni,this.markUsedJustification(I,Ni.anchor,At,So))}}else{const jr=(Ho,So)=>{const Ni=I.getSymbolInstanceTextSize(Ae,At,this.transform.zoom,sn),$o=this.collisionIndex.placeCollisionBox(I,Ni,Ho,new l.pointGeometry(0,0),ze,ae,z,Oe.predicate);return $o&&$o.box&&$o.box.length&&(this.markUsedOrientation(I,So,At),this.placedOrientations[At.crossTileID]=So),$o};Gi(()=>jr(ki,l.WritingMode.horizontal),()=>{const Ho=rn.verticalTextBox;return I.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&Ho?(Qi(Ho),jr(Ho,l.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Ji(Qn&&Qn.box&&Qn.box.length)}}if(dr=Qn,kn=dr&&dr.box&&dr.box.length>0,_n=dr&&dr.offscreen,hn=dr&&dr.occluded,At.useRuntimeCollisionCircles){const Ji=I.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex>=0?At.centerJustifiedTextSymbolIndex:At.verticalPlacedTextSymbolIndex),Gi=l.evaluateSizeForFeature(I.textSizeData,Ae,Ji),jr=B.get("text-padding");qr=this.collisionIndex.placeCollisionCircles(I,ze,Ji,I.lineVertexArray,I.glyphOffsetArray,Gi,z,U,Z,g,Ke,Oe.predicate,At.collisionCircleDiameter*Gi/l.ONE_EM,jr,this.retainedQueryData[I.bucketInstanceId].tileID),kn=ze||qr.circles.length>0&&!qr.collisionDetected,_n=_n&&qr.offscreen,hn=qr.occluded}if(rn.iconFeatureIndex&&(Yi=rn.iconFeatureIndex),rn.iconBox){const Ji=Gi=>{Qi(Gi);const jr=st&&Rn?ba(Rn.x,Rn.y,ot,Ke,this.transform.angle):new l.pointGeometry(0,0),Ho=I.getSymbolInstanceIconSize(De,this.transform.zoom,sn);return this.collisionIndex.placeCollisionBox(I,Ho,Gi,jr,ft,ae,z,Oe.predicate)};ar&&ar.box&&ar.box.length&&rn.verticalIconBox?(rr=Ji(rn.verticalIconBox),qt=rr.box.length>0):(rr=Ji(rn.iconBox),qt=rr.box.length>0),_n=_n&&rr.offscreen,Vn=rr.occluded}const ro=Ce||0===At.numHorizontalGlyphVertices&&0===At.numVerticalGlyphVertices,Qo=Ve||0===At.numIconVertices;if(ro||Qo?Qo?ro||(qt=qt&&kn):kn=qt&&kn:qt=kn=qt&&kn,kn&&dr&&dr.box&&this.collisionIndex.insertCollisionBox(dr.box,B.get("text-ignore-placement"),I.bucketInstanceId,ar&&ar.box&&Xr?Xr:Ir,Oe.ID),qt&&rr&&this.collisionIndex.insertCollisionBox(rr.box,B.get("icon-ignore-placement"),I.bucketInstanceId,Yi,Oe.ID),qr&&(kn&&this.collisionIndex.insertCollisionCircles(qr.circles,B.get("text-ignore-placement"),I.bucketInstanceId,Ir,Oe.ID),g)){const Ji=I.bucketInstanceId;let Gi=this.collisionCircleArrays[Ji];void 0===Gi&&(Gi=this.collisionCircleArrays[Ji]=new Vl);for(let jr=0;jr<qr.circles.length;jr+=4)Gi.circles.push(qr.circles[jr+0]),Gi.circles.push(qr.circles[jr+1]),Gi.circles.push(qr.circles[jr+2]),Gi.circles.push(qr.collisionDetected?1:0)}const Ks="globe"!==I.projection.name;gt=gt&&(Ks||!hn),kt=kt&&(Ks||!Vn),this.placements[At.crossTileID]=new Wr(kn||gt,qt||kt,_n||I.justReloaded),u[At.crossTileID]=!0};if(tt){const At=I.getSortedSymbolIndexes(this.transform.angle);for(let sn=At.length-1;sn>=0;--sn){const rn=At[sn];ln(I.symbolInstances.get(rn),rn,I.collisionArrays[rn])}}else for(let At=o.symbolInstanceStart;At<o.symbolInstanceEnd;At++)ln(I.symbolInstances.get(At),At,I.collisionArrays[At]);if(g&&I.bucketInstanceId in this.collisionCircleArrays){const At=this.collisionCircleArrays[I.bucketInstanceId];l.invert(At.invProjMatrix,z),At.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(o,u,g,E){let I;I=E===l.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const B=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const z of B)z>=0&&(o.text.placedSymbolArray.get(z).crossTileID=I>=0&&z!==I?0:g.crossTileID)}markUsedOrientation(o,u,g){const E=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,I=u===l.WritingMode.vertical?u:0,B=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const z of B)o.text.placedSymbolArray.get(z).placedOrientation=E;g.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const E=u?u.symbolFadeChange(o):1,I=u?u.opacities:{},B=u?u.variableOffsets:{},z=u?u.placedOrientations:{};for(const U in this.placements){const Z=this.placements[U],X=I[U];X?(this.opacities[U]=new zi(X,E,Z.text,Z.icon,null,Z.clipped),g=g||Z.text!==X.text.placed||Z.icon!==X.icon.placed):(this.opacities[U]=new zi(null,E,Z.text,Z.icon,Z.skipFade,Z.clipped),g=g||Z.text||Z.icon)}for(const U in I){const Z=I[U];if(!this.opacities[U]){const X=new zi(Z,E,!1,!1);X.isHidden()||(this.opacities[U]=X,g=g||Z.text.placed||Z.icon.placed)}}for(const U in B)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=B[U]);for(const U in z)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=z[U]);g?this.lastPlacementChangeTime=o:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:o)}updateLayerOpacities(o,u){const g={};for(const E of u){const I=E.getBucket(o);I&&E.latestFeatureIndex&&o.id===I.layerIds[0]&&this.updateBucketOpacities(I,g,E.collisionBoxArray)}}updateBucketOpacities(o,u,g){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const E=o.layers[0].layout,I=!!o.layers[0].dynamicFilter(),B=new zi(null,0,!1,!1,!0),z=E.get("text-allow-overlap"),U=E.get("icon-allow-overlap"),Z=E.get("text-variable-anchor"),X="map"===E.get("text-rotation-alignment"),ae="map"===E.get("text-pitch-alignment"),ye="none"!==E.get("icon-text-fit"),Le=new zi(null,0,z&&(U||!o.hasIconData()||E.get("icon-optional")),U&&(z||!o.hasTextData()||E.get("text-optional")),!0);!o.collisionArrays&&g&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(g);const Ae=(Oe,Ce,Ve)=>{for(let ze=0;ze<Ce/4;ze++)Oe.opacityVertexArray.emplaceBack(Ve)};let De=0;for(let Oe=0;Oe<o.symbolInstances.length;Oe++){const Ce=o.symbolInstances.get(Oe),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:ze,crossTileID:ft}=Ce;let ot=this.opacities[ft];u[ft]?ot=B:ot||(ot=Le,this.opacities[ft]=ot),u[ft]=!0;const Ke=Ve>0||ze>0,st=Ce.numIconVertices>0,tt=this.placedOrientations[Ce.crossTileID],gt=tt===l.WritingMode.vertical,kt=tt===l.WritingMode.horizontal||tt===l.WritingMode.horizontalOnly;if(!Ke&&!st||ot.isHidden()||De++,Ke){const ln=Ja(ot.text);Ae(o.text,Ve,gt?Hs:ln),Ae(o.text,ze,kt?Hs:ln);const At=ot.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(kn=>{kn>=0&&(o.text.placedSymbolArray.get(kn).hidden=At||gt?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=At||kt?1:0);const sn=this.variableOffsets[Ce.crossTileID];sn&&this.markUsedJustification(o,sn.anchor,Ce,tt);const rn=this.placedOrientations[Ce.crossTileID];rn&&(this.markUsedJustification(o,"left",Ce,rn),this.markUsedOrientation(o,rn,Ce))}if(st){const ln=Ja(ot.icon);Ce.placedIconSymbolIndex>=0&&(Ae(o.icon,Ce.numIconVertices,gt?Hs:ln),o.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=ot.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(Ae(o.icon,Ce.numVerticalIconVertices,kt?Hs:ln),o.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=ot.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const ln=o.collisionArrays[Oe];if(ln){let At=new l.pointGeometry(0,0),sn=!0;if(ln.textBox||ln.verticalTextBox){if(Z){const kn=this.variableOffsets[ft];kn?(At=Di(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textScale),X&&At._rotate(ae?this.transform.angle:-this.transform.angle)):sn=!1}I&&(sn=!ot.clipped),ln.textBox&&xr(o.textCollisionBox.collisionVertexArray,ot.text.placed,!sn||gt,At.x,At.y),ln.verticalTextBox&&xr(o.textCollisionBox.collisionVertexArray,ot.text.placed,!sn||kt,At.x,At.y)}const rn=sn&&Boolean(!kt&&ln.verticalIconBox);ln.iconBox&&xr(o.iconCollisionBox.collisionVertexArray,ot.icon.placed,rn,ye?At.x:0,ye?At.y:0),ln.verticalIconBox&&xr(o.iconCollisionBox.collisionVertexArray,ot.icon.placed,!rn,ye?At.x:0,ye?At.y:0)}}}if(o.fullyClipped=0===De,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const Oe=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Oe.invProjMatrix,o.placementViewportMatrix=Oe.viewportMatrix,o.collisionCircleArray=Oe.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return 0===this.fadeDuration?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>o}setStale(){this.stale=!0}}function xr(p,o,u,g,E){p.emplaceBack(o?1:0,u?1:0,g||0,E||0),p.emplaceBack(o?1:0,u?1:0,g||0,E||0),p.emplaceBack(o?1:0,u?1:0,g||0,E||0),p.emplaceBack(o?1:0,u?1:0,g||0,E||0)}const xa=Math.pow(2,25),yl=Math.pow(2,24),vl=Math.pow(2,17),du=Math.pow(2,16),Us=Math.pow(2,9),fu=Math.pow(2,8),pu=Math.pow(2,1);function Ja(p){if(0===p.opacity&&!p.placed)return 0;if(1===p.opacity&&p.placed)return 4294967295;const o=p.placed?1:0,u=Math.floor(127*p.opacity);return u*xa+o*yl+u*vl+o*du+u*Us+o*fu+u*pu+o}const Hs=0;class As{constructor(o){this._sortAcrossTiles="viewport-y"!==o.layout.get("symbol-z-order")&&void 0!==o.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,u,g,E,I){const B=this._bucketParts;for(;this._currentTileIndex<o.length;)if(u.getBucketParts(B,E,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,B.sort((z,U)=>z.sortKey-U.sortKey));this._currentPartIndex<B.length;){const z=B[this._currentPartIndex];if(u.placeLayerBucketPart(z,this._seenCrossTileIDs,g,0===z.symbolInstanceStart),this._currentPartIndex++,I())return!0}return!1}}class as{constructor(o,u,g,E,I,B,z,U){this.placement=new Ul(o,I,B,z,U),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(o,u,g){const E=l.exported.now(),I=()=>{const B=l.exported.now()-E;return!this._forceFullPlacement&&B>2};for(;this._currentPlacementIndex>=0;){const B=u[o[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if("symbol"===B.type&&(!B.minzoom||B.minzoom<=z)&&(!B.maxzoom||B.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new As(B)),this._inProgressLayer.continuePlacement(g[B.source],this.placement,this._showCollisionBoxes,B,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Xi=512/l.EXTENT/2;class $s{constructor(o,u,g){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let E=0;E<u.length;E++){const I=u.get(E),B=I.key;this.indexedSymbolInstances[B]||(this.indexedSymbolInstances[B]=[]),this.indexedSymbolInstances[B].push({crossTileID:I.crossTileID,coord:this.getScaledCoordinates(I,o)})}}getScaledCoordinates(o,u){const g=Xi/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*l.EXTENT+o.tileAnchorX)*g),y:Math.floor((u.canonical.y*l.EXTENT+o.tileAnchorY)*g)}}findMatches(o,u,g){const E=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let I=0;I<o.length;I++){const B=o.get(I);if(B.crossTileID)continue;const z=this.indexedSymbolInstances[B.key];if(!z)continue;const U=this.getScaledCoordinates(B,u);for(const Z of z)if(Math.abs(Z.coord.x-U.x)<=E&&Math.abs(Z.coord.y-U.y)<=E&&!g[Z.crossTileID]){g[Z.crossTileID]=!0,B.crossTileID=Z.crossTileID;break}}}}class Rc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class mu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const u=Math.round((o-this.lng)/360);if(0!==u)for(const g in this.indexes){const E=this.indexes[g],I={};for(const B in E){const z=E[B];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+u),I[z.tileID.key]=z}this.indexes[g]=I}this.lng=o}addBucket(o,u,g){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let I=0;I<u.symbolInstances.length;I++)u.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const E=this.usedCrossTileIDs[o.overscaledZ];for(const I in this.indexes){const B=this.indexes[I];if(Number(I)>o.overscaledZ)for(const z in B){const U=B[z];U.tileID.isChildOf(o)&&U.findMatches(u.symbolInstances,o,E)}else{const z=B[o.scaledTo(Number(I)).key];z&&z.findMatches(u.symbolInstances,o,E)}}for(let I=0;I<u.symbolInstances.length;I++){const B=u.symbolInstances.get(I);B.crossTileID||(B.crossTileID=g.generate(),E[B.crossTileID]=!0)}return void 0===this.indexes[o.overscaledZ]&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new $s(o,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(o,u){for(const g in u.indexedSymbolInstances)for(const E of u.indexedSymbolInstances[g])delete this.usedCrossTileIDs[o][E.crossTileID]}removeStaleBuckets(o){let u=!1;for(const g in this.indexes){const E=this.indexes[g];for(const I in E)o[E[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,E[I]),delete E[I],u=!0)}return u}}class wa{constructor(){this.layerIndexes={},this.crossTileIDs=new Rc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,u,g,E){let I=this.layerIndexes[o.id];void 0===I&&(I=this.layerIndexes[o.id]=new mu);let B=!1;const z={};"globe"!==E.name&&I.handleWrapJump(g);for(const U of u){const Z=U.getBucket(o);Z&&o.id===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(U.tileID,Z,this.crossTileIDs)&&(B=!0),z[Z.bucketInstanceId]=!0)}return I.removeStaleBuckets(z)&&(B=!0),B}pruneUnusedLayers(o){const u={};o.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const Gs=(p,o)=>l.emitValidationErrors(p,o&&o.filter(u=>"source.canvas"!==u.identifier)),uc=l.pick(qn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),gu=l.pick(qn,["setCenter","setZoom","setBearing","setPitch"]),hc={version:8,layers:[],sources:{}},Lc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ls extends l.Evented{constructor(o,u={}){super(),this.map=o,this.dispatcher=new fr(Vr(),this),this.imageManager=new Ct,this.imageManager.setEventedParent(this),this.glyphManager=new l.GlyphManager(o._requestManager,u.localFontFamily?l.LocalGlyphMode.all:u.localIdeographFontFamily?l.LocalGlyphMode.ideographs:l.LocalGlyphMode.none,u.localFontFamily||u.localIdeographFontFamily),this.lineAtlas=new l.LineAtlas(256,512),this.crossTileSymbolIndex=new wa,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const g=this;this._rtlTextPluginCallback=ls.registerForPluginStateChange(E=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(I,B)=>{if(l.triggerPluginCompletionEvent(I),B&&B.every(z=>z))for(const z in g._sourceCaches){const U=g._sourceCaches[z],Z=U.getSource().type;"vector"!==Z&&"geojson"!==Z||U.reload()}})}),this.on("data",E=>{if("source"!==E.dataType||"metadata"!==E.sourceDataType)return;const I=this.getSource(E.sourceId);if(I&&I.vectorLayerIds)for(const B in this._layers){const z=this._layers[B];z.source===I.id&&this._validateLayer(z)}})}loadURL(o,u={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const g="boolean"==typeof u.validate?u.validate:!l.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,u.accessToken);const E=this.map._requestManager.transformRequest(o,l.ResourceType.Style);this._request=l.getJSON(E,(I,B)=>{this._request=null,I?this.fire(new l.ErrorEvent(I)):B&&this._load(B,g)})}loadJSON(o,u={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(o,!1!==u.validate)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(hc,!1)}_updateLayerCount(o,u){const g=u?1:-1;o.is3D()&&(this._num3DLayers+=g),"circle"===o.type&&(this._numCircleLayers+=g),"symbol"===o.type&&(this._numSymbolLayers+=g)}_load(o,u){if(u&&Gs(this,l.validateStyle(o)))return;this._loaded=!0,this.stylesheet=l.clone$1(o),this._updateMapProjection();for(const E in o.sources)this.addSource(E,o.sources[E],{validate:!1});this._changed=!1,o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(o.glyphs);const g=ai(this.stylesheet.layers);this._order=g.map(E=>E.id),this._layers={},this._serializedLayers={};for(let E of g)E=l.createStyleLayer(E),E.setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=E,this._serializedLayers[E.id]=E.serialize(),this._updateLayerCount(E,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new xt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(o){this._spriteRequest=function(u,g,E){let I,B,z;const U=l.exported.devicePixelRatio>1?"@2x":"";let Z=l.getJSON(g.transformRequest(g.normalizeSpriteURL(u,U,".json"),l.ResourceType.SpriteJSON),(ye,Le)=>{Z=null,z||(z=ye,I=Le,ae())}),X=l.getImage(g.transformRequest(g.normalizeSpriteURL(u,U,".png"),l.ResourceType.SpriteImage),(ye,Le)=>{X=null,z||(z=ye,B=Le,ae())});function ae(){if(z)E(z);else if(I&&B){const ye=l.exported.getImageData(B),Le={};for(const Ae in I){const{width:De,height:Oe,x:Ce,y:Ve,sdf:ze,pixelRatio:ft,stretchX:ot,stretchY:Ke,content:st}=I[Ae],tt=new l.RGBAImage({width:De,height:Oe});l.RGBAImage.copy(ye,tt,{x:Ce,y:Ve},{x:0,y:0},{width:De,height:Oe}),Le[Ae]={data:tt,pixelRatio:ft,sdf:ze,stretchX:ot,stretchY:Ke,content:st}}E(null,Le)}}return{cancel(){Z&&(Z.cancel(),Z=null),X&&(X.cancel(),X=null)}}}(o,this.map._requestManager,(u,g)=>{if(this._spriteRequest=null,u)this.fire(new l.ErrorEvent(u));else if(g)for(const E in g)this.imageManager.addImage(E,g[E]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(o){const u=this.getSource(o.source);if(!u)return;const g=o.sourceLayer;g&&("geojson"===u.type||u.vectorLayerIds&&-1===u.vectorLayerIds.indexOf(g))&&this.fire(new l.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${u.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const u=[];for(const g of o){const E=this._layers[g];"custom"!==E.type&&u.push(E.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(o){return!!this.terrain&&Lc[o.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(o){if(!this._loaded)return;const u=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(E.length||I.length)&&this._updateWorkerLayers(E,I);for(const B in this._updatedSources){const z=this._updatedSources[B];"reload"===z?this._reloadSource(B):"clear"===z&&this._clearSource(B)}this._updateTilesForChangedImages();for(const B in this._updatedPaintProps)this._layers[B].updateTransitions(o);this.light.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._resetUpdates()}const g={};for(const E in this._sourceCaches){const I=this._sourceCaches[E];g[E]=I.used,I.used=!1}for(const E of this._order){const I=this._layers[E];if(I.recalculate(o,this._availableImages),!I.isHidden(o.zoom)){const z=this._getLayerSourceCache(I);z&&(z.used=!0)}const B=this.map.painter;if(B){const z=I.getProgramIds();if(!z)continue;const U=I.getProgramConfiguration(o.zoom);for(const Z of z)B.useProgram(Z,U)}}for(const E in g){const I=this._sourceCaches[E];g[E]!==I.used&&I.getSource().fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:I.getSource().id}))}this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(o){if(this._checkLoaded(),Gs(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=ai(o.layers);const u=function(E,I){if(!E)return[{command:qn.setStyle,args:[I]}];let B=[];try{if(!J(E.version,I.version))return[{command:qn.setStyle,args:[I]}];J(E.center,I.center)||B.push({command:qn.setCenter,args:[I.center]}),J(E.zoom,I.zoom)||B.push({command:qn.setZoom,args:[I.zoom]}),J(E.bearing,I.bearing)||B.push({command:qn.setBearing,args:[I.bearing]}),J(E.pitch,I.pitch)||B.push({command:qn.setPitch,args:[I.pitch]}),J(E.sprite,I.sprite)||B.push({command:qn.setSprite,args:[I.sprite]}),J(E.glyphs,I.glyphs)||B.push({command:qn.setGlyphs,args:[I.glyphs]}),J(E.transition,I.transition)||B.push({command:qn.setTransition,args:[I.transition]}),J(E.light,I.light)||B.push({command:qn.setLight,args:[I.light]}),J(E.fog,I.fog)||B.push({command:qn.setFog,args:[I.fog]}),J(E.projection,I.projection)||B.push({command:qn.setProjection,args:[I.projection]});const z={},U=[];!function(ae,ye,Le,Ae){let De;for(De in ye=ye||{},ae=ae||{})ae.hasOwnProperty(De)&&(ye.hasOwnProperty(De)||hr(De,Le,Ae));for(De in ye)ye.hasOwnProperty(De)&&(ae.hasOwnProperty(De)?J(ae[De],ye[De])||("geojson"===ae[De].type&&"geojson"===ye[De].type&&Wi(ae,ye,De)?Le.push({command:qn.setGeoJSONSourceData,args:[De,ye[De].data]}):Bn(De,ye,Le,Ae)):ut(De,ye,Le))}(E.sources,I.sources,U,z);const Z=[];E.layers&&E.layers.forEach(ae=>{ae.source&&z[ae.source]?B.push({command:qn.removeLayer,args:[ae.id]}):Z.push(ae)});let X=E.terrain;X&&z[X.source]&&(B.push({command:qn.setTerrain,args:[void 0]}),X=void 0),B=B.concat(U),J(X,I.terrain)||B.push({command:qn.setTerrain,args:[I.terrain]}),function(ae,ye,Le){ye=ye||[];const Ae=(ae=ae||[]).map(Zr),De=ye.map(Zr),Oe=ae.reduce(_t,{}),Ce=ye.reduce(_t,{}),Ve=Ae.slice(),ze=Object.create(null);let ft,ot,Ke,st,tt,gt,kt;for(ft=0,ot=0;ft<Ae.length;ft++)Ke=Ae[ft],Ce.hasOwnProperty(Ke)?ot++:(Le.push({command:qn.removeLayer,args:[Ke]}),Ve.splice(Ve.indexOf(Ke,ot),1));for(ft=0,ot=0;ft<De.length;ft++)Ke=De[De.length-1-ft],Ve[Ve.length-1-ft]!==Ke&&(Oe.hasOwnProperty(Ke)?(Le.push({command:qn.removeLayer,args:[Ke]}),Ve.splice(Ve.lastIndexOf(Ke,Ve.length-ot),1)):ot++,gt=Ve[Ve.length-ft],Le.push({command:qn.addLayer,args:[Ce[Ke],gt]}),Ve.splice(Ve.length-ft,0,Ke),ze[Ke]=!0);for(ft=0;ft<De.length;ft++)if(Ke=De[ft],st=Oe[Ke],tt=Ce[Ke],!ze[Ke]&&!J(st,tt))if(J(st.source,tt.source)&&J(st["source-layer"],tt["source-layer"])&&J(st.type,tt.type)){for(kt in os(st.layout,tt.layout,Le,Ke,null,qn.setLayoutProperty),os(st.paint,tt.paint,Le,Ke,null,qn.setPaintProperty),J(st.filter,tt.filter)||Le.push({command:qn.setFilter,args:[Ke,tt.filter]}),J(st.minzoom,tt.minzoom)&&J(st.maxzoom,tt.maxzoom)||Le.push({command:qn.setLayerZoomRange,args:[Ke,tt.minzoom,tt.maxzoom]}),st)st.hasOwnProperty(kt)&&"layout"!==kt&&"paint"!==kt&&"filter"!==kt&&"metadata"!==kt&&"minzoom"!==kt&&"maxzoom"!==kt&&(0===kt.indexOf("paint.")?os(st[kt],tt[kt],Le,Ke,kt.slice(6),qn.setPaintProperty):J(st[kt],tt[kt])||Le.push({command:qn.setLayerProperty,args:[Ke,kt,tt[kt]]}));for(kt in tt)tt.hasOwnProperty(kt)&&!st.hasOwnProperty(kt)&&"layout"!==kt&&"paint"!==kt&&"filter"!==kt&&"metadata"!==kt&&"minzoom"!==kt&&"maxzoom"!==kt&&(0===kt.indexOf("paint.")?os(st[kt],tt[kt],Le,Ke,kt.slice(6),qn.setPaintProperty):J(st[kt],tt[kt])||Le.push({command:qn.setLayerProperty,args:[Ke,kt,tt[kt]]}))}else Le.push({command:qn.removeLayer,args:[Ke]}),gt=Ve[Ve.lastIndexOf(Ke)+1],Le.push({command:qn.addLayer,args:[tt,gt]})}(Z,I.layers,B)}catch(z){console.warn("Unable to compute style diff:",z),B=[{command:qn.setStyle,args:[I]}]}return B}(this.serialize(),o).filter(E=>!(E.command in gu));if(0===u.length)return!1;const g=u.filter(E=>!(E.command in uc));if(g.length>0)throw new Error(`Unimplemented: ${g.map(E=>E.command).join(", ")}.`);return u.forEach(E=>{"setTransition"!==E.command&&"setProjection"!==E.command&&this[E.command].apply(this,E.args)}),this.stylesheet=o,this._updateMapProjection(),!0}addImage(o,u){return this.getImage(o)?this.fire(new l.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,u),this._afterImageUpdated(o),this)}updateImage(o,u){this.imageManager.updateImage(o,u)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o),this._afterImageUpdated(o),this):this.fire(new l.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(o,u,g={}){if(this._checkLoaded(),void 0!==this.getSource(o))throw new Error("There is already a source with this ID");if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateSource,`sources.${o}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const E=It(o,u,this.dispatcher,this);E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(o),source:E.serialize(),sourceId:o}));const I=B=>{const z=(B?"symbol:":"other:")+o,U=this._sourceCaches[z]=new l.SourceCache(z,E,B);(B?this._symbolSourceCaches:this._otherSourceCaches)[o]=U,U.style=this,U.onAdd(this.map)};I(!1),"vector"!==u.type&&"geojson"!==u.type||I(!0),E.onAdd&&E.onAdd(this.map),this._changed=!0}removeSource(o){this._checkLoaded();const u=this.getSource(o);if(!u)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.get().source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(o);for(const E of g)delete this._sourceCaches[E.id],delete this._updatedSources[E.id],E.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles();return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(o,u){this._checkLoaded(),this.getSource(o).setData(u),this._changed=!0}getSource(o){const u=this._getSourceCache(o);return u&&u.getSource()}addLayer(o,u,g={}){this._checkLoaded();const E=o.id;if(this.getLayer(E))return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${E}" already exists on this map`)));let I;if("custom"===o.type){if(Gs(this,l.validateCustomStyleLayer(o)))return;I=l.createStyleLayer(o)}else{if("object"==typeof o.source&&(this.addSource(E,o.source),o=l.clone$1(o),o=l.extend(o,{source:E})),this._validate(l.validateLayer,`layers.${E}`,o,{arrayIndex:-1},g))return;I=l.createStyleLayer(o),this._validateLayer(I),I.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[I.id]=I.serialize(),this._updateLayerCount(I,!0)}const B=u?this._order.indexOf(u):this._order.length;if(u&&-1===B)return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`)));this._order.splice(B,0,E),this._layerOrderChanged=!0,this._layers[E]=I;const z=this._getLayerSourceCache(I);if(this._removedLayers[E]&&I.source&&z&&"custom"!==I.type){const U=this._removedLayers[E];delete this._removedLayers[E],U.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",z.pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(o,u){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===u)return;const g=this._order.indexOf(o);this._order.splice(g,1);const E=u?this._order.indexOf(u):this._order.length;u&&-1===E?this.fire(new l.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`))):(this._order.splice(E,0,o),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(o){this._checkLoaded();const u=this._layers[o];if(!u)return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be removed.`)));u.setEventedParent(null),this._updateLayerCount(u,!1);const g=this._order.indexOf(o);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=u,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],u.onRemove&&u.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}hasLayerType(o){for(const u in this._layers)if(this._layers[u].type===o)return!0;return!1}setLayerZoomRange(o,u,g){this._checkLoaded();const E=this.getLayer(o);E?E.minzoom===u&&E.maxzoom===g||(null!=u&&(E.minzoom=u),null!=g&&(E.maxzoom=g),this._updateLayer(E)):this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(o,u,g={}){this._checkLoaded();const E=this.getLayer(o);if(E){if(!J(E.filter,u))return null==u?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(l.validateFilter,`layers.${E.id}.filter`,u,{layerType:E.type},g)||(E.filter=l.clone$1(u),this._updateLayer(E)))}else this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be filtered.`)))}getFilter(o){const u=this.getLayer(o);return u&&l.clone$1(u.filter)}setLayoutProperty(o,u,g,E={}){this._checkLoaded();const I=this.getLayer(o);I?J(I.getLayoutProperty(u),g)||(I.setLayoutProperty(u,g,E),this._updateLayer(I)):this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(o,u){const g=this.getLayer(o);if(g)return g.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style.`)))}setPaintProperty(o,u,g,E={}){this._checkLoaded();const I=this.getLayer(o);I?J(I.getPaintProperty(u),g)||(I.setPaintProperty(u,g,E)&&this._updateLayer(I),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(o,u){const g=this.getLayer(o);return g&&g.getPaintProperty(u)}setFeatureState(o,u){this._checkLoaded();const g=o.source,E=o.sourceLayer,I=this.getSource(g);if(!I)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const B=I.type;if("geojson"===B&&E)return void this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===B&&!E)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===o.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided.")));const z=this._getSourceCaches(g);for(const U of z)U.setFeatureState(E,o.id,u)}removeFeatureState(o,u){this._checkLoaded();const g=o.source,E=this.getSource(g);if(!E)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const I=E.type,B="vector"===I?o.sourceLayer:void 0;if("vector"===I&&!B)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&"string"!=typeof o.id&&"number"!=typeof o.id)return void this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const z=this._getSourceCaches(g);for(const U of z)U.removeFeatureState(B,o.id,u)}getFeatureState(o){this._checkLoaded();const u=o.source,g=o.sourceLayer,E=this.getSource(u);if(E){if("vector"!==E.type||g)return void 0===o.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(u)[0].getFeatureState(g,o.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o={};for(const u in this._sourceCaches){const g=this._sourceCaches[u].getSource();o[g.id]||(o[g.id]=g.serialize())}return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:o,layers:this._serializeLayers(this._order)},u=>void 0!==u)}_updateLayer(o){this._updatedLayers[o.id]=!0;const u=this._getLayerSourceCache(o);o.source&&!this._updatedSources[o.source]&&u&&"raster"!==u.getSource().type&&(this._updatedSources[o.source]="reload",u.pause()),this._changed=!0,o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const u=B=>"fill-extrusion"===this._layers[B].type,g={},E=[];for(let B=this._order.length-1;B>=0;B--){const z=this._order[B];if(u(z)){g[z]=B;for(const U of o){const Z=U[z];if(Z)for(const X of Z)E.push(X)}}}E.sort((B,z)=>z.intersectionZ-B.intersectionZ);const I=[];for(let B=this._order.length-1;B>=0;B--){const z=this._order[B];if(u(z))for(let U=E.length-1;U>=0;U--){const Z=E[U].feature;if(g[Z.layer.id]<B)break;I.push(Z),E.pop()}else for(const U of o){const Z=U[z];if(Z)for(const X of Z)I.push(X.feature)}}return I}queryRenderedFeatures(o,u,g){u&&u.filter&&this._validate(l.validateFilter,"queryRenderedFeatures.filter",u.filter,null,u);const E={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const U of u.layers){const Z=this._layers[U];if(!Z)return this.fire(new l.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];E[Z.source]=!0}}const I=[];u.availableImages=this._availableImages;const B=u&&u.layers?u.layers.some(U=>{const Z=this.getLayer(U);return Z&&Z.is3D()}):this.has3DLayers(),z=si.createFromScreenPoints(o,g);for(const U in this._sourceCaches){const Z=this._sourceCaches[U].getSource().id;u.layers&&!E[Z]||I.push(wn(this._sourceCaches[U],this._layers,this._serializedLayers,z,u,g,B,!!this.map._showQueryGeometry))}return this.placement&&I.push(function(U,Z,X,ae,ye,Le,Ae){const De={},Oe=Le.queryRenderedSymbols(ae),Ce=[];for(const Ve of Object.keys(Oe).map(Number))Ce.push(Ae[Ve]);Ce.sort(er);for(const Ve of Ce){const ze=Ve.featureIndex.lookupSymbolFeatures(Oe[Ve.bucketInstanceId],Z,Ve.bucketIndex,Ve.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,U);for(const ft in ze){const ot=De[ft]=De[ft]||[],Ke=ze[ft];Ke.sort((st,tt)=>{const gt=Ve.featureSortOrder;if(gt){const kt=gt.indexOf(st.featureIndex);return gt.indexOf(tt.featureIndex)-kt}return tt.featureIndex-st.featureIndex});for(const st of Ke)ot.push(st)}}for(const Ve in De)De[Ve].forEach(ze=>{const ft=ze.feature,ot=X(U[Ve]).getFeatureState(ft.layer["source-layer"],ft.id);ft.source=ft.layer.source,ft.layer["source-layer"]&&(ft.sourceLayer=ft.layer["source-layer"]),ft.state=ot});return De}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),z.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(o,u){u&&u.filter&&this._validate(l.validateFilter,"querySourceFeatures.filter",u.filter,null,u);const g=this._getSourceCaches(o);let E=[];for(const I of g)E=E.concat(Jt(I,u));return E}addSourceType(o,u,g){return ls.getSourceType(o)?g(new Error(`A source type called "${o}" already exists.`)):(ls.setSourceType(o,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:u.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(o,u={}){this._checkLoaded();const g=this.light.getLight();let E=!1;for(const B in o)if(!J(o[B],g[B])){E=!0;break}if(!E)return;const I=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(o,u),this.light.updateTransitions(I)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(o,u=1){if(this._checkLoaded(),!o)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===u){if("object"==typeof o.source){const g="terrain-dem-src";this.addSource(g,o.source),o=l.clone$1(o),o=l.extend(o,{source:g})}if(this._validate(l.validateTerrain,"terrain",o))return}if(!this.terrain||this.terrain&&u!==this.terrain.drapeRenderMode)this._createTerrain(o,u);else{const g=this.terrain,E=g.get();for(const I of Object.keys(l.spec.terrain))!o.hasOwnProperty(I)&&l.spec.terrain[I].default&&(o[I]=l.spec.terrain[I].default);for(const I in o)if(!J(o[I],E[I])){g.set(o),this.stylesheet.terrain=o;const B=this._setTransitionParameters({duration:0});g.updateTransitions(B);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const u=this.fog=new Jn(o,this.map.transform);this.stylesheet.fog=o;const g=this._setTransitionParameters({duration:0});u.updateTransitions(g)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog,g=u.get();0===Object.keys(o).length&&u.set(o);for(const E in o)if(!J(o[E],g[E])){u.set(o),this.stylesheet.fog=o;const I=this._setTransitionParameters({duration:0});u.updateTransitions(I);break}}else this._createFog(o);this._markersNeedUpdate=!0}_setTransitionParameters(o){return{now:l.exported.now(),transition:l.extend(o,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const o=this._order.filter(g=>this.isLayerDraped(this._layers[g])),u=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...u)}_createTerrain(o,u){const g=this.terrain=new Xt(o,u);this.stylesheet.terrain=o,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const E=this._setTransitionParameters({duration:0});g.updateTransitions(E)}_force3DLayerUpdate(){for(const o in this._layers){const u=this._layers[o];"fill-extrusion"===u.type&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const u=this._layers[o];"symbol"===u.type&&this._updateLayer(u)}}_validate(o,u,g,E,I={}){return(!I||!1!==I.validate)&&Gs(this,o.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:g,styleSpec:l.spec},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this._sourceCaches)this._sourceCaches[o].clearTiles(),this._sourceCaches[o].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){const u=this._getSourceCaches(o);for(const g of u)g.clearTiles()}_reloadSource(o){const u=this._getSourceCaches(o);for(const g of u)g.resume(),g.reload()}_updateSources(o){for(const u in this._sourceCaches)this._sourceCaches[u].update(o)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const u=this._sourceCaches[o];u.resume(),u.reload()}}_updatePlacement(o,u,g,E,I=!1){let B=!1,z=!1;const U={};for(const Z of this._order){const X=this._layers[Z];if("symbol"!==X.type)continue;if(!U[X.source]){const ye=this._getLayerSourceCache(X);if(!ye)continue;U[X.source]=ye.getRenderableIds(!0).map(Le=>ye.getTileByID(Le)).sort((Le,Ae)=>Ae.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(Ae.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer(X,U[X.source],o.center.lng,o.projection);B=B||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),I=I||this._layerOrderChanged||0===g,this._layerOrderChanged&&this.fire(new l.Event("neworder")),(I||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),o.zoom))&&(this.pauseablePlacement=new as(o,this._order,I,u,g,E,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),z=!0),B&&this.pauseablePlacement.placement.setStale()),z||B)for(const Z of this._order){const X=this._layers[Z];"symbol"===X.type&&this.placement.updateLayerOpacities(X,U[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,u,g){this.imageManager.getImages(u.icons,g),this._updateTilesForChangedImages();const E=I=>{I&&I.setDependencies(u.tileID.key,u.type,u.icons)};E(this._otherSourceCaches[u.source]),E(this._symbolSourceCaches[u.source])}getGlyphs(o,u,g){this.glyphManager.getGlyphs(u.stacks,g)}getResource(o,u,g){return l.makeRequest(u,g)}_getSourceCache(o){return this._otherSourceCaches[o]}_getLayerSourceCache(o){return"symbol"===o.type?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}_getSourceCaches(o){const u=[];return this._otherSourceCaches[o]&&u.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&u.push(this._symbolSourceCaches[o]),u}_isSourceCacheLoaded(o){const u=this._getSourceCaches(o);return 0===u.length?(this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${o}'`))),!1):u.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ls.getSourceType=function(p){return at[p]},ls.setSourceType=function(p,o){at[p]=o},ls.registerForPluginStateChange=l.registerForPluginStateChange;var mo="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Ea="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",el="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Ca="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Hl="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let cs={},Ta={};const Q=[];Vt(mo,Q),Vt(el,Q),Vt(Ca,Q),Vt(Hl,Q),cs=on("",el),Ta=on(Hl,Ca);const ve=on("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ee=mo,Me="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var mt={background:on("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:on("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:on("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:on("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:on("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:on("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:on("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:on("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:on("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:on("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:on("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:on("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:on("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:on("uniform lowp vec3 u_lightpos;varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvoid main() {vec4 color=v_color;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:on("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:on("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:on("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:on("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:on("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:on("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:on("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:on("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:on("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:on("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:on("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:on("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ea),skyboxGradient:on("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ea),skyboxCapture:on("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:on("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:on("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Vt(p,o){const u=p.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let g of u)if(g=g.trim(),"#"===g[0]&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=g.split(" ");for(const I of E)o.includes(I)||o.push(I)}}function on(p,o){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=o.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E={},I=[...Q];return Vt(p,I),Vt(o,I),{fragmentSource:p=p.replace(u,(B,z,U,Z,X)=>(E[X]=!0,"define"===z?`\n#ifndef HAS_UNIFORM_u_${X}\nvarying ${U} ${Z} ${X};\n#else\nuniform ${U} ${Z} u_${X};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${X}\n    ${U} ${Z} ${X} = u_${X};\n#endif\n`)),vertexSource:o=o.replace(u,(B,z,U,Z,X)=>{const ae="float"===Z?"vec2":"vec4",ye=X.match(/color/)?"color":ae;return E[X]?"define"===z?`\n#ifndef HAS_UNIFORM_u_${X}\nuniform lowp float u_${X}_t;\nattribute ${U} ${ae} a_${X};\nvarying ${U} ${Z} ${X};\n#else\nuniform ${U} ${Z} u_${X};\n#endif\n`:"vec4"===ye?`\n#ifndef HAS_UNIFORM_u_${X}\n    ${X} = a_${X};\n#else\n    ${U} ${Z} ${X} = u_${X};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${X}\n    ${X} = unpack_mix_${ye}(a_${X}, u_${X}_t);\n#else\n    ${U} ${Z} ${X} = u_${X};\n#endif\n`:"define"===z?`\n#ifndef HAS_UNIFORM_u_${X}\nuniform lowp float u_${X}_t;\nattribute ${U} ${ae} a_${X};\n#else\nuniform ${U} ${Z} u_${X};\n#endif\n`:"vec4"===ye?`\n#ifndef HAS_UNIFORM_u_${X}\n    ${U} ${Z} ${X} = a_${X};\n#else\n    ${U} ${Z} ${X} = u_${X};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${X}\n    ${U} ${Z} ${X} = unpack_mix_${ye}(a_${X}, u_${X}_t);\n#else\n    ${U} ${Z} ${X} = u_${X};\n#endif\n`}),staticAttributes:g,usedDefines:I}}class br{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,u,g,E,I,B,z){this.context=o;let U=this.boundPaintVertexBuffers.length!==E.length;for(let X=0;!U&&X<E.length;X++)this.boundPaintVertexBuffers[X]!==E[X]&&(U=!0);let Z=this.boundDynamicVertexBuffers.length!==z.length;for(let X=0;!Z&&X<z.length;X++)this.boundDynamicVertexBuffers[X]!==z[X]&&(Z=!0);if(!o.extVertexArrayObject||!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||U||Z||this.boundIndexBuffer!==I||this.boundVertexOffset!==B)this.freshBind(u,g,E,I,B,z);else{o.bindVertexArrayOES.set(this.vao);for(const X of z)X&&X.bind();I&&I.dynamicDraw&&I.bind()}}freshBind(o,u,g,E,I,B){let z;const U=o.numAttributes,Z=this.context,X=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=o,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=E,this.boundVertexOffset=I,this.boundDynamicVertexBuffers=B;else{z=Z.currentNumAttributes||0;for(let ae=U;ae<z;ae++)X.disableVertexAttribArray(ae)}u.enableAttributes(X,o),u.bind(),u.setVertexAttribPointers(X,o,I);for(const ae of g)ae.enableAttributes(X,o),ae.bind(),ae.setVertexAttribPointers(X,o,I);for(const ae of B)ae&&(ae.enableAttributes(X,o),ae.bind(),ae.setVertexAttribPointers(X,o,I));E&&E.bind(),Z.currentNumAttributes=U}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Fi(p,o){const u=Math.pow(2,o.canonical.z),g=o.canonical.y;return[new l.MercatorCoordinate(0,g/u).toLngLat().lat,new l.MercatorCoordinate(0,(g+1)/u).toLngLat().lat]}function Pr(p,o,u,g,E,I,B){const z=p.context,U=z.gl,Z=u.fbo;if(!Z)return;p.prepareDrawTile();const X=p.useProgram("hillshade");z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Z.colorAttachment.get());const ae=((De,Oe,Ce,Ve)=>{const ze=Ce.paint.get("hillshade-shadow-color"),ft=Ce.paint.get("hillshade-highlight-color"),ot=Ce.paint.get("hillshade-accent-color");let Ke=Ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ce.paint.get("hillshade-illumination-anchor")&&(Ke-=De.transform.angle);const st=!De.options.moving;return{u_matrix:Ve||De.transform.calculateProjMatrix(Oe.tileID.toUnwrapped(),st),u_image:0,u_latrange:Fi(0,Oe.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),Ke],u_shadow:ze,u_highlight:ft,u_accent:ot}})(p,u,g,p.terrain?o.projMatrix:null);p.prepareDrawProgram(z,X,o.toUnwrapped());const{tileBoundsBuffer:ye,tileBoundsIndexBuffer:Le,tileBoundsSegments:Ae}=p.getTileBoundsBuffers(u);X.draw(z,U.TRIANGLES,E,I,B,l.CullFaceMode.disabled,ae,g.id,ye,Le,Ae)}function ur(p,o,u){if(!o.needsDEMTextureUpload)return;const g=p.context,E=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||p.getTileTexture(u.stride);const I=u.getPixels();o.demTexture?o.demTexture.update(I,{premultiply:!1}):o.demTexture=new l.Texture(g,I,E.RGBA,{premultiply:!1}),o.needsDEMTextureUpload=!1}function gi(p,o,u,g,E,I){const B=p.context,z=B.gl;if(!o.dem)return;const U=o.dem;if(B.activeTexture.set(z.TEXTURE1),ur(p,o,U),!o.demTexture)return;o.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);const Z=U.dim;B.activeTexture.set(z.TEXTURE0);let X=o.fbo;if(!X){const Ae=new l.Texture(B,{width:Z,height:Z,data:null},z.RGBA);Ae.bind(z.LINEAR,z.CLAMP_TO_EDGE),X=o.fbo=B.createFramebuffer(Z,Z,!0),X.colorAttachment.set(Ae.texture)}B.bindFramebuffer.set(X.framebuffer),B.viewport.set([0,0,Z,Z]);const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:ye,tileBoundsSegments:Le}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(B,z.TRIANGLES,g,E,I,l.CullFaceMode.disabled,((Ae,De)=>{const Oe=De.stride,Ce=l.create();return l.ortho(Ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ce,Ce,[0,-l.EXTENT,0]),{u_matrix:Ce,u_image:1,u_dimension:[Oe,Oe],u_zoom:Ae.overscaledZ,u_unpack:De.unpackVector}})(o.tileID,U),u.id,ae,ye,Le),o.needsHillshadePrepare=!1}const no=p=>({u_matrix:new l.UniformMatrix4f(p),u_image0:new l.Uniform1i(p),u_skirt_height:new l.Uniform1f(p)}),hi=(p,o)=>({u_matrix:p,u_image0:0,u_skirt_height:o}),Zo=(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:u,u_zoom_transition:E,u_merc_center:I,u_image0:0,u_frustum_tl:B,u_frustum_tr:z,u_frustum_br:U,u_frustum_bl:Z,u_globe_pos:X,u_globe_radius:ae,u_viewport:ye,u_grid_matrix:Le?Float32Array.from(Le):new Float32Array(9)});function Ps(p,o){return null!=p&&null!=o&&!(!p.hasData()||!o.hasData())&&null!=p.demTexture&&null!=o.demTexture&&p.tileID.key!==o.tileID.key}const Hi=new class{constructor(){this.operations={}}newMorphing(p,o,u,g,E){if(p in this.operations){const I=this.operations[p];I.to.tileID.key!==u.tileID.key&&(I.queued=u)}else this.operations[p]={startTime:g,phase:0,duration:E,from:o,to:u,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const o=this.operations[p];return{from:o.from,to:o.to,phase:o.phase}}update(p){for(const o in this.operations){const u=this.operations[o];for(u.phase=(p-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,p)){delete this.operations[o];break}}}_nextOp(p,o){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=o,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Co={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function tl(p,o){const u=1<<p.z;return!o&&(0===p.x||p.x===u-1)||0===p.y||p.y===u-1}const Da=p=>({u_matrix:p});function Sa(p,o,u,g,E){if(E>0){const I=l.exported.now(),B=(I-p.timeAdded)/E,z=o?(I-o.timeAdded)/E:-1,U=u.getSource(),Z=g.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),X=!o||Math.abs(o.tileID.overscaledZ-Z)>Math.abs(p.tileID.overscaledZ-Z),ae=X&&p.refreshedUponExpiration?1:l.clamp(X?B:1-z,0,1);return p.refreshedUponExpiration&&B>=1&&(p.refreshedUponExpiration=!1),o?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class ws extends l.SourceCache{constructor(o){const u={type:"raster-dem",maxzoom:o.transform.maxZoom},g=new fr(Vr(),null),E=It("mock-dem",u,g,o.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,u){o.state="loaded",u(null)}}class bl extends l.SourceCache{constructor(o){const u=It("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new fr(Vr(),null),o.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,u,g){if(o.freezeTileCoverage)return;this.transform=o;const E=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((I,B)=>{if(I[B.key]="",!this._tiles[B.key]){const z=new l.Tile(B,this._source.tileSize*B.overscaleFactor(),o.tileZoom);z.state="loaded",this._tiles[B.key]=z}return I},{});for(const I in this._tiles)I in E||(this.freeFBO(I),this._tiles[I].unloadVectorData(),delete this._tiles[I])}freeFBO(o){const u=this.proxyCachedFBO[o];if(void 0!==u){const g=Object.values(u);this.renderCachePool.push(...g),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class xl extends l.OverscaledTileID{constructor(o,u,g){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=u,this.projMatrix=g}}class zr extends l.Elevation{constructor(o,u){super(),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,E,I]=function(U){const Z=new l.StructArrayLayout4i8,X=new l.StructArrayLayout3ui6;Z.reserve(17161),X.reserve(33800);const ye=l.EXTENT/128,Le=l.EXTENT+ye/2,Ae=Le+ye;for(let Oe=-ye;Oe<Ae;Oe+=ye)for(let Ce=-ye;Ce<Ae;Ce+=ye){const Ve=Ce<0||Ce>Le||Oe<0||Oe>Le?24575:0,ze=l.clamp(Math.round(Ce),0,l.EXTENT),ft=l.clamp(Math.round(Oe),0,l.EXTENT);Z.emplaceBack(ze+Ve,ft,ze,ft)}const De=(Oe,Ce)=>{const Ve=131*Ce+Oe;X.emplaceBack(Ve+1,Ve,Ve+131),X.emplaceBack(Ve+131,Ve+131+1,Ve+1)};for(let Oe=1;Oe<129;Oe++)for(let Ce=1;Ce<129;Ce++)De(Ce,Oe);return[0,129].forEach(Oe=>{for(let Ce=0;Ce<130;Ce++)De(Ce,Oe),De(Oe,Ce)}),[Z,X,32768]}(),B=o.context;this.gridBuffer=B.createVertexBuffer(g,l.boundsAttributes.members),this.gridIndexBuffer=B.createIndexBuffer(E),this.gridSegments=l.SegmentVector.simpleSegment(0,0,g.length,E.length),this.gridNoSkirtSegments=l.SegmentVector.simpleSegment(0,0,g.length,I),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new bl(u.map),this.orthoMatrix=l.create(),l.ortho(this.orthoMatrix,0,l.EXTENT,0,l.EXTENT,0,1);const z=B.gl;this._overlapStencilMode=new l.StencilMode({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ws(u.map)}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),o.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=o,this._checkRenderCacheEfficiency()}update(o,u,g){if(o&&o.terrain){this._style!==o&&(this.style=o),this.enabled=!0;const E=o.terrain.properties;this.sourceCache=0===o.terrain.drapeRenderMode?this._mockSourceCache:o._getSourceCache(E.get("source")),this._exaggeration=E.get("exaggeration");const I=()=>{this.sourceCache.used&&l.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const B=this.getScaledDemTileSize();this.sourceCache.update(u,B,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,I(),this._initializing=!0),I(),u.updateElevation(!g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const o=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==o.efficiency&&l.warnOnce(`Terrain render cache efficiency is not optimal (${o.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${o.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(o){o.coord&&"source"===o.dataType?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):"style"===o.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._sourceCaches)this._style._sourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=0===g._centerAltitude&&-1===this.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(g.center),-1),this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=u.getIds().map(U=>{const Z=u.getTileByID(U).tileID;return Z.projMatrix=g.calculateProjMatrix(Z.toUnwrapped()),Z});(function(U,Z){const X=Z.transform.pointCoordinate(Z.transform.getCameraPoint()),ae=new l.pointGeometry(X.x,X.y);U.sort((ye,Le)=>{if(Le.overscaledZ-ye.overscaledZ)return Le.overscaledZ-ye.overscaledZ;const Ae=new l.pointGeometry(ye.canonical.x+(1<<ye.canonical.z)*ye.wrap,ye.canonical.y),De=new l.pointGeometry(Le.canonical.x+(1<<Le.canonical.z)*Le.wrap,Le.canonical.y),Oe=ae.mult(1<<ye.canonical.z);return Oe.x-=.5,Oe.y-=.5,Oe.distSqr(Ae)-Oe.distSqr(De)})})(E,this.painter),this._previousZoom=g.zoom;const I=this.proxyToSource||{};this.proxyToSource={},E.forEach(U=>{this.proxyToSource[U.key]={}}),this.terrainTileForTile={};const B=this._style._sourceCaches;for(const U in B){const Z=B[U];if(!Z.used||(Z!==this.sourceCache&&this.resetTileLookupCache(Z.id),this._setupProxiedCoordsForOrtho(Z,o[U],I),Z.usedForTerrain))continue;const X=o[U];Z.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[u.id]=E.map(U=>new xl(U,U.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(I),this.renderingToTexture=!1,this._updateTimestamp=l.exported.now();const z={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const Z=this.terrainTileForTile[U.key];if(!Z)continue;const X=Z.tileID.key;X in z||(this._visibleDemTiles.push(Z),z[X]=X)}}_assignTerrainTiles(o){this._initializing||o.forEach(u=>{if(this.terrainTileForTile[u.key])return;const g=this._findTileCoveringTileID(u,this.sourceCache);g&&(this.terrainTileForTile[u.key]=g)})}_prepareDEMTextures(){const o=this.painter.context,u=o.gl;for(const g in this.terrainTileForTile){const E=this.terrainTileForTile[g],I=E.dem;!I||E.demTexture&&!E.needsDEMTextureUpload||(o.activeTexture.set(u.TEXTURE1),ur(this.painter,E,I))}}_prepareDemTileUniforms(o,u,g,E){if(!u||null==u.demTexture)return!1;const I=o.tileID.canonical,B=Math.pow(2,u.tileID.canonical.z-I.z),z=E||"";return g[`u_dem_tl${z}`]=[I.x*B%1,I.y*B%1],g[`u_dem_scale${z}`]=B,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const o=this.painter.context,u=o.gl;if(!this._emptyDepthBufferTexture){const g=new l.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.Texture(o,g,u.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let o=0;const u=this._visibleDemTiles.reduce((g,E)=>{if(!E.dem)return g;const I=E.dem.tree.minimums[0];return I>0&&o++,g+I},0);return o?u/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,u=o.gl;o.activeTexture.set(u.TEXTURE2);const g=this._getLoadedAreaMinimum(),E=new l.RGBAImage({width:1,height:1},new Uint8Array(l.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let I=this._emptyDEMTexture;return I?I.update(E,{premultiply:!1}):I=this._emptyDEMTexture=new l.Texture(o,E,u.RGBA,{premultiply:!1}),I}setupElevationDraw(o,u,g){const E=this.painter.context,I=E.gl,B=(z=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:l.DEMData.getUnpackVector(z),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var z;B.u_dem_size=this.sourceCache.getSource().tileSize,B.u_exaggeration=this.exaggeration();const U=this.painter.transform,Z=U.projection,X=o.tileID.canonical;B.u_tile_tl_up=Z.upVector(X,0,0),B.u_tile_tr_up=Z.upVector(X,l.EXTENT,0),B.u_tile_br_up=Z.upVector(X,l.EXTENT,l.EXTENT),B.u_tile_bl_up=Z.upVector(X,0,l.EXTENT),B.u_tile_up_scale=g&&g.useDenormalizedUpVectorScale?l.GLOBE_METERS_TO_ECEF:Z.upVectorScale(X,U.center.lat,U.worldSize).metersToTile;let ae=null,ye=null,Le=1;if(g&&g.morphing&&this._useVertexMorphing){const Ae=g.morphing.srcDemTile,De=g.morphing.dstDemTile;Le=g.morphing.phase,Ae&&De&&(this._prepareDemTileUniforms(o,Ae,B,"_prev")&&(ye=Ae),this._prepareDemTileUniforms(o,De,B)&&(ae=De))}if(ye&&ae?(E.activeTexture.set(I.TEXTURE2),ae.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE,I.NEAREST),E.activeTexture.set(I.TEXTURE4),ye.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE,I.NEAREST),B.u_dem_lerp=Le):(ae=this.terrainTileForTile[o.tileID.key],E.activeTexture.set(I.TEXTURE2),(this._prepareDemTileUniforms(o,ae,B)?ae.demTexture:this.emptyDEMTexture).bind(I.NEAREST,I.CLAMP_TO_EDGE)),E.activeTexture.set(I.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE),this._depthFBO&&(B.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE),B.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&ae){const Ae=(1<<ae.tileID.canonical.z)*l.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;B.u_meter_to_dem=Ae}g&&g.labelPlaneMatrixInv&&(B.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),u.setTerrainUniformValues(E,B)}renderToBackBuffer(o){const u=this.painter,g=this.painter.context;0!==o.length&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,I,B,z,U){if("globe"===E.transform.projection.name)!function(Z,X,ae,ye,Le){const Ae=Z.context,De=Ae.gl;let Oe,Ce;const Ve=Z.options.showTerrainWireframe?2:0,ze=Z.transform,ft=l.globeUseCustomAntiAliasing(Z,Ae,ze),ot=(kn,qt)=>{if(Ce===kn)return;const _n=[Co[kn],"PROJECTION_GLOBE_VIEW"];ft&&_n.push("CUSTOM_ANTIALIASING"),qt&&_n.push(Co[Ve]),Oe=Z.useProgram("globeRaster",null,_n),Ce=kn},Ke=Z.colorModeForRenderPass(),st=new l.DepthMode(De.LEQUAL,l.DepthMode.ReadWrite,Z.depthRangeFor3D);Hi.update(Le);const tt=l.calculateGlobeMercatorMatrix(ze),gt=[l.mercatorXfromLng(ze.center.lng),l.mercatorYfromLat(ze.center.lat)],kt=Ve?[!1,!0]:[!1],ln=Z.globeSharedBuffers,At=[ze.width*l.exported.devicePixelRatio,ze.height*l.exported.devicePixelRatio],sn=Float32Array.from(ze.globeMatrix),rn={useDenormalizedUpVectorScale:!0};if(kt.forEach(kn=>{Ce=-1;const qt=kn?De.LINES:De.TRIANGLES;for(const _n of ye){const hn=ae.getTile(_n),Vn=l.StencilMode.disabled,Rn=X.prevTerrainTileForTile[_n.key],Qn=X.terrainTileForTile[_n.key];Ps(Rn,Qn)&&Hi.newMorphing(_n.key,Rn,Qn,Le,250),Ae.activeTexture.set(De.TEXTURE0),hn.texture.bind(De.LINEAR,De.CLAMP_TO_EDGE);const ar=Hi.getMorphValuesForProxy(_n.key),dr=ar?1:0;ar&&l.extend$1(rn,{morphing:{srcDemTile:ar.from,dstDemTile:ar.to,phase:l.easeCubicInOut(ar.phase)}});const qr=l.tileCornersToBounds(_n.canonical),rr=l.getLatitudinalLod(qr.getCenter().lat),Ir=l.getGridMatrix(_n.canonical,qr,rr),Xr=l.globeNormalizeECEF(l.globeTileBounds(_n.canonical)),Yi=Zo(ze.projMatrix,sn,tt,Xr,l.globeToMercatorTransition(ze.zoom),gt,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,At,Ir);if(ot(dr,kn),X.setupElevationDraw(hn,Oe,rn),Z.prepareDrawProgram(Ae,Oe,_n.toUnwrapped()),ln){const[Qi,ki,ro]=kn?ln.getWirefameBuffers(Z.context,rr):ln.getGridBuffers(rr);Oe.draw(Ae,qt,st,Vn,Ke,l.CullFaceMode.backCCW,Yi,"globe_raster",Qi,ki,ro)}}}),ln){const kn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ft&&kn.push("CUSTOM_ANTIALIASING"),Oe=Z.useProgram("globeRaster",null,kn);for(const qt of ye){const{x:_n,y:hn,z:Vn}=qt.canonical,Rn=0===hn,Qn=hn===(1<<Vn)-1,[ar,dr,qr,rr]=ln.getPoleBuffers(Vn);if(rr&&(Rn||Qn)){const Ir=ae.getTile(qt);Ae.activeTexture.set(De.TEXTURE0),Ir.texture.bind(De.LINEAR,De.CLAMP_TO_EDGE);let Xr=l.globePoleMatrixForTile(Vn,_n,ze);const Yi=l.globeNormalizeECEF(l.globeTileBounds(qt.canonical)),Qi=(ki,ro)=>ki.draw(Ae,De.TRIANGLES,st,l.StencilMode.disabled,Ke,l.CullFaceMode.disabled,Zo(ze.projMatrix,Xr,Xr,Yi,0,gt,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,At),"globe_pole_raster",ro,qr,rr);X.setupElevationDraw(Ir,Oe,rn),Z.prepareDrawProgram(Ae,Oe,qt.toUnwrapped()),Rn&&Qi(Oe,ar),Qn&&(Xr=l.scale(l.create(),Xr,[1,-1,1]),Qi(Oe,dr))}}}}(E,I,B,z,U);else{const Z=E.context,X=Z.gl;let ae,ye;const Le=E.options.showTerrainWireframe?2:0,Ae=(ze,ft)=>{if(ye===ze)return;const ot=[Co[ze]];ft&&ot.push(Co[Le]),ae=E.useProgram("terrainRaster",null,ot),ye=ze},De=E.colorModeForRenderPass(),Oe=new l.DepthMode(X.LEQUAL,l.DepthMode.ReadWrite,E.depthRangeFor3D);Hi.update(U);const Ce=E.transform,Ve=6*Math.pow(1.5,22-Ce.zoom)*I.exaggeration();(Le?[!1,!0]:[!1]).forEach(ze=>{ye=-1;const ft=ze?X.LINES:X.TRIANGLES,[ot,Ke]=ze?I.getWirefameBuffer():[I.gridIndexBuffer,I.gridSegments];for(const st of z){const tt=B.getTile(st),gt=l.StencilMode.disabled,kt=I.prevTerrainTileForTile[st.key],ln=I.terrainTileForTile[st.key];Ps(kt,ln)&&Hi.newMorphing(st.key,kt,ln,U,250),Z.activeTexture.set(X.TEXTURE0),tt.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const At=Hi.getMorphValuesForProxy(st.key),sn=At?1:0;let rn;At&&(rn={morphing:{srcDemTile:At.from,dstDemTile:At.to,phase:l.easeCubicInOut(At.phase)}});const kn=hi(st.projMatrix,tl(st.canonical,Ce.renderWorldCopies)?Ve/10:Ve);Ae(sn,ze),I.setupElevationDraw(tt,ae,rn),E.prepareDrawProgram(Z,ae,st.toUnwrapped()),ae.draw(Z,ft,Oe,gt,De,l.CullFaceMode.backCCW,kn,"terrain_raster",I.gridBuffer,ot,Ke)}})}}(u,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(0===this._drapedRenderBatches.length)return o+1;this.renderingToTexture=!0;const u=this.painter,g=this.painter.context,E=this.proxySourceCache,I=this.proxiedCoords[E.id],B=this._drapedRenderBatches.shift(),z=[],U=u.style.order;let Z=0;for(const X of I){const ae=E.getTileByID(X.proxyTileKey),ye=E.proxyCachedFBO[X.key]?E.proxyCachedFBO[X.key][o]:void 0,Le=void 0!==ye?E.renderCache[ye]:this.pool[Z++],Ae=void 0!==ye;if(ae.texture=Le.tex,Ae&&!Le.dirty){z.push(ae.tileID);continue}let De;g.bindFramebuffer.set(Le.fb.framebuffer),this.renderedToTile=!1,Le.dirty&&(g.clear({color:l.Color.transparent,stencil:0}),Le.dirty=!1);for(let Oe=B.start;Oe<=B.end;++Oe){const Ce=u.style._layers[U[Oe]];if(Ce.isHidden(u.transform.zoom))continue;const Ve=u.style._getLayerSourceCache(Ce),ze=Ve?this.proxyToSource[X.key][Ve.id]:[X];if(!ze)continue;const ft=ze;g.viewport.set([0,0,Le.fb.width,Le.fb.height]),De!==(Ve?Ve.id:null)&&(this._setupStencil(Le,ze,Ce,Ve),De=Ve?Ve.id:null),u.renderLayer(u,Ve,Ce,ft)}this.renderedToTile?(Le.dirty=!0,z.push(ae.tileID)):Ae||--Z,5===Z&&(Z=0,this.renderToBackBuffer(z))}return this.renderToBackBuffer(z),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),B.end+1}postRender(){}renderCacheEfficiency(o){const u=o.order.length;if(0===u)return{efficiency:100};let g,E=0,I=0,B=!1;for(let z=0;z<u;++z){const U=o._layers[o.order[z]];this._style.isLayerDraped(U)?(B&&++E,++I):B||(B=!0,g=U.id)}return 0===I?{efficiency:100}:{efficiency:100*(1-E/I),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{o=Math.min(o,u.dem.tree.minimums[0])}),0===o?o:(o-30)*this._exaggeration}raycast(o,u,g){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(I=>I.dem).map(I=>{const B=I.tileID,z=1<<B.overscaledZ,{x:U,y:Z}=B.canonical,X=U/z,ae=(U+1)/z,ye=Z/z,Le=(Z+1)/z;return{minx:X,miny:ye,maxx:ae,maxy:Le,t:I.dem.tree.raycastRoot(X,ye,ae,Le,o,u,g),tile:I}});E.sort((I,B)=>(null!==I.t?I.t:Number.MAX_VALUE)-(null!==B.t?B.t:Number.MAX_VALUE));for(const I of E){if(null==I.t)return null;const B=I.tile.dem.tree.raycast(I.minx,I.miny,I.maxx,I.maxy,o,u,g);if(null!=B)return B}return null}_createFBO(){const o=this.painter.context,u=o.gl,g=this.drapeBufferSize;o.activeTexture.set(u.TEXTURE0);const E=new l.Texture(o,{width:g[0],height:g[1],data:null},u.RGBA);E.bind(u.LINEAR,u.CLAMP_TO_EDGE);const I=o.createFramebuffer(g[0],g[1],!1);return I.colorAttachment.set(E.texture),I.depthAttachment=new ne(o,I.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,I.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):I.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&!o.extTextureFilterAnisotropicForceOff&&u.texParameterf(u.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:I,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const u=this._style._layers[o],g=u.isHidden(this.painter.transform.zoom),E=u.getCrossfadeParameters(),I=!!E&&1!==E.t,B=u.hasTransition();return"custom"!==u.type&&!g&&(I||B)})}_clearRasterFadeFromRenderCache(){let o=!1;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u]._source instanceof Ge){o=!0;break}if(o)for(let u=0;u<this._style.order.length;++u){const g=this._style._layers[this._style.order[u]],E=g.isHidden(this.painter.transform.zoom),I=this._style._getLayerSourceCache(g);if("raster"!==g.type||E||!I)continue;const B=g.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const U=this.proxyToSource[z.key][I.id];if(U)for(const Z of U){const X=Sa(I.getTile(Z),I.findLoadedParent(Z,0),I,this.painter.transform,B);(1!==X.opacity||0!==X.mix)&&this._clearRenderCacheForTile(I.id,Z)}}}}_setupDrapedRenderBatches(){const o=this._style.order,u=o.length;if(0===u)return;const g=[];let E,I=0,B=this._style._layers[o[I]];for(;!this._style.isLayerDraped(B)&&B.isHidden(this.painter.transform.zoom)&&++I<u;)B=this._style._layers[o[I]];for(;I<u;++I){const z=this._style._layers[o[I]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?void 0===E&&(E=I):void 0!==E&&(g.push({start:E,end:I-1}),E=void 0))}void 0!==E&&g.push({start:E,end:I-1}),this._drapedRenderBatches=g}_setupRenderCache(o){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const B=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let z=0;z<B.length;++z){const U=Object.values(B[z]);u.renderCachePool.push(...U)}}return}this._clearRasterFadeFromRenderCache();const g=this.proxyCoords,E=this._tilesDirty;for(let B=g.length-1;B>=0;B--){const z=g[B];if(u.getTileByID(z.key),void 0!==u.proxyCachedFBO[z.key]){const U=o[z.key],Z=this.proxyToSource[z.key];let X=0;for(const ae in Z){const ye=Z[ae],Le=U[ae];if(!Le||Le.length!==ye.length||ye.some((Ae,De)=>Ae!==Le[De]||E[ae]&&E[ae].hasOwnProperty(Ae.key))){X=-1;break}++X}for(const ae in u.proxyCachedFBO[z.key])u.renderCache[u.proxyCachedFBO[z.key][ae]].dirty=X<0||X!==Object.values(U).length}}const I=[...this._drapedRenderBatches];I.sort((B,z)=>z.end-z.start-(B.end-B.start));for(const B of I)for(const z of g){if(u.proxyCachedFBO[z.key])continue;let U=u.renderCachePool.pop();void 0===U&&u.renderCache.length<50&&(U=u.renderCache.length,u.renderCache.push(this._createFBO())),void 0!==U&&(u.proxyCachedFBO[z.key]={},u.proxyCachedFBO[z.key][B.start]=U,u.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(o,u,g,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const I=this.painter.context,B=I.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let z;if(g.isTileClipped())z=u.length,this._overlapStencilMode.test={func:B.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:B.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(I.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):l.StencilMode.disabled}_renderTileClippingMasks(o,u){const g=this.painter,E=this.painter.context,I=E.gl;g._tileClippingMaskIDs={},E.setColorMode(l.ColorMode.disabled),E.setDepthMode(l.DepthMode.disabled);const B=g.useProgram("clippingMask");for(const z of o){const U=g._tileClippingMaskIDs[z.key]=--u;B.draw(E,I.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:I.ALWAYS,mask:0},U,255,I.KEEP,I.KEEP,I.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Da(z.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(o){const u=this.painter.transform;if(o.x<0||o.x>u.width||o.y<0||o.y>u.height)return null;const g=[o.x,o.y,1,1];l.transformMat4$1(g,g,u.pixelMatrixInverse),l.scale$1(g,g,1/g[3]),g[0]/=u.worldSize,g[1]/=u.worldSize;const E=u._camera.position,I=l.mercatorZfromAltitude(1,u.center.lat),B=[E[0],E[1],E[2]/I,0],z=l.subtract([],g.slice(0,3),B);l.normalize(z,z);const U=this.raycast(B,z,this._exaggeration);return null!==U&&U?(l.scaleAndAdd(B,B,z,U),B[3]=B[2],B[2]*=I,B):null}drawDepth(){const o=this.painter,u=o.context,g=this.proxySourceCache,E=Math.ceil(o.width),I=Math.ceil(o.height);if(!this._depthFBO||this._depthFBO.width===E&&this._depthFBO.height===I||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const B=u.gl,z=u.createFramebuffer(E,I,!0);u.activeTexture.set(B.TEXTURE0);const U=new l.Texture(u,{width:E,height:I,data:null},B.RGBA);U.bind(B.NEAREST,B.CLAMP_TO_EDGE),z.colorAttachment.set(U.texture);const Z=u.createRenderbuffer(u.gl.DEPTH_COMPONENT16,E,I);z.depthAttachment.set(Z),this._depthFBO=z,this._depthTexture=U}u.bindFramebuffer.set(this._depthFBO.framebuffer),u.viewport.set([0,0,E,I]),function(B,z,U,Z){if("globe"===B.transform.projection.name)return;const X=B.context,ae=X.gl;X.clear({depth:1});const ye=B.useProgram("terrainDepth"),Le=new l.DepthMode(ae.LESS,l.DepthMode.ReadWrite,B.depthRangeFor3D);for(const Ae of Z){const De=U.getTile(Ae),Oe=hi(Ae.projMatrix,0);z.setupElevationDraw(De,ye),ye.draw(X,ae.TRIANGLES,Le,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.backCCW,Oe,"terrain_depth",z.gridBuffer,z.gridIndexBuffer,z.gridNoSkirtSegments)}}(o,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(o,u,g){if(o.getSource()instanceof wt)return this._setupProxiedCoordsForImageSource(o,u,g);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const E=this.proxiedCoords[o.id]=[],I=this.proxyCoords;for(let z=0;z<I.length;z++){const U=I[z],Z=this._findTileCoveringTileID(U,o);if(Z){const X=this._createProxiedId(U,Z,g[U.key]&&g[U.key][o.id]);E.push(X),this.proxyToSource[U.key][o.id]=[X]}}let B=!1;for(let z=0;z<u.length;z++){const U=o.getTile(u[z]);if(!U||!U.hasData())continue;const Z=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(Z&&Z.tileID.canonical.z!==U.tileID.canonical.z){const X=this.proxyToSource[Z.tileID.key][o.id],ae=this._createProxiedId(Z.tileID,U,g[Z.tileID.key]&&g[Z.tileID.key][o.id]);X?X.splice(X.length-1,0,ae):this.proxyToSource[Z.tileID.key][o.id]=[ae],E.push(ae),B=!0}}this._sourceTilesOverlap[o.id]=B}_setupProxiedCoordsForImageSource(o,u,g){if(!o.getSource().loaded())return;const E=this.proxiedCoords[o.id]=[],I=this.proxyCoords,B=o.getSource(),z=new l.pointGeometry(B.tileID.x,B.tileID.y)._div(1<<B.tileID.z),U=B.coordinates.map(l.MercatorCoordinate.fromLngLat).reduce((X,ae)=>(X.min.x=Math.min(X.min.x,ae.x-z.x),X.min.y=Math.min(X.min.y,ae.y-z.y),X.max.x=Math.max(X.max.x,ae.x-z.x),X.max.y=Math.max(X.max.y,ae.y-z.y),X),{min:new l.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Z=(X,ae)=>{const ye=X.wrap+X.canonical.x/(1<<X.canonical.z),Le=X.canonical.y/(1<<X.canonical.z),Ae=l.EXTENT/(1<<X.canonical.z),De=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Oe=ae.canonical.y/(1<<ae.canonical.z);return ye+Ae<De+U.min.x||ye>De+U.max.x||Le+Ae<Oe+U.min.y||Le>Oe+U.max.y};for(let X=0;X<I.length;X++){const ae=I[X];for(let ye=0;ye<u.length;ye++){const Le=o.getTile(u[ye]);if(!Le||!Le.hasData()||Z(ae,Le.tileID))continue;const Ae=this._createProxiedId(ae,Le,g[ae.key]&&g[ae.key][o.id]),De=this.proxyToSource[ae.key][o.id];De?De.push(Ae):this.proxyToSource[ae.key][o.id]=[Ae],E.push(Ae)}}}_createProxiedId(o,u,g){let E=this.orthoMatrix;if(g){const I=g.find(B=>B.key===u.tileID.key);if(I)return I}if(u.tileID.key!==o.key){const I=o.canonical.z-u.tileID.canonical.z;let B,z,U;E=l.create();const Z=u.tileID.wrap-o.wrap<<o.overscaledZ;I>0?(B=l.EXTENT>>I,z=B*((u.tileID.canonical.x<<I)-o.canonical.x+Z),U=B*((u.tileID.canonical.y<<I)-o.canonical.y)):(B=l.EXTENT<<-I,z=l.EXTENT*(u.tileID.canonical.x-(o.canonical.x+Z<<-I)),U=l.EXTENT*(u.tileID.canonical.y-(o.canonical.y<<-I))),l.ortho(E,0,B,0,B,0,1),l.translate(E,E,[z,U,0])}return new xl(u.tileID,o.key,E)}_findTileCoveringTileID(o,u){let g=u.getTile(o);if(g&&g.hasData())return g;const E=this._findCoveringTileCache[u.id],I=E[o.key];if(g=I?u.getTileByID(I):null,g&&g.hasData()||null===I)return g;let B=g?g.tileID:o,z=B.overscaledZ;const U=u.getSource().minzoom,Z=[];if(!I){const ae=u.getSource().maxzoom;if(o.canonical.z>=ae){const ye=o.canonical.z-ae;u.getSource().reparseOverscaled?(z=Math.max(o.canonical.z+2,u.transform.tileZoom),B=new l.OverscaledTileID(z,o.wrap,ae,o.canonical.x>>ye,o.canonical.y>>ye)):0!==ye&&(z=ae,B=new l.OverscaledTileID(z,o.wrap,ae,o.canonical.x>>ye,o.canonical.y>>ye))}B.key!==o.key&&(Z.push(B.key),g=u.getTile(B))}const X=ae=>{Z.forEach(ye=>{E[ye]=ae}),Z.length=0};for(z-=1;z>=U&&(!g||!g.hasData());z--){g&&X(g.tileID.key);const ae=B.calculateScaledKey(z);if(g=u.getTileByID(ae),g&&g.hasData())break;const ye=E[ae];if(null===ye)break;void 0===ye?Z.push(ae):g=u.getTileByID(ye)}return X(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,u){let g=this._tilesDirty[o];g||(g=this._tilesDirty[o]={}),g[u.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const o=function(u){let g=0;const E=new l.StructArrayLayout2ui4,I=131;for(let B=1;B<129;B++){for(let z=1;z<129;z++)g=B*I+z,E.emplaceBack(g,g+1),E.emplaceBack(g,g+I),E.emplaceBack(g+1,g+I),128===B&&E.emplaceBack(g+I,g+I+1);E.emplaceBack(g+1,g+1+I)}return E}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(o),this.wireframeSegments=l.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Fc{static cacheKey(o,u,g,E){let I=`${u}${E?E.cacheKey:""}`;for(const B of g)o.usedDefines.includes(B)&&(I+=`/${B}`);return I}constructor(o,u,g,E,I,B){const z=o.gl;this.program=z.createProgram();const U=function(Oe){const Ce=[];for(let Ve=0;Ve<Oe.length;Ve++){if(null===Oe[Ve])continue;const ze=Oe[Ve].split(" ");Ce.push(ze.pop())}return Ce}(g.staticAttributes),Z=E?E.getBinderAttributes():[],X=U.concat(Z);let ae=E?E.defines():[];ae=ae.concat(B.map(Oe=>`#define ${Oe}`));const ye=ae.concat(o.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(Me):Me,Me,ee,ve.fragmentSource,Ta.fragmentSource,g.fragmentSource).join("\n"),Le=ae.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ee,ve.vertexSource,Ta.vertexSource,cs.vertexSource,g.vertexSource).join("\n"),Ae=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(Ae,ye),z.compileShader(Ae),z.attachShader(this.program,Ae);const De=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(De,Le),z.compileShader(De),z.attachShader(this.program,De),this.attributes={},this.numAttributes=X.length;for(let Oe=0;Oe<this.numAttributes;Oe++)X[Oe]&&(z.bindAttribLocation(this.program,Oe,X[Oe]),this.attributes[X[Oe]]=Oe);z.linkProgram(this.program),z.deleteShader(De),z.deleteShader(Ae),this.fixedUniforms=I(o),this.binderUniforms=E?E.getUniforms(o):[],-1!==B.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new l.Uniform1i(Oe=o),u_dem_prev:new l.Uniform1i(Oe),u_dem_unpack:new l.Uniform4f(Oe),u_dem_tl:new l.Uniform2f(Oe),u_dem_scale:new l.Uniform1f(Oe),u_dem_tl_prev:new l.Uniform2f(Oe),u_dem_scale_prev:new l.Uniform1f(Oe),u_dem_size:new l.Uniform1f(Oe),u_dem_lerp:new l.Uniform1f(Oe),u_exaggeration:new l.Uniform1f(Oe),u_depth:new l.Uniform1i(Oe),u_depth_size_inv:new l.Uniform2f(Oe),u_meter_to_dem:new l.Uniform1f(Oe),u_label_plane_matrix_inv:new l.UniformMatrix4f(Oe),u_tile_tl_up:new l.Uniform3f(Oe),u_tile_tr_up:new l.Uniform3f(Oe),u_tile_br_up:new l.Uniform3f(Oe),u_tile_bl_up:new l.Uniform3f(Oe),u_tile_up_scale:new l.Uniform1f(Oe)}),-1!==B.indexOf("FOG")&&(this.fogUniforms=(Oe=>({u_fog_matrix:new l.UniformMatrix4f(Oe),u_fog_range:new l.Uniform2f(Oe),u_fog_color:new l.Uniform4f(Oe),u_fog_horizon_blend:new l.Uniform1f(Oe),u_fog_temporal_offset:new l.Uniform1f(Oe),u_frustum_tl:new l.Uniform3f(Oe),u_frustum_tr:new l.Uniform3f(Oe),u_frustum_br:new l.Uniform3f(Oe),u_frustum_bl:new l.Uniform3f(Oe),u_globe_pos:new l.Uniform3f(Oe),u_globe_radius:new l.Uniform1f(Oe),u_globe_transition:new l.Uniform1f(Oe),u_is_globe:new l.Uniform1i(Oe),u_viewport:new l.Uniform2f(Oe)}))(o))}var Oe}setTerrainUniformValues(o,u){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const E in u)g[E].set(this.program,E,u[E])}}setFogUniformValues(o,u){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const E in u)g[E].set(this.program,E,u[E])}}draw(o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De){const Oe=o.gl;if(this.failedToCreate)return;o.program.set(this.program),o.setDepthMode(g),o.setStencilMode(E),o.setColorMode(I),o.setCullFace(B);for(const Ve of Object.keys(this.fixedUniforms))this.fixedUniforms[Ve].set(this.program,Ve,z[Ve]);Ae&&Ae.setUniforms(this.program,o,this.binderUniforms,ye,{zoom:Le});const Ce={[Oe.LINES]:2,[Oe.TRIANGLES]:3,[Oe.LINE_STRIP]:1}[u];for(const Ve of ae.get()){const ze=Ve.vaos||(Ve.vaos={});(ze[U]||(ze[U]=new br)).bind(o,this,Z,Ae?Ae.getPaintVertexBuffers():[],X,Ve.vertexOffset,De||[]),Oe.drawElements(u,Ve.primitiveLength*Ce,Oe.UNSIGNED_SHORT,Ve.primitiveOffset*Ce*2)}}}function _u(p,o,u){const g=1/Fr(u,1,o.transform.tileZoom),E=Math.pow(2,u.tileID.overscaledZ),I=u.tileSize*Math.pow(2,o.transform.tileZoom)/E,B=I*(u.tileID.canonical.x+u.tileID.wrap*E),z=I*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[g,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[B>>16,z>>16],u_pixel_coord_lower:[65535&B,65535&z]}}const $l=l.create(),Ia=(p,o,u,g,E,I,B,z,U,Z,X)=>{const ae=o.style.light,ye=ae.properties.get("position"),Le=[ye.x,ye.y,ye.z],Ae=l.create$1();"viewport"===ae.properties.get("anchor")&&(l.fromRotation(Ae,-o.transform.angle),l.transformMat3(Le,Le,Ae));const De=ae.properties.get("color"),Oe=o.transform,Ce={u_matrix:p,u_lightpos:Le,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[De.r,De.g,De.b],u_vertical_gradient:+u,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:$l,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:I};return"globe"===Oe.projection.name&&(Ce.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],Ce.u_zoom_transition=U,Ce.u_inv_rot_matrix=X,Ce.u_merc_center=Z,Ce.u_up_dir=Oe.projection.upVector(new l.CanonicalTileID(0,0,0),Z[0]*l.EXTENT,Z[1]*l.EXTENT),Ce.u_height_lift=z),Ce},yu=(p,o,u,g,E,I,B,z,U,Z,X,ae,ye)=>{const Le=Ia(p,o,u,g,E,I,B,Z,X,ae,ye),Ae={u_height_factor:-Math.pow(2,B.overscaledZ)/U.tileSize/8};return l.extend(Le,_u(z,o,U),Ae)},nl=p=>({u_matrix:p}),Gl=(p,o,u,g)=>l.extend(nl(p),_u(u,o,g)),En=(p,o)=>({u_matrix:p,u_world:o}),Si=(p,o,u,g,E)=>l.extend(Gl(p,o,u,g),{u_world:E}),Uu=l.create(),Po=(p,o,u,g,E,I)=>{const B=p.transform,z="globe"===B.projection.name;let U;if("map"===I.paint.get("circle-pitch-alignment"))if(z){const X=l.globePixelsToTileUnits(B.zoom,o.canonical)*B._pixelsPerMercatorPixel;U=Float32Array.from([X,0,0,X])}else U=B.calculatePixelsToTileUnitsMatrix(u);else U=new Float32Array([B.pixelsToGLUnits[0],0,0,B.pixelsToGLUnits[1]]);const Z={u_camera_to_center_distance:B.cameraToCenterDistance,u_matrix:p.translatePosMatrix(o.projMatrix,u,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_device_pixel_ratio:l.exported.devicePixelRatio,u_extrude_scale:U,u_inv_rot_matrix:Uu,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){Z.u_inv_rot_matrix=g,Z.u_merc_center=E,Z.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],Z.u_zoom_transition=l.globeToMercatorTransition(B.zoom);const X=E[0]*l.EXTENT,ae=E[1]*l.EXTENT;Z.u_up_dir=B.projection.upVector(new l.CanonicalTileID(0,0,0),X,ae)}return Z},Ch=p=>{const o=[];return"map"===p.paint.get("circle-pitch-alignment")&&o.push("PITCH_WITH_MAP"),"map"===p.paint.get("circle-pitch-scale")&&o.push("SCALE_WITH_MAP"),o},wl=(p,o,u,g)=>{const E=l.EXTENT/u.tileSize;return{u_matrix:p,u_camera_to_center_distance:o.getCameraToCenterDistance(g),u_extrude_scale:[o.pixelsToGLUnits[0]/E,o.pixelsToGLUnits[1]/E]}},ra=(p,o,u=1)=>({u_matrix:p,u_color:o,u_overlay:0,u_overlay_scale:u}),dc=l.create(),fc=(p,o,u,g,E,I,B)=>{const z=p.transform,U="globe"===z.projection.name,Z=U?l.globePixelsToTileUnits(z.zoom,o.canonical)*z._pixelsPerMercatorPixel:Fr(u,1,I),X={u_matrix:o.projMatrix,u_extrude_scale:Z,u_intensity:B,u_inv_rot_matrix:dc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){X.u_inv_rot_matrix=g,X.u_merc_center=E,X.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],X.u_zoom_transition=l.globeToMercatorTransition(z.zoom);const ae=E[0]*l.EXTENT,ye=E[1]*l.EXTENT;X.u_up_dir=z.projection.upVector(new l.CanonicalTileID(0,0,0),ae,ye)}return X},Hu=(p,o,u,g,E,I,B,z)=>{const U=p.transform,Z=U.calculatePixelsToTileUnitsMatrix(o),X={u_matrix:Nc(p,o,u,E),u_pixels_to_tile_units:Z,u_device_pixel_ratio:B,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:I,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:z};if(co(u)){const ae=Ma(o,p.transform);X.u_texsize=o.lineAtlasTexture.size,X.u_scale=[ae,g.fromScale,g.toScale],X.u_mix=g.t}return X},dd=(p,o,u,g,E,I)=>{const B=p.transform,z=Ma(o,B);return{u_matrix:Nc(p,o,u,E),u_texsize:o.imageAtlasTexture.size,u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:I,u_image:0,u_scale:[z,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ma(p,o){return 1/Fr(p,1,o.tileZoom)}function Nc(p,o,u,g){return p.translatePosMatrix(g||o.tileID.projMatrix,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}function co(p){const o=p.paint.get("line-dasharray").value;return o.value||"constant"!==o.kind}const rl=(p,o,u,g,E,I)=>{return{u_matrix:p,u_tl_parent:o,u_scale_parent:u,u_fade_t:g.mix,u_opacity:g.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(z=E.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(B=E.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:vu(E.paint.get("raster-hue-rotate")),u_perspective_transform:I};var B,z};function vu(p){p*=Math.PI/180;const o=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*o-u+1)/3,(Math.sqrt(3)*o-u+1)/3]}const Os=l.create(),Aa=(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De)=>{const Oe=E.transform,Ce={u_is_size_zoom_constant:+("constant"===p||"source"===p),u_is_size_feature_constant:+("constant"===p||"camera"===p),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Oe.cameraToCenterDistance,u_rotate_symbol:+u,u_aspect_ratio:Oe.width/Oe.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:I,u_label_plane_matrix:B,u_coord_matrix:z,u_is_text:+U,u_pitch_with_map:+g,u_texsize:Z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Os,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Os,u_up_vector:[0,-1,0]};return"globe"===De.name&&(Ce.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],Ce.u_zoom_transition=ae,Ce.u_inv_rot_matrix=Le,Ce.u_merc_center=ye,Ce.u_camera_forward=Oe._camera.forward(),Ce.u_ecef_origin=l.globeECEFOrigin(Oe.globeMatrix,X.toUnwrapped()),Ce.u_tile_matrix=Float32Array.from(Oe.globeMatrix),Ce.u_up_vector=Ae),Ce},Th=(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De,Oe)=>l.extend(Aa(p,o,u,g,E,I,B,z,U,Z,ae,ye,Le,Ae,De,Oe),{u_gamma_scale:g?E.transform.cameraToCenterDistance*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:l.exported.devicePixelRatio,u_is_halo:+X}),Wl=(p,o,u,g,E,I,B,z,U,Z,X,ae,ye,Le,Ae,De)=>l.extend(Th(p,o,u,g,E,I,B,z,!0,U,!0,X,ae,ye,Le,Ae,De),{u_texsize_icon:Z,u_texture_icon:1}),fd=(p,o,u)=>({u_matrix:p,u_opacity:o,u_color:u}),Dh=(p,o,u,g,E,I)=>l.extend(function(B,z,U,Z){const X=U.imageManager.getPattern(B.from.toString()),ae=U.imageManager.getPattern(B.to.toString()),{width:ye,height:Le}=U.imageManager.getPixelSize(),Ae=Math.pow(2,Z.tileID.overscaledZ),De=Z.tileSize*Math.pow(2,U.transform.tileZoom)/Ae,Oe=De*(Z.tileID.canonical.x+Z.tileID.wrap*Ae),Ce=De*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[ye,Le],u_mix:z.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Fr(Z,1,U.transform.tileZoom),u_pixel_coord_upper:[Oe>>16,Ce>>16],u_pixel_coord_lower:[65535&Oe,65535&Ce]}}(g,I,u,E),{u_matrix:p,u_opacity:o}),$u={fillExtrusion:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_lightpos:new l.Uniform3f(p),u_lightintensity:new l.Uniform1f(p),u_lightcolor:new l.Uniform3f(p),u_vertical_gradient:new l.Uniform1f(p),u_height_factor:new l.Uniform1f(p),u_edge_radius:new l.Uniform1f(p),u_ao:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_up_dir:new l.Uniform3f(p),u_height_lift:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_scale:new l.Uniform3f(p),u_fade:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p)}),fill:p=>({u_matrix:new l.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_scale:new l.Uniform3f(p),u_fade:new l.Uniform1f(p)}),fillOutline:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_world:new l.Uniform2f(p),u_image:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_scale:new l.Uniform3f(p),u_fade:new l.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),collisionBox:p=>({u_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_extrude_scale:new l.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new l.UniformMatrix4f(p),u_inv_matrix:new l.UniformMatrix4f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_viewport_size:new l.Uniform2f(p)}),debug:p=>({u_color:new l.UniformColor(p),u_matrix:new l.UniformMatrix4f(p),u_overlay:new l.Uniform1i(p),u_overlay_scale:new l.Uniform1f(p)}),clippingMask:p=>({u_matrix:new l.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new l.Uniform1f(p),u_intensity:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_up_dir:new l.Uniform3f(p)}),heatmapTexture:p=>({u_image:new l.Uniform1i(p),u_color_ramp:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p)}),hillshade:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_latrange:new l.Uniform2f(p),u_light:new l.Uniform2f(p),u_shadow:new l.UniformColor(p),u_highlight:new l.UniformColor(p),u_accent:new l.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new l.UniformMatrix4f(p),u_image:new l.Uniform1i(p),u_dimension:new l.Uniform2f(p),u_zoom:new l.Uniform1f(p),u_unpack:new l.Uniform4f(p)}),line:p=>({u_matrix:new l.UniformMatrix4f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_units_to_pixels:new l.Uniform2f(p),u_dash_image:new l.Uniform1i(p),u_gradient_image:new l.Uniform1i(p),u_image_height:new l.Uniform1f(p),u_texsize:new l.Uniform2f(p),u_scale:new l.Uniform3f(p),u_mix:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p),u_trim_offset:new l.Uniform2f(p)}),linePattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_texsize:new l.Uniform2f(p),u_pixels_to_tile_units:new l.UniformMatrix2f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_units_to_pixels:new l.Uniform2f(p),u_scale:new l.Uniform3f(p),u_fade:new l.Uniform1f(p),u_alpha_discard_threshold:new l.Uniform1f(p)}),raster:p=>({u_matrix:new l.UniformMatrix4f(p),u_tl_parent:new l.Uniform2f(p),u_scale_parent:new l.Uniform1f(p),u_fade_t:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_image0:new l.Uniform1i(p),u_image1:new l.Uniform1i(p),u_brightness_low:new l.Uniform1f(p),u_brightness_high:new l.Uniform1f(p),u_saturation_factor:new l.Uniform1f(p),u_contrast_factor:new l.Uniform1f(p),u_spin_weights:new l.Uniform3f(p),u_perspective_transform:new l.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_texture:new l.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_tile_id:new l.Uniform3f(p),u_zoom_transition:new l.Uniform1f(p),u_inv_rot_matrix:new l.UniformMatrix4f(p),u_merc_center:new l.Uniform2f(p),u_camera_forward:new l.Uniform3f(p),u_tile_matrix:new l.UniformMatrix4f(p),u_up_vector:new l.Uniform3f(p),u_ecef_origin:new l.Uniform3f(p),u_is_halo:new l.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new l.Uniform1i(p),u_is_size_feature_constant:new l.Uniform1i(p),u_size_t:new l.Uniform1f(p),u_size:new l.Uniform1f(p),u_camera_to_center_distance:new l.Uniform1f(p),u_rotate_symbol:new l.Uniform1i(p),u_aspect_ratio:new l.Uniform1f(p),u_fade_change:new l.Uniform1f(p),u_matrix:new l.UniformMatrix4f(p),u_label_plane_matrix:new l.UniformMatrix4f(p),u_coord_matrix:new l.UniformMatrix4f(p),u_is_text:new l.Uniform1i(p),u_pitch_with_map:new l.Uniform1i(p),u_texsize:new l.Uniform2f(p),u_texsize_icon:new l.Uniform2f(p),u_texture:new l.Uniform1i(p),u_texture_icon:new l.Uniform1i(p),u_gamma_scale:new l.Uniform1f(p),u_device_pixel_ratio:new l.Uniform1f(p),u_is_halo:new l.Uniform1i(p)}),background:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_color:new l.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new l.UniformMatrix4f(p),u_opacity:new l.Uniform1f(p),u_image:new l.Uniform1i(p),u_pattern_tl_a:new l.Uniform2f(p),u_pattern_br_a:new l.Uniform2f(p),u_pattern_tl_b:new l.Uniform2f(p),u_pattern_br_b:new l.Uniform2f(p),u_texsize:new l.Uniform2f(p),u_mix:new l.Uniform1f(p),u_pattern_size_a:new l.Uniform2f(p),u_pattern_size_b:new l.Uniform2f(p),u_scale_a:new l.Uniform1f(p),u_scale_b:new l.Uniform1f(p),u_pixel_coord_upper:new l.Uniform2f(p),u_pixel_coord_lower:new l.Uniform2f(p),u_tile_units_to_pixels:new l.Uniform1f(p)}),terrainRaster:no,terrainDepth:no,skybox:p=>({u_matrix:new l.UniformMatrix4f(p),u_sun_direction:new l.Uniform3f(p),u_cubemap:new l.Uniform1i(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new l.UniformMatrix4f(p),u_color_ramp:new l.Uniform1i(p),u_center_direction:new l.Uniform3f(p),u_radius:new l.Uniform1f(p),u_opacity:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new l.UniformMatrix3f(p),u_sun_direction:new l.Uniform3f(p),u_sun_intensity:new l.Uniform1f(p),u_color_tint_r:new l.Uniform4f(p),u_color_tint_m:new l.Uniform4f(p),u_luminance:new l.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new l.UniformMatrix4f(p),u_globe_matrix:new l.UniformMatrix4f(p),u_normalize_matrix:new l.UniformMatrix4f(p),u_merc_matrix:new l.UniformMatrix4f(p),u_zoom_transition:new l.Uniform1f(p),u_merc_center:new l.Uniform2f(p),u_image0:new l.Uniform1i(p),u_grid_matrix:new l.UniformMatrix3f(p),u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_globe_pos:new l.Uniform3f(p),u_globe_radius:new l.Uniform1f(p),u_viewport:new l.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new l.Uniform3f(p),u_frustum_tr:new l.Uniform3f(p),u_frustum_br:new l.Uniform3f(p),u_frustum_bl:new l.Uniform3f(p),u_horizon:new l.Uniform1f(p),u_transition:new l.Uniform1f(p),u_fadeout_range:new l.Uniform1f(p),u_color:new l.Uniform4f(p),u_high_color:new l.Uniform4f(p),u_space_color:new l.Uniform4f(p),u_star_intensity:new l.Uniform1f(p),u_star_density:new l.Uniform1f(p),u_star_size:new l.Uniform1f(p),u_temporal_offset:new l.Uniform1f(p),u_horizon_angle:new l.Uniform1f(p),u_rotation_matrix:new l.UniformMatrix4f(p)})};let Zl;function Gu(p,o,u,g,E,I,B){const z=p.context,U=z.gl,Z=p.transform,X=p.useProgram("collisionBox"),ae=[];let ye=0,Le=0;for(let ft=0;ft<g.length;ft++){const ot=g[ft],Ke=o.getTile(ot),st=Ke.getBucket(u);if(!st)continue;const tt=Fn(ot,st,Z);let gt=tt;0===E[0]&&0===E[1]||(gt=p.translatePosMatrix(tt,Ke,E,I));const kt=B?st.textCollisionBox:st.iconCollisionBox,ln=st.collisionCircleArray;if(ln.length>0){const At=l.create(),sn=gt;l.mul(At,st.placementInvProjMatrix,Z.glCoordMatrix),l.mul(At,At,st.placementViewportMatrix),ae.push({circleArray:ln,circleOffset:Le,transform:sn,invTransform:At,projection:st.getProjection()}),ye+=ln.length/4,Le=ye}kt&&(p.terrain&&p.terrain.setupElevationDraw(Ke,X),X.draw(z,U.LINES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,wl(gt,Z,Ke,st.getProjection()),u.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,Z.zoom,null,[kt.collisionVertexBuffer,kt.collisionVertexBufferExt]))}if(!B||!ae.length)return;const Ae=p.useProgram("collisionCircle"),De=new l.StructArrayLayout2f1f2i16;De.resize(4*ye),De._trim();let Oe=0;for(const ft of ae)for(let ot=0;ot<ft.circleArray.length/4;ot++){const Ke=4*ot,st=ft.circleArray[Ke+0],tt=ft.circleArray[Ke+1],gt=ft.circleArray[Ke+2],kt=ft.circleArray[Ke+3];De.emplace(Oe++,st,tt,gt,kt,0),De.emplace(Oe++,st,tt,gt,kt,1),De.emplace(Oe++,st,tt,gt,kt,2),De.emplace(Oe++,st,tt,gt,kt,3)}(!Zl||Zl.length<2*ye)&&(Zl=function(ft){const ot=2*ft,Ke=new l.StructArrayLayout3ui6;Ke.resize(ot),Ke._trim();for(let st=0;st<ot;st++){const tt=6*st;Ke.uint16[tt+0]=4*st+0,Ke.uint16[tt+1]=4*st+1,Ke.uint16[tt+2]=4*st+2,Ke.uint16[tt+3]=4*st+2,Ke.uint16[tt+4]=4*st+3,Ke.uint16[tt+5]=4*st+0}return Ke}(ye));const Ce=z.createIndexBuffer(Zl,!0),Ve=z.createVertexBuffer(De,l.collisionCircleLayout.members,!0);for(const ft of ae){const ot={u_matrix:ft.transform,u_inv_matrix:ft.invTransform,u_camera_to_center_distance:(ze=Z).getCameraToCenterDistance(ft.projection),u_viewport_size:[ze.width,ze.height]};Ae.draw(z,U.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,p.colorModeForRenderPass(),l.CullFaceMode.disabled,ot,u.id,Ve,Ce,l.SegmentVector.simpleSegment(0,2*ft.circleOffset,ft.circleArray.length,ft.circleArray.length/2),null,Z.zoom)}var ze;Ve.destroy(),Ce.destroy()}const bu=l.create();function xu(p,o,u,g,E,I){const{horizontalAlign:B,verticalAlign:z}=l.getAnchorAlignment(p),U=-(B-.5)*o,Z=-(z-.5)*u,X=l.evaluateVariableOffset(p,g);return new l.pointGeometry((U/E+X[0])*I,(Z/E+X[1])*I)}function Wu(p,o,u,g,E,I,B,z,U,Z,X){const ae=p.text.placedSymbolArray,ye=p.text.dynamicLayoutVertexArray,Le=p.icon.dynamicLayoutVertexArray,Ae={},De=Ar(z,p.getProjection(),I),Oe=I.elevation,Ce=p.getProjection().upVectorScale(z.canonical,I.center.lat,I.worldSize);ye.clear();for(let Ve=0;Ve<ae.length;Ve++){const ze=ae.get(Ve),ft=p.allowVerticalPlacement&&!ze.placedOrientation,ot=ze.hidden||!ze.crossTileID||ft?null:g[ze.crossTileID];if(ot){const Ke=new l.pointGeometry(ze.tileAnchorX,ze.tileAnchorY),st=p.getProjection().upVector(z.canonical,Ke.x,Ke.y),tt=Oe?Oe.getAtTileOffset(z,Ke.x,Ke.y):0,gt=or([ze.projectedAnchorX+tt*st[0]*Ce.metersToTile,ze.projectedAnchorY+tt*st[1]*Ce.metersToTile,ze.projectedAnchorZ+tt*st[2]*Ce.metersToTile],u?De:B),kt=Ui(I.getCameraToCenterDistance(p.getProjection()),gt.signedDistanceFromCamera);let ln=E.evaluateSizeForFeature(p.textSizeData,Z,ze)*kt/l.ONE_EM;u&&(ln*=p.tilePixelRatio/U);const{width:At,height:sn,anchor:rn,textOffset:kn,textScale:qt}=ot,_n=xu(rn,At,sn,kn,qt,ln);let hn;if(u){const Rn=Ke.add(_n),{x:Qn,y:ar,z:dr}=p.getProjection().projectTilePoint(Rn.x,Rn.y,z.canonical);hn=or([Qn+tt*st[0]*Ce.metersToTile,ar+tt*st[1]*Ce.metersToTile,dr+tt*st[2]*Ce.metersToTile],B).point}else{const Rn=o?_n.rotate(-I.angle):_n;hn=[gt.point[0]+Rn.x,gt.point[1]+Rn.y,0]}const Vn=p.allowVerticalPlacement&&ze.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Rn=0;Rn<ze.numGlyphs;Rn++)l.addDynamicAttributes(ye,hn[0],hn[1],hn[2],Vn);X&&ze.associatedIconIndex>=0&&(Ae[ze.associatedIconIndex]={shiftedAnchor:hn,angle:Vn})}else Be(ze.numGlyphs,ye)}if(X){Le.clear();const Ve=p.icon.placedSymbolArray;for(let ze=0;ze<Ve.length;ze++){const ft=Ve.get(ze);if(ft.hidden)Be(ft.numGlyphs,Le);else{const ot=Ae[ze];if(ot)for(let Ke=0;Ke<ft.numGlyphs;Ke++)l.addDynamicAttributes(Le,ot.shiftedAnchor[0],ot.shiftedAnchor[1],ot.shiftedAnchor[2],ot.angle);else Be(ft.numGlyphs,Le)}}p.icon.dynamicLayoutVertexBuffer.updateData(Le)}p.text.dynamicLayoutVertexBuffer.updateData(ye)}function El(p,o,u){return u.iconsInText&&o?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function wu(p,o,u,g,E,I,B,z,U,Z,X,ae){const ye=p.context,Le=ye.gl,Ae=p.transform,De="map"===z,Oe="map"===U,Ce=De&&"point"!==u.layout.get("symbol-placement"),Ve=De&&!Oe&&!Ce,ze=void 0!==u.layout.get("symbol-sort-key").constantOr(1);let ft=!1;const ot=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),Ke=[l.mercatorXfromLng(Ae.center.lng),l.mercatorYfromLat(Ae.center.lat)],st=u.layout.get("text-variable-anchor"),tt="globe"===Ae.projection.name,gt=[],kt=[0,-1,0];let ln=kt;!tt&&!Ae.mercatorFromTransition||De||(ln=function(At){const sn=At._camera.getWorldToCamera(At.worldSize,1),rn=l.multiply([],sn,At.globeMatrix);l.invert(rn,rn);const kn=[0,0,0],qt=[0,1,0,0];return l.transformMat4$1(qt,qt,rn),kn[0]=qt[0],kn[1]=qt[1],kn[2]=qt[2],l.normalize(kn,kn),kn}(Ae));for(const At of g){const sn=o.getTile(At),rn=sn.getBucket(u);if(!rn||"mercator"===rn.projection.name&&tt)continue;const kn=E?rn.text:rn.icon;if(!kn||rn.fullyClipped||!kn.segments.get().length)continue;const qt=kn.programConfigurations.get(u.id),_n=E||rn.sdfIcons,hn=E?rn.textSizeData:rn.iconSizeData,Vn=Oe||0!==Ae.pitch,Rn=l.evaluateSizeForZoom(hn,Ae.zoom);let Qn,ar,dr,qr,rr=[0,0],Ir=null;if(E){if(ar=sn.glyphAtlasTexture,dr=Le.LINEAR,Qn=sn.glyphAtlasTexture.size,rn.iconsInText){rr=sn.imageAtlasTexture.size,Ir=sn.imageAtlasTexture;const vs="composite"===hn.kind||"camera"===hn.kind;qr=Vn||p.options.rotating||p.options.zooming||vs?Le.LINEAR:Le.NEAREST}}else{const vs=1!==u.layout.get("icon-size").constantOr(0)||rn.iconsNeedLinear;ar=sn.imageAtlasTexture,dr=_n||p.options.rotating||p.options.zooming||vs||Vn?Le.LINEAR:Le.NEAREST,Qn=sn.imageAtlasTexture.size}const Xr="globe"===rn.projection.name,Yi=Xr?ln:kt,Qi=Xr?l.globeToMercatorTransition(Ae.zoom):0,ki=Ar(At,rn.getProjection(),Ae),ro=Ae.calculatePixelsToTileUnitsMatrix(sn),Qo=bt(ki,sn.tileID.canonical,Oe,De,Ae,rn.getProjection(),ro),Ks=p.terrain&&Oe&&Ce?l.invert(l.create(),Qo):bu,Ji=vr(ki,sn.tileID.canonical,Oe,De,Ae,rn.getProjection(),ro),Gi=st&&rn.hasTextData(),jr="none"!==u.layout.get("icon-text-fit")&&Gi&&rn.hasIconData();if(Ce){const vs=Ae.elevation,Va=vs?vs.getAtTileOffsetFunc(At,Ae.center.lat,Ae.worldSize,rn.getProjection()):Ou=>[0,0,0],Ml=Sn(ki,sn.tileID.canonical,Oe,De,Ae,rn.getProjection(),ro);ss(rn,ki,p,E,Ml,Ji,Oe,Z,Va,At)}const Ho=Ce||E&&st||jr,So=p.translatePosMatrix(ki,sn,I,B),Ni=Ho?bu:Qo,$o=p.translatePosMatrix(Ji,sn,I,B,!0),Io=rn.getProjection().createInversionMatrix(Ae,At.canonical),ds=[];p.terrain&&Oe&&ds.push("PITCH_WITH_MAP_TERRAIN"),Xr&&ds.push("PROJECTION_GLOBE_VIEW"),Ho&&ds.push("PROJECTED_POS_ON_VIEWPORT");const ca=_n&&0!==u.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1);let Kc;Kc=_n?rn.iconsInText?Wl(hn.kind,Rn,Ve,Oe,p,So,Ni,$o,Qn,rr,At,Qi,Ke,Io,Yi,rn.getProjection()):Th(hn.kind,Rn,Ve,Oe,p,So,Ni,$o,E,Qn,!0,At,Qi,Ke,Io,Yi,rn.getProjection()):Aa(hn.kind,Rn,Ve,Oe,p,So,Ni,$o,E,Qn,At,Qi,Ke,Io,Yi,rn.getProjection());const ja={program:p.useProgram(El(_n,E,rn),qt,ds),buffers:kn,uniformValues:Kc,atlasTexture:ar,atlasTextureIcon:Ir,atlasInterpolation:dr,atlasInterpolationIcon:qr,isSDF:_n,hasHalo:ca,tile:sn,labelPlaneMatrixInv:Ks};if(ze&&rn.canOverlap){ft=!0;const vs=kn.segments.get();for(const Va of vs)gt.push({segments:new l.SegmentVector([Va]),sortKey:Va.sortKey,state:ja})}else gt.push({segments:kn.segments,sortKey:0,state:ja})}ft&&gt.sort((At,sn)=>At.sortKey-sn.sortKey);for(const At of gt){const sn=At.state;if(p.terrain&&p.terrain.setupElevationDraw(sn.tile,sn.program,{useDepthForOcclusion:!tt,labelPlaneMatrixInv:sn.labelPlaneMatrixInv}),ye.activeTexture.set(Le.TEXTURE0),sn.atlasTexture.bind(sn.atlasInterpolation,Le.CLAMP_TO_EDGE),sn.atlasTextureIcon&&(ye.activeTexture.set(Le.TEXTURE1),sn.atlasTextureIcon&&sn.atlasTextureIcon.bind(sn.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),sn.isSDF){const rn=sn.uniformValues;sn.hasHalo&&(rn.u_is_halo=1,xi(sn.buffers,At.segments,u,p,sn.program,ot,X,ae,rn)),rn.u_is_halo=0}xi(sn.buffers,At.segments,u,p,sn.program,ot,X,ae,sn.uniformValues)}}function xi(p,o,u,g,E,I,B,z,U){const Z=g.context,X=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];E.draw(Z,Z.gl.TRIANGLES,I,B,z,l.CullFaceMode.disabled,U,u.id,p.layoutVertexBuffer,p.indexBuffer,o,u.paint,g.transform.zoom,p.programConfigurations.get(u.id),X)}function Bc(p,o,u,g,E,I,B){const z=p.context.gl,U=u.paint.get("fill-pattern"),Z=U&&U.constantOr(1),X=u.getCrossfadeParameters();let ae,ye,Le,Ae,De;B?(ye=Z&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=z.LINES):(ye=Z?"fillPattern":"fill",ae=z.TRIANGLES);for(const Oe of g){const Ce=o.getTile(Oe);if(Z&&!Ce.patternsLoaded())continue;const Ve=Ce.getBucket(u);if(!Ve)continue;p.prepareDrawTile();const ze=Ve.programConfigurations.get(u.id),ft=p.useProgram(ye,ze);Z&&(p.context.activeTexture.set(z.TEXTURE0),Ce.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ze.updatePaintBuffers(X));const ot=U.constantOr(null);if(ot&&Ce.imageAtlas){const st=Ce.imageAtlas,tt=st.patternPositions[ot.to.toString()],gt=st.patternPositions[ot.from.toString()];tt&&gt&&ze.setConstantPatternPositions(tt,gt)}const Ke=p.translatePosMatrix(Oe.projMatrix,Ce,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(B){Ae=Ve.indexBuffer2,De=Ve.segments2;const st=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];Le="fillOutlinePattern"===ye&&Z?Si(Ke,p,X,Ce,st):En(Ke,st)}else Ae=Ve.indexBuffer,De=Ve.segments,Le=Z?Gl(Ke,p,X,Ce):nl(Ke);p.prepareDrawProgram(p.context,ft,Oe.toUnwrapped()),ft.draw(p.context,ae,E,p.stencilModeForClipping(Oe),I,l.CullFaceMode.disabled,Le,u.id,Ve.layoutVertexBuffer,Ae,De,u.paint,p.transform.zoom,ze)}}function Pa(p,o,u,g,E,I,B){const z=p.context,U=z.gl,Z=p.transform,X=u.paint.get("fill-extrusion-pattern"),ae=X.constantOr(1),ye=u.getCrossfadeParameters(),Le=u.paint.get("fill-extrusion-opacity"),Ae=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),u.paint.get("fill-extrusion-ambient-occlusion-radius")],De=u.layout.get("fill-extrusion-edge-radius"),Oe="globe"===Z.projection.name?l.fillExtrusionHeightLift():0,Ce="globe"===Z.projection.name,Ve=Ce?l.globeToMercatorTransition(Z.zoom):0,ze=[l.mercatorXfromLng(Z.center.lng),l.mercatorYfromLat(Z.center.lat)],ft=[];Ce&&(ft.push("PROJECTION_GLOBE_VIEW"),p.style.terrainSetForDrapingOnly()&&ft.push("TERRAIN")),Ae[0]>0&&ft.push("FAUX_AO");for(const ot of g){const Ke=o.getTile(ot),st=Ke.getBucket(u);if(!st||st.projection.name!==Z.projection.name)continue;const tt=st.programConfigurations.get(u.id),gt=p.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",tt,ft);if(p.terrain){const qt=p.terrain;if(p.style.terrainSetForDrapingOnly())qt.setupElevationDraw(Ke,gt,{useMeterToDem:!0});else{if(!st.enableTerrain)continue;if(qt.setupElevationDraw(Ke,gt,{useMeterToDem:!0}),ql(z,o,ot,st,u,qt),!st.centroidVertexBuffer){const _n=gt.attributes.a_centroid_pos;void 0!==_n&&U.vertexAttrib2f(_n,0,0)}}}ae&&(p.context.activeTexture.set(U.TEXTURE0),Ke.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),tt.updatePaintBuffers(ye));const kt=X.constantOr(null);if(kt&&Ke.imageAtlas){const qt=Ke.imageAtlas,_n=qt.patternPositions[kt.to.toString()],hn=qt.patternPositions[kt.from.toString()];_n&&hn&&tt.setConstantPatternPositions(_n,hn)}const ln=p.translatePosMatrix(ot.projMatrix,Ke,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),At=Z.projection.createInversionMatrix(Z,ot.canonical),sn=u.paint.get("fill-extrusion-vertical-gradient"),rn=ae?yu(ln,p,sn,Le,Ae,De,ot,ye,Ke,Oe,Ve,ze,At):Ia(ln,p,sn,Le,Ae,De,ot,Oe,Ve,ze,At);p.prepareDrawProgram(z,gt,ot.toUnwrapped());const kn=[];p.terrain&&kn.push(st.centroidVertexBuffer),Ce&&kn.push(st.layoutVertexExtBuffer),gt.draw(z,z.gl.TRIANGLES,E,I,B,l.CullFaceMode.backCCW,rn,u.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,u.paint,p.transform.zoom,tt,kn)}}function ql(p,o,u,g,E,I){const B=[Ce=>{let Ve=Ce.canonical.x-1,ze=Ce.wrap;return Ve<0&&(Ve=(1<<Ce.canonical.z)-1,ze--),new l.OverscaledTileID(Ce.overscaledZ,ze,Ce.canonical.z,Ve,Ce.canonical.y)},Ce=>{let Ve=Ce.canonical.x+1,ze=Ce.wrap;return Ve===1<<Ce.canonical.z&&(Ve=0,ze++),new l.OverscaledTileID(Ce.overscaledZ,ze,Ce.canonical.z,Ve,Ce.canonical.y)},Ce=>new l.OverscaledTileID(Ce.overscaledZ,Ce.wrap,Ce.canonical.z,Ce.canonical.x,(0===Ce.canonical.y?1<<Ce.canonical.z:Ce.canonical.y)-1),Ce=>new l.OverscaledTileID(Ce.overscaledZ,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y===(1<<Ce.canonical.z)-1?0:Ce.canonical.y+1)],z=Ce=>{const Ve=o.getSource().minzoom,ze=ot=>{const Ke=o.getTileByID(ot);if(Ke&&Ke.hasData())return Ke.getBucket(E)},ft=[0,-1,1];for(const ot of ft){if(Ce.overscaledZ+ot<Ve)continue;const Ke=ze(Ce.calculateScaledKey(Ce.overscaledZ+ot));if(Ke)return Ke}},U=[0,0,0],Z=(Ce,Ve)=>(U[0]=Math.min(Ce.min.y,Ve.min.y),U[1]=Math.max(Ce.max.y,Ve.max.y),U[2]=l.EXTENT-Ve.min.x>Ce.max.x?Ve.min.x-l.EXTENT:Ce.max.x,U),X=(Ce,Ve)=>(U[0]=Math.min(Ce.min.x,Ve.min.x),U[1]=Math.max(Ce.max.x,Ve.max.x),U[2]=l.EXTENT-Ve.min.y>Ce.max.y?Ve.min.y-l.EXTENT:Ce.max.y,U),ae=[(Ce,Ve)=>Z(Ce,Ve),(Ce,Ve)=>Z(Ve,Ce),(Ce,Ve)=>X(Ce,Ve),(Ce,Ve)=>X(Ve,Ce)],ye=new l.pointGeometry(0,0);let Le,Ae,De;const Oe=(Ce,Ve,ze,ft,ot)=>{const Ke=[[ft?ze:Ce,ft?Ce:ze,0],[ft?ze:Ve,ft?Ve:ze,0]],st=ot<0?l.EXTENT+ot:ot,tt=[ft?st:(Ce+Ve)/2,ft?(Ce+Ve)/2:st,0];return 0===ze&&ot<0||0!==ze&&ot>0?I.getForTilePoints(De,[tt],!0,Ae):Ke.push(tt),I.getForTilePoints(u,Ke,!0,Le),Math.max(Ke[0][2],Ke[1][2],tt[2])/I.exaggeration()};for(let Ce=0;Ce<4;Ce++){const Ve=(Ce<2?1:5)-Ce,ze=g.borders[Ce];if(0===ze.length)continue;const ft=De=B[Ce](u),ot=z(ft);if(!(ot&&ot instanceof l.FillExtrusionBucket&&ot.enableTerrain)||g.borderDoneWithNeighborZ[Ce]===ot.canonical.z&&ot.borderDoneWithNeighborZ[Ve]===g.canonical.z||(Ae=I.findDEMTileFor(ft),!Ae||!Ae.dem))continue;if(!Le){const gt=I.findDEMTileFor(u);if(!gt||!gt.dem)return;Le=gt}const Ke=ot.borders[Ve];let st=0;const tt=ot.borderDoneWithNeighborZ[Ve]!==g.canonical.z;if(g.canonical.z===ot.canonical.z){for(let gt=0;gt<ze.length;gt++){const kt=g.featuresOnBorder[ze[gt]],ln=kt.borders[Ce];let At;for(;st<Ke.length&&(At=ot.featuresOnBorder[Ke[st]],!(At.borders[Ve][1]>ln[0]+3));)tt&&ot.encodeCentroid(void 0,At,!1),st++;if(At&&st<Ke.length){const sn=st;let rn=0;for(;!(At.borders[Ve][0]>ln[1]-3)&&(rn++,++st!==Ke.length);)At=ot.featuresOnBorder[Ke[st]];if(At=ot.featuresOnBorder[Ke[sn]],kt.intersectsCount()>1||At.intersectsCount()>1||1!==rn){1!==rn&&(st=sn),g.encodeCentroid(void 0,kt,!1),tt&&ot.encodeCentroid(void 0,At,!1);continue}const kn=ae[Ce](kt,At),qt=Ce%2?l.EXTENT-1:0;ye.x=Oe(kn[0],Math.min(l.EXTENT-1,kn[1]),qt,Ce<2,kn[2]),ye.y=0,g.encodeCentroid(ye,kt,!1),tt&&ot.encodeCentroid(ye,At,!1)}else g.encodeCentroid(void 0,kt,!1)}g.borderDoneWithNeighborZ[Ce]=ot.canonical.z,g.needsCentroidUpdate=!0,tt&&(ot.borderDoneWithNeighborZ[Ve]=g.canonical.z,ot.needsCentroidUpdate=!0)}else{for(const gt of ze)g.encodeCentroid(void 0,g.featuresOnBorder[gt],!1);if(tt){for(const gt of Ke)ot.encodeCentroid(void 0,ot.featuresOnBorder[gt],!1);ot.borderDoneWithNeighborZ[Ve]=g.canonical.z,ot.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[Ce]=ot.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&0!==g.centroidVertexArray.length)&&g.uploadCentroid(p)}const Zu=new l.Color(1,0,0,1),pc=new l.Color(0,1,0,1),Uo=new l.Color(0,0,1,1),Oa=new l.Color(1,0,1,1),yo=new l.Color(0,1,1,1);function di(p,o,u){const g=p.context,E=p.transform,I=g.gl,B="globe"===E.projection.name,z=B?["PROJECTION_GLOBE_VIEW"]:null;let U=u.projMatrix;if(B&&l.globeToMercatorTransition(E.zoom)>0){const kt=l.transitionTileAABBinECEF(u.canonical,E),ln=l.globeDenormalizeECEF(kt);U=l.multiply(new Float32Array(16),E.globeMatrix,ln),l.multiply(U,E.projMatrix,U)}const Z=p.useProgram("debug",null,z),X=o.getTileByID(u.key);p.terrain&&p.terrain.setupElevationDraw(X,Z);const ae=l.DepthMode.disabled,ye=l.StencilMode.disabled,Le=p.colorModeForRenderPass();g.activeTexture.set(I.TEXTURE0),p.emptyTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),B?X._makeGlobeTileDebugBuffers(p.context,E):X._makeDebugTileBoundsBuffers(p.context,E.projection);const De=X._tileDebugBuffer||p.debugBuffer,Oe=X._tileDebugIndexBuffer||p.debugIndexBuffer,Ce=X._tileDebugSegments||p.debugSegments;Z.draw(g,I.LINE_STRIP,ae,ye,Le,l.CullFaceMode.disabled,ra(U,l.Color.red),"$debug",De,Oe,Ce,null,null,null,[X._globeTileDebugBorderBuffer]);const Ve=X.latestRawTileData,ze=Math.floor((Ve&&Ve.byteLength||0)/1024),ft=o.getTile(u).tileSize,ot=512/Math.min(ft,512)*(u.overscaledZ/E.zoom)*.5;let Ke=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ke+=` => ${u.overscaledZ}`),Ke+=` ${ze}kb`,function(kt,ln){kt.initDebugOverlayCanvas();const At=kt.debugOverlayCanvas,sn=kt.context.gl,rn=kt.debugOverlayCanvas.getContext("2d");rn.clearRect(0,0,At.width,At.height),rn.shadowColor="white",rn.shadowBlur=2,rn.lineWidth=1.5,rn.strokeStyle="white",rn.textBaseline="top",rn.font="bold 36px Open Sans, sans-serif",rn.fillText(ln,5,5),rn.strokeText(ln,5,5),kt.debugOverlayTexture.update(At),kt.debugOverlayTexture.bind(sn.LINEAR,sn.CLAMP_TO_EDGE)}(p,Ke);const st=X._tileDebugTextBuffer||p.debugBuffer,tt=X._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,gt=X._tileDebugTextSegments||p.debugSegments;Z.draw(g,I.TRIANGLES,ae,ye,l.ColorMode.alphaBlended,l.CullFaceMode.disabled,ra(U,l.Color.transparent,ot),"$debug",st,tt,gt,null,null,null,[X._globeTileDebugTextBuffer])}function mc(p,o,u,g){zc(p,0,o+u/2,p.transform.width,u,g)}function qu(p,o,u,g){zc(p,o-u/2,0,u,p.transform.height,g)}function zc(p,o,u,g,E,I){const B=p.context,z=B.gl;z.enable(z.SCISSOR_TEST),z.scissor(o*l.exported.devicePixelRatio,u*l.exported.devicePixelRatio,g*l.exported.devicePixelRatio,E*l.exported.devicePixelRatio),B.clear({color:I}),z.disable(z.SCISSOR_TEST)}const gc=l.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Sh}=gc;function ka(p,o,u,g){p.emplaceBack(o,u,g)}class jc{constructor(o){this.vertexArray=new l.StructArrayLayout3f12,this.indices=new l.StructArrayLayout3ui6,ka(this.vertexArray,-1,-1,1),ka(this.vertexArray,1,-1,1),ka(this.vertexArray,-1,1,1),ka(this.vertexArray,1,1,1),ka(this.vertexArray,-1,-1,-1),ka(this.vertexArray,1,-1,-1),ka(this.vertexArray,-1,1,-1),ka(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,Sh),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=l.SegmentVector.simpleSegment(0,0,36,12)}}function ks(p,o,u,g,E,I){const B=p.gl,z=o.paint.get("sky-atmosphere-color"),U=o.paint.get("sky-atmosphere-halo-color"),Z=o.paint.get("sky-atmosphere-sun-intensity"),X={u_matrix_3f:l.fromMat4(l.create$1(),g),u_sun_direction:E,u_sun_intensity:Z,u_color_tint_r:[(Ae=z).r,Ae.g,Ae.b,Ae.a],u_color_tint_m:[(De=U).r,De.g,De.b,De.a],u_luminance:5e-5};var Ae,De;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+I,o.skyboxTexture,0),u.draw(p,B.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.frontCW,X,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const _c=l.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ra{constructor(o){const u=new l.StructArrayLayout5f20;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const g=new l.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(u,_c.members),this.indexBuffer=o.createIndexBuffer(g),this.segments=l.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ia={symbol:function(p,o,u,g,E){if("translucent"!==p.renderPass)return;const I=l.StencilMode.disabled,B=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(z,U,Z,X,ae,ye,Le){const Ae=U.transform,De="map"===ae,Oe="map"===ye;for(const Ce of z){const Ve=X.getTile(Ce),ze=Ve.getBucket(Z);if(!ze||!ze.text||!ze.text.segments.get().length)continue;const ft=l.evaluateSizeForZoom(ze.textSizeData,Ae.zoom),ot=Ar(Ce,ze.getProjection(),Ae),Ke=Ae.calculatePixelsToTileUnitsMatrix(Ve),st=bt(ot,Ve.tileID.canonical,Oe,De,Ae,ze.getProjection(),Ke),tt="none"!==Z.layout.get("icon-text-fit")&&ze.hasIconData();if(ft){const gt=Math.pow(2,Ae.zoom-Ve.tileID.overscaledZ);Wu(ze,De,Oe,Le,l.symbolSize,Ae,st,Ce,gt,ft,tt)}}}(g,p,u,o,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),E),0!==u.paint.get("icon-opacity").constantOr(1)&&wu(p,o,u,g,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),I,B),0!==u.paint.get("text-opacity").constantOr(1)&&wu(p,o,u,g,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),I,B),o.map.showCollisionBoxes&&(Gu(p,o,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Gu(p,o,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,o,u,g){if("translucent"!==p.renderPass)return;const E=u.paint.get("circle-opacity"),I=u.paint.get("circle-stroke-width"),B=u.paint.get("circle-stroke-opacity"),z=void 0!==u.layout.get("circle-sort-key").constantOr(1);if(0===E.constantOr(1)&&(0===I.constantOr(1)||0===B.constantOr(1)))return;const U=p.context,Z=U.gl,X=p.transform,ae=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),ye=l.StencilMode.disabled,Le=p.colorModeForRenderPass(),Ae="globe"===X.projection.name,De=[l.mercatorXfromLng(X.center.lng),l.mercatorYfromLat(X.center.lat)],Oe=[];for(let Ve=0;Ve<g.length;Ve++){const ze=g[Ve],ft=o.getTile(ze),ot=ft.getBucket(u);if(!ot||ot.projection.name!==X.projection.name)continue;const Ke=ot.programConfigurations.get(u.id),st=Ch(u);Ae&&st.push("PROJECTION_GLOBE_VIEW");const tt=p.useProgram("circle",Ke,st),gt=ot.layoutVertexBuffer,kt=ot.globeExtVertexBuffer,ln=ot.indexBuffer,At=X.projection.createInversionMatrix(X,ze.canonical),sn={programConfiguration:Ke,program:tt,layoutVertexBuffer:gt,globeExtVertexBuffer:kt,indexBuffer:ln,uniformValues:Po(p,ze,ft,At,De,u),tile:ft};if(z){const rn=ot.segments.get();for(const kn of rn)Oe.push({segments:new l.SegmentVector([kn]),sortKey:kn.sortKey,state:sn})}else Oe.push({segments:ot.segments,sortKey:0,state:sn})}z&&Oe.sort((Ve,ze)=>Ve.sortKey-ze.sortKey);const Ce={useDepthForOcclusion:!Ae};for(const Ve of Oe){const{programConfiguration:ze,program:ft,layoutVertexBuffer:ot,globeExtVertexBuffer:Ke,indexBuffer:st,uniformValues:tt,tile:gt}=Ve.state,kt=Ve.segments;p.terrain&&p.terrain.setupElevationDraw(gt,ft,Ce),p.prepareDrawProgram(U,ft,gt.tileID.toUnwrapped()),ft.draw(U,Z.TRIANGLES,ae,ye,Le,l.CullFaceMode.disabled,tt,u.id,ot,st,kt,u.paint,X.zoom,ze,[Ke])}},heatmap:function(p,o,u,g){if(0!==u.paint.get("heatmap-opacity"))if("offscreen"===p.renderPass){const E=p.context,I=E.gl,B=l.StencilMode.disabled,z=new l.ColorMode([I.ONE,I.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Le,Ae,De,Oe){const Ce=Le.gl,Ve=Ae.width*Oe,ze=Ae.height*Oe;Le.activeTexture.set(Ce.TEXTURE1),Le.viewport.set([0,0,Ve,ze]);let ft=De.heatmapFbo;if(!ft||ft&&(ft.width!==Ve||ft.height!==ze)){ft&&ft.destroy();const ot=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,ot),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),ft=De.heatmapFbo=Le.createFramebuffer(Ve,ze,!1),function(Ke,st,tt,gt,kt,ln){const At=Ke.gl;At.texImage2D(At.TEXTURE_2D,0,At.RGBA,kt,ln,0,At.RGBA,Ke.extRenderToTextureHalfFloat?Ke.extTextureHalfFloat.HALF_FLOAT_OES:At.UNSIGNED_BYTE,null),gt.colorAttachment.set(tt)}(Le,0,ot,ft,Ve,ze)}else Ce.bindTexture(Ce.TEXTURE_2D,ft.colorAttachment.get()),Le.bindFramebuffer.set(ft.framebuffer)})(E,p,u,"globe"===p.transform.projection.name?.5:.25),E.clear({color:l.Color.transparent});const U=p.transform,Z="globe"===U.projection.name,X=Z?["PROJECTION_GLOBE_VIEW"]:null,ae=Z?l.CullFaceMode.frontCCW:l.CullFaceMode.disabled,ye=[l.mercatorXfromLng(U.center.lng),l.mercatorYfromLat(U.center.lat)];for(let Le=0;Le<g.length;Le++){const Ae=g[Le];if(o.hasRenderableParent(Ae))continue;const De=o.getTile(Ae),Oe=De.getBucket(u);if(!Oe||Oe.projection.name!==U.projection.name)continue;const Ce=Oe.programConfigurations.get(u.id),Ve=p.useProgram("heatmap",Ce,X),{zoom:ze}=p.transform;p.terrain&&p.terrain.setupElevationDraw(De,Ve),p.prepareDrawProgram(E,Ve,Ae.toUnwrapped());const ft=U.projection.createInversionMatrix(U,Ae.canonical);Ve.draw(E,I.TRIANGLES,l.DepthMode.disabled,B,z,ae,fc(p,Ae,De,ft,ye,ze,u.paint.get("heatmap-intensity")),u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,u.paint,p.transform.zoom,Ce,Z?[Oe.globeExtVertexBuffer]:null)}E.viewport.set([0,0,p.width,p.height])}else"translucent"===p.renderPass&&(p.context.setColorMode(p.colorModeForRenderPass()),function(E,I){const B=E.context,z=B.gl,U=I.heatmapFbo;if(!U)return;B.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,U.colorAttachment.get()),B.activeTexture.set(z.TEXTURE1);let Z=I.colorRampTexture;Z||(Z=I.colorRampTexture=new l.Texture(B,I.colorRamp,z.RGBA)),Z.bind(z.LINEAR,z.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(B,z.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,E.colorModeForRenderPass(),l.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:I.paint.get("heatmap-opacity")},I.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,I.paint,E.transform.zoom)}(p,u))},line:function(p,o,u,g){if("translucent"!==p.renderPass)return;const E=u.paint.get("line-opacity"),I=u.paint.get("line-width");if(0===E.constantOr(1)||0===I.constantOr(1))return;const B=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),z=p.colorModeForRenderPass(),U=p.terrain&&p.terrain.renderingToTexture?1:l.exported.devicePixelRatio,Z=u.paint.get("line-dasharray"),X=Z.constantOr(1),ae=u.layout.get("line-cap"),ye=u.paint.get("line-pattern"),Le=ye.constantOr(1),Ae=u.paint.get("line-gradient"),De=u.getCrossfadeParameters(),Oe=Le?"linePattern":"line",Ce=p.context,Ve=Ce.gl,ze=(ot=>{const Ke=[];co(ot)&&Ke.push("RENDER_LINE_DASH"),ot.paint.get("line-gradient")&&Ke.push("RENDER_LINE_GRADIENT");const st=ot.paint.get("line-trim-offset");0===st[0]&&0===st[1]||Ke.push("RENDER_LINE_TRIM_OFFSET");const tt=ot.paint.get("line-pattern").constantOr(1),gt=1!==ot.paint.get("line-opacity").constantOr(1);return!tt&&gt&&Ke.push("RENDER_LINE_ALPHA_DISCARD"),Ke})(u);let ft=ze.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(ft=!1);for(const ot of g){const Ke=o.getTile(ot);if(Le&&!Ke.patternsLoaded())continue;const st=Ke.getBucket(u);if(!st)continue;p.prepareDrawTile();const tt=st.programConfigurations.get(u.id),gt=p.useProgram(Oe,tt,ze),kt=ye.constantOr(null);if(kt&&Ke.imageAtlas){const hn=Ke.imageAtlas,Vn=hn.patternPositions[kt.to.toString()],Rn=hn.patternPositions[kt.from.toString()];Vn&&Rn&&tt.setConstantPatternPositions(Vn,Rn)}const ln=Z.constantOr(null),At=ae.constantOr(null);if(!Le&&ln&&At&&Ke.lineAtlas){const hn=Ke.lineAtlas,Vn=hn.getDash(ln.to,At),Rn=hn.getDash(ln.from,At);Vn&&Rn&&tt.setConstantPatternPositions(Vn,Rn)}let[sn,rn]=u.paint.get("line-trim-offset");if("round"===At||"square"===At){const hn=1;sn!==rn&&(0===sn&&(sn-=hn),1===rn&&(rn+=hn))}const kn=p.terrain?ot.projMatrix:null,qt=Le?dd(p,Ke,u,De,kn,U):Hu(p,Ke,u,De,kn,st.lineClipsArray.length,U,[sn,rn]);if(Ae){const hn=st.gradients[u.id];let Vn=hn.texture;if(u.gradientVersion!==hn.version){let Rn=256;if(u.stepInterpolant){const Qn=o.getSource().maxzoom,ar=ot.canonical.z===Qn?Math.ceil(1<<p.transform.maxZoom-ot.canonical.z):1;Rn=l.clamp(l.nextPowerOfTwo(st.maxLineLength/l.EXTENT*1024*ar),256,Ce.maxTextureSize)}hn.gradient=l.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Rn,image:hn.gradient||void 0,clips:st.lineClipsArray}),hn.texture?hn.texture.update(hn.gradient):hn.texture=new l.Texture(Ce,hn.gradient,Ve.RGBA),hn.version=u.gradientVersion,Vn=hn.texture}Ce.activeTexture.set(Ve.TEXTURE1),Vn.bind(u.stepInterpolant?Ve.NEAREST:Ve.LINEAR,Ve.CLAMP_TO_EDGE)}X&&(Ce.activeTexture.set(Ve.TEXTURE0),Ke.lineAtlasTexture.bind(Ve.LINEAR,Ve.REPEAT),tt.updatePaintBuffers(De)),Le&&(Ce.activeTexture.set(Ve.TEXTURE0),Ke.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),tt.updatePaintBuffers(De)),p.prepareDrawProgram(Ce,gt,ot.toUnwrapped());const _n=hn=>{gt.draw(Ce,Ve.TRIANGLES,B,hn,z,l.CullFaceMode.disabled,qt,u.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,u.paint,p.transform.zoom,tt,[st.layoutVertexBuffer2])};if(ft){const hn=p.stencilModeForClipping(ot).ref;0===hn&&p.terrain&&Ce.clear({stencil:0});const Vn={func:Ve.EQUAL,mask:255};qt.u_alpha_discard_threshold=.8,_n(new l.StencilMode(Vn,hn,255,Ve.KEEP,Ve.KEEP,Ve.INVERT)),qt.u_alpha_discard_threshold=0,_n(new l.StencilMode(Vn,hn,255,Ve.KEEP,Ve.KEEP,Ve.KEEP))}else _n(p.stencilModeForClipping(ot))}ft&&(p.resetStencilClippingMasks(),p.terrain&&Ce.clear({stencil:0}))},fill:function(p,o,u,g){const E=u.paint.get("fill-color"),I=u.paint.get("fill-opacity");if(0===I.constantOr(1))return;const B=p.colorModeForRenderPass(),z=u.paint.get("fill-pattern"),U=p.opaquePassEnabledForLayer()&&!z.constantOr(1)&&1===E.constantOr(l.Color.transparent).a&&1===I.constantOr(0)?"opaque":"translucent";if(p.renderPass===U){const Z=p.depthModeForSublayer(1,"opaque"===p.renderPass?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly);Bc(p,o,u,g,Z,B,!1)}if("translucent"===p.renderPass&&u.paint.get("fill-antialias")){const Z=p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,l.DepthMode.ReadOnly);Bc(p,o,u,g,Z,B,!0)}},"fill-extrusion":function(p,o,u,g){const E=u.paint.get("fill-extrusion-opacity");if(0!==E&&"translucent"===p.renderPass){const I=new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D);if(1!==E||u.paint.get("fill-extrusion-pattern").constantOr(1))Pa(p,o,u,g,I,l.StencilMode.disabled,l.ColorMode.disabled),Pa(p,o,u,g,I,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const B=p.colorModeForRenderPass();Pa(p,o,u,g,I,l.StencilMode.disabled,B)}}},hillshade:function(p,o,u,g){if("offscreen"!==p.renderPass&&"translucent"!==p.renderPass)return;const E=p.context,I=p.depthModeForSublayer(0,l.DepthMode.ReadOnly),B=p.colorModeForRenderPass(),z=p.terrain&&p.terrain.renderingToTexture,[U,Z]="translucent"!==p.renderPass||z?[{},g]:p.stencilConfigForOverlap(g);for(const X of Z){const ae=o.getTile(X);if(ae.needsHillshadePrepare&&"offscreen"===p.renderPass)gi(p,ae,u,I,l.StencilMode.disabled,B);else if("translucent"===p.renderPass){const ye=z&&p.terrain?p.terrain.stencilModeForRTTOverlap(X):U[X.overscaledZ];Pr(p,X,ae,u,I,ye,B)}}E.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,o,u,g,E,I){if("translucent"!==p.renderPass||0===u.paint.get("raster-opacity")||!g.length)return;const B=p.context,z=B.gl,U=o.getSource(),Z=p.useProgram("raster"),X=p.colorModeForRenderPass(),ae=p.terrain&&p.terrain.renderingToTexture,[ye,Le]=U instanceof wt||ae?[{},g]:p.stencilConfigForOverlap(g),Ae=Le[Le.length-1].overscaledZ,De=!p.options.moving;for(const Oe of Le){const Ce=ae?l.DepthMode.disabled:p.depthModeForSublayer(Oe.overscaledZ-Ae,1===u.paint.get("raster-opacity")?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly,z.LESS),Ve=Oe.toUnwrapped(),ze=o.getTile(Oe);if(ae&&(!ze||!ze.hasData()))continue;const ft=ae?Oe.projMatrix:p.transform.calculateProjMatrix(Ve,De),ot=p.terrain&&ae?p.terrain.stencilModeForRTTOverlap(Oe):ye[Oe.overscaledZ],Ke=I?0:u.paint.get("raster-fade-duration");ze.registerFadeDuration(Ke);const st=o.findLoadedParent(Oe,0),tt=Sa(ze,st,o,p.transform,Ke);let gt,kt;p.terrain&&p.terrain.prepareDrawTile();const ln="nearest"===u.paint.get("raster-resampling")?z.NEAREST:z.LINEAR;B.activeTexture.set(z.TEXTURE0),ze.texture.bind(ln,z.CLAMP_TO_EDGE),B.activeTexture.set(z.TEXTURE1),st?(st.texture.bind(ln,z.CLAMP_TO_EDGE),gt=Math.pow(2,st.tileID.overscaledZ-ze.tileID.overscaledZ),kt=[ze.tileID.canonical.x*gt%1,ze.tileID.canonical.y*gt%1]):ze.texture.bind(ln,z.CLAMP_TO_EDGE);const At=rl(ft,kt||[0,0],gt||1,tt,u,U instanceof wt?U.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(B,Z,Ve),U instanceof wt)U.boundsBuffer&&U.boundsSegments&&Z.draw(B,z.TRIANGLES,Ce,l.StencilMode.disabled,X,l.CullFaceMode.disabled,At,u.id,U.boundsBuffer,p.quadTriangleIndexBuffer,U.boundsSegments);else{const{tileBoundsBuffer:sn,tileBoundsIndexBuffer:rn,tileBoundsSegments:kn}=p.getTileBoundsBuffers(ze);Z.draw(B,z.TRIANGLES,Ce,ot,X,l.CullFaceMode.disabled,At,u.id,sn,rn,kn)}}p.resetStencilClippingMasks()},background:function(p,o,u,g){const E=u.paint.get("background-color"),I=u.paint.get("background-opacity");if(0===I)return;const B=p.context,z=B.gl,U=p.transform,Z=U.tileSize,X=u.paint.get("background-pattern");if(p.isPatternMissing(X))return;const ae=!X&&1===E.a&&1===I&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==ae)return;const ye=l.StencilMode.disabled,Le=p.depthModeForSublayer(0,"opaque"===ae?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly),Ae=p.colorModeForRenderPass(),De=p.useProgram(X?"backgroundPattern":"background");let Oe,Ce=g;Ce||(Oe=p.getBackgroundTiles(),Ce=Object.values(Oe).map(ze=>ze.tileID)),X&&(B.activeTexture.set(z.TEXTURE0),p.imageManager.bind(p.context));const Ve=u.getCrossfadeParameters();for(const ze of Ce){const ft=ze.toUnwrapped(),ot=g?ze.projMatrix:p.transform.calculateProjMatrix(ft);p.prepareDrawTile();const Ke=o?o.getTile(ze):Oe?Oe[ze.key]:new l.Tile(ze,Z,U.zoom,p),st=X?Dh(ot,I,p,X,{tileID:ze,tileSize:Z},Ve):fd(ot,I,E);p.prepareDrawProgram(B,De,ft);const{tileBoundsBuffer:tt,tileBoundsIndexBuffer:gt,tileBoundsSegments:kt}=p.getTileBoundsBuffers(Ke);De.draw(B,z.TRIANGLES,Le,ye,Ae,l.CullFaceMode.disabled,st,u.id,tt,gt,kt)}},sky:function(p,o,u){const g=p.transform,E="mercator"===g.projection.name||"globe"===g.projection.name?1:l.smoothstep(7,8,g.zoom),I=u.paint.get("sky-opacity")*E;if(0===I)return;const B=p.context,z=u.paint.get("sky-type"),U=new l.DepthMode(B.gl.LEQUAL,l.DepthMode.ReadOnly,[0,1]),Z=p.frameCounter/1e3%1;"atmosphere"===z?"offscreen"===p.renderPass?u.needsSkyboxCapture(p)&&(function(X,ae,ye,Le){const Ae=X.context,De=Ae.gl;let Oe=ae.skyboxFbo;if(!Oe){Oe=ae.skyboxFbo=Ae.createFramebuffer(32,32,!1),ae.skyboxGeometry=new jc(Ae),ae.skyboxTexture=Ae.gl.createTexture(),De.bindTexture(De.TEXTURE_CUBE_MAP,ae.skyboxTexture),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_WRAP_S,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_WRAP_T,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_MIN_FILTER,De.LINEAR),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_MAG_FILTER,De.LINEAR);for(let ft=0;ft<6;++ft)De.texImage2D(De.TEXTURE_CUBE_MAP_POSITIVE_X+ft,0,De.RGBA,32,32,0,De.RGBA,De.UNSIGNED_BYTE,null)}Ae.bindFramebuffer.set(Oe.framebuffer),Ae.viewport.set([0,0,32,32]);const Ce=ae.getCenter(X,!0),Ve=X.useProgram("skyboxCapture"),ze=new Float64Array(16);l.identity(ze),l.rotateY(ze,ze,.5*-Math.PI),ks(Ae,ae,Ve,ze,Ce,0),l.identity(ze),l.rotateY(ze,ze,.5*Math.PI),ks(Ae,ae,Ve,ze,Ce,1),l.identity(ze),l.rotateX(ze,ze,.5*-Math.PI),ks(Ae,ae,Ve,ze,Ce,2),l.identity(ze),l.rotateX(ze,ze,.5*Math.PI),ks(Ae,ae,Ve,ze,Ce,3),l.identity(ze),ks(Ae,ae,Ve,ze,Ce,4),l.identity(ze),l.rotateY(ze,ze,Math.PI),ks(Ae,ae,Ve,ze,Ce,5),Ae.viewport.set([0,0,X.width,X.height])}(p,u),u.markSkyboxValid(p)):"sky"===p.renderPass&&function(X,ae,ye,Le,Ae){const De=X.context,Oe=De.gl,Ce=X.transform,Ve=X.useProgram("skybox");De.activeTexture.set(Oe.TEXTURE0),Oe.bindTexture(Oe.TEXTURE_CUBE_MAP,ae.skyboxTexture);const ze={u_matrix:Ce.skyboxMatrix,u_sun_direction:ae.getCenter(X,!1),u_cubemap:0,u_opacity:Le,u_temporal_offset:Ae};X.prepareDrawProgram(De,Ve),Ve.draw(De,Oe.TRIANGLES,ye,l.StencilMode.disabled,X.colorModeForRenderPass(),l.CullFaceMode.backCW,ze,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(p,u,U,I,Z):"gradient"===z&&"sky"===p.renderPass&&function(X,ae,ye,Le,Ae){const De=X.context,Oe=De.gl,Ce=X.transform,Ve=X.useProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new jc(De)),De.activeTexture.set(Oe.TEXTURE0);let ze=ae.colorRampTexture;ze||(ze=ae.colorRampTexture=new l.Texture(De,ae.colorRamp,Oe.RGBA)),ze.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE);const ft=(ot=Ce.skyboxMatrix,Ke=ae.getCenter(X,!1),st=ae.paint.get("sky-gradient-radius"),tt=Le,gt=Ae,{u_matrix:ot,u_color_ramp:0,u_center_direction:Ke,u_radius:l.degToRad(st),u_opacity:tt,u_temporal_offset:gt});var ot,Ke,st,tt,gt;X.prepareDrawProgram(De,Ve),Ve.draw(De,Oe.TRIANGLES,ye,l.StencilMode.disabled,X.colorModeForRenderPass(),l.CullFaceMode.backCW,ft,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(p,u,U,I,Z)},debug:function(p,o,u){for(let g=0;g<u.length;g++)di(p,o,u[g])},custom:function(p,o,u){const g=p.context,E=u.implementation;if(p.transform.projection.unsupportedLayers&&p.transform.projection.unsupportedLayers.includes("custom"))l.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===p.renderPass){const I=E.prerender;I&&(p.setCustomLayerDefaults(),g.setColorMode(p.colorModeForRenderPass()),I.call(E,g.gl,p.transform.customLayerMatrix()),g.setDirty(),p.setBaseState())}else if("translucent"===p.renderPass){p.setCustomLayerDefaults(),g.setColorMode(p.colorModeForRenderPass()),g.setStencilMode(l.StencilMode.disabled);const I="3d"===E.renderingMode?new l.DepthMode(p.context.gl.LEQUAL,l.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,l.DepthMode.ReadOnly);g.setDepthMode(I),E.render(g.gl,p.transform.customLayerMatrix()),g.setDirty(),p.setBaseState(),g.bindFramebuffer.set(null)}}};class La{constructor(o,u){this.context=new Re(o),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=l.SourceCache.maxUnderzooming+l.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wa,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(o,u){const g=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new zr(this,o));const E=this._terrain;this.transform.elevation=g?E:null,E.update(o,this.transform,u)}_updateFog(o){const u=o.fog;if(!u||"globe"===this.transform.projection.name||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,E]=u.getFovAdjustedRange(this.transform._fov);if(g>E)return void(this.transform.fogCullDistSq=null);const I=g+.78*(E-g);this.transform.fogCullDistSq=I*I}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(o,u){if(this.width=o*l.exported.devicePixelRatio,this.height=u*l.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const o=this.context,u=new l.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(u,l.posAttributes.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(g,l.posAttributes.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const E=new l.StructArrayLayout2i4;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(E,l.posAttributes.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const I=new l.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(l.EXTENT,0,l.EXTENT,0),I.emplaceBack(0,l.EXTENT,0,l.EXTENT),I.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.mercatorBoundsBuffer=o.createVertexBuffer(I,l.boundsAttributes.members),this.mercatorBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const B=new l.StructArrayLayout3ui6;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(B);const z=new l.StructArrayLayout1ui2;for(const Z of[0,1,3,2,0])z.emplaceBack(Z);this.debugIndexBuffer=o.createIndexBuffer(z),this.emptyTexture=new l.Texture(o,new l.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA),this.identityMat=l.create();const U=this.context.gl;this.stencilClearMode=new l.StencilMode({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(l.window.performance.now()),this.atmosphereBuffer=new Ra(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context,u=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(o,u.TRIANGLES,l.DepthMode.disabled,this.stencilClearMode,l.ColorMode.disabled,l.CullFaceMode.disabled,Da(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,u,g){if(!u||this.currentStencilSource===u.id||!o.isTileClipped()||!g||0===g.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const U of g)if(void 0===this._tileClippingMaskIDs[U.key]){z=!0;break}if(!z)return}this.currentStencilSource=u.id;const E=this.context,I=E.gl;this.nextStencilID+g.length>256&&this.clearStencil(),E.setColorMode(l.ColorMode.disabled),E.setDepthMode(l.DepthMode.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of g){const U=u.getTile(z),Z=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:ae,tileBoundsSegments:ye}=this.getTileBoundsBuffers(U);B.draw(E,I.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:I.ALWAYS,mask:0},Z,255,I.KEEP,I.KEEP,I.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Da(z.projMatrix),"$clipping",X,ae,ye)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,u=this.context.gl;return new l.StencilMode({func:u.NOTEQUAL,mask:255},o,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const u=this.context.gl;return new l.StencilMode({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(o){const u=this.context.gl,g=o.sort((B,z)=>z.overscaledZ-B.overscaledZ),E=g[g.length-1].overscaledZ,I=g[0].overscaledZ-E+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const B={};for(let z=0;z<I;z++)B[z+E]=new l.StencilMode({func:u.GEQUAL,mask:255},z+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=I,[B,g]}return[{[E]:l.StencilMode.disabled},g]}colorModeForRenderPass(){const o=this.context.gl;if(this._showOverdrawInspector){const u=1/8;return new l.ColorMode([o.CONSTANT_COLOR,o.ONE],new l.Color(u,u,u,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?l.ColorMode.unblended:l.ColorMode.alphaBlended}depthModeForSublayer(o,u,g){if(!this.opaquePassEnabledForLayer())return l.DepthMode.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new l.DepthMode(g||this.context.gl.LEQUAL,u,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,u){this.style=o,this.options=u,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const g=this.style.order,E=this.style._sourceCaches;for(const U in E){const Z=E[U];Z.used&&Z.prepare(this.context)}const I={},B={},z={};for(const U in E){const Z=E[U];I[U]=Z.getVisibleCoordinates(),B[U]=I[U].slice().reverse(),z[U]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let U=0;U<g.length;U++)if(this.style._layers[g[U]].is3D()){this.opaquePassCutoff=U;break}if(this.terrain&&(this.terrain.updateTileBinding(z),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new l.GlobeSharedBuffers(this.context)),l.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const U of g){const Z=this.style._layers[U],X=o._getLayerSourceCache(Z);if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const ae=X?B[X.id]:void 0;("custom"===Z.type||Z.isSky()||ae&&ae.length)&&this.renderLayer(this,X,Z,ae)}if(this.depthRangeFor3D=[0,1-(o.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const U=this.style._layers[g[this.currentLayer]],Z=o._getLayerSourceCache(U);if(U.isSky())continue;const X=Z?B[Z.id]:void 0;this._renderTileClippingMasks(U,Z,X),this.renderLayer(this,Z,U,X)}if(this.style.fog&&this.transform.projection.supportsFog&&function(U,Z){const X=U.context,ae=X.gl,ye=U.transform,Le=new l.DepthMode(ae.LEQUAL,l.DepthMode.ReadOnly,[0,1]),Ae=U.useProgram("globeAtmosphere",null,"globe"===ye.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),De=l.globeToMercatorTransition(ye.zoom),Oe=Z.properties.get("color").toArray01(),Ce=Z.properties.get("high-color").toArray01(),Ve=Z.properties.get("space-color").toArray01PremultipliedAlpha(),ze=l.identity$1([]);l.rotateY$1(ze,ze,-l.degToRad(ye._center.lng)),l.rotateX$1(ze,ze,l.degToRad(ye._center.lat)),l.rotateZ$1(ze,ze,ye.angle),l.rotateX$1(ze,ze,-ye._pitch);const ft=l.fromQuat(new Float32Array(16),ze),ot=l.mapValue(Z.properties.get("star-intensity"),0,1,0,.25),st=l.mapValue(Z.properties.get("horizon-blend"),0,1,5e-4,.25),tt=l.globeUseCustomAntiAliasing(U,X,ye)&&5e-4===st?ye.worldSize/(2*Math.PI*1.025)-1:ye.globeRadius,gt=U.frameCounter/1e3%1,kt=l.length(ye.globeCenterInViewSpace),ln=Math.sqrt(Math.pow(kt,2)-Math.pow(tt,2)),At=Math.acos(ln/kt),sn={u_frustum_tl:ye.frustumCorners.TL,u_frustum_tr:ye.frustumCorners.TR,u_frustum_br:ye.frustumCorners.BR,u_frustum_bl:ye.frustumCorners.BL,u_horizon:ye.frustumCorners.horizon,u_transition:De,u_fadeout_range:st,u_color:Oe,u_high_color:Ce,u_space_color:Ve,u_star_intensity:ot,u_star_size:5*l.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gt,u_horizon_angle:At,u_rotation_matrix:ft};U.prepareDrawProgram(X,Ae);const rn=U.atmosphereBuffer;rn&&Ae.draw(X,ae.TRIANGLES,Le,l.StencilMode.disabled,l.ColorMode.alphaBlended,l.CullFaceMode.backCW,sn,"skybox",rn.vertexBuffer,rn.indexBuffer,rn.segments)}(this,this.style.fog),this.renderPass="sky",(l.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const U=this.style._layers[g[this.currentLayer]],Z=o._getLayerSourceCache(U);U.isSky()&&this.renderLayer(this,Z,U,Z?B[Z.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const U=this.style._layers[g[this.currentLayer]],Z=o._getLayerSourceCache(U);if(U.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(U)){if(U.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const X=Z?("symbol"===U.type?z:B)[Z.id]:void 0;this._renderTileClippingMasks(U,Z,Z?I[Z.id]:void 0),this.renderLayer(this,Z,U,X),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let U=null;l.values(this.style._layers).forEach(Z=>{const X=o._getLayerSourceCache(Z);X&&!Z.isHidden(this.transform.zoom)&&(!U||U.getSource().maxzoom<X.getSource().maxzoom)&&(U=X)}),U&&this.options.showTileBoundaries&&ia.debug(this,U,U.getVisibleCoordinates())}this.options.showPadding&&function(U){const Z=U.transform.padding;mc(U,U.transform.height-(Z.top||0),3,Zu),mc(U,Z.bottom||0,3,pc),qu(U,Z.left||0,3,Uo),qu(U,U.transform.width-(Z.right||0),3,Oa);const X=U.transform.centerPoint;var ae,ye,Le,Ae;zc(ae=U,(ye=X.x)-1,(Le=U.transform.height-X.y)-10,2,20,Ae=yo),zc(ae,ye-10,Le-1,20,2,Ae)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(l.window.performance.now()),this.saveCanvasCopy())}}renderLayer(o,u,g,E){g.isHidden(this.transform.zoom)||("background"===g.type||"sky"===g.type||"custom"===g.type||E&&E.length)&&(this.id=g.id,this.gpuTimingStart(g),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(g.type)||ia[g.type](o,u,g,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let g=this.gpuTimers[o.id];g||(g=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),g.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,u=o.createQueryEXT();this.deferredRenderGpuTimeQueries.push(u),o.beginQueryEXT(o.TIME_ELAPSED_EXT,u)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const u={};for(const g in o){const E=o[g],I=this.context.extTimerQuery,B=I.getQueryObjectEXT(E.query,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(E.query),u[g]=B}return u}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery;let g=0;for(const E of o)g+=u.getQueryObjectEXT(E,u.QUERY_RESULT_EXT)/1e6,u.deleteQueryEXT(E);return g}translatePosMatrix(o,u,g,E,I){if(!g[0]&&!g[1])return o;const B=I?"map"===E?this.transform.angle:0:"viewport"===E?-this.transform.angle:0;if(B){const Z=Math.sin(B),X=Math.cos(B);g=[g[0]*X-g[1]*Z,g[0]*Z+g[1]*X]}const z=[I?g[0]:Fr(u,g[0],this.transform.zoom),I?g[1]:Fr(u,g[1],this.transform.zoom),0],U=new Float32Array(16);return l.translate(U,o,z),U}saveTileTexture(o){const u=this._tileTextures[o.size[0]];u?u.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const u=this._tileTextures[o];return u&&u.length>0?u.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const u=this.imageManager.getPattern(o.from.toString()),g=this.imageManager.getPattern(o.to.toString());return!u||!g}currentGlobalDefines(){const o=this.terrain&&this.terrain.renderingToTexture,u=this.style&&this.style.fog,g=[];return this.terrain&&!this.terrain.renderingToTexture&&g.push("TERRAIN"),u&&!o&&0!==u.getOpacity(this.transform.pitch)&&g.push("FOG"),o&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}useProgram(o,u,g){this.cache=this.cache||{};const E=g||[],I=this.currentGlobalDefines().concat(E),B=Fc.cacheKey(mt[o],o,I,u);return this.cache[B]||(this.cache[B]=new Fc(this.context,o,mt[o],u,$u[o],I)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(o,u,g){if(this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const I=E.getOpacity(this.transform.pitch),B=((z,U,Z,X,ae,ye,Le,Ae,De,Oe,Ce)=>{const Ve=z.transform,ze=U.properties.get("color").toArray01();ze[3]=X;const ft=z.frameCounter/1e3%1;return{u_fog_matrix:Z?Ve.calculateFogTileMatrix(Z):z.identityMat,u_fog_range:U.getFovAdjustedRange(Ve._fov),u_fog_color:ze,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_temporal_offset:ft,u_frustum_tl:ae,u_frustum_tr:ye,u_frustum_br:Le,u_frustum_bl:Ae,u_globe_pos:De,u_globe_radius:Oe,u_viewport:Ce,u_globe_transition:l.globeToMercatorTransition(Ve.zoom),u_is_globe:+("globe"===Ve.projection.name)}})(this,E,g,I,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.exported.devicePixelRatio,this.transform.height*l.exported.devicePixelRatio]);u.setFogUniformValues(o,B)}}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const o=this.context.gl,u=o.createTexture();return o.bindTexture(o.TEXTURE_2D,u),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&0!==o.getOpacity(this.transform.pitch)}getBackgroundTiles(){const o=this._backgroundTiles,u=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const E of g)u[E.key]=o[E.key]||new l.Tile(E,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}}class Cl{constructor(o=0,u=0,g=0,E=0){if(isNaN(o)||o<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=u,this.left=g,this.right=E}interpolate(o,u,g){return null!=u.top&&null!=o.top&&(this.top=l.number(o.top,u.top,g)),null!=u.bottom&&null!=o.bottom&&(this.bottom=l.number(o.bottom,u.bottom,g)),null!=u.left&&null!=o.left&&(this.left=l.number(o.left,u.left,g)),null!=u.right&&null!=o.right&&(this.right=l.number(o.right,u.right,g)),this}getCenter(o,u){const g=l.clamp((this.left+o-this.right)/2,0,o),E=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.pointGeometry(g,E)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Cl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Eu(p,o){const u=l.getColumn(p,3);l.fromQuat(p,o),l.setColumn(p,3,u)}function Xl(p,o){const u=l.identity$1([]);return l.rotateZ$1(u,u,-o),l.rotateX$1(u,u,-p),u}function oa(p,o){const u=[p[0],p[1],0],g=[o[0],o[1],0];if(l.length(u)>=1e-15){const B=l.normalize([],u);l.scale$2(g,B,l.dot(g,B)),o[0]=g[0],o[1]=g[1]}const E=l.cross([],o,p);if(l.len(E)<1e-15)return null;const I=Math.atan2(-E[1],E[0]);return Xl(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),I)}class Un{constructor(o,u){this.position=o,this.orientation=u}get position(){return this._position}set position(o){if(o){const u=o instanceof l.MercatorCoordinate?o:new l.MercatorCoordinate(o[0],o[1],o[2]);this._renderWorldCopies&&(u.x=l.wrap(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(o,u){if(this.orientation=null,!this.position)return;const g=this._elevation?this._elevation.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(o)):0,E=this.position,I=l.MercatorCoordinate.fromLngLat(o,g),B=[I.x-E.x,I.y-E.y,I.z-E.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=oa(B,u)}setPitchBearing(o,u){this.orientation=Xl(l.degToRad(o),l.degToRad(-u))}}class Rs{constructor(o,u){this._transform=l.identity([]),this.orientation=u,this.position=o}get mercatorPosition(){const o=this.position;return new l.MercatorCoordinate(o[0],o[1],o[2])}get position(){const o=l.getColumn(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var u;o&&l.setColumn(this._transform,3,[(u=o)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||l.identity$1([]),o&&Eu(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,u){this._orientation=Xl(o,u),Eu(this._transform,this._orientation)}forward(){const o=l.getColumn(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=l.getColumn(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=l.getColumn(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,u){const g=new Float64Array(16);return l.invert(g,this.getWorldToCamera(o,u)),g}getWorldToCameraPosition(o,u,g){const E=this.position;l.scale$2(E,E,-o);const I=new Float64Array(16);return l.fromScaling(I,[g,g,g]),l.translate(I,I,E),I[10]*=u,I}getWorldToCamera(o,u){const g=new Float64Array(16),E=new Float64Array(4),I=this.position;return l.conjugate(E,this._orientation),l.scale$2(I,I,-o),l.fromQuat(g,E),l.translate(g,g,I),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=u,g[9]*=u,g[10]*=u,g[11]*=u,g}getCameraToClipPerspective(o,u,g,E){const I=new Float64Array(16);return l.perspective(I,o,u,g,E),I}getDistanceToElevation(o){const u=0===o?0:l.mercatorZfromAltitude(o,this.position[1]),g=this.forward();return(u-this.position[2])/g[2]}clone(){return new Rs([...this.position],[...this.orientation])}}function gs(p,o){const u=Ws(p.projection,p.zoom,p.width,p.height),g=function(I,B,z,U,Z){const X=new l.LngLat(z.lng-180*Oo,z.lat),ae=new l.LngLat(z.lng+180*Oo,z.lat),ye=I.project(X.lng,X.lat),Le=I.project(ae.lng,ae.lat),Ae=-Math.atan2(Le.y-ye.y,Le.x-ye.x),De=l.MercatorCoordinate.fromLngLat(z);De.y=l.clamp(De.y,-.999975,.999975);const Oe=De.toLngLat(),Ce=I.project(Oe.lng,Oe.lat),Ve=l.MercatorCoordinate.fromLngLat(Oe);Ve.x+=Oo;const ze=Ve.toLngLat(),ft=I.project(ze.lng,ze.lat),ot=sa(ft.x-Ce.x,ft.y-Ce.y,Ae),Ke=l.MercatorCoordinate.fromLngLat(Oe);Ke.y+=Oo;const st=Ke.toLngLat(),tt=I.project(st.lng,st.lat),gt=sa(tt.x-Ce.x,tt.y-Ce.y,Ae),kt=Math.abs(ot.x)/Math.abs(gt.y),ln=l.identity([]);l.rotateZ(ln,ln,-Ae*(1-(Z?0:U)));const At=l.identity([]);return l.scale(At,At,[1,1-(1-kt)*U,1]),At[4]=-gt.x/gt.y*U,l.rotateZ(At,At,Ae),l.multiply(At,ln,At),At}(p.projection,0,p.center,u,o),E=Kl(p);return l.scale(g,g,[E,E,1]),g}function Kl(p){const o=p.projection,u=Ws(p.projection,p.zoom,p.width,p.height),g=_s(o,p.center),E=_s(o,l.LngLat.convert(o.center));return Math.pow(2,g*u+(1-u)*E)}function Ws(p,o,u,g,E=1/0){const I=p.range;if(!I)return 0;const B=Math.min(E,Math.max(u,g)),z=Math.log(B/1024)/Math.LN2;return l.smoothstep(I[0]+z,I[1]+z,o)}const Oo=1/4e4;function _s(p,o){const u=l.clamp(o.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=new l.LngLat(o.lng-180*Oo,u),E=new l.LngLat(o.lng+180*Oo,u),I=p.project(g.lng,u),B=p.project(E.lng,u),z=l.MercatorCoordinate.fromLngLat(g),U=l.MercatorCoordinate.fromLngLat(E),Z=B.x-I.x,X=B.y-I.y,ae=U.x-z.x,ye=U.y-z.y,Le=Math.sqrt((ae*ae+ye*ye)/(Z*Z+X*X));return Math.log(Le)/Math.LN2}function sa(p,o,u){const g=Math.cos(u),E=Math.sin(u);return{x:p*g-o*E,y:p*E+o*g}}class Tl{constructor(o,u,g,E,I,B,z){this.tileSize=512,this._renderWorldCopies=void 0===I||I,this._minZoom=o||0,this._maxZoom=u||22,this._minPitch=null==g?0:g,this._maxPitch=null==E?60:E,this.setProjection(B),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Cl,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Rs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const o=new Tl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(o){const u=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||u)&&this._updateCameraOnTerrain(),(o||u)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return l.pick(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=l.getProjection(this.projectionOptions);const g=!J(u,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.getProjection({name:"mercator"});const u=o!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(o){void 0===o?o=!0:null===o&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return l.wrap(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const u=-o*Math.PI/180;var g,E,I,B,z,U,Z,X,ae,ye;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(g=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),E=this.rotationMatrix,B=this.angle,z=(I=this.rotationMatrix)[0],U=I[1],Z=I[2],X=I[3],ae=Math.sin(B),ye=Math.cos(B),E[0]=z*ye+Z*ae,E[1]=U*ye+X*ae,E[2]=z*-ae+Z*ye,E[3]=U*-ae+X*ye)}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const u=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const u=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const o=this._elevation;this._centerAltitude=o.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=o.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let E=0,I=0;for(let B=0;B<u.length;B++){const z=new l.pointGeometry(u[B][0]*this.width,g+u[B][1]*(this.height-g)),U=o.pointCoordinate(z);if(!U)continue;const Z=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);E+=U[3]*Z,I+=Z}return 0===I?NaN:E/I}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const o=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*u,E=this._mercatorZfromZoom(o),I=this._mercatorZfromZoom(this._maxZoom),B=Math.max(E-g,I);this._setZoom(this._zoomFromMercatorZ(B))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let g;g=o.z<this._camera.position[2]?[u.x,u.y,u.z]:[o.x,o.y,o.z];const E=l.length(l.sub([],this._camera.position,g));return l.clamp(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let u=!1;if(o.orientation&&!l.exactEquals(o.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(o.orientation)),o.position){const g=[o.position.x,o.position.y,o.position.z];l.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,u=new Un;return u.position=new l.MercatorCoordinate(o[0],o[1],o[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(o){if(!l.length$1(o))return!1;l.normalize$1(o,o);const u=l.transformQuat([],[0,0,-1],o),g=l.transformQuat([],[0,-1,0],o);if(g[2]<0)return!1;const E=oa(u,g);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(o){const u=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;o[2]=l.clamp(o[2],E/g,E/u),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,u,g){this._unmodified=!1,this._edgeInsets.interpolate(o,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const u=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(o){const u=[new l.UnwrappedTileID(0,o)];if(this.renderWorldCopies){const g=this.pointCoordinate(new l.pointGeometry(0,0)),E=this.pointCoordinate(new l.pointGeometry(this.width,0)),I=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),B=this.pointCoordinate(new l.pointGeometry(0,this.height)),z=Math.floor(Math.min(g.x,E.x,I.x,B.x)),U=Math.floor(Math.max(g.x,E.x,I.x,B.x)),Z=1;for(let X=z-Z;X<=U+Z;X++)0!==X&&u.push(new l.UnwrappedTileID(X,o))}return u}coveringTiles(o){let u=this.coveringZoomLevel(o);const g=u,E=this.elevation&&!o.isTerrainDEM,I="mercator"===this.projection.name;if(void 0!==o.minzoom&&u<o.minzoom)return[];void 0!==o.maxzoom&&u>o.maxzoom&&(u=o.maxzoom);const B=this.locationCoordinate(this.center),z=this.center.lat,U=1<<u,Z=[U*B.x,U*B.y,0],X="globe"===this.projection.name,ae=!X,ye=l.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,ae),Le=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Ae=U*l.mercatorZfromAltitude(1,this.center.lat),De=this._camera.position[2]/l.mercatorZfromAltitude(1,this.center.lat),Oe=[U*Le.x,U*Le.y,De*(ae?1:Ae)],Ce=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),Ve=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?u:0,ze=o.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ft=o.isTerrainDEM?-ze:this._elevation?this._elevation.getMinElevationBelowMSL():0,ot=this.projection.isReprojectedInTileSpace?Kl(this):1,Ke=qt=>{const _n=1/4e4,hn=new l.MercatorCoordinate(qt.x+_n,qt.y,qt.z),Vn=new l.MercatorCoordinate(qt.x,qt.y+_n,qt.z),Rn=qt.toLngLat(),Qn=hn.toLngLat(),ar=Vn.toLngLat(),dr=this.locationCoordinate(Rn),qr=this.locationCoordinate(Qn),rr=this.locationCoordinate(ar),Ir=Math.hypot(qr.x-dr.x,qr.y-dr.y),Xr=Math.hypot(rr.x-dr.x,rr.y-dr.y);return Math.sqrt(Ir*Xr)*ot/_n},st=qt=>{const _n=ze,hn=ft;return{aabb:l.tileAABB(this,U,0,0,0,qt,hn,_n,this.projection),zoom:0,x:0,y:0,minZ:hn,maxZ:_n,wrap:qt,fullyVisible:!1}},tt=[];let gt=[];const kt=u,ln=o.reparseOverscaled?g:u,At=qt=>qt*qt,sn=At((De-this._centerAltitude)*Ae),rn=qt=>{if(!this._elevation||!qt.tileID||!I)return;const _n=this._elevation.getMinMaxForTile(qt.tileID),hn=qt.aabb;_n?(hn.min[2]=_n.min,hn.max[2]=_n.max,hn.center[2]=(hn.min[2]+hn.max[2])/2):(qt.shouldSplit=kn(qt),qt.shouldSplit||(hn.min[2]=hn.max[2]=hn.center[2]=this._centerAltitude))},kn=qt=>{if(qt.zoom<Ve)return!0;if(qt.zoom===kt)return!1;if(null!=qt.shouldSplit)return qt.shouldSplit;const _n=qt.aabb.distanceX(Oe),hn=qt.aabb.distanceY(Oe);let Vn=sn,Rn=1;if(X){Vn=At(qt.aabb.distanceZ(Oe));const ar=Math.pow(2,qt.zoom),dr=l.latFromMercatorY((qt.y+1)/ar),qr=l.latFromMercatorY(qt.y/ar),rr=Math.min(Math.max(z,dr),qr),Ir=l.circumferenceAtLatitude(rr)/l.circumferenceAtLatitude(z);if(Rn=rr===z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ir/this._mercatorScaleRatio),this.zoom<=l.GLOBE_ZOOM_THRESHOLD_MIN&&qt.zoom===kt-1&&Ir>=.9)return!0}else if(E&&(Vn=At(qt.aabb.distanceZ(Oe)*Ae)),this.projection.isReprojectedInTileSpace&&g<=5){const ar=Math.pow(2,qt.zoom),dr=Ke(new l.MercatorCoordinate((qt.x+.5)/ar,(qt.y+.5)/ar));Rn=dr>.85?1:dr}const Qn=_n*_n+hn*hn+Vn;return Qn<At((1<<kt-qt.zoom)*Ce*Rn*((ar,dr)=>{if(dr*At(.707)<ar)return 1;const qr=Math.sqrt(dr/ar);return qr/(1.4144271570014144+(Math.pow(1.1,qr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Vn,sn),Qn))};if(this.renderWorldCopies)for(let qt=1;qt<=3;qt++)tt.push(st(-qt)),tt.push(st(qt));for(tt.push(st(0));tt.length>0;){const qt=tt.pop(),_n=qt.x,hn=qt.y;let Vn=qt.fullyVisible;if(!Vn){const Rn=qt.aabb.intersects(ye);if(0===Rn)continue;Vn=2===Rn}if(qt.zoom!==kt&&kn(qt))for(let Rn=0;Rn<4;Rn++){const Qn=(_n<<1)+Rn%2,ar=(hn<<1)+(Rn>>1),dr={aabb:I?qt.aabb.quadrant(Rn):l.tileAABB(this,U,qt.zoom+1,Qn,ar,qt.wrap,qt.minZ,qt.maxZ,this.projection),zoom:qt.zoom+1,x:Qn,y:ar,wrap:qt.wrap,fullyVisible:Vn,tileID:void 0,shouldSplit:void 0,minZ:qt.minZ,maxZ:qt.maxZ};E&&!X&&(dr.tileID=new l.OverscaledTileID(qt.zoom+1===kt?ln:qt.zoom+1,qt.wrap,qt.zoom+1,Qn,ar),rn(dr)),tt.push(dr)}else{const Rn=qt.zoom===kt?ln:qt.zoom;if(o.minzoom&&o.minzoom>Rn)continue;const Qn=Z[0]-(.5+_n+(qt.wrap<<qt.zoom))*(1<<u-qt.zoom),ar=Z[1]-.5-hn,dr=qt.tileID?qt.tileID:new l.OverscaledTileID(Rn,qt.wrap,qt.zoom,_n,hn);gt.push({tileID:dr,distanceSq:Qn*Qn+ar*ar})}}if(this.fogCullDistSq){const qt=this.fogCullDistSq,_n=this.horizonLineFromTop();gt=gt.filter(hn=>{const Vn=[0,0,0,1],Rn=[l.EXTENT,l.EXTENT,0,1],Qn=this.calculateFogTileMatrix(hn.tileID.toUnwrapped());l.transformMat4$1(Vn,Vn,Qn),l.transformMat4$1(Rn,Rn,Qn);const ar=l.getAABBPointSquareDist(Vn,Rn);if(0===ar)return!0;let dr=!1;const qr=this._elevation;if(qr&&ar>qt&&0!==_n){const rr=this.calculateProjMatrix(hn.tileID.toUnwrapped());let Ir;o.isTerrainDEM||(Ir=qr.getMinMaxForTile(hn.tileID)),Ir||(Ir={min:ft,max:ze});const Xr=l.furthestTileCorner(this.rotation),Yi=[Xr[0]*l.EXTENT,Xr[1]*l.EXTENT,Ir.max];l.transformMat4(Yi,Yi,rr),dr=(1-Yi[1])*this.height*.5<_n}return ar<qt||dr})}return gt.sort((qt,_n)=>qt.distanceSq-_n.distanceSq).map(qt=>qt.tileID)}resize(o,u){this.width=o,this.height=u,this.pixelsToGLUnits=[2/o,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const u=l.clamp(o.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=this.projection.project(o.lng,u);return new l.pointGeometry(g.x*this.worldSize,g.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(o,u){let g,E;const I=this.centerPoint;if("globe"===this.projection.name){const z=this.worldSize;g=(u.x-I.x)/z,E=(u.y-I.y)/z}else{const z=this.pointCoordinate(u),U=this.pointCoordinate(I);g=z.x-U.x,E=z.y-U.y}const B=this.locationCoordinate(o);this.setLocation(new l.MercatorCoordinate(B.x-g,B.y-E))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,u){const g=u?l.mercatorZfromAltitude(u,o.lat):void 0,E=this.projection.project(o.lng,o.lat);return new l.MercatorCoordinate(E.x,E.y,g)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,u){const g=null!=u?u:this._centerAltitude,E=[o.x,o.y,0,1],I=[o.x,o.y,1,1];l.transformMat4$1(E,E,this.pixelMatrixInverse),l.transformMat4$1(I,I,this.pixelMatrixInverse);const B=I[3];l.scale$1(E,E,1/E[3]),l.scale$1(I,I,1/B);const z=E[2],U=I[2];return{p0:E,p1:I,t:z===U?0:(g-z)/(U-z)}}screenPointToMercatorRay(o){const u=[o.x,o.y,0,1],g=[o.x,o.y,1,1];return l.transformMat4$1(u,u,this.pixelMatrixInverse),l.transformMat4$1(g,g,this.pixelMatrixInverse),l.scale$1(u,u,1/u[3]),l.scale$1(g,g,1/g[3]),u[2]=l.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,g[2]=l.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,l.scale$1(u,u,1/this.worldSize),l.scale$1(g,g,1/this.worldSize),new l.Ray([u[0],u[1],u[2]],l.normalize([],l.sub([],g,u)))}rayIntersectionCoordinate(o){const{p0:u,p1:g,t:E}=o,I=l.mercatorZfromAltitude(u[2],this._center.lat),B=l.mercatorZfromAltitude(g[2],this._center.lat);return new l.MercatorCoordinate(l.number(u[0],g[0],E)/this.worldSize,l.number(u[1],g[1],E)/this.worldSize,l.number(I,B,E))}pointCoordinate(o,u=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,u)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let u=this.projection.pointCoordinate3D(this,o.x,o.y);if(u)return new l.MercatorCoordinate(u[0],u[1],u[2]);let g=0,E=this.horizonLineFromTop();if(o.y>E)return this.pointCoordinate(o);const I=.02*E,B=o.clone();for(let z=0;z<10&&E-g>I;z++){B.y=l.number(g,E,.66);const U=this.projection.pointCoordinate3D(this,B.x,B.y);U?(E=B.y,u=U):g=B.y}return u?new l.MercatorCoordinate(u[0],u[1],u[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}_coordinatePoint(o,u){const g=u&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,E=[o.x*this.worldSize,o.y*this.worldSize,g+o.toAltitude(),1];return l.transformMat4$1(E,E,this.pixelMatrix),E[3]>0?new l.pointGeometry(E[0]/E[3],E[1]/E[3]):new l.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(o,u){const g=new l.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),E=new l.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),I=new l.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),B=new l.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let z=this.pointCoordinate(g,o),U=this.pointCoordinate(E,o);const Z=this.pointCoordinate(I,u),X=this.pointCoordinate(B,u),ae=(ye,Le)=>(Le.y-ye.y)/(Le.x-ye.x);return z.y>1&&U.y>=0?z=new l.MercatorCoordinate((1-X.y)/ae(X,z)+X.x,1):z.y<0&&U.y<=1&&(z=new l.MercatorCoordinate(-X.y/ae(X,z)+X.x,0)),U.y>1&&z.y>=0?U=new l.MercatorCoordinate((1-Z.y)/ae(Z,U)+Z.x,1):U.y<0&&z.y<=1&&(U=new l.MercatorCoordinate(-Z.y/ae(Z,U)+Z.x,0)),(new l.LngLatBounds).extend(this.coordinateLocation(z)).extend(this.coordinateLocation(U)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(Z))}_getBounds3D(){const o=this.elevation;if(!o.visibleDemTiles.length)return this._getBounds(0,0);const u=o.visibleDemTiles.reduce((g,E)=>{if(E.dem){const I=E.dem.tree;g.min=Math.min(g.min,I.minimums[0]),g.max=Math.max(g.max,I.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBounds(u.min*o.exaggeration(),u.max*o.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(o=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-u*(1-this._horizonShift);return o?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-l.MAX_MERCATOR_LATITUDE,this.maxLat=l.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=l.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=l.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=l.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,u){return this.projection.createTileMatrix(this,u,o)}calculateDistanceTileData(o){const u=o.key,g=this._distanceTileDataCache;if(g[u])return g[u];const E=o.canonical,I=1/this.height,B=this.cameraWorldSize/this.zoomScale(E.z),z=(E.x+Math.pow(2,E.z)*o.wrap)*B,U=E.y*B,Z=this.point,X=this.angle,ae=Math.sin(-X),ye=-Math.cos(-X);return g[u]={bearing:[ae,ye],center:[(Z.x-z)*I,(Z.y-U)*I],scale:B/l.EXTENT*I},g[u]}calculateFogTileMatrix(o){const u=o.key,g=this._fogTileMatrixCache;if(g[u])return g[u];const E=this.projection.createTileMatrix(this,this.cameraWorldSize,o);return l.multiply(E,this.worldToFogMatrix,E),g[u]=new Float32Array(E),g[u]}calculateProjMatrix(o,u=!1){const g=o.key,E=u?this._alignedProjMatrixCache:this._projMatrixCache;if(E[g])return E[g];const I=this.calculatePosMatrix(o,this.worldSize);return l.multiply(I,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:u?this.alignedProjMatrix:this.projMatrix,I),E[g]=new Float32Array(I),E[g]}calculatePixelsToTileUnitsMatrix(o){const u=o.tileID.key,g=this._pixelsToTileUnitsCache;if(g[u])return g[u];const E=function(I,B){const{scale:z}=I.tileTransform,U=z*l.EXTENT/(I.tileSize*Math.pow(2,B.zoom-I.tileID.overscaledZ+I.tileID.canonical.z));return Z=new Float32Array(4),ye=(X=B.inverseAdjustmentMatrix)[1],Le=X[2],Ae=X[3],Oe=(ae=[U,U])[1],Z[0]=X[0]*(De=ae[0]),Z[1]=ye*De,Z[2]=Le*Oe,Z[3]=Ae*Oe,Z;var Z,X,ae,ye,Le,Ae,De,Oe}(o,this);return g[u]=E,g[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const o=this._elevation;this._updateCameraState();const u=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),E=this._camera.forward(),I=l.mercatorZfromAltitude(1,this._center.lat);g[2]/=I,E[2]/=I,l.normalize(E,E);const B=o.raycast(g,E,o.exaggeration());if(B){const z=l.scaleAndAdd([],g,E,B),U=new l.MercatorCoordinate(z[0],z[1],l.mercatorZfromAltitude(z[2],l.latFromMercatorY(z[1]))),Z=(U.z+l.length([U.x-g[0],U.y-g[1],U.z-g[2]*I]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Z),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const o=this._elevation;this._updateCameraState();const u=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),E=o.getAtPointOrZero(new l.MercatorCoordinate(...g)),I=this._minimumHeightOverTerrain()*Math.cos(l.degToRad(this._maxPitch)),B=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*E;if(B<I){const z=this.locationCoordinate(this._center,this._centerAltitude),U=[z.x-g[0],z.y-g[1],z.z-g[2]],Z=l.length(U);U[2]-=(I-B)/this._pixelsPerMercatorPixel;const X=l.length(U);if(0===X)return;l.scale$2(U,U,Z/X*this._pixelsPerMercatorPixel),this._camera.position=[z.x-U[0],z.y-U[1],z.z*this._pixelsPerMercatorPixel-U[2]],this._camera.orientation=oa(U,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const ye=this.center;return ye.lat=l.clamp(ye.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(ye.lng=l.clamp(ye.lng,this.minLng,this.maxLng)),this.center=ye,void(this._constraining=!1)}const u=this._unmodified,{x:g,y:E}=this.point;let I=0,B=g,z=E;const U=this.width/2,Z=this.height/2,X=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(E-Z<X&&(z=X+Z),E+Z>ae&&(z=ae-Z),ae-X<this.height&&(I=Math.max(I,this.height/(ae-X)),z=(ae+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ye=this.worldMinX*this.scale,Le=this.worldMaxX*this.scale,Ae=this.worldSize/2-(ye+Le)/2;B=(g+Ae+this.worldSize)%this.worldSize-Ae,B-U<ye&&(B=ye+U),B+U>Le&&(B=Le-U),Le-ye<this.width&&(I=Math.max(I,this.width/(Le-ye)),B=(Le+ye)/2)}B===g&&z===E||(this.center=this.unproject(new l.pointGeometry(B,z))),I&&(this.zoom+=this.scaleZoom(I)),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,u=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=l.mercatorZfromAltitude(1,this.center.lat)/l.mercatorZfromAltitude(1,l.GLOBE_SCALE_MATCH_LATITUDE));const g=Ws(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?u:1),I=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);I[8]=2*-o.x/this.width,I[9]=2*o.y/this.height;let B=l.mul([],I,E);if(this.projection.isReprojectedInTileSpace){const ot=this.locationCoordinate(this.center),Ke=l.identity([]);l.translate(Ke,Ke,[ot.x*this.worldSize,ot.y*this.worldSize,0]),l.multiply(Ke,Ke,gs(this)),l.translate(Ke,Ke,[-ot.x*this.worldSize,-ot.y*this.worldSize,0]),l.multiply(B,B,Ke),this.inverseAdjustmentMatrix=function(st){const tt=gs(st,!0);return $t([],[tt[0],tt[1],tt[4],tt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=l.scale([],B,[this.worldSize,this.worldSize,this.worldSize/u,1]),this.projMatrix=B,this.invProjMatrix=l.invert(new Float64Array(16),this.projMatrix);const z=l.invert([],I);this.frustumCorners=l.FrustumCorners.fromInvProjectionMatrix(z,this.horizonLineFromTop(),this.height);const U=new Float32Array(16);l.identity(U),l.scale(U,U,[1,-1,1]),l.rotateX(U,U,this._pitch),l.rotateZ(U,U,this.angle);const Z=l.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),X=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Z[8]=2*-o.x/this.width,Z[9]=2*(o.y+X)/this.height,this.skyboxMatrix=l.multiply(U,Z,U);const ae=this.point,ye=ae.x,Le=ae.y,Ae=this.width%2/2,De=this.height%2/2,Oe=Math.cos(this.angle),Ce=Math.sin(this.angle),Ve=ye-Math.round(ye)+Oe*Ae+Ce*De,ze=Le-Math.round(Le)+Oe*De+Ce*Ae,ft=new Float64Array(B);if(l.translate(ft,ft,[Ve>.5?Ve-1:Ve,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=ft,B=l.create(),l.scale(B,B,[this.width/2,-this.height/2,1]),l.translate(B,B,[1,-1,0]),this.labelPlaneMatrix=B,B=l.create(),l.scale(B,B,[1,-1,1]),l.translate(B,B,[-1,-1,0]),l.scale(B,B,[2/this.width,2/this.height,1]),this.glCoordMatrix=B,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},B=l.invert(new Float64Array(16),this.pixelMatrix),!B)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=B,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=l.calculateGlobeMatrix(this);const ot=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l.transformMat4(ot,ot,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=B;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSize,u=this.cameraPixelsPerMeter,g=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,I=[o,o,u];l.scale$2(I,I,E),l.scale$2(g,g,-1),l.multiply$2(g,g,I);const B=l.create();l.translate(B,B,g),l.scale(B,B,I),this.mercatorFogMatrix=B,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,u,E)}_computeCameraPosition(o){const u=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),E=this.point,I=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-o/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-g[0]*I,E.y/this.worldSize-g[1]*I,o/this.worldSize*this._centerAltitude-g[2]*I]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=o[2];let E=1;g>0&&(E=Math.min((u-this._camera.position[2])/g,1)),this._camera.position=l.scaleAndAdd([],this._camera.position,o,E),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const o=this._camera.position,u=this._camera.forward(),{pitch:g,bearing:E}=this._camera.getPitchBearing(),I=l.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,B=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.degToRad(this._maxPitch)),z=Math.max((o[2]-I)/Math.cos(g),B),U=this._zoomFromMercatorZ(z);l.scaleAndAdd(o,o,u,z),this._pitch=l.clamp(g,l.degToRad(this.minPitch),l.degToRad(this.maxPitch)),this.angle=l.wrap(E,-Math.PI,Math.PI),this._setZoom(l.clamp(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.MercatorCoordinate(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,u){const g=Math.min(o.x,u.x),E=Math.max(o.x,u.x),I=Math.min(o.y,u.y),B=Math.max(o.y,u.y);if(I<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const z=[new l.pointGeometry(g,I),new l.pointGeometry(E,B),new l.pointGeometry(g,B),new l.pointGeometry(E,I)],U=this.renderWorldCopies?-3:0,Z=this.renderWorldCopies?4:1;for(const X of z){const ae=this.pointRayIntersection(X);if(ae.t<0)return!0;const ye=this.rayIntersectionCoordinate(ae);if(ye.x<U||ye.y<0||ye.x>Z||ye.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.pointGeometry(0,0),new l.pointGeometry(this.width,this.height))}zoomDeltaToMovement(o,u){const g=l.length(l.sub([],this._camera.position,o)),E=this._zoomFromMercatorZ(g)+u;return g-this._mercatorZfromZoom(E)}getCameraPoint(){if("globe"===this.projection.name){const o=function(u,g){const E=[u[0],u[1],u[2],1];l.transformMat4$1(E,E,g);const I=Math.max(E[3],1e-6);return[E[0]/I,E[1]/I,E[2]/I,I]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.pointGeometry(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,o))}}getCameraToCenterDistance(o){const u=Ws(o,this.zoom,this.width,this.height,1024),g=o.pixelSpaceConversion(this.center.lat,this.worldSize,u);return.5/Math.tan(.5*this._fov)*this.height*g}}function yc(p,o){let u=!1,g=null;const E=()=>{g=null,u&&(p(),g=setTimeout(E,o),u=!1)};return()=>(u=!0,g||E(),g)}class Cu{constructor(o){this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=yc(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,l.window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),l.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const u=Yl(o);if(this._hashName){const g=this._hashName;let E=!1;const I=l.window.location.hash.slice(1).split("&").map(B=>{const z=B.split("=")[0];return z===g?(E=!0,`${z}=${u}`):B}).filter(B=>B);return E||I.push(`${g}=${u}`),`#${I.join("&")}`}return`#${u}`}_getCurrentHash(){const o=l.window.location.hash.replace("#","");if(this._hashName){let u;return o.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(g=>isNaN(g))){const g=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(u[3]||0):o.getBearing();return o.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=l.window.location.href.replace(/(#.+)?$/,this.getHashString());l.window.history.replaceState(l.window.history.state,null,o)}}function Yl(p,o){const u=p.getCenter(),g=Math.round(100*p.getZoom())/100,E=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,E),B=Math.round(u.lng*I)/I,z=Math.round(u.lat*I)/I,U=p.getBearing(),Z=p.getPitch();let X=o?`/${B}/${z}/${g}`:`${g}/${z}/${B}`;return(U||Z)&&(X+="/"+Math.round(10*U)/10),Z&&(X+=`/${Math.round(Z)}`),X}const il={linearity:.3,easing:l.bezier(0,0,.3,1)},Vc=l.extend({deceleration:2500,maxSpeed:1400},il),Xu=l.extend({deceleration:20,maxSpeed:1400},il),Uc=l.extend({deceleration:1e3,maxSpeed:360},il),Tu=l.extend({deceleration:1e3,maxSpeed:90},il);class Ih{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,u=l.exported.now();for(;o.length>0&&u-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)u.zoom+=I.zoomDelta||0,u.bearing+=I.bearingDelta||0,u.pitch+=I.pitchDelta||0,I.panDelta&&u.pan._add(I.panDelta),I.around&&(u.around=I.around),I.pinchAround&&(u.pinchAround=I.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(u.pan.mag()){const I=Fa(u.pan.mag(),g,l.extend({},Vc,o||{}));E.offset=u.pan.mult(I.amount/u.pan.mag()),E.center=this._map.transform.center,aa(E,I)}if(u.zoom){const I=Fa(u.zoom,g,Xu);E.zoom=this._map.transform.zoom+I.amount,aa(E,I)}if(u.bearing){const I=Fa(u.bearing,g,Uc);E.bearing=this._map.transform.bearing+l.clamp(I.amount,-179,179),aa(E,I)}if(u.pitch){const I=Fa(u.pitch,g,Tu);E.pitch=this._map.transform.pitch+I.amount,aa(E,I)}if(E.zoom||E.bearing){const I=void 0===u.pinchAround?u.around:u.pinchAround;E.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function aa(p,o){(!p.duration||p.duration<o.duration)&&(p.duration=o.duration,p.easing=o.easing)}function Fa(p,o,u){const{maxSpeed:g,linearity:E,deceleration:I}=u,B=l.clamp(p*E/(o/1e3),-g,g),z=Math.abs(B)/(I*E);return{easing:u.easing,duration:1e3*z,amount:B*(z/2)}}class ko extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,g,E={}){const I=Je(u.getCanvasContainer(),g),B=u.unproject(I);super(o,l.extend({point:I,lngLat:B,originalEvent:g},E)),this._defaultPrevented=!1,this.target=u}}class Zs extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,g){const E="touchend"===o?g.changedTouches:g.touches,I=ht(u.getCanvasContainer(),E),B=I.map(U=>u.unproject(U)),z=I.reduce((U,Z,X,ae)=>U.add(Z.div(ae.length)),new l.pointGeometry(0,0));super(o,{points:I,point:z,lngLats:B,lngLat:u.unproject(z),originalEvent:g}),this._defaultPrevented=!1}}class Ql extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,g){super(o,{originalEvent:g}),this._defaultPrevented=!1}}class vc{constructor(o,u){this._map=o,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Ql(o.type,this._map,o))}mousedown(o,u){return this._mousedownPos=u,this._firePreventable(new ko(o.type,this._map,o))}mouseup(o){this._map.fire(new ko(o.type,this._map,o))}preclick(o){const u=l.extend({},o);u.type="preclick",this._map.fire(new ko(u.type,this._map,u))}click(o,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(o),this._map.fire(new ko(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new ko(o.type,this._map,o))}mouseover(o){this._map.fire(new ko(o.type,this._map,o))}mouseout(o){this._map.fire(new ko(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Zs(o.type,this._map,o))}touchmove(o){this._map.fire(new Zs(o.type,this._map,o))}touchend(o){this._map.fire(new Zs(o.type,this._map,o))}touchcancel(o){this._map.fire(new Zs(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hc{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new ko(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ko("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new ko(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bc{constructor(o,u){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,u){this.isEnabled()&&o.shiftKey&&0===o.button&&(xe(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(o,u){if(!this._active)return;const g=u;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=g,this._box||(this._box=he("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const I=Math.min(E.x,g.x),B=Math.max(E.x,g.x),z=Math.min(E.y,g.y),U=Math.max(E.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${I}px,${z}px)`,this._box.style.width=B-I+"px",this._box.style.height=U-z+"px")})}mouseupWindow(o,u){if(!this._active||0!==o.button)return;const g=this._startPos,E=u;if(this.reset(),Se(),g.x!==E.x||g.y!==E.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:I=>I.fitScreenCoordinates(g,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&27===o.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Fe(),delete this._startPos,delete this._lastPos}_fireEvent(o,u){return this._map.fire(new l.Event(o,{originalEvent:u}))}}function $c(p,o){const u={};for(let g=0;g<p.length;g++)u[p[g].identifier]=o[g];return u}class Dl{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=o.timeStamp),g.length===this.numTouches&&(this.centroid=function(E){const I=new l.pointGeometry(0,0);for(const B of E)I._add(B);return I.div(E.length)}(u),this.touches=$c(g,u)))}touchmove(o,u,g){if(this.aborted||!this.centroid)return;const E=$c(g,u);for(const I in this.touches){const B=this.touches[I],z=E[I];(!z||z.dist(B)>30)&&(this.aborted=!0)}}touchend(o,u,g){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),0===g.length){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class Gc{constructor(o){this.singleTap=new Dl(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,u,g){this.singleTap.touchstart(o,u,g)}touchmove(o,u,g){this.singleTap.touchmove(o,u,g)}touchend(o,u,g){const E=this.singleTap.touchend(o,u,g);if(E){const I=o.timeStamp-this.lastTime<500,B=!this.lastTap||this.lastTap.dist(E)<30;if(I&&B||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Mh{constructor(){this._zoomIn=new Gc({numTouches:1,numTaps:2}),this._zoomOut=new Gc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,u,g){this._zoomIn.touchstart(o,u,g),this._zoomOut.touchstart(o,u,g)}touchmove(o,u,g){this._zoomIn.touchmove(o,u,g),this._zoomOut.touchmove(o,u,g)}touchend(o,u,g){const E=this._zoomIn.touchend(o,u,g),I=this._zoomOut.touchend(o,u,g);return E?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()+1,around:B.unproject(E)},{originalEvent:o})}):I?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:B.getZoom()-1,around:B.unproject(I)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xc={0:1,2:2};class us{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,u){return!1}_move(o,u){return{}}mousedown(o,u){if(this._lastPoint)return;const g=yt(o);this._correctButton(o,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(o,u){const g=this._lastPoint;if(g)if(o.preventDefault(),null!=this._eventButton&&function(E,I){const B=xc[I];return void 0===E.buttons||(E.buttons&B)!==B}(o,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}mouseupWindow(o){this._lastPoint&&yt(o)===this._eventButton&&(this._moved&&Se(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah extends us{mousedown(o,u){super.mousedown(o,u),this._lastPoint&&(this._active=!0)}_correctButton(o,u){return 0===u&&!o.ctrlKey}_move(o,u){return{around:u,panDelta:u.sub(o)}}}class Wc extends us{_correctButton(o,u){return 0===u&&o.ctrlKey||2===u}_move(o,u){const g=.8*(u.x-o.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(o){o.preventDefault()}}class Ro extends us{_correctButton(o,u){return 0===u&&o.ctrlKey||2===u}_move(o,u){const g=-.5*(u.y-o.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(o){o.preventDefault()}}class Ud{constructor(o,u){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),l.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(o,u,g){return this._calculateTransform(o,u,g)}touchmove(o,u,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===g.length&&!l.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,u,g)}}touchend(o,u,g){this._calculateTransform(o,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,u,g){g.length>0&&(this._active=!0);const E=$c(g,u),I=new l.pointGeometry(0,0),B=new l.pointGeometry(0,0);let z=0;for(const Z in E){const X=E[Z],ae=this._touches[Z];ae&&(I._add(X),B._add(X.sub(ae)),z++,E[Z]=X)}if(this._touches=E,z<this._minTouches||!B.mag())return;const U=B.div(z);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(z),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=he("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Du{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,u,g){return{}}touchstart(o,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(o,u,g){const E=this._firstTwoTouches;if(!E)return;o.preventDefault();const[I,B]=E,z=Su(g,u,I),U=Su(g,u,B);if(!z||!U)return;const Z=this._aroundCenter?null:z.add(U).div(2);return this._move([z,U],Z,o)}touchend(o,u,g){if(!this._firstTwoTouches)return;const[E,I]=this._firstTwoTouches,B=Su(g,u,E),z=Su(g,u,I);B&&z||(this._active&&Se(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Su(p,o,u){for(let g=0;g<p.length;g++)if(p[g].identifier===u)return o[g]}function wc(p,o){return Math.log(p/o)/Math.LN2}class Na extends Du{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,u){const g=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(wc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wc(this._distance,g),pinchAround:u}}}function Sl(p,o){return 180*p.angleWith(o)/Math.PI}class Il extends Du{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,u){const g=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sl(this._vector,g),pinchAround:u}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const u=25/(Math.PI*this._minDiameter)*360,g=Sl(o,this._startVector);return Math.abs(g)<u}}function hs(p){return Math.abs(p.y)>Math.abs(p.x)}class ol extends Du{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,hs(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,u,g){const E=this._lastPoints;if(!E)return;const I=o[0].sub(E[0]),B=o[1].sub(E[1]);return this._map._cooperativeGestures&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(I,B,g.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(I.y+B.y)/2*-.5})}gestureBeginsVertically(o,u,g){if(void 0!==this._valid)return this._valid;const E=o.mag()>=2,I=u.mag()>=2;if(!E&&!I)return;if(!E||!I)return null==this._firstMove&&(this._firstMove=g),g-this._firstMove<100&&void 0;const B=o.y>0==u.y>0;return hs(o)&&hs(u)&&B}}const $n={panStep:100,bearingStep:15,pitchStep:10};class sl{constructor(){const o=$n;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let u=0,g=0,E=0,I=0,B=0;switch(o.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:o.shiftKey?g=-1:(o.preventDefault(),I=-1);break;case 39:o.shiftKey?g=1:(o.preventDefault(),I=1);break;case 38:o.shiftKey?E=1:(o.preventDefault(),B=-1);break;case 40:o.shiftKey?E=-1:(o.preventDefault(),B=1);break;default:return}return this._rotationDisabled&&(g=0,E=0),{cameraAnimation:z=>{const U=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:Ls,zoom:u?Math.round(U)+u*(o.shiftKey?2:1):U,bearing:z.getBearing()+g*this._bearingStep,pitch:z.getPitch()+E*this._pitchStep,offset:[-I*this._panStep,-B*this._panStep],center:z.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ls(p){return p*(2-p)}const To=4.000244140625;class Es{constructor(o,u){this._map=o,this._el=o.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||l.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=o.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const g=l.exported.now(),E=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,0!==u&&u%To==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(E*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),o.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=o,this._delta-=u,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Je(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform,u=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(0!==this._delta){const U="wheel"===this._type&&Math.abs(this._delta)>To?this._wheelZoomRate:this._defaultZoomRate;let Z=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&0!==Z&&(Z=1/Z);const X=u(),ae=Math.pow(2,X),ye="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(ye*Z))),"wheel"===this._type&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const g="number"==typeof this._targetZoom?this._targetZoom:u(),E=this._startZoom,I=this._easing;let B,z=!1;if("wheel"===this._type&&E&&I){const U=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),Z=I(U);B=l.number(E,g,Z),U<1?this._frameId||(this._frameId=!0):z=!0}else B=g,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!z,zoomDelta:B-u(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let u=l.ease;if(this._prevEase){const g=this._prevEase,E=(l.exported.now()-g.start)/g.duration,I=g.easing(E+.01)-g.easing(E),B=.27/Math.sqrt(I*I+1e-4)*.01,z=Math.sqrt(.0729-B*B);u=l.bezier(B,z,.25,1)}return this._prevEase={start:l.exported.now(),duration:o,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=he("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(l.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class pd{constructor(o,u){this._clickZoom=o,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ph{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,u){return o.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(o.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hd{constructor(){this._tap=new Gc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,u,g){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(o,u,g))}touchmove(o,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const E=u[0],I=E.y-this._swipePoint.y;return this._swipePoint=E,o.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(o,u,g)}touchend(o,u,g){this._tapTime?this._swipePoint&&0===g.length&&this.reset():this._tap.touchend(o,u,g)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ku{constructor(o,u,g){this._el=o,this._mousePan=u,this._touchPan=g}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ki{constructor(o,u,g){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class al{constructor(o,u,g,E){this._el=o,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qs=p=>p.zoom||p.drag||p.pitch||p.rotate;class go extends l.Event{}class Ba{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,u){const g=l.sub([],u,o);this.radius=l.length(g[2]<0?l.div([],g,this.constants):[g[0],g[1],0])}projectRay(o){l.div(o,o,this.constants),l.normalize(o,o),l.mul$1(o,o,this.constants);const u=l.scale$2([],o,this.radius);if(u[2]>0){const g=l.scale$2([],[0,0,1],l.dot(u,[0,0,1])),E=l.scale$2([],l.normalize([],[u[0],u[1],0]),this.radius),I=l.add([],u,l.scale$2([],l.sub([],l.add([],E,g),u),2));u[0]=I[0],u[1]=I[1]}return u}}function Jl(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class $d{constructor(o,u){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ih(o),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ba,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[l.window,"blur",void 0]];for(const[E,I,B]of this._listeners)E.addEventListener(I,E===l.window.document?this.handleWindowEvent:this.handleEvent,B)}destroy(){for(const[o,u,g]of this._listeners)o.removeEventListener(u,o===l.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(o){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new vc(u,o));const E=u.boxZoom=new bc(u,o);this._add("boxZoom",E);const I=new Mh,B=new Ph;u.doubleClickZoom=new pd(B,I),this._add("tapZoom",I),this._add("clickZoom",B);const z=new Hd;this._add("tapDragZoom",z);const U=u.touchPitch=new ol(u);this._add("touchPitch",U);const Z=new Wc(o),X=new Ro(o);u.dragRotate=new Ki(o,Z,X),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const ae=new Ah(o),ye=new Ud(u,o);u.dragPan=new Ku(g,ae,ye),this._add("mousePan",ae),this._add("touchPan",ye,["touchZoom","touchRotate"]);const Le=new Il,Ae=new Na;u.touchZoomRotate=new al(g,Ae,Le,z),this._add("touchRotate",Le,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Hc(u));const De=u.scrollZoom=new Es(u,this);this._add("scrollZoom",De,["mousePan"]);const Oe=u.keyboard=new sl;this._add("keyboard",Oe);for(const Ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ce]&&u[Ce].enable(o[Ce])}_add(o,u,g){this._handlers.push({handlerName:o,handler:u,allowed:g}),this._handlersById[o]=u}stop(o){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qs(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,u,g){for(const E in o)if(E!==g&&(!u||u.indexOf(E)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const u=[];for(const g of o)this._el.contains(g.target)&&u.push(g);return u}handleEvent(o,u){this._updatingCamera=!0;const g="renderFrame"===o.type,E=g?void 0:o,I={needsRenderFrame:!1},B={},z={},U=o.touches?this._getMapTouches(o.touches):void 0,Z=U?ht(this._el,U):g?void 0:Je(this._el,o);for(const{handlerName:ye,handler:Le,allowed:Ae}of this._handlers){if(!Le.isEnabled())continue;let De;this._blockedByActive(z,Ae,ye)?Le.reset():Le[u||o.type]&&(De=Le[u||o.type](o,Z,U),this.mergeHandlerResult(I,B,De,ye,E),De&&De.needsRenderFrame&&this._triggerRenderFrame()),(De||Le.isActive())&&(z[ye]=Le)}const X={};for(const ye in this._previousActiveHandlers)z[ye]||(X[ye]=E);this._previousActiveHandlers=z,(Object.keys(X).length||Jl(I))&&(this._changes.push([I,B,X]),this._triggerRenderFrame()),(Object.keys(z).length||Jl(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=I;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(o,u,g,E,I){if(!g)return;l.extend(o,g);const B={handlerName:E,originalEvent:g.originalEvent||I};void 0!==g.zoomDelta&&(u.zoom=B),void 0!==g.panDelta&&(u.drag=B),void 0!==g.pitchDelta&&(u.pitch=B),void 0!==g.bearingDelta&&(u.rotate=B)}_applyChanges(){const o={},u={},g={};for(const[E,I,B]of this._changes)E.panDelta&&(o.panDelta=(o.panDelta||new l.pointGeometry(0,0))._add(E.panDelta)),E.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+E.pitchDelta),void 0!==E.around&&(o.around=E.around),void 0!==E.aroundCoord&&(o.aroundCoord=E.aroundCoord),void 0!==E.pinchAround&&(o.pinchAround=E.pinchAround),E.noInertia&&(o.noInertia=E.noInertia),l.extend(u,I),l.extend(g,B);this._updateMapTransform(o,u,g),this._changes=[]}_updateMapTransform(o,u,g){const E=this._map,I=E.transform,B=Ve=>[Ve.x,Ve.y,Ve.z];if((Ve=>{const ze=this._eventsInProgress.drag;return ze&&!this._handlersById[ze.handlerName].isActive()})()&&!Jl(o)){const Ve=I.zoom;I.cameraElevationReference="sea",I.recenterOnTerrain(),I.cameraElevationReference="ground",Ve!==I.zoom&&this._map._update(!0)}if(!Jl(o))return void this._fireEvents(u,g,!0);let{panDelta:z,zoomDelta:U,bearingDelta:Z,pitchDelta:X,around:ae,aroundCoord:ye,pinchAround:Le}=o;void 0!==Le&&(ae=Le),(Ve=>u.drag&&!this._eventsInProgress.drag)()&&ae&&(this._dragOrigin=B(I.pointCoordinate3D(ae)),this._trackingEllipsoid.setup(I._camera.position,this._dragOrigin)),I.cameraElevationReference="sea",E._stop(!0),ae=ae||E.transform.centerPoint,Z&&(I.bearing+=Z),X&&(I.pitch+=X),I._updateCameraState();const Ae=[0,0,0];if(z)if("mercator"===I.projection.name){const Ve=this._trackingEllipsoid.projectRay(I.screenPointToMercatorRay(ae).dir),ze=this._trackingEllipsoid.projectRay(I.screenPointToMercatorRay(ae.sub(z)).dir);Ae[0]=ze[0]-Ve[0],Ae[1]=ze[1]-Ve[1]}else{const Ve=I.pointCoordinate(ae);if("globe"===I.projection.name){z=z.rotate(-I.angle);const ze=I._pixelsPerMercatorPixel/I.worldSize;Ae[0]=-z.x*l.mercatorScale(l.latFromMercatorY(Ve.y))*ze,Ae[1]=-z.y*l.mercatorScale(I.center.lat)*ze}else{const ze=I.pointCoordinate(ae.sub(z));Ve&&ze&&(Ae[0]=ze.x-Ve.x,Ae[1]=ze.y-Ve.y)}}const De=I.zoom,Oe=[0,0,0];if(U){const Ve=B(ye||I.pointCoordinate3D(ae)),ze={dir:l.normalize([],l.sub([],Ve,I._camera.position))};if(ze.dir[2]<0){const ft=I.zoomDeltaToMovement(Ve,U);l.scale$2(Oe,ze.dir,ft)}}const Ce=l.add(Ae,Ae,Oe);I._translateCameraConstrained(Ce),U&&Math.abs(I.zoom-De)>1e-4&&I.recenterOnTerrain(),I.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(u,g,!0)}_fireEvents(o,u,g){const E=qs(this._eventsInProgress),I=qs(o),B={};for(const X in o){const{originalEvent:ae}=o[X];this._eventsInProgress[X]||(B[`${X}start`]=ae),this._eventsInProgress[X]=o[X]}!E&&I&&this._fireEvent("movestart",I.originalEvent);for(const X in B)this._fireEvent(X,B[X]);I&&this._fireEvent("move",I.originalEvent);for(const X in o){const{originalEvent:ae}=o[X];this._fireEvent(X,ae)}const z={};let U;for(const X in this._eventsInProgress){const{handlerName:ae,originalEvent:ye}=this._eventsInProgress[X];this._handlersById[ae].isActive()||(delete this._eventsInProgress[X],U=u[ae]||ye,z[`${X}end`]=U)}for(const X in z)this._fireEvent(X,z[X]);const Z=qs(this._eventsInProgress);if(g&&(E||I)&&!Z){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=ye=>0!==ye&&-this._bearingSnap<ye&&ye<this._bearingSnap;X?(ae(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:U})):(this._map.fire(new l.Event("moveend",{originalEvent:U})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,u){this._map.fire(new l.Event(o,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new go("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Iu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class md extends l.Evented{constructor(o,u){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,u){return this.jumpTo({center:o},u)}panBy(o,u,g){return o=l.pointGeometry.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},u),g)}panTo(o,u,g){return this.easeTo(l.extend({center:o},u),g)}getZoom(){return this.transform.zoom}setZoom(o,u){return this.jumpTo({zoom:o},u),this}zoomTo(o,u,g){return this.easeTo(l.extend({zoom:o},u),g)}zoomIn(o,u){return this.zoomTo(this.getZoom()+1,o,u),this}zoomOut(o,u){return this.zoomTo(this.getZoom()-1,o,u),this}getBearing(){return this.transform.bearing}setBearing(o,u){return this.jumpTo({bearing:o},u),this}getPadding(){return this.transform.padding}setPadding(o,u){return this.jumpTo({padding:o},u),this}rotateTo(o,u,g){return this.easeTo(l.extend({bearing:o},u),g)}resetNorth(o,u){return this.rotateTo(0,l.extend({duration:1e3},o),u),this}resetNorthPitch(o,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),u),this}snapToNorth(o,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,u):this}getPitch(){return this.transform.pitch}setPitch(o,u){return this.jumpTo({pitch:o},u),this}cameraForBounds(o,u){"globe"===this.transform.projection.name&&l.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),o=l.LngLatBounds.convert(o);const g=u&&u.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),g,u)}_extendCameraOptions(o){const u={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=l.extend({padding:u,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){const g=o.padding;o.padding={top:g,bottom:g,right:g,left:g}}return o.padding=l.extend(u,o.padding),o}_cameraForBoxAndBearing(o,u,g,E){const I=this._extendCameraOptions(E),B=this.transform,z=B.padding,U=B.project(l.LngLat.convert(o)),Z=B.project(l.LngLat.convert(u)),X=new l.pointGeometry(U.x,Z.y),ae=new l.pointGeometry(Z.x,U.y),ye=-l.degToRad(g),Le=U.rotate(ye),Ae=Z.rotate(ye),De=X.rotate(ye),Oe=ae.rotate(ye),Ce=new l.pointGeometry(Math.max(Le.x,Ae.x,De.x,Oe.x),Math.max(Le.y,Ae.y,De.y,Oe.y)),Ve=new l.pointGeometry(Math.min(Le.x,Ae.x,De.x,Oe.x),Math.min(Le.y,Ae.y,De.y,Oe.y)),ze=Ce.sub(Ve),ft=(B.width-((z.left||0)+(z.right||0)+I.padding.left+I.padding.right))/ze.x,ot=(B.height-((z.top||0)+(z.bottom||0)+I.padding.top+I.padding.bottom))/ze.y;if(ot<0||ft<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(B.scaleZoom(B.scale*Math.min(ft,ot)),I.maxZoom),st="number"==typeof I.offset.x&&"number"==typeof I.offset.y?new l.pointGeometry(I.offset.x,I.offset.y):l.pointGeometry.convert(I.offset),tt=new l.pointGeometry((I.padding.left-I.padding.right)/2,(I.padding.top-I.padding.bottom)/2).rotate(g*Math.PI/180),gt=st.add(tt).mult(B.scale/B.zoomScale(Ke));return{center:B.unproject(U.add(Z).div(2).sub(gt)),zoom:Ke,bearing:g}}_cameraForBox(o,u,g,E,I){const B=this._extendCameraOptions(I);g=g||0,E=E||0,o=l.LngLat.convert(o),u=l.LngLat.convert(u);const z=this.transform.clone();z.padding=B.padding;const U=this.getFreeCameraOptions(),Z=new l.LngLat(.5*(o.lng+u.lng),.5*(o.lat+u.lat)),X=.5*(g+E);if(z._camera.position[2]<l.mercatorZfromAltitude(X,Z.lat))return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");U.lookAtPoint(Z),z.setFreeCameraOptions(U);const ae=l.MercatorCoordinate.fromLngLat(o),ye=l.MercatorCoordinate.fromLngLat(u),Le=z.pointRayIntersection(z.centerPoint,X),Ae=[(De=z.rayIntersectionCoordinate(Le)).x,De.y,De.z];var De;const Oe=z.screenPointToMercatorRay(z.centerPoint),Ce="globe"!==z.projection.name;let Ve,ze=0;do{const ft=Math.floor(z.zoom),ot=1<<ft,Ke=Math.min(ot*ae.x,ot*ye.x),st=Math.min(ot*ae.y,ot*ye.y),tt=Math.max(ot*ae.x,ot*ye.x),gt=Math.max(ot*ae.y,ot*ye.y),kt=new l.Aabb([Ke,st,g],[tt,gt,E]),ln=l.Frustum.fromInvProjectionMatrix(z.invProjMatrix,z.worldSize,ft,Ce);if(2!==kt.intersects(ln)){Ve&&(z._camera.position=l.scaleAndAdd([],z._camera.position,Oe.dir,-Ve),z._updateStateFromCamera());break}const At=l.sub([],z._camera.position,Ae);Ve=.5*l.length(At),z._camera.position=l.scaleAndAdd([],z._camera.position,Oe.dir,Ve);try{z._updateStateFromCamera()}catch(sn){return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++ze<10);return{center:z.center,zoom:z.zoom,bearing:z.bearing,pitch:z.pitch}}fitBounds(o,u,g){return"globe"===this.transform.projection.name&&l.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(o,u),u,g)}_raycastElevationBox(o,u){const g=this.transform.elevation;if(!g)return;const E=new l.pointGeometry(o.x,u.y),I=new l.pointGeometry(u.x,o.y),B=g.pointCoordinate(o);if(!B)return;const z=g.pointCoordinate(u);if(!z)return;const U=g.pointCoordinate(E);if(!U)return;const Z=g.pointCoordinate(I);if(!Z)return;const X=new l.MercatorCoordinate(B[0],B[1]).toLngLat(),ae=new l.MercatorCoordinate(z[0],z[1]).toLngLat(),ye=new l.MercatorCoordinate(U[0],U[1]).toLngLat(),Le=new l.MercatorCoordinate(Z[0],Z[1]).toLngLat(),Ae=Math.min(X.lng,Math.min(ae.lng,Math.min(ye.lng,Le.lng))),De=Math.min(X.lat,Math.min(ae.lat,Math.min(ye.lat,Le.lat))),Oe=Math.max(X.lng,Math.max(ae.lng,Math.max(ye.lng,Le.lng))),Ce=Math.max(X.lat,Math.max(ae.lat,Math.max(ye.lat,Le.lat))),Ve=Math.min(B[3],Math.min(z[3],Math.min(U[3],Z[3]))),ze=Math.max(B[3],Math.max(z[3],Math.max(U[3],Z[3])));return{minLngLat:new l.LngLat(Ae,De),maxLngLat:new l.LngLat(Oe,Ce),minAltitude:Ve,maxAltitude:ze}}fitScreenCoordinates(o,u,g,E,I){let B,z,U,Z;"globe"===this.transform.projection.name&&l.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const X=l.pointGeometry.convert(o),ae=l.pointGeometry.convert(u),ye=this._raycastElevationBox(X,ae);if(ye)B=ye.minLngLat,z=ye.maxLngLat,U=ye.minAltitude,Z=ye.maxAltitude;else{if(this.transform.anyCornerOffEdge(X,ae))return this;B=this.transform.pointLocation(X),z=this.transform.pointLocation(ae)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(o)),this.transform.pointLocation(l.pointGeometry.convert(u)),g,E):this._cameraForBox(B,z,U,Z,E),E,I)}_fitInternal(o,u,g){return o?(delete(u=l.extend(o,u)).padding,u.linear?this.easeTo(u,g):this.flyTo(u,g)):this}jumpTo(o,u){this.stop();const g=o.preloadOnly?this.transform.clone():this.transform;let E=!1,I=!1,B=!1;return"zoom"in o&&g.zoom!==+o.zoom&&(E=!0,g.zoom=+o.zoom),void 0!==o.center&&(g.center=l.LngLat.convert(o.center)),"bearing"in o&&g.bearing!==+o.bearing&&(I=!0,g.bearing=+o.bearing),"pitch"in o&&g.pitch!==+o.pitch&&(B=!0,g.pitch=+o.pitch),null==o.padding||g.isPaddingEqual(o.padding)||(g.padding=o.padding),o.preloadOnly?(this._preloadTiles(g),this):(this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),E&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),I&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),B&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.warnOnce(Iu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,u){const g=this.transform;if(!g.projection.supportsFreeCamera)return l.warnOnce(Iu),this;this.stop();const E=g.zoom,I=g.pitch,B=g.bearing;g.setFreeCameraOptions(o);const z=E!==g.zoom,U=I!==g.pitch,Z=B!==g.bearing;return this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),z&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),Z&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),U&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u)),this}easeTo(o,u){this._stop(!1,o.easeId),(!1===(o=l.extend({offset:[0,0],duration:500,easing:l.ease},o)).animate||!o.essential&&l.exported.prefersReducedMotion)&&(o.duration=0);const g=this.transform,E=this.getZoom(),I=this.getBearing(),B=this.getPitch(),z=this.getPadding(),U="zoom"in o?+o.zoom:E,Z="bearing"in o?this._normalizeBearing(o.bearing,I):I,X="pitch"in o?+o.pitch:B,ae="padding"in o?o.padding:g.padding,ye=l.pointGeometry.convert(o.offset);let Le,Ae,De;if("globe"===g.projection.name){const gt=l.MercatorCoordinate.fromLngLat(g.center),kt=ye.rotate(-g.angle);gt.x+=kt.x/g.worldSize,gt.y+=kt.y/g.worldSize;const ln=gt.toLngLat(),At=l.LngLat.convert(o.center||ln);this._normalizeCenter(At),Le=g.centerPoint.add(kt),Ae=new l.pointGeometry(gt.x,gt.y).mult(g.worldSize),De=new l.pointGeometry(l.mercatorXfromLng(At.lng),l.mercatorYfromLat(At.lat)).mult(g.worldSize).sub(Ae)}else{Le=g.centerPoint.add(ye);const gt=g.pointLocation(Le),kt=l.LngLat.convert(o.center||gt);this._normalizeCenter(kt),Ae=g.project(gt),De=g.project(kt).sub(Ae)}const Oe=g.zoomScale(U-E);let Ce,Ve;o.around&&(Ce=l.LngLat.convert(o.around),Ve=g.locationPoint(Ce));const ze=this._zooming||U!==E,ft=this._rotating||I!==Z,ot=this._pitching||X!==B,Ke=!g.isPaddingEqual(ae),st=gt=>kt=>{if(ze&&(gt.zoom=l.number(E,U,kt)),ft&&(gt.bearing=l.number(I,Z,kt)),ot&&(gt.pitch=l.number(B,X,kt)),Ke&&(gt.interpolatePadding(z,ae,kt),Le=gt.centerPoint.add(ye)),Ce)gt.setLocationAtPoint(Ce,Ve);else{const ln=gt.zoomScale(gt.zoom-E),At=U>E?Math.min(2,Oe):Math.max(.5,Oe),sn=Math.pow(At,1-kt),rn=gt.unproject(Ae.add(De.mult(kt*sn)).mult(ln));gt.setLocationAtPoint(gt.renderWorldCopies?rn.wrap():rn,Le)}return o.preloadOnly||this._fireMoveEvents(u),gt};if(o.preloadOnly){const gt=this._emulate(st,o.duration,g);return this._preloadTiles(gt),this}const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ze,this._rotating=ft,this._pitching=ot,this._padding=Ke,this._easeId=o.easeId,this._prepareEase(u,o.noMoveStart,tt),this._ease(st(g),gt=>{g.recenterOnTerrain(),this._afterEase(u,gt)},o),this}_prepareEase(o,u,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",u||g.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!g.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!g.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!g.pitching&&this.fire(new l.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))}_afterEase(o,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,E=this._rotating,I=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.Event("zoomend",o)),E&&this.fire(new l.Event("rotateend",o)),I&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}flyTo(o,u){if(!o.essential&&l.exported.prefersReducedMotion){const Vn=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Vn,u)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},o);const g=this.transform,E=this.getZoom(),I=this.getBearing(),B=this.getPitch(),z=this.getPadding(),U="zoom"in o?l.clamp(+o.zoom,g.minZoom,g.maxZoom):E,Z="bearing"in o?this._normalizeBearing(o.bearing,I):I,X="pitch"in o?+o.pitch:B,ae="padding"in o?o.padding:g.padding,ye=g.zoomScale(U-E),Le=l.pointGeometry.convert(o.offset);let Ae=g.centerPoint.add(Le);const De=g.pointLocation(Ae),Oe=l.LngLat.convert(o.center||De);this._normalizeCenter(Oe);const Ce=g.project(De),Ve=g.project(Oe).sub(Ce);let ze=o.curve;const ft=Math.max(g.width,g.height),ot=ft/ye,Ke=Ve.mag();if("minZoom"in o){const Vn=l.clamp(Math.min(o.minZoom,E,U),g.minZoom,g.maxZoom),Rn=ft/g.zoomScale(Vn-E);ze=Math.sqrt(Rn/Ke*2)}const st=ze*ze;function tt(Vn){const Rn=(ot*ot-ft*ft+(Vn?-1:1)*st*st*Ke*Ke)/(2*(Vn?ot:ft)*st*Ke);return Math.log(Math.sqrt(Rn*Rn+1)-Rn)}function gt(Vn){return(Math.exp(Vn)-Math.exp(-Vn))/2}function kt(Vn){return(Math.exp(Vn)+Math.exp(-Vn))/2}const ln=tt(0);let At=function(Vn){return kt(ln)/kt(ln+ze*Vn)},sn=function(Vn){return ft*((kt(ln)*(gt(Rn=ln+ze*Vn)/kt(Rn))-gt(ln))/st)/Ke;var Rn},rn=(tt(1)-ln)/ze;if(Math.abs(Ke)<1e-6||!isFinite(rn)){if(Math.abs(ft-ot)<1e-6)return this.easeTo(o,u);const Vn=ot<ft?-1:1;rn=Math.abs(Math.log(ot/ft))/ze,sn=function(){return 0},At=function(Rn){return Math.exp(Vn*ze*Rn)}}o.duration="duration"in o?+o.duration:1e3*rn/("screenSpeed"in o?+o.screenSpeed/ze:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const kn=I!==Z,qt=X!==B,_n=!g.isPaddingEqual(ae),hn=Vn=>Rn=>{const Qn=Rn*rn,ar=1/At(Qn);Vn.zoom=1===Rn?U:E+Vn.scaleZoom(ar),kn&&(Vn.bearing=l.number(I,Z,Rn)),qt&&(Vn.pitch=l.number(B,X,Rn)),_n&&(Vn.interpolatePadding(z,ae,Rn),Ae=Vn.centerPoint.add(Le));const dr=1===Rn?Oe:Vn.unproject(Ce.add(Ve.mult(sn(Qn))).mult(ar));return Vn.setLocationAtPoint(Vn.renderWorldCopies?dr.wrap():dr,Ae),Vn._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(u),Vn};if(o.preloadOnly){const Vn=this._emulate(hn,o.duration,g);return this._preloadTiles(Vn),this}return this._zooming=!0,this._rotating=kn,this._pitching=qt,this._padding=_n,this._prepareEase(u,!1),this._ease(hn(g),()=>this._afterEase(u),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,u)}if(!o){const g=this.handlers;g&&g.stop(!1)}return this}_ease(o,u,g){!1===g.animate||0===g.duration?(o(1),u()):(this._easeStart=l.exported.now(),this._easeOptions=g,this._onEaseFrame=o,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,u){o=l.wrap(o,-180,180);const g=Math.abs(o-u);return Math.abs(o-360-u)<g&&(o-=360),Math.abs(o+360-u)<g&&(o+=360),o}_normalizeCenter(o){const u=this.transform;if(!u.renderWorldCopies||u.maxBounds)return;const g=o.lng-u.center.lng;o.lng+=g>180?-360:g<-180?360:0}_emulate(o,u,g){const E=Math.ceil(15*u/1e3),I=[],B=o(g.clone());for(let z=0;z<=E;z++){const U=B(z/E);I.push(U.clone())}return I}}class ec{constructor(o={}){this.options=o,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const u=this.options&&this.options.compact;return this._map=o,this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=he("button","mapboxgl-ctrl-attrib-button",this._container),he("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===u&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(o,u){const g=this._map._getUIString(`AttributionControl.${u}`);o.setAttribute("aria-label",g),o.removeAttribute("title"),o.firstElementChild&&o.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(o){const g=u.reduce((E,I,B)=>(I.value&&(E+=`${I.key}=${I.value}${B<u.length-1?"&":""}`),E),"?");o.href=`${l.config.FEEDBACK_URL}/${g}#${Yl(this._map,!0)}`,o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}}_updateData(o){!o||"metadata"!==o.sourceDataType&&"visibility"!==o.sourceDataType&&"style"!==o.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const u=this._map.style._sourceCaches;for(const E in u){const I=u[E];if(I.used){const B=I.getSource();B.attribution&&o.indexOf(B.attribution)<0&&o.push(B.attribution)}}o.sort((E,I)=>E.length-I.length),o=o.filter((E,I)=>{for(let B=I+1;B<o.length;B++)if(o[B].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const g=o.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,o.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Yu{constructor(){l.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=he("div","mapboxgl-ctrl");const u=he("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&"metadata"!==o.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(0===Object.entries(o).length)return!0;for(const u in o){const g=o[u].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const u=o[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class uo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const u=++this._id;return this._queue.push({callback:o,id:u,cancelled:!1}),u}remove(o){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const E of g)if(E.id===o)return void(E.cancelled=!0)}run(o=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Lo(p,o,u){if(p=new l.LngLat(p.lng,p.lat),o){const g=new l.LngLat(p.lng-360,p.lat),E=new l.LngLat(p.lng+360,p.lat),I=360*Math.ceil(Math.abs(p.lng-u.center.lng)/360),B=u.locationPoint(p).distSqr(o),z=o.x<0||o.y<0||o.x>u.width||o.y>u.height;u.locationPoint(g).distSqr(o)<B&&(z||Math.abs(g.lng-u.center.lng)<I)?p=g:u.locationPoint(E).distSqr(o)<B&&(z||Math.abs(E.lng-u.center.lng)<I)&&(p=E)}for(;Math.abs(p.lng-u.center.lng)>180;){const g=u.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const Mu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Do extends l.Evented{constructor(o,u){if(super(),(o instanceof l.window.HTMLElement||u)&&(o=l.extend({element:o},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),o&&o.element)this._element=o.element,this._offset=l.pointGeometry.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=he("div");const E=41,I=27,B=ce("svg",{display:"block",height:E*this._scale+"px",width:I*this._scale+"px",viewBox:`0 0 ${I} ${E}`},this._element),z=ce("radialGradient",{id:"shadowGradient"},ce("defs",{},B));ce("stop",{offset:"10%","stop-opacity":.4},z),ce("stop",{offset:"100%","stop-opacity":.05},z),ce("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},B),ce("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},B),ce("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},B),ce("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},B),this._offset=l.pointGeometry.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",E=>{E.preventDefault()}),this._element.addEventListener("mousedown",E=>{E.preventDefault()});const g=this._element.classList;for(const E in Mu)g.remove(`mapboxgl-marker-anchor-${E}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const u=38.1,g=13.5,E=Math.sqrt(Math.pow(g,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-u],"bottom-left":[E,-1*(u-g+E)],"bottom-right":[-E,-1*(u-g+E)],left:[g,-1*(u-g)],right:[-g,-1*(u-g)]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const u=o.code,g=o.charCode||o.keyCode;"Space"!==u&&"Enter"!==u&&32!==g&&13!==g||this.togglePopup()}_onMapClick(o){const u=o.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map;if(!o)return!1;const u=o.unproject(this._pos),g=o.getFreeCameraOptions();if(!g.position)return!1;const E=g.position.toLngLat();return E.distanceTo(u)<.9*E.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const u=this._pos;if(!u||u.x<0||u.x>o.transform.width||u.y<0||u.y>o.transform.height)return void this._clearFadeTimer();const g=o.unproject(u);let E;o._showingGlobe()&&l.isLngLatBehindGlobe(o.transform,this._lngLat)?E=0:(E=1-o._queryFogOpacity(g),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(E*=.2)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${o.x}px,${o.y}px)\n            ${Mu[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${u.x}px,${u.y}px)\n        `}_calculateXYTransform(){const o=this._pos,u=this._map,g=this.getPitchAlignment();if(!u||!o||"map"!==g)return"";if(!u._showingGlobe()){const U=u.getPitch();return U?`rotateX(${U}deg)`:""}const E=l.radToDeg(l.globeTiltAtLngLat(u.transform,this._lngLat)),I=o.sub(l.globeCenterToScreenPoint(u.transform)),B=Math.abs(I.x)+Math.abs(I.y);if(0===B)return"";const z=E/B;return`rotateX(${-I.y*z}deg) rotateY(${I.x*z}deg)`}_calculateZTransform(){const o=this._pos,u=this._map;if(!u||!o)return"";let g=0;const E=this.getRotationAlignment();if("map"===E)if(u._showingGlobe()){const I=u.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),B=u.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(I);g=l.radToDeg(Math.atan2(B.y,B.x))-90}else g=-u.getBearing();else if("horizon"===E){const I=l.smoothstep(4,6,u.getZoom()),B=l.globeCenterToScreenPoint(u.transform);B.y+=I*u.transform.height;const z=o.sub(B),U=l.radToDeg(Math.atan2(z.y,z.x));g=(U>90?U-270:U+90)*(1-I)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(o){l.window.cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=Lo(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),!0===o?this._updateFrameId=l.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=l.pointGeometry.convert(o),this._update(),this}_onMove(o){const u=this._map;if(u){if(!this._isDragging){const g=this._clickTolerance||u._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(o){const u=this._map;u&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos),this._pointerdownPos=o.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const u=this._map;return u&&(o?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}class la{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const u=l.easeCubicInOut((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,u,g){this._start=this.getValue(u),this._end=o,this._startTime=u,this._endTime=u+g}}const Zc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Au={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function ll(p){p.parentNode&&p.parentNode.removeChild(p)}const ns={showCompass:!0,showZoom:!0,visualizePitch:!1};class Xs{constructor(o,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Wc({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,g&&(this.mousePitch=new Ro({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(o,u){this.mouseRotate.mousedown(o,u),this.mousePitch&&this.mousePitch.mousedown(o,u),xe()}move(o,u){const g=this.map,E=this.mouseRotate.mousemoveWindow(o,u),I=E&&E.bearingDelta;if(I&&g.setBearing(g.getBearing()+I),this.mousePitch){const B=this.mousePitch.mousemoveWindow(o,u),z=B&&B.pitchDelta;z&&g.setPitch(g.getPitch()+z)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Fe(),l.window.removeEventListener("mousemove",this.mousemove),l.window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(l.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Je(this.element,o)),l.window.addEventListener("mousemove",this.mousemove),l.window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Je(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){1!==o.targetTouches.length?this.reset():(this._startPos=this._lastPos=ht(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){1!==o.targetTouches.length?this.reset():(this._lastPos=ht(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){0===o.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ec={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},za={maxWidth:100,unit:"metric"};function ys(p,o,u){const g=tc(o),E=g/o,I={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[u];this._map._requestDomTask(()=>{this._container.style.width=p*E+"px",this._container.innerHTML=`${g}&nbsp;${I}`})}function tc(p){const o=Math.pow(10,`${Math.floor(p)}`.length-1);let u=p/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:u>=1?1:function(g){const E=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*E)/E}(u),o*u}const qc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Oh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pu(p=new l.pointGeometry(0,0),o="bottom"){if("number"==typeof p){const u=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(o){case"top":return new l.pointGeometry(0,p);case"top-left":return new l.pointGeometry(u,u);case"top-right":return new l.pointGeometry(-u,u);case"bottom":return new l.pointGeometry(0,-p);case"bottom-left":return new l.pointGeometry(u,-u);case"bottom-right":return new l.pointGeometry(-u,-u);case"left":return new l.pointGeometry(p,0);case"right":return new l.pointGeometry(-p,0)}return new l.pointGeometry(0,0)}return p instanceof l.pointGeometry||Array.isArray(p)?l.pointGeometry.convert(p):l.pointGeometry.convert(p[o]||[0,0])}const Xc={version:l.version,supported:de,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends md{constructor(p){if(null!=(p=l.extend({},Au,p)).minZoom&&null!=p.maxZoom&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=p.minPitch&&null!=p.maxPitch&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=p.minPitch&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=p.maxPitch&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&l.isSafariWithAntialiasingBug(l.window)&&(p.antialias=!1,l.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Tl(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language="auto"===p.language?l.window.navigator.language:p.language,this._worldview=p.worldview,this._renderTaskQueue=new uo,this._domRenderTaskQueue=new uo,this._controls=[],this._markers=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Zc,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new la(0),this._useExplicitProjection=!1,this._requestManager=new l.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,"string"==typeof p.container){if(this._container=l.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof l.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&l.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1),l.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new $d(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new Cu("string"==typeof p.hash&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new ec({customAttribution:p.customAttribution})),this._logoControl=new Yu,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update("style"===o.dataType),this.fire(new l.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new l.Event(`${o.dataType}dataloading`,o))})}_getMapId(){return this._mapId}addControl(p,o){if(void 0===o&&(o=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[o];return-1!==o.indexOf("bottom")?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(p);return o>-1&&this._controls.splice(o,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p)),this.fire(new l.Event("resize",p)),o&&this.fire(new l.Event("moveend",p)),this}getBounds(){return"globe"===this.transform.projection.name&&l.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=null==p?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=null==p?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=null==p?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=null==p?85:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getLanguage(){return this._language}setLanguage(p){if(this._language="auto"===p?l.window.navigator.language:p,this.style)for(const o in this.style._sourceCaches){const u=this.style._sourceCaches[o]._source;u._setLanguage&&u._setLanguage(this._language)}for(const o of this._controls)o._setLanguage&&o._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){if(this._worldview=p,this.style)for(const o in this.style._sourceCaches){const u=this.style._sourceCaches[o]._source;u._setWorldview&&u._setWorldview(p)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(p){return this._lazyInitEmptyStyle(),p?"string"==typeof p&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const p=this.transform,o=p.projection.name;let u;"globe"===o&&p.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),u=!0):"mercator"===o&&p.zoom<l.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,o){return this._updateProjection(p||o||{name:"mercator"})}_updateProjection(p){let o;if(o="globe"===p.name&&this.transform.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),o){this.painter.clearBackgroundTiles();for(const u in this.style._sourceCaches)this.style._sourceCaches[u].clearTiles();this._update(!0)}return this}project(p){return this.transform.locationPoint3D(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(l.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(p,o,u){if("mouseenter"===p||"mouseover"===p){let g=!1;const E=B=>{const z=o.filter(Z=>this.getLayer(Z)),U=z.length?this.queryRenderedFeatures(B.point,{layers:z}):[];U.length?g||(g=!0,u.call(this,new ko(p,this,B.originalEvent,{features:U}))):g=!1},I=()=>{g=!1};return{layers:new Set(o),listener:u,delegates:{mousemove:E,mouseout:I}}}if("mouseleave"===p||"mouseout"===p){let g=!1;const E=B=>{const z=o.filter(U=>this.getLayer(U));(z.length?this.queryRenderedFeatures(B.point,{layers:z}):[]).length?g=!0:g&&(g=!1,u.call(this,new ko(p,this,B.originalEvent)))},I=B=>{g&&(g=!1,u.call(this,new ko(p,this,B.originalEvent)))};return{layers:new Set(o),listener:u,delegates:{mousemove:E,mouseout:I}}}{const g=E=>{const I=o.filter(z=>this.getLayer(z)),B=I.length?this.queryRenderedFeatures(E.point,{layers:I}):[];B.length&&(E.features=B,u.call(this,E),delete E.features)};return{layers:new Set(o),listener:u,delegates:{[p]:g}}}}on(p,o,u){if(void 0===u)return super.on(p,o);Array.isArray(o)||(o=[o]);const g=this._createDelegatedListener(p,o,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const E in g.delegates)this.on(E,g.delegates[E]);return this}once(p,o,u){if(void 0===u)return super.once(p,o);Array.isArray(o)||(o=[o]);const g=this._createDelegatedListener(p,o,u);for(const E in g.delegates)this.once(E,g.delegates[E]);return this}off(p,o,u){if(void 0===u)return super.off(p,o);o=new Set(Array.isArray(o)?o:[o]);const g=(I,B)=>{if(I.size!==B.size)return!1;for(const z of I)if(!B.has(z))return!1;return!0},E=this._delegatedListeners?this._delegatedListeners[p]:void 0;return E&&(I=>{for(let B=0;B<I.length;B++){const z=I[B];if(z.listener===u&&g(z.layers,o)){for(const U in z.delegates)this.off(U,z.delegates[U]);return I.splice(B,1),this}}})(E),this}queryRenderedFeatures(p,o){return this.style?(void 0!==o||void 0===p||p instanceof l.pointGeometry||Array.isArray(p)||(o=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],o=o||{},this.transform)):[]}querySourceFeatures(p,o){return this.style.querySourceFeatures(p,o)}queryTerrainElevation(p,o){const u=this.transform.elevation;return u?(o=l.extend({},{exaggerated:!0},o),u.getAtPoint(l.MercatorCoordinate.fromLngLat(p),null,o.exaggerated)):null}setStyle(p,o){return!1!==(o=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o)).diff&&o.localIdeographFontFamily===this._localIdeographFontFamily&&o.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(p,o))}_getUIString(p){const o=this._locale[p];if(null==o)throw new Error(`Missing UI string '${p}'`);return o}_updateStyle(p,o){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new ls(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof p?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ls(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,o){if("string"==typeof p){const u=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(u,l.ResourceType.Style);l.getJSON(g,(E,I)=>{E?this.fire(new l.ErrorEvent(E)):I&&this._updateDiff(I,o)})}else"object"==typeof p&&this._updateDiff(p,o)}_updateDiff(p,o){try{this.style.setState(p)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(p,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.warnOnce("There is no style added to the map."),!1)}addSource(p,o){return this._lazyInitEmptyStyle(),this.style.addSource(p,o),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const o in p){const u=p[o]._tiles;for(const g in u){const E=u[g];if("loaded"!==E.state&&"errored"!==E.state)return!1}}return!0}addSourceType(p,o,u){this._lazyInitEmptyStyle(),this.style.addSourceType(p,o,u)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,o,{pixelRatio:u=1,sdf:g=!1,stretchX:E,stretchY:I,content:B}={}){if(this._lazyInitEmptyStyle(),o instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&o instanceof l.window.ImageBitmap){const{width:z,height:U,data:Z}=l.exported.getImageData(o);this.style.addImage(p,{data:new l.RGBAImage({width:z,height:U},Z),pixelRatio:u,stretchX:E,stretchY:I,content:B,sdf:g,version:0})}else if(void 0===o.width||void 0===o.height)this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:U}=o,Z=o;this.style.addImage(p,{data:new l.RGBAImage({width:z,height:U},new Uint8Array(Z.data)),pixelRatio:u,stretchX:E,stretchY:I,content:B,sdf:g,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,p)}}updateImage(p,o){const u=this.style.getImage(p);if(!u)return void this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=o instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&o instanceof l.window.ImageBitmap?l.exported.getImageData(o):o,{width:E,height:I}=g;void 0!==E&&void 0!==I?E===u.data.width&&I===u.data.height?(u.data.replace(g.data,!(o instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&o instanceof l.window.ImageBitmap)),this.style.updateImage(p,u)):this.fire(new l.ErrorEvent(new Error(`The width and height of the updated image (${E}, ${I})\n                must be that same as the previous version of the image\n                (${u.data.width}, ${u.data.height})`))):this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,o){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),(u,g)=>{o(u,g instanceof l.window.HTMLImageElement?l.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,o){return this._lazyInitEmptyStyle(),this.style.addLayer(p,o),this._update(!0)}moveLayer(p,o){return this.style.moveLayer(p,o),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,o,u){return this.style.setLayerZoomRange(p,o,u),this._update(!0)}setFilter(p,o,u={}){return this.style.setFilter(p,o,u),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,o,u,g={}){return this.style.setPaintProperty(p,o,u,g),this._update(!0)}getPaintProperty(p,o){return this.style.getPaintProperty(p,o)}setLayoutProperty(p,o,u,g={}){return this.style.setLayoutProperty(p,o,u,g),this._update(!0)}getLayoutProperty(p,o){return this.style.getLayoutProperty(p,o)}setLight(p,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,o),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.LngLat.convert(p),this.transform):0}setFeatureState(p,o){return this.style.setFeatureState(p,o),this._update()}removeFeatureState(p,o){return this.style.removeFeatureState(p,o),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let u,g,E,I=this._container;for(;I&&(!g||!E);){const B=l.window.getComputedStyle(I).transform;B&&"none"!==B&&(u=B.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&"0"!==u[0]&&"1"!==u[0]&&(g=u[0]),u[3]&&"0"!==u[3]&&"1"!==u[3]&&(E=u[3])),I=I.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=E?Math.abs(o/E):o}_detectMissingCSS(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=he("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=he("div","mapboxgl-canvas-container",p);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=he("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=he("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{g[E]=he("div",`mapboxgl-ctrl-${E}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,o){const u=l.exported.devicePixelRatio||1;this._canvas.width=u*Math.ceil(p),this._canvas.height=u*Math.ceil(o),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${o}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const o=this._markers.indexOf(p);-1!==o&&this._markers.splice(o,1)}_setupPainter(){const p=l.extend({},de.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);o?(l.storeAuthState(o,!0),this.painter=new La(o,this.transform),this.on("data",u=>{"source"===u.dataType&&this.painter.setTileLoadedFlag(!0)}),l.exported$1.testSupport(o)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let o;const u=this.painter.context.extTimerQuery,g=l.exported.now();if(this.listens("gpu-timing-frame")&&(o=u.createQueryEXT(),u.beginQueryEXT(u.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();let E=!1;const I=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,Z=this.transform.pitch,X=l.exported.now();this.style.zoomHistory.update(U,X);const ae=new l.EvaluationParameters(U,{now:X,fadeDuration:I,pitch:Z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ye=ae.crossFadingFactor();1===ye&&ye===this._crossFadingFactor||(E=!0,this._crossFadingFactor=ye),this.style.update(ae)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerUpdate()):B=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,I,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const U=l.exported.now()-g;u.endQueryEXT(u.TIME_ELAPSED_EXT,o),setTimeout(()=>{const Z=u.getQueryObjectEXT(o,u.QUERY_RESULT_EXT)/1e6;u.deleteQueryEXT(o),this.fire(new l.Event("gpu-timing-frame",{cpuTime:U,gpuTime:Z})),l.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:Z}})},50)}if(this.listens("gpu-timing-layer")){const U=this.painter.collectGpuTimers();setTimeout(()=>{const Z=this.painter.queryGpuTimers(U);this.fire(new l.Event("gpu-timing-layer",{layerTimes:Z}))},50)}if(this.listens("gpu-timing-deferred-render")){const U=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Z=this.painter.queryGpuTimeDeferredRender(U);this.fire(new l.Event("gpu-timing-deferred-render",{gpuTime:Z}))},50)}const z=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(z||this._repaint)this.triggerRepaint();else{const U=!this.isMoving()&&this.loaded();if(U&&(B=this._updateAverageElevation(g,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),U&&(this.fire(new l.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Z=this._calculateSpeedIndex();this.fire(new l.Event("speedindexcompleted",{speedIndex:Z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||z||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const p of this._markers)p._update()}_updateAverageElevation(p,o=!1){const u=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&u(0);if((o||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let E=this.transform.sampleAverageElevation(),I=!1;this.transform.elevation&&(I=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=p;const B=Math.abs(g-E);if(B>1){if(this._isInitialLoad||I)return this._averageElevation.jumpTo(E),u(E);this._averageElevation.easeTo(E,p,300)}else if(B>1e-4)return this._averageElevation.jumpTo(E),u(E)}return!!this._averageElevation.isEasing(p)&&u(this._averageElevation.getValue(p))}_authenticate(){l.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===l.AUTH_ERR_MSG||401===p.status)){const o=this.painter.context.gl;l.storeAuthState(o,!1),this._logoControl instanceof Yu&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const u=this.painter.context.gl,g=u.createFramebuffer();function E(I){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,I,0);const B=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,B),B}return u.bindFramebuffer(u.FRAMEBUFFER,g),this._canvasPixelComparison(E(p),o.canvasCopies.map(E),o.timeStamps)}_canvasPixelComparison(p,o,u){let g=u[1]-u[0];const E=p.length/4;for(let I=0;I<o.length;I++){const B=o[I];let z=0;for(let U=0;U<B.length;U+=4)B[U]===p[U]&&B[U+1]===p[U+1]&&B[U+2]===p[U+2]&&B[U+3]===p[U+3]&&(z+=1);g+=(u[I+2]-u[I+1])*(1-z/E)}return g}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),ll(this._canvasContainer),ll(this._controlContainer),ll(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),l.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=l.exported.frame(o=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(o)}))}_preloadTiles(p){const o=this.style?Object.values(this.style._sourceCaches):[];return l.asyncAll(o,(u,g)=>u._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,o){l.setCacheLimits(p,o)}get version(){return l.version}},NavigationControl:class{constructor(p){this.options=l.extend({},ns,p),this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),he("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),he("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:o}):u.resetNorth({},{originalEvent:o}))}),this._compassIcon=he("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const o=p.getZoom(),u=o===p.getMaxZoom(),g=o===p.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xs(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,o){const u=he("button",p,this._container);return u.type="button",u.addEventListener("click",o),u}_setButtonTitle(p,o){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${o}`);p.setAttribute("aria-label",u),p.firstElementChild&&p.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({geolocation:l.window.navigator.geolocation},Ec,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=yc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){void 0!==this._supportsGeolocation?p(this._supportsGeolocation):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(o=>{this._supportsGeolocation="denied"!==o.state,p(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,p(this._supportsGeolocation))}_isOutOfMapMaxBounds(p){const o=this._map.getMaxBounds(),u=p.coords;return!!o&&(u.longitude<o.getWest()||u.longitude>o.getEast()||u.latitude<o.getSouth()||u.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(p),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const o=new l.LngLat(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,g=this._map.getBearing(),E=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(u),E,{geolocateSource:!0})}_updateMarker(p){if(p){const o=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,o=l.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,u=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(1===p.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===p.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=he("button","mapboxgl-ctrl-geolocate",this._container),he("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===p){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he("div","mapboxgl-user-location"),this._dotElement.appendChild(he("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(he("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Do({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=he("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Do({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||"ACTIVE_LOCK"!==this._watchState||o.originalEvent&&"resize"===o.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:!0===p.absolute&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{l.window.addEventListener("ondeviceorientationabsolute"in l.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==l.window.DeviceMotionEvent&&"function"==typeof l.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(o=>{"granted"===o&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),l.window.removeEventListener("deviceorientation",this._onDeviceOrientation),l.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ec,ScaleControl:class{constructor(p){this.options=l.extend({},za,p),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(o){return!1}}()||(this._setScale=ys.bind(this)),l.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,o=this._map,u=o._containerHeight/2,g=o._containerWidth/2-p/2,E=o.unproject([g,u]),I=o.unproject([g+p,u]),B=E.distanceTo(I);if("imperial"===this.options.unit){const z=3.2808*B;z>5280?this._setScale(p,z/5280,"mile"):this._setScale(p,z,"foot")}else"nautical"===this.options.unit?this._setScale(p,B/1852,"nautical-mile"):B>=1e3?this._setScale(p,B/1e3,"kilometer"):this._setScale(p,B,"meter")}_setScale(p,o,u){const g=tc(o),E=g/o;this._map._requestDomTask(()=>{this._container.style.width=p*E+"px",this._container.innerHTML="nautical-mile"!==u?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:u}).format(g):`${g}&nbsp;nm`})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=he("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof l.window.HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in l.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=he("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!l.window.document.fullscreenEnabled&&!l.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=he("button","mapboxgl-ctrl-fullscreen",this._controlContainer);he("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(l.window.document.fullscreenElement||l.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(qc),p),l.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(l.window.document.createTextNode(p))}setHTML(p){const o=l.window.document.createDocumentFragment(),u=l.window.document.createElement("body");let g;for(u.innerHTML=p;g=u.firstChild,g;)o.appendChild(g);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=he("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(p),this.options.closeButton){const u=this._closeButton=he("button","mapboxgl-popup-close-button",o);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let o;return this._classList.delete(p)?o=!1:(this._classList.add(p),o=!0),this._updateClassList(),o}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const o=this._map,u=this._container,g=this._pos;if(!o||!u||!g)return"bottom";const E=u.offsetWidth,I=u.offsetHeight,B=g.x<E/2,z=g.x>o.transform.width-E/2;if(g.y+p<I)return B?"top-left":z?"top-right":"top";if(g.y>o.transform.height-I){if(B)return"bottom-left";if(z)return"bottom-right"}return B?"left":z?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),p.className=o.join(" ")}_update(p){const o=this._map,u=this._content;if(!o||!this._lngLat&&!this._trackPointer||!u)return;let g=this._container;if(g||(g=this._container=he("div","mapboxgl-popup",o.getContainer()),this._tip=he("div","mapboxgl-popup-tip",g),g.appendChild(u)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lo(this._lngLat,this._pos,o.transform)),!this._trackPointer||p){const E=this._pos=this._trackPointer&&p?p:o.project(this._lngLat),I=Pu(this.options.offset),B=this._anchor=this._getAnchor(I.y),z=Pu(this.options.offset,B),U=E.add(z).round();o._requestDomTask(()=>{this._container&&B&&(this._container.style.transform=`${Mu[B]} translate(${U.x}px,${U.y}px)`)})}if(!this._marker&&o._showingGlobe()){const E=l.isLngLatBehindGlobe(o.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Oh);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Do,Style:ls,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,FreeCameraOptions:Un,Evented:l.Evented,config:l.config,prewarm:function(){Vr().acquire(tr)},clearPrewarmedResources:function(){const p=mr;p&&(p.isPreloaded()&&1===p.numActive()?(p.release(tr),mr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(p){l.config.ACCESS_TOKEN=p},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(p){l.config.API_URL=p},get workerCount(){return Xn.workerCount},set workerCount(p){Xn.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:l.exported.setNow,restoreNow:l.exported.restoreNow};return Xc}),O}()},6800:(me,we,v)=>{"use strict";v.r(we),v.d(we,{FileSaverDirective:()=>Cr,FileSaverModule:()=>ir,FileSaverService:()=>Hr});var O=v(3018),d=v(9457),l=(v(8583),v(5917)),J=v(9897),de=v(4612),_e=v(5435),se=v(8002);class he{}class ie{constructor(qe){this.normalizedNames=new Map,this.lazyUpdate=null,qe?this.lazyInit="string"==typeof qe?()=>{this.headers=new Map,qe.split("\n").forEach(Xe=>{const zt=Xe.indexOf(":");if(zt>0){const Qt=Xe.slice(0,zt),jn=Qt.toLowerCase(),Wt=Xe.slice(zt+1).trim();this.maybeSetNormalizedName(Qt,jn),this.headers.has(jn)?this.headers.get(jn).push(Wt):this.headers.set(jn,[Wt])}})}:()=>{this.headers=new Map,Object.keys(qe).forEach(Xe=>{let zt=qe[Xe];const Qt=Xe.toLowerCase();"string"==typeof zt&&(zt=[zt]),zt.length>0&&(this.headers.set(Qt,zt),this.maybeSetNormalizedName(Xe,Qt))})}:this.headers=new Map}has(qe){return this.init(),this.headers.has(qe.toLowerCase())}get(qe){this.init();const Xe=this.headers.get(qe.toLowerCase());return Xe&&Xe.length>0?Xe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(qe){return this.init(),this.headers.get(qe.toLowerCase())||null}append(qe,Xe){return this.clone({name:qe,value:Xe,op:"a"})}set(qe,Xe){return this.clone({name:qe,value:Xe,op:"s"})}delete(qe,Xe){return this.clone({name:qe,value:Xe,op:"d"})}maybeSetNormalizedName(qe,Xe){this.normalizedNames.has(Xe)||this.normalizedNames.set(Xe,qe)}init(){this.lazyInit&&(this.lazyInit instanceof ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(qe=>this.applyUpdate(qe)),this.lazyUpdate=null))}copyFrom(qe){qe.init(),Array.from(qe.headers.keys()).forEach(Xe=>{this.headers.set(Xe,qe.headers.get(Xe)),this.normalizedNames.set(Xe,qe.normalizedNames.get(Xe))})}clone(qe){const Xe=new ie;return Xe.lazyInit=this.lazyInit&&this.lazyInit instanceof ie?this.lazyInit:this,Xe.lazyUpdate=(this.lazyUpdate||[]).concat([qe]),Xe}applyUpdate(qe){const Xe=qe.name.toLowerCase();switch(qe.op){case"a":case"s":let zt=qe.value;if("string"==typeof zt&&(zt=[zt]),0===zt.length)return;this.maybeSetNormalizedName(qe.name,Xe);const Qt=("a"===qe.op?this.headers.get(Xe):void 0)||[];Qt.push(...zt),this.headers.set(Xe,Qt);break;case"d":const jn=qe.value;if(jn){let Wt=this.headers.get(Xe);if(!Wt)return;Wt=Wt.filter(On=>-1===jn.indexOf(On)),0===Wt.length?(this.headers.delete(Xe),this.normalizedNames.delete(Xe)):this.headers.set(Xe,Wt)}else this.headers.delete(Xe),this.normalizedNames.delete(Xe)}}forEach(qe){this.init(),Array.from(this.normalizedNames.keys()).forEach(Xe=>qe(this.normalizedNames.get(Xe),this.headers.get(Xe)))}}class fe{encodeKey(qe){return Ye(qe)}encodeValue(qe){return Ye(qe)}decodeKey(qe){return decodeURIComponent(qe)}decodeValue(qe){return decodeURIComponent(qe)}}const xe=/%(\d[a-f0-9])/gi,Fe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ye(Pt){return encodeURIComponent(Pt).replace(xe,(qe,Xe)=>{var zt;return null!==(zt=Fe[Xe])&&void 0!==zt?zt:qe})}function Se(Pt){return`${Pt}`}class Je{constructor(qe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=qe.encoder||new fe,qe.fromString){if(qe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Pt,qe){const Xe=new Map;return Pt.length>0&&Pt.replace(/^\?/,"").split("&").forEach(Qt=>{const jn=Qt.indexOf("="),[Wt,On]=-1==jn?[qe.decodeKey(Qt),""]:[qe.decodeKey(Qt.slice(0,jn)),qe.decodeValue(Qt.slice(jn+1))],fn=Xe.get(Wt)||[];fn.push(On),Xe.set(Wt,fn)}),Xe}(qe.fromString,this.encoder)}else qe.fromObject?(this.map=new Map,Object.keys(qe.fromObject).forEach(Xe=>{const zt=qe.fromObject[Xe];this.map.set(Xe,Array.isArray(zt)?zt:[zt])})):this.map=null}has(qe){return this.init(),this.map.has(qe)}get(qe){this.init();const Xe=this.map.get(qe);return Xe?Xe[0]:null}getAll(qe){return this.init(),this.map.get(qe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(qe,Xe){return this.clone({param:qe,value:Xe,op:"a"})}appendAll(qe){const Xe=[];return Object.keys(qe).forEach(zt=>{const Qt=qe[zt];Array.isArray(Qt)?Qt.forEach(jn=>{Xe.push({param:zt,value:jn,op:"a"})}):Xe.push({param:zt,value:Qt,op:"a"})}),this.clone(Xe)}set(qe,Xe){return this.clone({param:qe,value:Xe,op:"s"})}delete(qe,Xe){return this.clone({param:qe,value:Xe,op:"d"})}toString(){return this.init(),this.keys().map(qe=>{const Xe=this.encoder.encodeKey(qe);return this.map.get(qe).map(zt=>Xe+"="+this.encoder.encodeValue(zt)).join("&")}).filter(qe=>""!==qe).join("&")}clone(qe){const Xe=new Je({encoder:this.encoder});return Xe.cloneFrom=this.cloneFrom||this,Xe.updates=(this.updates||[]).concat(qe),Xe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(qe=>this.map.set(qe,this.cloneFrom.map.get(qe))),this.updates.forEach(qe=>{switch(qe.op){case"a":case"s":const Xe=("a"===qe.op?this.map.get(qe.param):void 0)||[];Xe.push(Se(qe.value)),this.map.set(qe.param,Xe);break;case"d":if(void 0===qe.value){this.map.delete(qe.param);break}{let zt=this.map.get(qe.param)||[];const Qt=zt.indexOf(Se(qe.value));-1!==Qt&&zt.splice(Qt,1),zt.length>0?this.map.set(qe.param,zt):this.map.delete(qe.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set(qe,Xe){return this.map.set(qe,Xe),this}get(qe){return this.map.has(qe)||this.map.set(qe,qe.defaultValue()),this.map.get(qe)}delete(qe){return this.map.delete(qe),this}keys(){return this.map.keys()}}function $t(Pt){return"undefined"!=typeof ArrayBuffer&&Pt instanceof ArrayBuffer}function Tt(Pt){return"undefined"!=typeof Blob&&Pt instanceof Blob}function Ct(Pt){return"undefined"!=typeof FormData&&Pt instanceof FormData}class Kt{constructor(qe,Xe,zt,Qt){let jn;if(this.url=Xe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=qe.toUpperCase(),function(Pt){switch(Pt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Qt?(this.body=void 0!==zt?zt:null,jn=Qt):jn=zt,jn&&(this.reportProgress=!!jn.reportProgress,this.withCredentials=!!jn.withCredentials,jn.responseType&&(this.responseType=jn.responseType),jn.headers&&(this.headers=jn.headers),jn.context&&(this.context=jn.context),jn.params&&(this.params=jn.params)),this.headers||(this.headers=new ie),this.context||(this.context=new yt),this.params){const Wt=this.params.toString();if(0===Wt.length)this.urlWithParams=Xe;else{const On=Xe.indexOf("?");this.urlWithParams=Xe+(-1===On?"?":On<Xe.length-1?"&":"")+Wt}}else this.params=new Je,this.urlWithParams=Xe}serializeBody(){return null===this.body?null:$t(this.body)||Tt(this.body)||Ct(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Je?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ct(this.body)?null:Tt(this.body)?this.body.type||null:$t(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Je?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(qe={}){var Xe;const zt=qe.method||this.method,Qt=qe.url||this.url,jn=qe.responseType||this.responseType,Wt=void 0!==qe.body?qe.body:this.body,On=void 0!==qe.withCredentials?qe.withCredentials:this.withCredentials,fn=void 0!==qe.reportProgress?qe.reportProgress:this.reportProgress;let Rr=qe.headers||this.headers,Vi=qe.params||this.params;const ao=null!==(Xe=qe.context)&&void 0!==Xe?Xe:this.context;return void 0!==qe.setHeaders&&(Rr=Object.keys(qe.setHeaders).reduce((Tr,Nn)=>Tr.set(Nn,qe.setHeaders[Nn]),Rr)),qe.setParams&&(Vi=Object.keys(qe.setParams).reduce((Tr,Nn)=>Tr.set(Nn,qe.setParams[Nn]),Vi)),new Kt(zt,Qt,Wt,{params:Vi,headers:Rr,context:ao,reportProgress:fn,responseType:jn,withCredentials:On})}}var xt=(()=>((xt=xt||{})[xt.Sent=0]="Sent",xt[xt.UploadProgress=1]="UploadProgress",xt[xt.ResponseHeader=2]="ResponseHeader",xt[xt.DownloadProgress=3]="DownloadProgress",xt[xt.Response=4]="Response",xt[xt.User=5]="User",xt))();class Xt extends class{constructor(qe,Xe=200,zt="OK"){this.headers=qe.headers||new ie,this.status=void 0!==qe.status?qe.status:Xe,this.statusText=qe.statusText||zt,this.url=qe.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(qe={}){super(qe),this.type=xt.Response,this.body=void 0!==qe.body?qe.body:null}clone(qe={}){return new Xt({body:void 0!==qe.body?qe.body:this.body,headers:qe.headers||this.headers,status:void 0!==qe.status?qe.status:this.status,statusText:qe.statusText||this.statusText,url:qe.url||this.url||void 0})}}function cn(Pt,qe){return{body:qe,headers:Pt.headers,context:Pt.context,observe:Pt.observe,params:Pt.params,reportProgress:Pt.reportProgress,responseType:Pt.responseType,withCredentials:Pt.withCredentials}}let mn=(()=>{class Pt{constructor(Xe){this.handler=Xe}request(Xe,zt,Qt={}){let jn;if(Xe instanceof Kt)jn=Xe;else{let fn,Rr;fn=Qt.headers instanceof ie?Qt.headers:new ie(Qt.headers),Qt.params&&(Rr=Qt.params instanceof Je?Qt.params:new Je({fromObject:Qt.params})),jn=new Kt(Xe,zt,void 0!==Qt.body?Qt.body:null,{headers:fn,context:Qt.context,params:Rr,reportProgress:Qt.reportProgress,responseType:Qt.responseType||"json",withCredentials:Qt.withCredentials})}const Wt=(0,l.of)(jn).pipe((0,de.b)(fn=>this.handler.handle(fn)));if(Xe instanceof Kt||"events"===Qt.observe)return Wt;const On=Wt.pipe((0,_e.h)(fn=>fn instanceof Xt));switch(Qt.observe||"body"){case"body":switch(jn.responseType){case"arraybuffer":return On.pipe((0,se.U)(fn=>{if(null!==fn.body&&!(fn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return fn.body}));case"blob":return On.pipe((0,se.U)(fn=>{if(null!==fn.body&&!(fn.body instanceof Blob))throw new Error("Response is not a Blob.");return fn.body}));case"text":return On.pipe((0,se.U)(fn=>{if(null!==fn.body&&"string"!=typeof fn.body)throw new Error("Response is not a string.");return fn.body}));default:return On.pipe((0,se.U)(fn=>fn.body))}case"response":return On;default:throw new Error(`Unreachable: unhandled observe type ${Qt.observe}}`)}}delete(Xe,zt={}){return this.request("DELETE",Xe,zt)}get(Xe,zt={}){return this.request("GET",Xe,zt)}head(Xe,zt={}){return this.request("HEAD",Xe,zt)}jsonp(Xe,zt){return this.request("JSONP",Xe,{params:(new Je).append(zt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Xe,zt={}){return this.request("OPTIONS",Xe,zt)}patch(Xe,zt,Qt={}){return this.request("PATCH",Xe,cn(Qt,zt))}post(Xe,zt,Qt={}){return this.request("POST",Xe,cn(Qt,zt))}put(Xe,zt,Qt={}){return this.request("PUT",Xe,cn(Qt,zt))}}return Pt.\u0275fac=function(Xe){return new(Xe||Pt)(O.\u0275\u0275inject(he))},Pt.\u0275prov=O.\u0275\u0275defineInjectable({token:Pt,factory:Pt.\u0275fac}),Pt})(),Hr=class{get isFileSaverSupported(){try{return!!new Blob}catch(qe){return!1}}genType(qe){if(!qe||-1===qe.lastIndexOf("."))return"text/plain";const Xe=qe.substr(qe.lastIndexOf(".")+1);switch(Xe){case"txt":return"text/plain";case"xml":case"html":return`text/${Xe}`;case"json":return"octet/stream";default:return`application/${Xe}`}}save(qe,Xe,zt,Qt){if(!qe)throw new Error("Data argument should be a blob instance");const jn=new Blob([qe],{type:zt||qe.type||this.genType(Xe)});(0,d.saveAs)(jn,decodeURI(Xe||"download"),Qt)}saveText(qe,Xe,zt){const Qt=new Blob([qe]);this.save(Qt,Xe,null,zt)}};Hr.\u0275fac=function(qe){return new(qe||Hr)},Hr.\u0275prov=O.\u0275\u0275defineInjectable({token:Hr,factory:function(Pt){return Hr.\u0275fac(Pt)},providedIn:"root"}),Hr.ngInjectableDef=(0,O.\u0275\u0275defineInjectable)({factory:function(){return new Hr},token:Hr,providedIn:"root"});var Gr=function(Pt,qe,Xe,zt){var Wt,Qt=arguments.length,jn=Qt<3?qe:null===zt?zt=Object.getOwnPropertyDescriptor(qe,Xe):zt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)jn=Reflect.decorate(Pt,qe,Xe,zt);else for(var On=Pt.length-1;On>=0;On--)(Wt=Pt[On])&&(jn=(Qt<3?Wt(jn):Qt>3?Wt(qe,Xe,jn):Wt(qe,Xe))||jn);return Qt>3&&jn&&Object.defineProperty(qe,Xe,jn),jn},Er=function(Pt,qe){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Pt,qe)};let Cr=(()=>{let Pt=class{constructor(Xe,zt,Qt){this.el=Xe,this.fss=zt,this.httpClient=Qt,this.method="GET",this.success=new O.EventEmitter,this.error=new O.EventEmitter,zt.isFileSaverSupported||Xe.nativeElement.classList.add("filesaver__not-support")}getName(Xe){return decodeURI(this.fileName||Xe.headers.get("filename")||Xe.headers.get("x-filename"))}_click(){if(!this.fss.isFileSaverSupported)return;let Xe=this.http;if(!Xe){const zt=new Je,Qt=this.query||{};for(const jn in Qt)zt.set(jn,Qt[jn]);Xe=this.httpClient.request(this.method,this.url,{observe:"response",responseType:"blob",headers:this.header,params:zt})}this.setDisabled(!0),Xe.subscribe(zt=>{200!==zt.status||zt.body.size<=0?this.error.emit(zt):(this.fss.save(zt.body,this.getName(zt),null,this.fsOptions),this.success.emit(zt))},zt=>this.error.emit(zt),()=>this.setDisabled(!1))}setDisabled(Xe){const zt=this.el.nativeElement;zt.disabled=Xe,zt.classList[Xe?"add":"remove"]("filesaver__disabled")}};return Pt.\u0275fac=function(Xe){return new(Xe||Pt)(O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(Hr),O.\u0275\u0275directiveInject(mn))},Pt.\u0275dir=O.\u0275\u0275defineDirective({type:Pt,selectors:[["","fileSaver",""]],hostBindings:function(Xe,zt){1&Xe&&O.\u0275\u0275listener("click",function(){return zt._click()})},inputs:{method:"method",http:"http",query:"query",header:"header",url:"url",fileName:"fileName",fsOptions:"fsOptions"},outputs:{success:"success",error:"error"},exportAs:["fileSaver"]}),Pt})();Gr([(0,O.Input)(),Er("design:type",Object)],Cr.prototype,"method",void 0),Gr([(0,O.Input)(),Er("design:type",J.y)],Cr.prototype,"http",void 0),Gr([(0,O.Input)(),Er("design:type",Object)],Cr.prototype,"query",void 0),Gr([(0,O.Input)(),Er("design:type",Object)],Cr.prototype,"header",void 0),Gr([(0,O.Input)(),Er("design:type",String)],Cr.prototype,"url",void 0),Gr([(0,O.Input)(),Er("design:type",String)],Cr.prototype,"fileName",void 0),Gr([(0,O.Input)(),Er("design:type",Object)],Cr.prototype,"fsOptions",void 0),Gr([(0,O.Output)(),Er("design:type",Object)],Cr.prototype,"success",void 0),Gr([(0,O.Output)(),Er("design:type",Object)],Cr.prototype,"error",void 0),Gr([(0,O.HostListener)("click"),Er("design:type",Function),Er("design:paramtypes",[]),Er("design:returntype",void 0)],Cr.prototype,"_click",null),Cr=Gr([Er("design:paramtypes",[O.ElementRef,Hr,mn])],Cr);let ir=(()=>{let Pt=class{};return Pt.\u0275fac=function(Xe){return new(Xe||Pt)},Pt.\u0275mod=O.\u0275\u0275defineNgModule({type:Pt}),Pt.\u0275inj=O.\u0275\u0275defineInjector({}),Pt})()},629:(me,we,v)=>{"use strict";var d=v(2803);we.ey=d.Lightbox,v(6719);v(930);var J=v(8741);we.QM=J.LightboxModule},6719:function(me,we,v){"use strict";var O=v(3018),d=this&&this.__decorate||function(de,_e,se,he){var fe,ce=arguments.length,ie=ce<3?_e:null===he?he=Object.getOwnPropertyDescriptor(_e,se):he;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ie=Reflect.decorate(de,_e,se,he);else for(var be=de.length-1;be>=0;be--)(fe=de[be])&&(ie=(ce<3?fe(ie):ce>3?fe(_e,se,ie):fe(_e,se))||ie);return ce>3&&ie&&Object.defineProperty(_e,se,ie),ie},te=this&&this.__metadata||function(de,_e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(de,_e)};Object.defineProperty(we,"__esModule",{value:!0}),v(3018);var J=function(){function de(){this.fadeDuration=.7,this.resizeDuration=.5,this.fitImageInViewPort=!0,this.positionFromTop=20,this.showImageNumberLabel=!1,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1,this.disableKeyboardNav=!1,this.disableScrolling=!1,this.centerVertically=!1,this.enableTransition=!0,this.albumLabel="Image %1 of %2",this.showZoom=!1,this.showRotate=!1,this.containerElementResolver=function(_e){return _e.querySelector("body")}}return(de=d([te("design:paramtypes",[])],de)).\u0275fac=function(se){return new(se||de)},de.\u0275prov=O.\u0275\u0275defineInjectable({token:de,factory:function(_e){return de.\u0275fac(_e)}}),de}();we.LightboxConfig=J},930:function(me,we,v){"use strict";var O=v(3018),d=this&&this.__decorate||function(he,ce,ie,fe){var Fe,be=arguments.length,xe=be<3?ce:null===fe?fe=Object.getOwnPropertyDescriptor(ce,ie):fe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)xe=Reflect.decorate(he,ce,ie,fe);else for(var Ye=he.length-1;Ye>=0;Ye--)(Fe=he[Ye])&&(xe=(be<3?Fe(xe):be>3?Fe(ce,ie,xe):Fe(ce,ie))||xe);return be>3&&xe&&Object.defineProperty(ce,ie,xe),xe},te=this&&this.__metadata||function(he,ce){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(he,ce)};Object.defineProperty(we,"__esModule",{value:!0});var l=v(9185);v(3018),we.LIGHTBOX_EVENT={CHANGE_PAGE:1,CLOSE:2,OPEN:3,ZOOM_IN:4,ZOOM_OUT:5,ROTATE_LEFT:6,ROTATE_RIGHT:7};var de=function(){function he(){this._lightboxEventSource=new l.Subject,this.lightboxEvent$=this._lightboxEventSource.asObservable()}return he.prototype.broadcastLightboxEvent=function(ce){this._lightboxEventSource.next(ce)},(he=d([te("design:paramtypes",[])],he)).\u0275fac=function(ie){return new(ie||he)},he.\u0275prov=O.\u0275\u0275defineInjectable({token:he,factory:function(ce){return he.\u0275fac(ce)}}),he}();we.LightboxEvent=de;var se=function(){function he(){}return Object.defineProperty(he.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),he.\u0275fac=function(ie){return new(ie||he)},he.\u0275prov=O.\u0275\u0275defineInjectable({token:he,factory:function(ce){return he.\u0275fac(ce)}}),he}();we.LightboxWindowRef=se},4113:function(me,we,v){"use strict";var O=v(3018),d=v(930),te=["lb-overlay",""],l=this&&this.__decorate||function(ie,fe,be,xe){var Se,Fe=arguments.length,Ye=Fe<3?fe:null===xe?xe=Object.getOwnPropertyDescriptor(fe,be):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ye=Reflect.decorate(ie,fe,be,xe);else for(var Je=ie.length-1;Je>=0;Je--)(Se=ie[Je])&&(Ye=(Fe<3?Se(Ye):Fe>3?Se(fe,be,Ye):Se(fe,be))||Ye);return Fe>3&&Ye&&Object.defineProperty(fe,be,Ye),Ye},J=this&&this.__metadata||function(ie,fe){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ie,fe)},de=this&&this.__param||function(ie,fe){return function(be,xe){fe(be,xe,ie)}};Object.defineProperty(we,"__esModule",{value:!0});var _e=v(8583),se=v(3018),he=v(930),ce=function(){function ie(fe,be,xe,Fe){var Ye=this;this._elemRef=fe,this._rendererRef=be,this._lightboxEvent=xe,this._documentRef=Fe,this.classList="lightboxOverlay animation fadeInOverlay",this._subscription=this._lightboxEvent.lightboxEvent$.subscribe(function(Se){return Ye._onReceivedEvent(Se)})}return ie.prototype.close=function(){this._lightboxEvent.broadcastLightboxEvent({id:he.LIGHTBOX_EVENT.CLOSE,data:null})},ie.prototype.ngAfterViewInit=function(){var fe=this.options.fadeDuration;this._rendererRef.setStyle(this._elemRef.nativeElement,"-webkit-animation-duration",fe+"s"),this._rendererRef.setStyle(this._elemRef.nativeElement,"animation-duration",fe+"s"),this._sizeOverlay()},ie.prototype.onResize=function(){this._sizeOverlay()},ie.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},ie.prototype._sizeOverlay=function(){var fe=this._getOverlayWidth(),be=this._getOverlayHeight();this._rendererRef.setStyle(this._elemRef.nativeElement,"width",fe+"px"),this._rendererRef.setStyle(this._elemRef.nativeElement,"height",be+"px")},ie.prototype._onReceivedEvent=function(fe){fe.id===he.LIGHTBOX_EVENT.CLOSE&&this._end()},ie.prototype._end=function(){var fe=this;this.classList="lightboxOverlay animation fadeOutOverlay",setTimeout(function(){fe.cmpRef.destroy()},1e3*this.options.fadeDuration)},ie.prototype._getOverlayWidth=function(){return Math.max(this._documentRef.body.scrollWidth,this._documentRef.body.offsetWidth,this._documentRef.documentElement.clientWidth,this._documentRef.documentElement.scrollWidth,this._documentRef.documentElement.offsetWidth)},ie.prototype._getOverlayHeight=function(){return Math.max(this._documentRef.body.scrollHeight,this._documentRef.body.offsetHeight,this._documentRef.documentElement.clientHeight,this._documentRef.documentElement.scrollHeight,this._documentRef.documentElement.offsetHeight)},l([se.Input(),J("design:type",Object)],ie.prototype,"options",void 0),l([se.Input(),J("design:type",Object)],ie.prototype,"cmpRef",void 0),l([se.HostListener("click"),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",void 0)],ie.prototype,"close",null),l([se.HostListener("window:resize"),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",void 0)],ie.prototype,"onResize",null),(ie=l([de(3,se.Inject(_e.DOCUMENT)),J("design:paramtypes",[se.ElementRef,se.Renderer2,he.LightboxEvent,Object])],ie)).\u0275fac=function(be){return new(be||ie)(O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(O.Renderer2),O.\u0275\u0275directiveInject(d.LightboxEvent),O.\u0275\u0275directiveInject(_e.DOCUMENT))},ie.\u0275cmp=O.\u0275\u0275defineComponent({type:ie,selectors:[["","lb-overlay",""]],hostVars:2,hostBindings:function(be,xe){1&be&&O.\u0275\u0275listener("click",function(){return xe.close()})("resize",function(){return xe.onResize()},!1,O.\u0275\u0275resolveWindow),2&be&&O.\u0275\u0275classMap(xe.classList)},inputs:{options:"options",cmpRef:"cmpRef"},attrs:te,decls:0,vars:0,template:function(be,xe){},encapsulation:2}),ie}();we.LightboxOverlayComponent=ce},7086:function(me,we,v){"use strict";var O=v(3018),d=v(930),te=v(6800),l=v(9075),J=["outerContainer"],de=["container"],_e=["leftArrow"],se=["rightArrow"],he=["navArrow"],ce=["dataContainer"],ie=["image"],fe=["caption"],be=["number"],xe=["lb-content",""],Fe=this&&this.__decorate||function(Ct,Bt,Kt,xt){var Xt,jt=arguments.length,Lt=jt<3?Bt:null===xt?xt=Object.getOwnPropertyDescriptor(Bt,Kt):xt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Lt=Reflect.decorate(Ct,Bt,Kt,xt);else for(var Zt=Ct.length-1;Zt>=0;Zt--)(Xt=Ct[Zt])&&(Lt=(jt<3?Xt(Lt):jt>3?Xt(Bt,Kt,Lt):Xt(Bt,Kt))||Lt);return jt>3&&Lt&&Object.defineProperty(Bt,Kt,Lt),Lt},Ye=this&&this.__metadata||function(Ct,Bt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Ct,Bt)},Se=this&&this.__param||function(Ct,Bt){return function(Kt,xt){Bt(Kt,xt,Ct)}};Object.defineProperty(we,"__esModule",{value:!0});var Je=v(6800),ht=v(8583),yt=v(3018),St=v(9075),$t=v(930),Tt=function(){function Ct(Bt,Kt,xt,jt,Lt,Xt,Zt,cn){var mn=this;this._elemRef=Bt,this._rendererRef=Kt,this._lightboxEvent=xt,this._lightboxElem=jt,this._lightboxWindowRef=Lt,this._fileSaverService=Xt,this._sanitizer=Zt,this._documentRef=cn,this.options=this.options||{},this.album=this.album||[],this.currentImageIndex=this.currentImageIndex||0,this._windowRef=this._lightboxWindowRef.nativeWindow,this.ui={showReloader:!0,showLeftArrow:!1,showRightArrow:!1,showArrowNav:!1,showZoomButton:!1,showRotateButton:!1,showPageNumber:!1,showCaption:!1,showDownloadButton:!1,classList:"lightbox animation fadeIn"},this.content={pageNumber:""},this._event={},this._lightboxElem=this._elemRef,this._event.subscription=this._lightboxEvent.lightboxEvent$.subscribe(function(Lr){return mn._onReceivedEvent(Lr)}),this.rotate=0}return Ct.prototype.ngOnInit=function(){var Bt=this;this.album.forEach(function(Kt){Kt.caption&&(Kt.caption=Bt._sanitizer.sanitize(yt.SecurityContext.HTML,Kt.caption))})},Ct.prototype.ngAfterViewInit=function(){this._cssValue={containerTopPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-top")),containerRightPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-right")),containerBottomPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-bottom")),containerLeftPadding:Math.round(this._getCssStyleValue(this._containerElem,"padding-left")),imageBorderWidthTop:Math.round(this._getCssStyleValue(this._imageElem,"border-top-width")),imageBorderWidthBottom:Math.round(this._getCssStyleValue(this._imageElem,"border-bottom-width")),imageBorderWidthLeft:Math.round(this._getCssStyleValue(this._imageElem,"border-left-width")),imageBorderWidthRight:Math.round(this._getCssStyleValue(this._imageElem,"border-right-width"))},this._validateInputData()&&(this._prepareComponent(),this._registerImageLoadingEvent())},Ct.prototype.ngOnDestroy=function(){this.options.disableKeyboardNav||this._disableKeyboardNav(),this._event.subscription.unsubscribe()},Ct.prototype.close=function(Bt){Bt.stopPropagation(),(Bt.target.classList.contains("lightbox")||Bt.target.classList.contains("lb-loader")||Bt.target.classList.contains("lb-close"))&&this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.CLOSE,data:null})},Ct.prototype.download=function(Bt){Bt.stopPropagation();var Kt=this.album[this.currentImageIndex].src,xt=this.album[this.currentImageIndex].downloadUrl,jt=Kt.split("/"),Lt=jt[jt.length-1],Xt=document.createElement("canvas"),Zt=Xt.getContext("2d"),cn=new Image,mn=this;cn.onload=function(){Xt.width=this.naturalWidth,Xt.height=this.naturalHeight,Zt.drawImage(this,0,0),Xt.toBlob(function(Lr){mn._fileSaverService.save(Lr,Lt)},"image/jpeg",.75)},cn.crossOrigin="",cn.src=this._sanitizer.sanitize(yt.SecurityContext.URL,xt&&xt.length>0?xt:Kt)},Ct.prototype.control=function(Bt){var Kt,xt;Bt.stopPropagation(),Bt.target.classList.contains("lb-turnLeft")?(this.rotate=this.rotate-90,this._rotateContainer(),this._calcTransformPoint(),this._documentRef.getElementById("image").style.transform="rotate("+this.rotate+"deg)",this._documentRef.getElementById("image").style.webkitTransform="rotate("+this.rotate+"deg)",this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.ROTATE_LEFT,data:null})):Bt.target.classList.contains("lb-turnRight")?(this.rotate=this.rotate+90,this._rotateContainer(),this._calcTransformPoint(),this._documentRef.getElementById("image").style.transform="rotate("+this.rotate+"deg)",this._documentRef.getElementById("image").style.webkitTransform="rotate("+this.rotate+"deg)",this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.ROTATE_RIGHT,data:null})):Bt.target.classList.contains("lb-zoomOut")?(Kt=parseInt(this._documentRef.getElementById("outerContainer").style.height,10)/1.5,xt=parseInt(this._documentRef.getElementById("outerContainer").style.width,10)/1.5,this._documentRef.getElementById("outerContainer").style.height=Kt+"px",this._documentRef.getElementById("outerContainer").style.width=xt+"px",Kt=parseInt(this._documentRef.getElementById("image").style.height,10)/1.5,xt=parseInt(this._documentRef.getElementById("image").style.width,10)/1.5,this._documentRef.getElementById("image").style.height=Kt+"px",this._documentRef.getElementById("image").style.width=xt+"px",this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.ZOOM_OUT,data:null})):Bt.target.classList.contains("lb-zoomIn")&&(Kt=1.5*parseInt(this._documentRef.getElementById("outerContainer").style.height,10),xt=1.5*parseInt(this._documentRef.getElementById("outerContainer").style.width,10),this._documentRef.getElementById("outerContainer").style.height=Kt+"px",this._documentRef.getElementById("outerContainer").style.width=xt+"px",Kt=1.5*parseInt(this._documentRef.getElementById("image").style.height,10),xt=1.5*parseInt(this._documentRef.getElementById("image").style.width,10),this._documentRef.getElementById("image").style.height=Kt+"px",this._documentRef.getElementById("image").style.width=xt+"px",this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.ZOOM_IN,data:null}))},Ct.prototype._rotateContainer=function(){var Bt=this.rotate;Bt<0&&(Bt*=-1),Bt/90%4==1||Bt/90%4==3?(this._documentRef.getElementById("outerContainer").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("outerContainer").style.width=this._documentRef.getElementById("image").style.height,this._documentRef.getElementById("container").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.width=this._documentRef.getElementById("image").style.height):(this._documentRef.getElementById("outerContainer").style.height=this._documentRef.getElementById("image").style.height,this._documentRef.getElementById("outerContainer").style.width=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.height=this._documentRef.getElementById("image").style.width,this._documentRef.getElementById("container").style.width=this._documentRef.getElementById("image").style.height)},Ct.prototype._resetImage=function(){this.rotate=0,this._documentRef.getElementById("image").style.transform="rotate("+this.rotate+"deg)",this._documentRef.getElementById("image").style.webkitTransform="rotate("+this.rotate+"deg)"},Ct.prototype._calcTransformPoint=function(){var Bt=parseInt(this._documentRef.getElementById("image").style.height,10),Kt=parseInt(this._documentRef.getElementById("image").style.width,10),xt=this.rotate%360;xt<0&&(xt=360+xt),90===xt?this._documentRef.getElementById("image").style.transformOrigin=Bt/2+"px "+Bt/2+"px":180===xt?this._documentRef.getElementById("image").style.transformOrigin=Kt/2+"px "+Bt/2+"px":270===xt&&(this._documentRef.getElementById("image").style.transformOrigin=Kt/2+"px "+Kt/2+"px")},Ct.prototype.nextImage=function(){1!==this.album.length&&this._changeImage(this.currentImageIndex===this.album.length-1?0:this.currentImageIndex+1)},Ct.prototype.prevImage=function(){1!==this.album.length&&this._changeImage(0===this.currentImageIndex&&this.album.length>1?this.album.length-1:this.currentImageIndex-1)},Ct.prototype._validateInputData=function(){if(!(this.album&&this.album instanceof Array&&this.album.length>0))throw new Error("No album data or album data is not correct in type");for(var Bt=0;Bt<this.album.length;Bt++)if(!this.album[Bt].src)throw new Error("One of the album data does not have source data");if(isNaN(this.currentImageIndex))throw new Error("Current image index is not a number");return this.currentImageIndex=Number(this.currentImageIndex),!0},Ct.prototype._registerImageLoadingEvent=function(){var Bt=this,Kt=new Image;Kt.onload=function(){Bt._onLoadImageSuccess()},Kt.src=this._sanitizer.sanitize(yt.SecurityContext.URL,this.album[this.currentImageIndex].src)},Ct.prototype._onLoadImageSuccess=function(){var Bt,Kt,xt,jt,Zt,cn;this.options.disableKeyboardNav||this._disableKeyboardNav(),Kt=Zt=this._imageElem.nativeElement.naturalWidth,Bt=cn=this._imageElem.nativeElement.naturalHeight,this.options.fitImageInViewPort&&(xt=this._windowRef.innerHeight-this._cssValue.containerTopPadding-this._cssValue.containerTopPadding-this._cssValue.imageBorderWidthTop-this._cssValue.imageBorderWidthBottom-120,(Zt>(jt=this._windowRef.innerWidth-this._cssValue.containerLeftPadding-this._cssValue.containerRightPadding-this._cssValue.imageBorderWidthLeft-this._cssValue.imageBorderWidthRight-20)||cn>xt)&&(Zt/jt>cn/xt?(Kt=jt,Bt=Math.round(cn/(Zt/Kt))):(Bt=xt,Kt=Math.round(Zt/(cn/Bt)))),this._rendererRef.setStyle(this._imageElem.nativeElement,"width",Kt+"px"),this._rendererRef.setStyle(this._imageElem.nativeElement,"height",Bt+"px")),this._sizeContainer(Kt,Bt),this.options.centerVertically&&this._centerVertically(Kt,Bt)},Ct.prototype._centerVertically=function(Bt,Kt){this._rendererRef.setStyle(this._lightboxElem.nativeElement,"top",this._documentRef.documentElement.scrollTop+(this._windowRef.innerHeight/2-Kt/2)+"px")},Ct.prototype._sizeContainer=function(Bt,Kt){var xt=this,Lt=this._outerContainerElem.nativeElement.offsetHeight,Xt=Bt+this._cssValue.containerRightPadding+this._cssValue.containerLeftPadding+this._cssValue.imageBorderWidthLeft+this._cssValue.imageBorderWidthRight,Zt=Kt+this._cssValue.containerTopPadding+this._cssValue.containerBottomPadding+this._cssValue.imageBorderWidthTop+this._cssValue.imageBorderWidthBottom;Math.abs(this._outerContainerElem.nativeElement.offsetWidth-Xt)+Math.abs(Lt-Zt)>5?(this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"width",Xt+"px"),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"height",Zt+"px"),this.options.enableTransition?(this._event.transitions=[],["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"].forEach(function(cn){xt._event.transitions.push(xt._rendererRef.listen(xt._outerContainerElem.nativeElement,cn,function(mn){mn.target===mn.currentTarget&&xt._postResize(Xt,Zt)}))})):this._postResize(Xt,Zt)):this._postResize(Xt,Zt)},Ct.prototype._postResize=function(Bt,Kt){Array.isArray(this._event.transitions)&&(this._event.transitions.forEach(function(xt){xt()}),this._event.transitions=[]),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"width",Bt+"px"),this._showImage()},Ct.prototype._showImage=function(){this.ui.showReloader=!1,this._updateNav(),this._updateDetails(),this.options.disableKeyboardNav||this._enableKeyboardNav()},Ct.prototype._prepareComponent=function(){var Bt=this;this._addCssAnimation(),this._positionLightBox(),setTimeout(function(){Bt.ui.showZoomButton=Bt.options.showZoom,Bt.ui.showRotateButton=Bt.options.showRotate,Bt.ui.showDownloadButton=Bt.options.showDownloadButton},0)},Ct.prototype._positionLightBox=function(){var Kt=this._windowRef.pageXOffset||this._documentRef.documentElement.scrollLeft;this.options.centerVertically||this._rendererRef.setStyle(this._lightboxElem.nativeElement,"top",(this._windowRef.pageYOffset||this._documentRef.documentElement.scrollTop)+this.options.positionFromTop+"px"),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"left",Kt+"px"),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"display","block"),this.options.disableScrolling&&this._rendererRef.addClass(this._documentRef.documentElement,"lb-disable-scrolling")},Ct.prototype._addCssAnimation=function(){var Bt=this.options.resizeDuration,Kt=this.options.fadeDuration;this._rendererRef.setStyle(this._lightboxElem.nativeElement,"-webkit-animation-duration",Kt+"s"),this._rendererRef.setStyle(this._lightboxElem.nativeElement,"animation-duration",Kt+"s"),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"-webkit-transition-duration",Bt+"s"),this._rendererRef.setStyle(this._outerContainerElem.nativeElement,"transition-duration",Bt+"s"),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"-webkit-animation-duration",Kt+"s"),this._rendererRef.setStyle(this._dataContainerElem.nativeElement,"animation-duration",Kt+"s"),this._rendererRef.setStyle(this._imageElem.nativeElement,"-webkit-animation-duration",Kt+"s"),this._rendererRef.setStyle(this._imageElem.nativeElement,"animation-duration",Kt+"s"),this._rendererRef.setStyle(this._captionElem.nativeElement,"-webkit-animation-duration",Kt+"s"),this._rendererRef.setStyle(this._captionElem.nativeElement,"animation-duration",Kt+"s"),this._rendererRef.setStyle(this._numberElem.nativeElement,"-webkit-animation-duration",Kt+"s"),this._rendererRef.setStyle(this._numberElem.nativeElement,"animation-duration",Kt+"s")},Ct.prototype._end=function(){var Bt=this;this.ui.classList="lightbox animation fadeOut",this.options.disableScrolling&&this._rendererRef.removeClass(this._documentRef.documentElement,"lb-disable-scrolling"),setTimeout(function(){Bt.cmpRef.destroy()},1e3*this.options.fadeDuration)},Ct.prototype._updateDetails=function(){void 0!==this.album[this.currentImageIndex].caption&&""!==this.album[this.currentImageIndex].caption&&(this.ui.showCaption=!0),this.album.length>1&&this.options.showImageNumberLabel&&(this.ui.showPageNumber=!0,this.content.pageNumber=this._albumLabel())},Ct.prototype._albumLabel=function(){return this.options.albumLabel.replace(/%1/g,Number(this.currentImageIndex+1)).replace(/%2/g,this.album.length)},Ct.prototype._changeImage=function(Bt){this._resetImage(),this.currentImageIndex=Bt,this._hideImage(),this._registerImageLoadingEvent(),this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.CHANGE_PAGE,data:Bt})},Ct.prototype._hideImage=function(){this.ui.showReloader=!0,this.ui.showArrowNav=!1,this.ui.showLeftArrow=!1,this.ui.showRightArrow=!1,this.ui.showPageNumber=!1,this.ui.showCaption=!1},Ct.prototype._updateNav=function(){var Bt=!1;try{this._documentRef.createEvent("TouchEvent"),Bt=!!this.options.alwaysShowNavOnTouchDevices}catch(Kt){}this._showArrowNav(),this.album.length>1&&(this.options.wrapAround?(Bt&&(this._rendererRef.setStyle(this._leftArrowElem.nativeElement,"opacity","1"),this._rendererRef.setStyle(this._rightArrowElem.nativeElement,"opacity","1")),this._showLeftArrowNav(),this._showRightArrowNav()):(this.currentImageIndex>0&&(this._showLeftArrowNav(),Bt&&this._rendererRef.setStyle(this._leftArrowElem.nativeElement,"opacity","1")),this.currentImageIndex<this.album.length-1&&(this._showRightArrowNav(),Bt&&this._rendererRef.setStyle(this._rightArrowElem.nativeElement,"opacity","1"))))},Ct.prototype._showLeftArrowNav=function(){this.ui.showLeftArrow=!0},Ct.prototype._showRightArrowNav=function(){this.ui.showRightArrow=!0},Ct.prototype._showArrowNav=function(){this.ui.showArrowNav=1!==this.album.length},Ct.prototype._enableKeyboardNav=function(){var Bt=this;this._event.keyup=this._rendererRef.listen("document","keyup",function(Kt){Bt._keyboardAction(Kt)})},Ct.prototype._disableKeyboardNav=function(){this._event.keyup&&this._event.keyup()},Ct.prototype._keyboardAction=function(Bt){var Lt=Bt.keyCode,Xt=String.fromCharCode(Lt).toLowerCase();27===Lt||Xt.match(/x|o|c/)?this._lightboxEvent.broadcastLightboxEvent({id:$t.LIGHTBOX_EVENT.CLOSE,data:null}):"p"===Xt||37===Lt?0!==this.currentImageIndex?this._changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this._changeImage(this.album.length-1):("n"===Xt||39===Lt)&&(this.currentImageIndex!==this.album.length-1?this._changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this._changeImage(0))},Ct.prototype._getCssStyleValue=function(Bt,Kt){return parseFloat(this._windowRef.getComputedStyle(Bt.nativeElement,null).getPropertyValue(Kt))},Ct.prototype._onReceivedEvent=function(Bt){Bt.id===$t.LIGHTBOX_EVENT.CLOSE&&this._end()},Fe([yt.Input(),Ye("design:type",Array)],Ct.prototype,"album",void 0),Fe([yt.Input(),Ye("design:type",Number)],Ct.prototype,"currentImageIndex",void 0),Fe([yt.Input(),Ye("design:type",Object)],Ct.prototype,"options",void 0),Fe([yt.Input(),Ye("design:type",Object)],Ct.prototype,"cmpRef",void 0),Fe([yt.ViewChild("outerContainer",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_outerContainerElem",void 0),Fe([yt.ViewChild("container",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_containerElem",void 0),Fe([yt.ViewChild("leftArrow",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_leftArrowElem",void 0),Fe([yt.ViewChild("rightArrow",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_rightArrowElem",void 0),Fe([yt.ViewChild("navArrow",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_navArrowElem",void 0),Fe([yt.ViewChild("dataContainer",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_dataContainerElem",void 0),Fe([yt.ViewChild("image",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_imageElem",void 0),Fe([yt.ViewChild("caption",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_captionElem",void 0),Fe([yt.ViewChild("number",{static:!1}),Ye("design:type",yt.ElementRef)],Ct.prototype,"_numberElem",void 0),(Ct=Fe([Se(7,yt.Inject(ht.DOCUMENT)),Ye("design:paramtypes",[yt.ElementRef,yt.Renderer2,$t.LightboxEvent,yt.ElementRef,$t.LightboxWindowRef,Je.FileSaverService,St.DomSanitizer,Object])],Ct)).\u0275fac=function(Kt){return new(Kt||Ct)(O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(O.Renderer2),O.\u0275\u0275directiveInject(d.LightboxEvent),O.\u0275\u0275directiveInject(O.ElementRef),O.\u0275\u0275directiveInject(d.LightboxWindowRef),O.\u0275\u0275directiveInject(te.FileSaverService),O.\u0275\u0275directiveInject(l.DomSanitizer),O.\u0275\u0275directiveInject(ht.DOCUMENT))},Ct.\u0275cmp=O.\u0275\u0275defineComponent({type:Ct,selectors:[["","lb-content",""]],viewQuery:function(Kt,xt){var jt;1&Kt&&(O.\u0275\u0275viewQuery(J,5),O.\u0275\u0275viewQuery(de,5),O.\u0275\u0275viewQuery(_e,5),O.\u0275\u0275viewQuery(se,5),O.\u0275\u0275viewQuery(he,5),O.\u0275\u0275viewQuery(ce,5),O.\u0275\u0275viewQuery(ie,5),O.\u0275\u0275viewQuery(fe,5),O.\u0275\u0275viewQuery(be,5)),2&Kt&&(O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._outerContainerElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._containerElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._leftArrowElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._rightArrowElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._navArrowElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._dataContainerElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._imageElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._captionElem=jt.first),O.\u0275\u0275queryRefresh(jt=O.\u0275\u0275loadQuery())&&(xt._numberElem=jt.first))},hostVars:2,hostBindings:function(Kt,xt){1&Kt&&O.\u0275\u0275listener("click",function(Lt){return xt.close(Lt)}),2&Kt&&O.\u0275\u0275classMap(xt.ui.classList)},inputs:{options:"options",album:"album",currentImageIndex:"currentImageIndex",cmpRef:"cmpRef"},attrs:xe,decls:34,vars:14,consts:[["id","outerContainer",1,"lb-outerContainer","transition"],["outerContainer",""],["id","container",1,"lb-container"],["container",""],["id","image",1,"lb-image","animation","fadeIn",3,"src","hidden"],["image",""],[1,"lb-nav",3,"hidden"],["navArrow",""],[1,"lb-prev",3,"hidden","click"],["leftArrow",""],[1,"lb-next",3,"hidden","click"],["rightArrow",""],[1,"lb-loader",3,"hidden","click"],[1,"lb-cancel"],[1,"lb-dataContainer",3,"hidden"],["dataContainer",""],[1,"lb-data"],[1,"lb-details"],[1,"lb-caption","animation","fadeIn",3,"hidden","innerHtml"],["caption",""],[1,"lb-number","animation","fadeIn",3,"hidden"],["number",""],[1,"lb-controlContainer"],[1,"lb-closeContainer"],[1,"lb-close",3,"click"],[1,"lb-downloadContainer",3,"hidden"],[1,"lb-download",3,"click"],[1,"lb-turnContainer",3,"hidden"],[1,"lb-turnLeft",3,"click"],[1,"lb-turnRight",3,"click"],[1,"lb-zoomContainer",3,"hidden"],[1,"lb-zoomOut",3,"click"],[1,"lb-zoomIn",3,"click"]],template:function(Kt,xt){1&Kt&&(O.\u0275\u0275elementStart(0,"div",0,1),O.\u0275\u0275elementStart(2,"div",2,3),O.\u0275\u0275element(4,"img",4,5),O.\u0275\u0275elementStart(6,"div",6,7),O.\u0275\u0275elementStart(8,"a",8,9),O.\u0275\u0275listener("click",function(){return xt.prevImage()}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(10,"a",10,11),O.\u0275\u0275listener("click",function(){return xt.nextImage()}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(12,"div",12),O.\u0275\u0275listener("click",function(Lt){return xt.close(Lt)}),O.\u0275\u0275element(13,"a",13),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(14,"div",14,15),O.\u0275\u0275elementStart(16,"div",16),O.\u0275\u0275elementStart(17,"div",17),O.\u0275\u0275element(18,"span",18,19),O.\u0275\u0275elementStart(20,"span",20,21),O.\u0275\u0275text(22),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(23,"div",22),O.\u0275\u0275elementStart(24,"div",23),O.\u0275\u0275elementStart(25,"a",24),O.\u0275\u0275listener("click",function(Lt){return xt.close(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(26,"div",25),O.\u0275\u0275elementStart(27,"a",26),O.\u0275\u0275listener("click",function(Lt){return xt.download(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(28,"div",27),O.\u0275\u0275elementStart(29,"a",28),O.\u0275\u0275listener("click",function(Lt){return xt.control(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(30,"a",29),O.\u0275\u0275listener("click",function(Lt){return xt.control(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(31,"div",30),O.\u0275\u0275elementStart(32,"a",31),O.\u0275\u0275listener("click",function(Lt){return xt.control(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(33,"a",32),O.\u0275\u0275listener("click",function(Lt){return xt.control(Lt)}),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementEnd()),2&Kt&&(O.\u0275\u0275advance(4),O.\u0275\u0275property("src",xt.album[xt.currentImageIndex].src,O.\u0275\u0275sanitizeUrl)("hidden",xt.ui.showReloader),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showArrowNav),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showLeftArrow),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showRightArrow),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showReloader),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",xt.ui.showReloader),O.\u0275\u0275advance(4),O.\u0275\u0275property("hidden",!xt.ui.showCaption)("innerHtml",xt.album[xt.currentImageIndex].caption,O.\u0275\u0275sanitizeHtml),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showPageNumber),O.\u0275\u0275advance(2),O.\u0275\u0275textInterpolate(xt.content.pageNumber),O.\u0275\u0275advance(4),O.\u0275\u0275property("hidden",!xt.ui.showDownloadButton),O.\u0275\u0275advance(2),O.\u0275\u0275property("hidden",!xt.ui.showRotateButton),O.\u0275\u0275advance(3),O.\u0275\u0275property("hidden",!xt.ui.showZoomButton))},encapsulation:2}),Ct}();we.LightboxComponent=Tt},8741:function(me,we,v){"use strict";var O=v(3018);v(4113),v(7086),v(6800),Object.defineProperty(we,"__esModule",{value:!0});var de=v(6800),se=(v(3018),v(6719)),he=v(930),fe=(v(4113),v(7086),v(2803)),be=function(){function xe(){}return xe.\u0275fac=function(Ye){return new(Ye||xe)},xe.\u0275mod=O.\u0275\u0275defineNgModule({type:xe}),xe.\u0275inj=O.\u0275\u0275defineInjector({providers:[fe.Lightbox,se.LightboxConfig,he.LightboxEvent,he.LightboxWindowRef],imports:[[de.FileSaverModule]]}),xe}();we.LightboxModule=be},2803:function(me,we,v){"use strict";var O=v(3018),d=v(6719),te=v(930),l=this&&this.__decorate||function(xe,Fe,Ye,Se){var yt,Je=arguments.length,ht=Je<3?Fe:null===Se?Se=Object.getOwnPropertyDescriptor(Fe,Ye):Se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ht=Reflect.decorate(xe,Fe,Ye,Se);else for(var St=xe.length-1;St>=0;St--)(yt=xe[St])&&(ht=(Je<3?yt(ht):Je>3?yt(Fe,Ye,ht):yt(Fe,Ye))||ht);return Je>3&&ht&&Object.defineProperty(Fe,Ye,ht),ht},J=this&&this.__metadata||function(xe,Fe){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(xe,Fe)},de=this&&this.__param||function(xe,Fe){return function(Ye,Se){Fe(Ye,Se,xe)}};Object.defineProperty(we,"__esModule",{value:!0});var _e=v(3018),se=v(7086),he=v(6719),ce=v(930),ie=v(4113),fe=v(8583),be=function(){function xe(Fe,Ye,Se,Je,ht,yt){this._componentFactoryResolver=Fe,this._injector=Ye,this._applicationRef=Se,this._lightboxConfig=Je,this._lightboxEvent=ht,this._documentRef=yt}return xe.prototype.open=function(Fe,Ye,Se){var Je=this;void 0===Ye&&(Ye=0),void 0===Se&&(Se={});var ht=this._createComponent(ie.LightboxOverlayComponent),yt=this._createComponent(se.LightboxComponent),St={};this._lightboxEvent.broadcastLightboxEvent({id:ce.LIGHTBOX_EVENT.OPEN}),Object.assign(St,this._lightboxConfig,Se),yt.instance.album=Fe,yt.instance.currentImageIndex=Ye,yt.instance.options=St,yt.instance.cmpRef=yt,ht.instance.options=St,ht.instance.cmpRef=ht,setTimeout(function(){Je._applicationRef.attachView(ht.hostView),Je._applicationRef.attachView(yt.hostView),ht.onDestroy(function(){Je._applicationRef.detachView(ht.hostView)}),yt.onDestroy(function(){Je._applicationRef.detachView(yt.hostView)});var $t=St.containerElementResolver(Je._documentRef);$t.appendChild(ht.location.nativeElement),$t.appendChild(yt.location.nativeElement)})},xe.prototype.close=function(){this._lightboxEvent&&this._lightboxEvent.broadcastLightboxEvent({id:ce.LIGHTBOX_EVENT.CLOSE})},xe.prototype._createComponent=function(Fe){return this._componentFactoryResolver.resolveComponentFactory(Fe).create(this._injector)},(xe=l([de(5,_e.Inject(fe.DOCUMENT)),J("design:paramtypes",[_e.ComponentFactoryResolver,_e.Injector,_e.ApplicationRef,he.LightboxConfig,ce.LightboxEvent,Object])],xe)).\u0275fac=function(Ye){return new(Ye||xe)(O.\u0275\u0275inject(O.ComponentFactoryResolver),O.\u0275\u0275inject(O.Injector),O.\u0275\u0275inject(O.ApplicationRef),O.\u0275\u0275inject(d.LightboxConfig),O.\u0275\u0275inject(te.LightboxEvent),O.\u0275\u0275inject(fe.DOCUMENT))},xe.\u0275prov=O.\u0275\u0275defineInjectable({token:xe,factory:function(Fe){return xe.\u0275fac(Fe)}}),xe}();we.Lightbox=be},9185:(me,we,v)=>{"use strict";v.r(we),v.d(we,{ArgumentOutOfRangeError:()=>nr.W,AsyncSubject:()=>fr,BehaviorSubject:()=>fe.X,ConnectableObservable:()=>d.c,EMPTY:()=>$t.E,EmptyError:()=>Hr.K,GroupedObservable:()=>se,NEVER:()=>tr,Notification:()=>xt,NotificationKind:()=>Kt,ObjectUnsubscribedError:()=>cn.N,Observable:()=>O.y,ReplaySubject:()=>Lr,Scheduler:()=>Ye,Subject:()=>ie.xQ,Subscriber:()=>St.L,Subscription:()=>te.w,TimeoutError:()=>Cr,UnsubscriptionError:()=>Gr.B,VirtualAction:()=>_o,VirtualTimeScheduler:()=>pr,animationFrame:()=>bi,animationFrameScheduler:()=>ri,asap:()=>vi,asapScheduler:()=>ui,async:()=>Oi,asyncScheduler:()=>Zn,bindCallback:()=>Xe,bindNodeCallback:()=>Wt,combineLatest:()=>Vi.aj,concat:()=>ao.z,config:()=>ms.v,defer:()=>Tr.P,empty:()=>$t.c,forkJoin:()=>Nn.D,from:()=>mi.D,fromEvent:()=>ue,fromEventPattern:()=>wt,generate:()=>at,identity:()=>ii.y,iif:()=>an,interval:()=>Jt,isObservable:()=>Li,merge:()=>sr.T,never:()=>Xn,noop:()=>pi.Z,observable:()=>ce.L,of:()=>Tt.of,onErrorResumeNext:()=>mr,pairs:()=>Vr,partition:()=>hr,pipe:()=>fi.z,queue:()=>yt,queueScheduler:()=>ht,race:()=>Zr,range:()=>Ne,scheduled:()=>Ms.x,throwError:()=>Ct,timer:()=>bt,using:()=>vr,zip:()=>Ui});var O=v(9897),d=v(2441),te=v(826);class se extends O.y{constructor(ge,Be,rt){super(),this.key=ge,this.groupSubject=Be,this.refCountSubscription=rt}_subscribe(ge){const Be=new te.w,{refCountSubscription:rt,groupSubject:Mt}=this;return rt&&!rt.closed&&Be.add(new he(rt)),Be.add(Mt.subscribe(ge)),Be}}class he extends te.w{constructor(ge){super(),this.parent=ge,ge.count++}unsubscribe(){const ge=this.parent;!ge.closed&&!this.closed&&(super.unsubscribe(),ge.count-=1,0===ge.count&&ge.attemptedToUnsubscribe&&ge.unsubscribe())}}var ce=v(6554),ie=v(9765),fe=v(6215);class be extends te.w{constructor(ge,Be){super()}schedule(ge,Be=0){return this}}class xe extends be{constructor(ge,Be){super(ge,Be),this.scheduler=ge,this.work=Be,this.pending=!1}schedule(ge,Be=0){if(this.closed)return this;this.state=ge;const rt=this.id,Mt=this.scheduler;return null!=rt&&(this.id=this.recycleAsyncId(Mt,rt,Be)),this.pending=!0,this.delay=Be,this.id=this.id||this.requestAsyncId(Mt,this.id,Be),this}requestAsyncId(ge,Be,rt=0){return setInterval(ge.flush.bind(ge,this),rt)}recycleAsyncId(ge,Be,rt=0){if(null!==rt&&this.delay===rt&&!1===this.pending)return Be;clearInterval(Be)}execute(ge,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const rt=this._execute(ge,Be);if(rt)return rt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Be){let Mt,rt=!1;try{this.work(ge)}catch(Ln){rt=!0,Mt=!!Ln&&Ln||new Error(Ln)}if(rt)return this.unsubscribe(),Mt}_unsubscribe(){const ge=this.id,Be=this.scheduler,rt=Be.actions,Mt=rt.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Mt&&rt.splice(Mt,1),null!=ge&&(this.id=this.recycleAsyncId(Be,ge,null)),this.delay=null}}let Ye=(()=>{class Et{constructor(Be,rt=Et.now){this.SchedulerAction=Be,this.now=rt}schedule(Be,rt=0,Mt){return new this.SchedulerAction(this,Be).schedule(Mt,rt)}}return Et.now=()=>Date.now(),Et})();class Se extends Ye{constructor(ge,Be=Ye.now){super(ge,()=>Se.delegate&&Se.delegate!==this?Se.delegate.now():Be()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ge,Be=0,rt){return Se.delegate&&Se.delegate!==this?Se.delegate.schedule(ge,Be,rt):super.schedule(ge,Be,rt)}flush(ge){const{actions:Be}=this;if(this.active)return void Be.push(ge);let rt;this.active=!0;do{if(rt=ge.execute(ge.state,ge.delay))break}while(ge=Be.shift());if(this.active=!1,rt){for(;ge=Be.shift();)ge.unsubscribe();throw rt}}}const ht=new class extends Se{}(class extends xe{constructor(ge,Be){super(ge,Be),this.scheduler=ge,this.work=Be}schedule(ge,Be=0){return Be>0?super.schedule(ge,Be):(this.delay=Be,this.state=ge,this.scheduler.flush(this),this)}execute(ge,Be){return Be>0||this.closed?super.execute(ge,Be):this._execute(ge,Be)}requestAsyncId(ge,Be,rt=0){return null!==rt&&rt>0||null===rt&&this.delay>0?super.requestAsyncId(ge,Be,rt):ge.flush(this)}}),yt=ht;var St=v(7393),$t=v(9193),Tt=v(5917);function Ct(Et,ge){return new O.y(ge?Be=>ge.schedule(Bt,0,{error:Et,subscriber:Be}):Be=>Be.error(Et))}function Bt({error:Et,subscriber:ge}){ge.error(Et)}var Kt=(()=>{return(Et=Kt||(Kt={})).NEXT="N",Et.ERROR="E",Et.COMPLETE="C",Kt;var Et})();class xt{constructor(ge,Be,rt){this.kind=ge,this.value=Be,this.error=rt,this.hasValue="N"===ge}observe(ge){switch(this.kind){case"N":return ge.next&&ge.next(this.value);case"E":return ge.error&&ge.error(this.error);case"C":return ge.complete&&ge.complete()}}do(ge,Be,rt){switch(this.kind){case"N":return ge&&ge(this.value);case"E":return Be&&Be(this.error);case"C":return rt&&rt()}}accept(ge,Be,rt){return ge&&"function"==typeof ge.next?this.observe(ge):this.do(ge,Be,rt)}toObservable(){switch(this.kind){case"N":return(0,Tt.of)(this.value);case"E":return Ct(this.error);case"C":return(0,$t.c)()}throw new Error("unexpected notification kind value")}static createNext(ge){return void 0!==ge?new xt("N",ge):xt.undefinedValueNotification}static createError(ge){return new xt("E",void 0,ge)}static createComplete(){return xt.completeNotification}}xt.completeNotification=new xt("C"),xt.undefinedValueNotification=new xt("N",void 0);class Xt extends St.L{constructor(ge,Be,rt=0){super(ge),this.scheduler=Be,this.delay=rt}static dispatch(ge){const{notification:Be,destination:rt}=ge;Be.observe(rt),this.unsubscribe()}scheduleMessage(ge){this.destination.add(this.scheduler.schedule(Xt.dispatch,this.delay,new Zt(ge,this.destination)))}_next(ge){this.scheduleMessage(xt.createNext(ge))}_error(ge){this.scheduleMessage(xt.createError(ge)),this.unsubscribe()}_complete(){this.scheduleMessage(xt.createComplete()),this.unsubscribe()}}class Zt{constructor(ge,Be){this.notification=ge,this.destination=Be}}var cn=v(7971),mn=v(8858);class Lr extends ie.xQ{constructor(ge=Number.POSITIVE_INFINITY,Be=Number.POSITIVE_INFINITY,rt){super(),this.scheduler=rt,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ge<1?1:ge,this._windowTime=Be<1?1:Be,Be===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ge){if(!this.isStopped){const Be=this._events;Be.push(ge),Be.length>this._bufferSize&&Be.shift()}super.next(ge)}nextTimeWindow(ge){this.isStopped||(this._events.push(new Jn(this._getNow(),ge)),this._trimBufferThenGetEvents()),super.next(ge)}_subscribe(ge){const Be=this._infiniteTimeWindow,rt=Be?this._events:this._trimBufferThenGetEvents(),Mt=this.scheduler,Ln=rt.length;let Yn;if(this.closed)throw new cn.N;if(this.isStopped||this.hasError?Yn=te.w.EMPTY:(this.observers.push(ge),Yn=new mn.W(this,ge)),Mt&&ge.add(ge=new Xt(ge,Mt)),Be)for(let Fn=0;Fn<Ln&&!ge.closed;Fn++)ge.next(rt[Fn]);else for(let Fn=0;Fn<Ln&&!ge.closed;Fn++)ge.next(rt[Fn].value);return this.hasError?ge.error(this.thrownError):this.isStopped&&ge.complete(),Yn}_getNow(){return(this.scheduler||yt).now()}_trimBufferThenGetEvents(){const ge=this._getNow(),Be=this._bufferSize,rt=this._windowTime,Mt=this._events,Ln=Mt.length;let Yn=0;for(;Yn<Ln&&!(ge-Mt[Yn].time<rt);)Yn++;return Ln>Be&&(Yn=Math.max(Yn,Ln-Be)),Yn>0&&Mt.splice(0,Yn),Mt}}class Jn{constructor(ge,Be){this.time=ge,this.value=Be}}class fr extends ie.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(ge){return this.hasError?(ge.error(this.thrownError),te.w.EMPTY):this.hasCompleted&&this.hasNext?(ge.next(this.value),ge.complete(),te.w.EMPTY):super._subscribe(ge)}next(ge){this.hasCompleted||(this.value=ge,this.hasNext=!0)}error(ge){this.hasCompleted||super.error(ge)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}let Fr=1;const si=Promise.resolve(),yi={};function Ti(Et){return Et in yi&&(delete yi[Et],!0)}const Pi={setImmediate(Et){const ge=Fr++;return yi[ge]=!0,si.then(()=>Ti(ge)&&Et()),ge},clearImmediate(Et){Ti(Et)}},ui=new class extends Se{flush(ge){this.active=!0,this.scheduled=void 0;const{actions:Be}=this;let rt,Mt=-1,Ln=Be.length;ge=ge||Be.shift();do{if(rt=ge.execute(ge.state,ge.delay))break}while(++Mt<Ln&&(ge=Be.shift()));if(this.active=!1,rt){for(;++Mt<Ln&&(ge=Be.shift());)ge.unsubscribe();throw rt}}}(class extends xe{constructor(ge,Be){super(ge,Be),this.scheduler=ge,this.work=Be}requestAsyncId(ge,Be,rt=0){return null!==rt&&rt>0?super.requestAsyncId(ge,Be,rt):(ge.actions.push(this),ge.scheduled||(ge.scheduled=Pi.setImmediate(ge.flush.bind(ge,null))))}recycleAsyncId(ge,Be,rt=0){if(null!==rt&&rt>0||null===rt&&this.delay>0)return super.recycleAsyncId(ge,Be,rt);0===ge.actions.length&&(Pi.clearImmediate(Be),ge.scheduled=void 0)}}),vi=ui,Zn=new Se(xe),Oi=Zn,ri=new class extends Se{flush(ge){this.active=!0,this.scheduled=void 0;const{actions:Be}=this;let rt,Mt=-1,Ln=Be.length;ge=ge||Be.shift();do{if(rt=ge.execute(ge.state,ge.delay))break}while(++Mt<Ln&&(ge=Be.shift()));if(this.active=!1,rt){for(;++Mt<Ln&&(ge=Be.shift());)ge.unsubscribe();throw rt}}}(class extends xe{constructor(ge,Be){super(ge,Be),this.scheduler=ge,this.work=Be}requestAsyncId(ge,Be,rt=0){return null!==rt&&rt>0?super.requestAsyncId(ge,Be,rt):(ge.actions.push(this),ge.scheduled||(ge.scheduled=requestAnimationFrame(()=>ge.flush(null))))}recycleAsyncId(ge,Be,rt=0){if(null!==rt&&rt>0||null===rt&&this.delay>0)return super.recycleAsyncId(ge,Be,rt);0===ge.actions.length&&(cancelAnimationFrame(Be),ge.scheduled=void 0)}}),bi=ri;let pr=(()=>{class Et extends Se{constructor(Be=_o,rt=Number.POSITIVE_INFINITY){super(Be,()=>this.frame),this.maxFrames=rt,this.frame=0,this.index=-1}flush(){const{actions:Be,maxFrames:rt}=this;let Mt,Ln;for(;(Ln=Be[0])&&Ln.delay<=rt&&(Be.shift(),this.frame=Ln.delay,!(Mt=Ln.execute(Ln.state,Ln.delay))););if(Mt){for(;Ln=Be.shift();)Ln.unsubscribe();throw Mt}}}return Et.frameTimeFactor=10,Et})();class _o extends xe{constructor(ge,Be,rt=(ge.index+=1)){super(ge,Be),this.scheduler=ge,this.work=Be,this.index=rt,this.active=!0,this.index=ge.index=rt}schedule(ge,Be=0){if(!this.id)return super.schedule(ge,Be);this.active=!1;const rt=new _o(this.scheduler,this.work);return this.add(rt),rt.schedule(ge,Be)}requestAsyncId(ge,Be,rt=0){this.delay=ge.frame+rt;const{actions:Mt}=ge;return Mt.push(this),Mt.sort(_o.sortActions),!0}recycleAsyncId(ge,Be,rt=0){}_execute(ge,Be){if(!0===this.active)return super._execute(ge,Be)}static sortActions(ge,Be){return ge.delay===Be.delay?ge.index===Be.index?0:ge.index>Be.index?1:-1:ge.delay>Be.delay?1:-1}}var fi=v(4022),pi=v(8640),ii=v(4487);function Li(Et){return!!Et&&(Et instanceof O.y||"function"==typeof Et.lift&&"function"==typeof Et.subscribe)}var nr=v(7108),Hr=v(3410),Gr=v(7744);const Cr=(()=>{function Et(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return Et.prototype=Object.create(Error.prototype),Et})();var lr=v(8002),ir=v(3179),Pt=v(9796),qe=v(4869);function Xe(Et,ge,Be){if(ge){if(!(0,qe.K)(ge))return(...rt)=>Xe(Et,Be)(...rt).pipe((0,lr.U)(Mt=>(0,Pt.k)(Mt)?ge(...Mt):ge(Mt)));Be=ge}return function(...rt){const Mt=this;let Ln;const Yn={context:Mt,subject:Ln,callbackFunc:Et,scheduler:Be};return new O.y(Fn=>{if(Be)return Be.schedule(zt,0,{args:rt,subscriber:Fn,params:Yn});if(!Ln){Ln=new fr;const Ar=(...oi)=>{Ln.next(oi.length<=1?oi[0]:oi),Ln.complete()};try{Et.apply(Mt,[...rt,Ar])}catch(oi){(0,ir._)(Ln)?Ln.error(oi):console.warn(oi)}}return Ln.subscribe(Fn)})}}function zt(Et){const{args:Be,subscriber:rt,params:Mt}=Et,{callbackFunc:Ln,context:Yn,scheduler:Fn}=Mt;let{subject:Ar}=Mt;if(!Ar){Ar=Mt.subject=new fr;const oi=(...zi)=>{this.add(Fn.schedule(Qt,0,{value:zi.length<=1?zi[0]:zi,subject:Ar}))};try{Ln.apply(Yn,[...Be,oi])}catch(zi){Ar.error(zi)}}this.add(Ar.subscribe(rt))}function Qt(Et){const{value:ge,subject:Be}=Et;Be.next(ge),Be.complete()}function Wt(Et,ge,Be){if(ge){if(!(0,qe.K)(ge))return(...rt)=>Wt(Et,Be)(...rt).pipe((0,lr.U)(Mt=>(0,Pt.k)(Mt)?ge(...Mt):ge(Mt)));Be=ge}return function(...rt){const Mt={subject:void 0,args:rt,callbackFunc:Et,scheduler:Be,context:this};return new O.y(Ln=>{const{context:Yn}=Mt;let{subject:Fn}=Mt;if(Be)return Be.schedule(On,0,{params:Mt,subscriber:Ln,context:Yn});if(!Fn){Fn=Mt.subject=new fr;const Ar=(...oi)=>{const zi=oi.shift();zi?Fn.error(zi):(Fn.next(oi.length<=1?oi[0]:oi),Fn.complete())};try{Et.apply(Yn,[...rt,Ar])}catch(oi){(0,ir._)(Fn)?Fn.error(oi):console.warn(oi)}}return Fn.subscribe(Ln)})}}function On(Et){const{params:ge,subscriber:Be,context:rt}=Et,{callbackFunc:Mt,args:Ln,scheduler:Yn}=ge;let Fn=ge.subject;if(!Fn){Fn=ge.subject=new fr;const Ar=(...oi)=>{const zi=oi.shift();this.add(zi?Yn.schedule(Rr,0,{err:zi,subject:Fn}):Yn.schedule(fn,0,{value:oi.length<=1?oi[0]:oi,subject:Fn}))};try{Mt.apply(rt,[...Ln,Ar])}catch(oi){this.add(Yn.schedule(Rr,0,{err:oi,subject:Fn}))}}this.add(Fn.subscribe(Be))}function fn(Et){const{value:ge,subject:Be}=Et;Be.next(ge),Be.complete()}function Rr(Et){const{err:ge,subject:Be}=Et;Be.error(ge)}var Vi=v(9112),ao=v(8071),Tr=v(1439),Nn=v(5758),mi=v(9412),ke=v(9105);function ue(Et,ge,Be,rt){return(0,ke.m)(Be)&&(rt=Be,Be=void 0),rt?ue(Et,ge,Be).pipe((0,lr.U)(Mt=>(0,Pt.k)(Mt)?rt(...Mt):rt(Mt))):new O.y(Mt=>{Re(Et,ge,function(Yn){Mt.next(arguments.length>1?Array.prototype.slice.call(arguments):Yn)},Mt,Be)})}function Re(Et,ge,Be,rt,Mt){let Ln;if(function(Et){return Et&&"function"==typeof Et.addEventListener&&"function"==typeof Et.removeEventListener}(Et)){const Yn=Et;Et.addEventListener(ge,Be,Mt),Ln=()=>Yn.removeEventListener(ge,Be,Mt)}else if(function(Et){return Et&&"function"==typeof Et.on&&"function"==typeof Et.off}(Et)){const Yn=Et;Et.on(ge,Be),Ln=()=>Yn.off(ge,Be)}else if(function(Et){return Et&&"function"==typeof Et.addListener&&"function"==typeof Et.removeListener}(Et)){const Yn=Et;Et.addListener(ge,Be),Ln=()=>Yn.removeListener(ge,Be)}else{if(!Et||!Et.length)throw new TypeError("Invalid event target");for(let Yn=0,Fn=Et.length;Yn<Fn;Yn++)Re(Et[Yn],ge,Be,rt,Mt)}rt.add(Ln)}function wt(Et,ge,Be){return Be?wt(Et,ge).pipe((0,lr.U)(rt=>(0,Pt.k)(rt)?Be(...rt):Be(rt))):new O.y(rt=>{const Mt=(...Yn)=>rt.next(1===Yn.length?Yn[0]:Yn);let Ln;try{Ln=Et(Mt)}catch(Yn){return void rt.error(Yn)}if((0,ke.m)(ge))return()=>ge(Mt,Ln)})}function at(Et,ge,Be,rt,Mt){let Ln,Yn;return 1==arguments.length?(Yn=Et.initialState,ge=Et.condition,Be=Et.iterate,Ln=Et.resultSelector||ii.y,Mt=Et.scheduler):void 0===rt||(0,qe.K)(rt)?(Yn=Et,Ln=ii.y,Mt=rt):(Yn=Et,Ln=rt),new O.y(Fn=>{let Ar=Yn;if(Mt)return Mt.schedule(It,0,{subscriber:Fn,iterate:Be,condition:ge,resultSelector:Ln,state:Ar});for(;;){if(ge){let zi;try{zi=ge(Ar)}catch(Wr){return void Fn.error(Wr)}if(!zi){Fn.complete();break}}let oi;try{oi=Ln(Ar)}catch(zi){return void Fn.error(zi)}if(Fn.next(oi),Fn.closed)break;try{Ar=Be(Ar)}catch(zi){return void Fn.error(zi)}}})}function It(Et){const{subscriber:ge,condition:Be}=Et;if(ge.closed)return;if(Et.needIterate)try{Et.state=Et.iterate(Et.state)}catch(Mt){return void ge.error(Mt)}else Et.needIterate=!0;if(Be){let Mt;try{Mt=Be(Et.state)}catch(Ln){return void ge.error(Ln)}if(!Mt)return void ge.complete();if(ge.closed)return}let rt;try{rt=Et.resultSelector(Et.state)}catch(Mt){return void ge.error(Mt)}return ge.closed||(ge.next(rt),ge.closed)?void 0:this.schedule(Et)}function an(Et,ge=$t.E,Be=$t.E){return(0,Tr.P)(()=>Et()?ge:Be)}function wn(Et){return!(0,Pt.k)(Et)&&Et-parseFloat(Et)+1>=0}function Jt(Et=0,ge=Oi){return(!wn(Et)||Et<0)&&(Et=0),(!ge||"function"!=typeof ge.schedule)&&(ge=Oi),new O.y(Be=>(Be.add(ge.schedule(er,Et,{subscriber:Be,counter:0,period:Et})),Be))}function er(Et){const{subscriber:ge,counter:Be,period:rt}=Et;ge.next(Be),this.schedule({subscriber:ge,counter:Be+1,period:rt},rt)}var sr=v(6682);const tr=new O.y(pi.Z);function Xn(){return tr}function mr(...Et){if(0===Et.length)return $t.E;const[ge,...Be]=Et;return 1===Et.length&&(0,Pt.k)(ge)?mr(...ge):new O.y(rt=>{const Mt=()=>rt.add(mr(...Be).subscribe(rt));return(0,mi.D)(ge).subscribe({next(Ln){rt.next(Ln)},error:Mt,complete:Mt})})}function Vr(Et,ge){return new O.y(ge?Be=>{const rt=Object.keys(Et),Mt=new te.w;return Mt.add(ge.schedule(Mr,0,{keys:rt,index:0,subscriber:Be,subscription:Mt,obj:Et})),Mt}:Be=>{const rt=Object.keys(Et);for(let Mt=0;Mt<rt.length&&!Be.closed;Mt++){const Ln=rt[Mt];Et.hasOwnProperty(Ln)&&Be.next([Ln,Et[Ln]])}Be.complete()})}function Mr(Et){const{keys:ge,index:Be,subscriber:rt,subscription:Mt,obj:Ln}=Et;if(!rt.closed)if(Be<ge.length){const Yn=ge[Be];rt.next([Yn,Ln[Yn]]),Mt.add(this.schedule({keys:ge,index:Be+1,subscriber:rt,subscription:Mt,obj:Ln}))}else rt.complete()}function ai(Et,ge){function Be(){return!Be.pred.apply(Be.thisArg,arguments)}return Be.pred=Et,Be.thisArg=ge,Be}var qn=v(7444),ut=v(5435);function hr(Et,ge,Be){return[(0,ut.h)(ge,Be)(new O.y((0,qn.s)(Et))),(0,ut.h)(ai(ge,Be))(new O.y((0,qn.s)(Et)))]}var Bn=v(6693),Wi=v(5197),os=v(509);function Zr(...Et){if(1===Et.length){if(!(0,Pt.k)(Et[0]))return Et[0];Et=Et[0]}return(0,Bn.n)(Et,void 0).lift(new _t)}class _t{call(ge,Be){return Be.subscribe(new dt(ge))}}class dt extends Wi.L{constructor(ge){super(ge),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(ge){this.observables.push(ge)}_complete(){const ge=this.observables,Be=ge.length;if(0===Be)this.destination.complete();else{for(let rt=0;rt<Be&&!this.hasFirst;rt++){const Ln=(0,os.D)(this,ge[rt],void 0,rt);this.subscriptions&&this.subscriptions.push(Ln),this.add(Ln)}this.observables=null}}notifyNext(ge,Be,rt){if(!this.hasFirst){this.hasFirst=!0;for(let Mt=0;Mt<this.subscriptions.length;Mt++)if(Mt!==rt){let Ln=this.subscriptions[Mt];Ln.unsubscribe(),this.remove(Ln)}this.subscriptions=null}this.destination.next(Be)}}function Ne(Et=0,ge,Be){return new O.y(rt=>{void 0===ge&&(ge=Et,Et=0);let Mt=0,Ln=Et;if(Be)return Be.schedule(We,0,{index:Mt,count:ge,start:Et,subscriber:rt});for(;;){if(Mt++>=ge){rt.complete();break}if(rt.next(Ln++),rt.closed)break}})}function We(Et){const{start:ge,index:Be,count:rt,subscriber:Mt}=Et;Be>=rt?Mt.complete():(Mt.next(ge),!Mt.closed&&(Et.index=Be+1,Et.start=ge+1,this.schedule(Et)))}function bt(Et=0,ge,Be){let rt=-1;return wn(ge)?rt=Number(ge)<1?1:Number(ge):(0,qe.K)(ge)&&(Be=ge),(0,qe.K)(Be)||(Be=Oi),new O.y(Mt=>{const Ln=wn(Et)?Et:+Et-Be.now();return Be.schedule(Sn,Ln,{index:0,period:rt,subscriber:Mt})})}function Sn(Et){const{index:ge,period:Be,subscriber:rt}=Et;if(rt.next(ge),!rt.closed){if(-1===Be)return rt.complete();Et.index=ge+1,this.schedule(Et,Be)}}function vr(Et,ge){return new O.y(Be=>{let rt,Mt;try{rt=Et()}catch(Fn){return void Be.error(Fn)}try{Mt=ge(rt)}catch(Fn){return void Be.error(Fn)}const Yn=(Mt?(0,mi.D)(Mt):$t.E).subscribe(Be);return()=>{Yn.unsubscribe(),rt&&rt.unsubscribe()}})}var Br=v(377),or=v(5345);function Ui(...Et){const ge=Et[Et.length-1];return"function"==typeof ge&&Et.pop(),(0,Bn.n)(Et,void 0).lift(new ts(ge))}class ts{constructor(ge){this.resultSelector=ge}call(ge,Be){return Be.subscribe(new ss(ge,this.resultSelector))}}class ss extends St.L{constructor(ge,Be,rt=Object.create(null)){super(ge),this.resultSelector=Be,this.iterators=[],this.active=0,this.resultSelector="function"==typeof Be?Be:void 0}_next(ge){const Be=this.iterators;(0,Pt.k)(ge)?Be.push(new Sr(ge)):Be.push("function"==typeof ge[Br.hZ]?new qi(ge[Br.hZ]()):new Vs(this.destination,this,ge))}_complete(){const ge=this.iterators,Be=ge.length;if(this.unsubscribe(),0!==Be){this.active=Be;for(let rt=0;rt<Be;rt++){let Mt=ge[rt];Mt.stillUnsubscribed?this.destination.add(Mt.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const ge=this.iterators,Be=ge.length,rt=this.destination;for(let Yn=0;Yn<Be;Yn++){let Fn=ge[Yn];if("function"==typeof Fn.hasValue&&!Fn.hasValue())return}let Mt=!1;const Ln=[];for(let Yn=0;Yn<Be;Yn++){let Fn=ge[Yn],Ar=Fn.next();if(Fn.hasCompleted()&&(Mt=!0),Ar.done)return void rt.complete();Ln.push(Ar.value)}this.resultSelector?this._tryresultSelector(Ln):rt.next(Ln),Mt&&rt.complete()}_tryresultSelector(ge){let Be;try{Be=this.resultSelector.apply(this,ge)}catch(rt){return void this.destination.error(rt)}this.destination.next(Be)}}class qi{constructor(ge){this.iterator=ge,this.nextResult=ge.next()}hasValue(){return!0}next(){const ge=this.nextResult;return this.nextResult=this.iterator.next(),ge}hasCompleted(){const ge=this.nextResult;return Boolean(ge&&ge.done)}}class Sr{constructor(ge){this.array=ge,this.index=0,this.length=0,this.length=ge.length}[Br.hZ](){return this}next(ge){const Be=this.index++;return Be<this.length?{value:this.array[Be],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Vs extends or.Ds{constructor(ge,Be,rt){super(ge),this.parent=Be,this.observable=rt,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Br.hZ](){return this}next(){const ge=this.buffer;return 0===ge.length&&this.isComplete?{value:null,done:!0}:{value:ge.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(ge){this.buffer.push(ge),this.parent.checkIterators()}subscribe(){return(0,or.ft)(this.observable,new or.IY(this))}}var Ms=v(1115),ms=v(2494)},6215:(me,we,v)=>{"use strict";v.d(we,{X:()=>te});var O=v(9765),d=v(7971);class te extends O.xQ{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const de=super._subscribe(J);return de&&!de.closed&&J.next(this._value),de}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new d.N;return this._value}next(J){super.next(this._value=J)}}},9897:(me,we,v)=>{"use strict";v.d(we,{y:()=>he});var O=v(3179),d=v(7393),te=v(9181),l=v(6490),de=v(6554),_e=v(4022),se=v(2494);let he=(()=>{class ie{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const xe=new ie;return xe.source=this,xe.operator=be,xe}subscribe(be,xe,Fe){const{operator:Ye}=this,Se=function(ie,fe,be){if(ie){if(ie instanceof d.L)return ie;if(ie[te.b])return ie[te.b]()}return ie||fe||be?new d.L(ie,fe,be):new d.L(l.c)}(be,xe,Fe);if(Se.add(Ye?Ye.call(Se,this.source):this.source||se.v.useDeprecatedSynchronousErrorHandling&&!Se.syncErrorThrowable?this._subscribe(Se):this._trySubscribe(Se)),se.v.useDeprecatedSynchronousErrorHandling&&Se.syncErrorThrowable&&(Se.syncErrorThrowable=!1,Se.syncErrorThrown))throw Se.syncErrorValue;return Se}_trySubscribe(be){try{return this._subscribe(be)}catch(xe){se.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=xe),(0,O._)(be)?be.error(xe):console.warn(xe)}}forEach(be,xe){return new(xe=ce(xe))((Fe,Ye)=>{let Se;Se=this.subscribe(Je=>{try{be(Je)}catch(ht){Ye(ht),Se&&Se.unsubscribe()}},Ye,Fe)})}_subscribe(be){const{source:xe}=this;return xe&&xe.subscribe(be)}[de.L](){return this}pipe(...be){return 0===be.length?this:(0,_e.U)(be)(this)}toPromise(be){return new(be=ce(be))((xe,Fe)=>{let Ye;this.subscribe(Se=>Ye=Se,Se=>Fe(Se),()=>xe(Ye))})}}return ie.create=fe=>new ie(fe),ie})();function ce(ie){if(ie||(ie=se.v.Promise||Promise),!ie)throw new Error("no Promise impl found");return ie}},6490:(me,we,v)=>{"use strict";v.d(we,{c:()=>te});var O=v(2494),d=v(4449);const te={closed:!0,next(l){},error(l){if(O.v.useDeprecatedSynchronousErrorHandling)throw l;(0,d.z)(l)},complete(){}}},5197:(me,we,v)=>{"use strict";v.d(we,{L:()=>d});var O=v(7393);class d extends O.L{notifyNext(l,J,de,_e,se){this.destination.next(J)}notifyError(l,J){this.destination.error(l)}notifyComplete(l){this.destination.complete()}}},9765:(me,we,v)=>{"use strict";v.d(we,{Yc:()=>_e,xQ:()=>se});var O=v(9897),d=v(7393),te=v(826),l=v(7971),J=v(8858),de=v(9181);class _e extends d.L{constructor(ie){super(ie),this.destination=ie}}let se=(()=>{class ce extends O.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new _e(this)}lift(fe){const be=new he(this,this);return be.operator=fe,be}next(fe){if(this.closed)throw new l.N;if(!this.isStopped){const{observers:be}=this,xe=be.length,Fe=be.slice();for(let Ye=0;Ye<xe;Ye++)Fe[Ye].next(fe)}}error(fe){if(this.closed)throw new l.N;this.hasError=!0,this.thrownError=fe,this.isStopped=!0;const{observers:be}=this,xe=be.length,Fe=be.slice();for(let Ye=0;Ye<xe;Ye++)Fe[Ye].error(fe);this.observers.length=0}complete(){if(this.closed)throw new l.N;this.isStopped=!0;const{observers:fe}=this,be=fe.length,xe=fe.slice();for(let Fe=0;Fe<be;Fe++)xe[Fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(fe){if(this.closed)throw new l.N;return super._trySubscribe(fe)}_subscribe(fe){if(this.closed)throw new l.N;return this.hasError?(fe.error(this.thrownError),te.w.EMPTY):this.isStopped?(fe.complete(),te.w.EMPTY):(this.observers.push(fe),new J.W(this,fe))}asObservable(){const fe=new O.y;return fe.source=this,fe}}return ce.create=(ie,fe)=>new he(ie,fe),ce})();class he extends se{constructor(ie,fe){super(),this.destination=ie,this.source=fe}next(ie){const{destination:fe}=this;fe&&fe.next&&fe.next(ie)}error(ie){const{destination:fe}=this;fe&&fe.error&&this.destination.error(ie)}complete(){const{destination:ie}=this;ie&&ie.complete&&this.destination.complete()}_subscribe(ie){const{source:fe}=this;return fe?this.source.subscribe(ie):te.w.EMPTY}}},8858:(me,we,v)=>{"use strict";v.d(we,{W:()=>d});var O=v(826);class d extends O.w{constructor(l,J){super(),this.subject=l,this.subscriber=J,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const l=this.subject,J=l.observers;if(this.subject=null,!J||0===J.length||l.isStopped||l.closed)return;const de=J.indexOf(this.subscriber);-1!==de&&J.splice(de,1)}}},7393:(me,we,v)=>{"use strict";v.d(we,{L:()=>_e});var O=v(9105),d=v(6490),te=v(826),l=v(9181),J=v(2494),de=v(4449);class _e extends te.w{constructor(ce,ie,fe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=d.c;break;case 1:if(!ce){this.destination=d.c;break}if("object"==typeof ce){ce instanceof _e?(this.syncErrorThrowable=ce.syncErrorThrowable,this.destination=ce,ce.add(this)):(this.syncErrorThrowable=!0,this.destination=new se(this,ce));break}default:this.syncErrorThrowable=!0,this.destination=new se(this,ce,ie,fe)}}[l.b](){return this}static create(ce,ie,fe){const be=new _e(ce,ie,fe);return be.syncErrorThrowable=!1,be}next(ce){this.isStopped||this._next(ce)}error(ce){this.isStopped||(this.isStopped=!0,this._error(ce))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ce){this.destination.next(ce)}_error(ce){this.destination.error(ce),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ce}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ce,this}}class se extends _e{constructor(ce,ie,fe,be){super(),this._parentSubscriber=ce;let xe,Fe=this;(0,O.m)(ie)?xe=ie:ie&&(xe=ie.next,fe=ie.error,be=ie.complete,ie!==d.c&&(Fe=Object.create(ie),(0,O.m)(Fe.unsubscribe)&&this.add(Fe.unsubscribe.bind(Fe)),Fe.unsubscribe=this.unsubscribe.bind(this))),this._context=Fe,this._next=xe,this._error=fe,this._complete=be}next(ce){if(!this.isStopped&&this._next){const{_parentSubscriber:ie}=this;J.v.useDeprecatedSynchronousErrorHandling&&ie.syncErrorThrowable?this.__tryOrSetError(ie,this._next,ce)&&this.unsubscribe():this.__tryOrUnsub(this._next,ce)}}error(ce){if(!this.isStopped){const{_parentSubscriber:ie}=this,{useDeprecatedSynchronousErrorHandling:fe}=J.v;if(this._error)fe&&ie.syncErrorThrowable?(this.__tryOrSetError(ie,this._error,ce),this.unsubscribe()):(this.__tryOrUnsub(this._error,ce),this.unsubscribe());else if(ie.syncErrorThrowable)fe?(ie.syncErrorValue=ce,ie.syncErrorThrown=!0):(0,de.z)(ce),this.unsubscribe();else{if(this.unsubscribe(),fe)throw ce;(0,de.z)(ce)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ce}=this;if(this._complete){const ie=()=>this._complete.call(this._context);J.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,ie),this.unsubscribe()):(this.__tryOrUnsub(ie),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ce,ie){try{ce.call(this._context,ie)}catch(fe){if(this.unsubscribe(),J.v.useDeprecatedSynchronousErrorHandling)throw fe;(0,de.z)(fe)}}__tryOrSetError(ce,ie,fe){if(!J.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ie.call(this._context,fe)}catch(be){return J.v.useDeprecatedSynchronousErrorHandling?(ce.syncErrorValue=be,ce.syncErrorThrown=!0,!0):((0,de.z)(be),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ce}=this;this._context=null,this._parentSubscriber=null,ce.unsubscribe()}}},826:(me,we,v)=>{"use strict";v.d(we,{w:()=>J});var _e,O=v(9796),d=v(1555),te=v(9105),l=v(7744);class J{constructor(se){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,se&&(this._ctorUnsubscribe=!0,this._unsubscribe=se)}unsubscribe(){let se;if(this.closed)return;let{_parentOrParents:he,_ctorUnsubscribe:ce,_unsubscribe:ie,_subscriptions:fe}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,he instanceof J)he.remove(this);else if(null!==he)for(let be=0;be<he.length;++be)he[be].remove(this);if((0,te.m)(ie)){ce&&(this._unsubscribe=void 0);try{ie.call(this)}catch(be){se=be instanceof l.B?de(be.errors):[be]}}if((0,O.k)(fe)){let be=-1,xe=fe.length;for(;++be<xe;){const Fe=fe[be];if((0,d.K)(Fe))try{Fe.unsubscribe()}catch(Ye){se=se||[],Ye instanceof l.B?se=se.concat(de(Ye.errors)):se.push(Ye)}}}if(se)throw new l.B(se)}add(se){let he=se;if(!se)return J.EMPTY;switch(typeof se){case"function":he=new J(se);case"object":if(he===this||he.closed||"function"!=typeof he.unsubscribe)return he;if(this.closed)return he.unsubscribe(),he;if(!(he instanceof J)){const fe=he;he=new J,he._subscriptions=[fe]}break;default:throw new Error("unrecognized teardown "+se+" added to Subscription.")}let{_parentOrParents:ce}=he;if(null===ce)he._parentOrParents=this;else if(ce instanceof J){if(ce===this)return he;he._parentOrParents=[ce,this]}else{if(-1!==ce.indexOf(this))return he;ce.push(this)}const ie=this._subscriptions;return null===ie?this._subscriptions=[he]:ie.push(he),he}remove(se){const he=this._subscriptions;if(he){const ce=he.indexOf(se);-1!==ce&&he.splice(ce,1)}}}function de(_e){return _e.reduce((se,he)=>se.concat(he instanceof l.B?he.errors:he),[])}J.EMPTY=((_e=new J).closed=!0,_e)},2494:(me,we,v)=>{"use strict";v.d(we,{v:()=>d});let O=!1;const d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(te){if(te){const l=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+l.stack)}else O&&console.log("RxJS: Back to a better error behavior. Thank you. <3");O=te},get useDeprecatedSynchronousErrorHandling(){return O}}},5345:(me,we,v)=>{"use strict";v.d(we,{IY:()=>l,Ds:()=>de,ft:()=>se});var O=v(7393),d=v(9897),te=v(7444);class l extends O.L{constructor(ce){super(),this.parent=ce}_next(ce){this.parent.notifyNext(ce)}_error(ce){this.parent.notifyError(ce),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends O.L{notifyNext(ce){this.destination.next(ce)}notifyError(ce){this.destination.error(ce)}notifyComplete(){this.destination.complete()}}function se(he,ce){if(ce.closed)return;if(he instanceof d.y)return he.subscribe(ce);let ie;try{ie=(0,te.s)(he)(ce)}catch(fe){ce.error(fe)}return ie}},2441:(me,we,v)=>{"use strict";v.d(we,{c:()=>J,N:()=>de});var O=v(9765),d=v(9897),te=v(826),l=v(1307);class J extends d.y{constructor(ie,fe){super(),this.source=ie,this.subjectFactory=fe,this._refCount=0,this._isComplete=!1}_subscribe(ie){return this.getSubject().subscribe(ie)}getSubject(){const ie=this._subject;return(!ie||ie.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ie=this._connection;return ie||(this._isComplete=!1,ie=this._connection=new te.w,ie.add(this.source.subscribe(new _e(this.getSubject(),this))),ie.closed&&(this._connection=null,ie=te.w.EMPTY)),ie}refCount(){return(0,l.x)()(this)}}const de=(()=>{const ce=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ce._subscribe},_isComplete:{value:ce._isComplete,writable:!0},getSubject:{value:ce.getSubject},connect:{value:ce.connect},refCount:{value:ce.refCount}}})();class _e extends O.Yc{constructor(ie,fe){super(ie),this.connectable=fe}_error(ie){this._unsubscribe(),super._error(ie)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ie=this.connectable;if(ie){this.connectable=null;const fe=ie._connection;ie._refCount=0,ie._subject=null,ie._connection=null,fe&&fe.unsubscribe()}}}},9112:(me,we,v)=>{"use strict";v.d(we,{aj:()=>_e});var O=v(4869),d=v(9796),te=v(5197),l=v(509),J=v(6693);const de={};function _e(...ce){let ie,fe;return(0,O.K)(ce[ce.length-1])&&(fe=ce.pop()),"function"==typeof ce[ce.length-1]&&(ie=ce.pop()),1===ce.length&&(0,d.k)(ce[0])&&(ce=ce[0]),(0,J.n)(ce,fe).lift(new se(ie))}class se{constructor(ie){this.resultSelector=ie}call(ie,fe){return fe.subscribe(new he(ie,this.resultSelector))}}class he extends te.L{constructor(ie,fe){super(ie),this.resultSelector=fe,this.active=0,this.values=[],this.observables=[]}_next(ie){this.values.push(de),this.observables.push(ie)}_complete(){const ie=this.observables,fe=ie.length;if(0===fe)this.destination.complete();else{this.active=fe,this.toRespond=fe;for(let be=0;be<fe;be++)this.add((0,l.D)(this,ie[be],void 0,be))}}notifyComplete(ie){0==(this.active-=1)&&this.destination.complete()}notifyNext(ie,fe,be){const xe=this.values,Ye=this.toRespond?xe[be]===de?--this.toRespond:this.toRespond:0;xe[be]=fe,0===Ye&&(this.resultSelector?this._tryResultSelector(xe):this.destination.next(xe.slice()))}_tryResultSelector(ie){let fe;try{fe=this.resultSelector.apply(this,ie)}catch(be){return void this.destination.error(be)}this.destination.next(fe)}}},8071:(me,we,v)=>{"use strict";v.d(we,{z:()=>l});var O=v(5917),d=v(3282);function l(...J){return(0,d.J)(1)((0,O.of)(...J))}},1439:(me,we,v)=>{"use strict";v.d(we,{P:()=>l});var O=v(9897),d=v(9412),te=v(9193);function l(J){return new O.y(de=>{let _e;try{_e=J()}catch(he){return void de.error(he)}return(_e?(0,d.D)(_e):(0,te.c)()).subscribe(de)})}},9193:(me,we,v)=>{"use strict";v.d(we,{E:()=>d,c:()=>te});var O=v(9897);const d=new O.y(J=>J.complete());function te(J){return J?function(J){return new O.y(de=>J.schedule(()=>de.complete()))}(J):d}},5758:(me,we,v)=>{"use strict";v.d(we,{D:()=>de});var O=v(9897),d=v(9796),te=v(8002),l=v(1555),J=v(9412);function de(...se){if(1===se.length){const he=se[0];if((0,d.k)(he))return _e(he,null);if((0,l.K)(he)&&Object.getPrototypeOf(he)===Object.prototype){const ce=Object.keys(he);return _e(ce.map(ie=>he[ie]),ce)}}if("function"==typeof se[se.length-1]){const he=se.pop();return _e(se=1===se.length&&(0,d.k)(se[0])?se[0]:se,null).pipe((0,te.U)(ce=>he(...ce)))}return _e(se,null)}function _e(se,he){return new O.y(ce=>{const ie=se.length;if(0===ie)return void ce.complete();const fe=new Array(ie);let be=0,xe=0;for(let Fe=0;Fe<ie;Fe++){const Ye=(0,J.D)(se[Fe]);let Se=!1;ce.add(Ye.subscribe({next:Je=>{Se||(Se=!0,xe++),fe[Fe]=Je},error:Je=>ce.error(Je),complete:()=>{be++,(be===ie||!Se)&&(xe===ie&&ce.next(he?he.reduce((Je,ht,yt)=>(Je[ht]=fe[yt],Je),{}):fe),ce.complete())}}))}})}},9412:(me,we,v)=>{"use strict";v.d(we,{D:()=>l});var O=v(9897),d=v(7444),te=v(1115);function l(J,de){return de?(0,te.x)(J,de):J instanceof O.y?J:new O.y((0,d.s)(J))}},6693:(me,we,v)=>{"use strict";v.d(we,{n:()=>l});var O=v(9897),d=v(5015),te=v(4087);function l(J,de){return de?(0,te.r)(J,de):new O.y((0,d.V)(J))}},6682:(me,we,v)=>{"use strict";v.d(we,{T:()=>J});var O=v(9897),d=v(4869),te=v(3282),l=v(6693);function J(...de){let _e=Number.POSITIVE_INFINITY,se=null,he=de[de.length-1];return(0,d.K)(he)?(se=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(_e=de.pop())):"number"==typeof he&&(_e=de.pop()),null===se&&1===de.length&&de[0]instanceof O.y?de[0]:(0,te.J)(_e)((0,l.n)(de,se))}},5917:(me,we,v)=>{"use strict";v.d(we,{of:()=>l});var O=v(4869),d=v(6693),te=v(4087);function l(...J){let de=J[J.length-1];return(0,O.K)(de)?(J.pop(),(0,te.r)(J,de)):(0,d.n)(J)}},4612:(me,we,v)=>{"use strict";v.d(we,{b:()=>d});var O=v(9773);function d(te,l){return(0,O.zg)(te,l,1)}},5435:(me,we,v)=>{"use strict";v.d(we,{h:()=>d});var O=v(7393);function d(J,de){return function(se){return se.lift(new te(J,de))}}class te{constructor(de,_e){this.predicate=de,this.thisArg=_e}call(de,_e){return _e.subscribe(new l(de,this.predicate,this.thisArg))}}class l extends O.L{constructor(de,_e,se){super(de),this.predicate=_e,this.thisArg=se,this.count=0}_next(de){let _e;try{_e=this.predicate.call(this.thisArg,de,this.count++)}catch(se){return void this.destination.error(se)}_e&&this.destination.next(de)}}},8002:(me,we,v)=>{"use strict";v.d(we,{U:()=>d});var O=v(7393);function d(J,de){return function(se){if("function"!=typeof J)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return se.lift(new te(J,de))}}class te{constructor(de,_e){this.project=de,this.thisArg=_e}call(de,_e){return _e.subscribe(new l(de,this.project,this.thisArg))}}class l extends O.L{constructor(de,_e,se){super(de),this.project=_e,this.count=0,this.thisArg=se||this}_next(de){let _e;try{_e=this.project.call(this.thisArg,de,this.count++)}catch(se){return void this.destination.error(se)}this.destination.next(_e)}}},3282:(me,we,v)=>{"use strict";v.d(we,{J:()=>te});var O=v(9773),d=v(4487);function te(l=Number.POSITIVE_INFINITY){return(0,O.zg)(d.y,l)}},9773:(me,we,v)=>{"use strict";v.d(we,{zg:()=>l});var O=v(8002),d=v(9412),te=v(5345);function l(se,he,ce=Number.POSITIVE_INFINITY){return"function"==typeof he?ie=>ie.pipe(l((fe,be)=>(0,d.D)(se(fe,be)).pipe((0,O.U)((xe,Fe)=>he(fe,xe,be,Fe))),ce)):("number"==typeof he&&(ce=he),ie=>ie.lift(new J(se,ce)))}class J{constructor(he,ce=Number.POSITIVE_INFINITY){this.project=he,this.concurrent=ce}call(he,ce){return ce.subscribe(new de(he,this.project,this.concurrent))}}class de extends te.Ds{constructor(he,ce,ie=Number.POSITIVE_INFINITY){super(he),this.project=ce,this.concurrent=ie,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(he){this.active<this.concurrent?this._tryNext(he):this.buffer.push(he)}_tryNext(he){let ce;const ie=this.index++;try{ce=this.project(he,ie)}catch(fe){return void this.destination.error(fe)}this.active++,this._innerSub(ce)}_innerSub(he){const ce=new te.IY(this),ie=this.destination;ie.add(ce);const fe=(0,te.ft)(he,ce);fe!==ce&&ie.add(fe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(he){this.destination.next(he)}notifyComplete(){const he=this.buffer;this.active--,he.length>0?this._next(he.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(me,we,v)=>{"use strict";v.d(we,{x:()=>d});var O=v(7393);function d(){return function(de){return de.lift(new te(de))}}class te{constructor(de){this.connectable=de}call(de,_e){const{connectable:se}=this;se._refCount++;const he=new l(de,se),ce=_e.subscribe(he);return he.closed||(he.connection=se.connect()),ce}}class l extends O.L{constructor(de,_e){super(de),this.connectable=_e}_unsubscribe(){const{connectable:de}=this;if(!de)return void(this.connection=null);this.connectable=null;const _e=de._refCount;if(_e<=0)return void(this.connection=null);if(de._refCount=_e-1,_e>1)return void(this.connection=null);const{connection:se}=this,he=de._connection;this.connection=null,he&&(!se||he===se)&&he.unsubscribe()}}},4087:(me,we,v)=>{"use strict";v.d(we,{r:()=>te});var O=v(9897),d=v(826);function te(l,J){return new O.y(de=>{const _e=new d.w;let se=0;return _e.add(J.schedule(function(){se!==l.length?(de.next(l[se++]),de.closed||_e.add(this.schedule())):de.complete()})),_e})}},1115:(me,we,v)=>{"use strict";v.d(we,{x:()=>be});var O=v(9897),d=v(826),te=v(6554),de=v(4087),_e=v(377),ce=v(4072),ie=v(9489);function be(xe,Fe){if(null!=xe){if(function(xe){return xe&&"function"==typeof xe[te.L]}(xe))return function(xe,Fe){return new O.y(Ye=>{const Se=new d.w;return Se.add(Fe.schedule(()=>{const Je=xe[te.L]();Se.add(Je.subscribe({next(ht){Se.add(Fe.schedule(()=>Ye.next(ht)))},error(ht){Se.add(Fe.schedule(()=>Ye.error(ht)))},complete(){Se.add(Fe.schedule(()=>Ye.complete()))}}))})),Se})}(xe,Fe);if((0,ce.t)(xe))return function(xe,Fe){return new O.y(Ye=>{const Se=new d.w;return Se.add(Fe.schedule(()=>xe.then(Je=>{Se.add(Fe.schedule(()=>{Ye.next(Je),Se.add(Fe.schedule(()=>Ye.complete()))}))},Je=>{Se.add(Fe.schedule(()=>Ye.error(Je)))}))),Se})}(xe,Fe);if((0,ie.z)(xe))return(0,de.r)(xe,Fe);if(function(xe){return xe&&"function"==typeof xe[_e.hZ]}(xe)||"string"==typeof xe)return function(xe,Fe){if(!xe)throw new Error("Iterable cannot be null");return new O.y(Ye=>{const Se=new d.w;let Je;return Se.add(()=>{Je&&"function"==typeof Je.return&&Je.return()}),Se.add(Fe.schedule(()=>{Je=xe[_e.hZ](),Se.add(Fe.schedule(function(){if(Ye.closed)return;let ht,yt;try{const St=Je.next();ht=St.value,yt=St.done}catch(St){return void Ye.error(St)}yt?Ye.complete():(Ye.next(ht),this.schedule())}))})),Se})}(xe,Fe)}throw new TypeError((null!==xe&&typeof xe||xe)+" is not observable")}},377:(me,we,v)=>{"use strict";v.d(we,{hZ:()=>d});const d="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(me,we,v)=>{"use strict";v.d(we,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(me,we,v)=>{"use strict";v.d(we,{b:()=>O});const O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(me,we,v)=>{"use strict";v.d(we,{W:()=>d});const d=(()=>{function te(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return te.prototype=Object.create(Error.prototype),te})()},3410:(me,we,v)=>{"use strict";v.d(we,{K:()=>d});const d=(()=>{function te(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return te.prototype=Object.create(Error.prototype),te})()},7971:(me,we,v)=>{"use strict";v.d(we,{N:()=>d});const d=(()=>{function te(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return te.prototype=Object.create(Error.prototype),te})()},7744:(me,we,v)=>{"use strict";v.d(we,{B:()=>d});const d=(()=>{function te(l){return Error.call(this),this.message=l?`${l.length} errors occurred during unsubscription:\n${l.map((J,de)=>`${de+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=l,this}return te.prototype=Object.create(Error.prototype),te})()},3179:(me,we,v)=>{"use strict";v.d(we,{_:()=>d});var O=v(7393);function d(te){for(;te;){const{closed:l,destination:J,isStopped:de}=te;if(l||de)return!1;te=J&&J instanceof O.L?J:null}return!0}},4449:(me,we,v)=>{"use strict";function O(d){setTimeout(()=>{throw d},0)}v.d(we,{z:()=>O})},4487:(me,we,v)=>{"use strict";function O(d){return d}v.d(we,{y:()=>O})},9796:(me,we,v)=>{"use strict";v.d(we,{k:()=>O});const O=Array.isArray||(d=>d&&"number"==typeof d.length)},9489:(me,we,v)=>{"use strict";v.d(we,{z:()=>O});const O=d=>d&&"number"==typeof d.length&&"function"!=typeof d},9105:(me,we,v)=>{"use strict";function O(d){return"function"==typeof d}v.d(we,{m:()=>O})},1555:(me,we,v)=>{"use strict";function O(d){return null!==d&&"object"==typeof d}v.d(we,{K:()=>O})},4072:(me,we,v)=>{"use strict";function O(d){return!!d&&"function"!=typeof d.subscribe&&"function"==typeof d.then}v.d(we,{t:()=>O})},4869:(me,we,v)=>{"use strict";function O(d){return d&&"function"==typeof d.schedule}v.d(we,{K:()=>O})},8640:(me,we,v)=>{"use strict";function O(){}v.d(we,{Z:()=>O})},4022:(me,we,v)=>{"use strict";v.d(we,{z:()=>d,U:()=>te});var O=v(4487);function d(...l){return te(l)}function te(l){return 0===l.length?O.y:1===l.length?l[0]:function(de){return l.reduce((_e,se)=>se(_e),de)}}},7444:(me,we,v)=>{"use strict";v.d(we,{s:()=>ie});var O=v(5015),d=v(4449),l=v(377),de=v(6554),se=v(9489),he=v(4072),ce=v(1555);const ie=fe=>{if(fe&&"function"==typeof fe[de.L])return(fe=>be=>{const xe=fe[de.L]();if("function"!=typeof xe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return xe.subscribe(be)})(fe);if((0,se.z)(fe))return(0,O.V)(fe);if((0,he.t)(fe))return(fe=>be=>(fe.then(xe=>{be.closed||(be.next(xe),be.complete())},xe=>be.error(xe)).then(null,d.z),be))(fe);if(fe&&"function"==typeof fe[l.hZ])return(fe=>be=>{const xe=fe[l.hZ]();for(;;){let Fe;try{Fe=xe.next()}catch(Ye){return be.error(Ye),be}if(Fe.done){be.complete();break}if(be.next(Fe.value),be.closed)break}return"function"==typeof xe.return&&be.add(()=>{xe.return&&xe.return()}),be})(fe);{const xe=`You provided ${(0,ce.K)(fe)?"an invalid object":`'${fe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(xe)}}},5015:(me,we,v)=>{"use strict";v.d(we,{V:()=>O});const O=d=>te=>{for(let l=0,J=d.length;l<J&&!te.closed;l++)te.next(d[l]);te.complete()}},509:(me,we,v)=>{"use strict";v.d(we,{D:()=>J});var O=v(7393);class d extends O.L{constructor(_e,se,he){super(),this.parent=_e,this.outerValue=se,this.outerIndex=he,this.index=0}_next(_e){this.parent.notifyNext(this.outerValue,_e,this.outerIndex,this.index++,this)}_error(_e){this.parent.notifyError(_e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var te=v(7444),l=v(9897);function J(de,_e,se,he,ce=new d(de,se,he)){if(!ce.closed)return _e instanceof l.y?_e.subscribe(ce):(0,te.s)(_e)(ce)}},5142:()=>{!function(me){var we={};function v(O){if(we[O])return we[O].exports;var d=we[O]={i:O,l:!1,exports:{}};return me[O].call(d.exports,d,d.exports,v),d.l=!0,d.exports}v.m=me,v.c=we,v.d=function(O,d,te){v.o(O,d)||Object.defineProperty(O,d,{enumerable:!0,get:te})},v.r=function(O){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})},v.t=function(O,d){if(1&d&&(O=v(O)),8&d||4&d&&"object"==typeof O&&O&&O.__esModule)return O;var te=Object.create(null);if(v.r(te),Object.defineProperty(te,"default",{enumerable:!0,value:O}),2&d&&"string"!=typeof O)for(var l in O)v.d(te,l,function(J){return O[J]}.bind(null,l));return te},v.n=function(O){var d=O&&O.__esModule?function(){return O.default}:function(){return O};return v.d(d,"a",d),d},v.o=function(O,d){return Object.prototype.hasOwnProperty.call(O,d)},v.p="",v(v.s=193)}([function(me,we,v){(function(O){function d(te){return te&&te.Math==Math&&te}me.exports=d("object"==typeof globalThis&&globalThis)||d("object"==typeof window&&window)||d("object"==typeof self&&self)||d("object"==typeof O&&O)||function(){return this}()||Function("return this")()}).call(this,v(154))},function(me,we,v){v=v(60);var O=Function.prototype,te=O.call,l=v&&O.bind.bind(te,te);me.exports=v?function(J){return J&&l(J)}:function(J){return J&&function(){return te.apply(J,arguments)}}},function(me,we){me.exports=function(v){try{return!!v()}catch(O){return!0}}},function(me,we,v){var O=v(0),d=v(42).f,te=v(45),l=v(37),J=v(98),de=v(126),_e=v(81);me.exports=function(se,he){var ce,ie,fe,be=se.target,xe=se.global,Fe=se.stat,Ye=xe?O:Fe?O[be]||J(be,{}):(O[be]||{}).prototype;if(Ye)for(ce in he){if(ie=he[ce],fe=se.noTargetGet?(fe=d(Ye,ce))&&fe.value:Ye[ce],!_e(xe?ce:be+(Fe?".":"#")+ce,se.forced)&&void 0!==fe){if(typeof ie==typeof fe)continue;de(ie,fe)}(se.sham||fe&&fe.sham)&&te(ie,"sham",!0),l(Ye,ce,ie,se)}}},function(me,we,v){var O=v(105),d=v(37);v=v(158),O||d(Object.prototype,"toString",v,{unsafe:!0})},function(me,we,v){"use strict";var O=v(30),d=v(89),te=v(68),l=v(49),J=v(22).f,de=v(109),_e=v(54),se=(v=v(17),"Array Iterator"),he=l.set,ce=l.getterFor(se);if(me.exports=de(Array,"Array",function(ie,fe){he(this,{type:se,target:O(ie),index:0,kind:fe})},function(){var ie=ce(this),fe=ie.target,be=ie.kind,xe=ie.index++;return!fe||xe>=fe.length?{value:ie.target=void 0,done:!0}:"keys"==be?{value:xe,done:!1}:"values"==be?{value:fe[xe],done:!1}:{value:[xe,fe[xe]],done:!1}},"values"),l=te.Arguments=te.Array,d("keys"),d("values"),d("entries"),!_e&&v&&"values"!==l.name)try{J(l,"name",{value:"values"})}catch(ie){}},function(me,we,v){"use strict";var O=v(137).charAt,d=v(23),te=v(49),l=(v=v(109),"String Iterator"),J=te.set,de=te.getterFor(l);v(String,"String",function(_e){J(this,{type:l,string:d(_e),index:0})},function(){var _e=de(this),se=_e.string,he=_e.index;return he>=se.length?{value:void 0,done:!0}:(se=O(se,he),_e.index+=se.length,{value:se,done:!1})})},function(me,we,v){"use strict";function O(Wt,On){var fn=Pt[Wt]=Zt(Li);return _o(fn,{type:pr,tag:Wt,description:On}),Ye||(fn.description=On),fn}function d(Wt,On,fn){return Wt===pi&&d(qe,On,fn),Bt(Wt),On=jt(On),Bt(fn),ht(Pt,On)?(fn.enumerable?(ht(Wt,bi)&&Wt[bi][On]&&(Wt[bi][On]=!1),fn=Zt(fn,{enumerable:Xt(0,!1)})):(ht(Wt,bi)||Er(Wt,bi,Xt(1,{})),Wt[bi][On]=!0),jn(Wt,On,fn)):Er(Wt,On,fn)}function te(Wt,On){Bt(Wt);var fn=xt(On);return On=cn(fn).concat(_e(fn)),ri(On,function(Rr){Ye&&!be(l,fn,Rr)||d(Wt,Rr,fn[Rr])}),Wt}function l(Wt){Wt=jt(Wt);var On=be(lr,this,Wt);return!(this===pi&&ht(Pt,Wt)&&!ht(qe,Wt))&&(!(On||!ht(this,Wt)||!ht(Pt,Wt)||ht(this,bi)&&this[bi][Wt])||On)}function J(Wt,On){var fn;if(Wt=xt(Wt),On=jt(On),Wt!==pi||!ht(Pt,On)||ht(qe,On))return!(fn=Gr(Wt,On))||!ht(Pt,On)||ht(Wt,bi)&&Wt[bi][On]||(fn.enumerable=!0),fn}function de(Wt){Wt=Cr(xt(Wt));var On=[];return ri(Wt,function(fn){ht(Pt,fn)||ht(ni,fn)||ir(On,fn)}),On}function _e(Wt){var On=Wt===pi,fn=(Wt=Cr(On?qe:xt(Wt)),[]);return ri(Wt,function(Rr){!ht(Pt,Rr)||On&&!ht(pi,Rr)||ir(fn,Pt[Rr])}),fn}var se,he=v(3),ce=v(0),ie=v(43),fe=v(84),be=v(21),xe=v(1),Fe=v(54),Ye=v(17),Se=v(96),Je=v(2),ht=v(20),yt=v(86),St=v(14),$t=v(19),Tt=v(44),Ct=v(73),Bt=v(18),Kt=v(36),xt=v(30),jt=v(72),Lt=v(23),Xt=v(61),Zt=v(50),cn=v(66),mn=v(55),Lr=v(107),Jn=v(103),fr=v(42),Fr=v(22),si=v(132),yi=v(70),Ti=v(106),Pi=v(37),Nt=v(77),An=v(79),ni=v(63),ui=v(78),vi=v(12),Zn=v(133),Oi=v(134),Ur=v(87),gr=v(49),ri=v(56).forEach,bi=An("hidden"),pr="Symbol",_o=(v="prototype",An=vi("toPrimitive"),gr.set),fi=gr.getterFor(pr),pi=Object[v],ii=ce.Symbol,Li=ii&&ii[v],nr=ce.TypeError,Hr=(gr=ce.QObject,ie("JSON","stringify")),Gr=fr.f,Er=Fr.f,Cr=Lr.f,lr=yi.f,ir=xe([].push),Pt=Nt("symbols"),qe=Nt("op-symbols"),Xe=Nt("string-to-symbol-registry"),zt=Nt("symbol-to-string-registry"),Qt=(ce=Nt("wks"),!gr||!gr[v]||!gr[v].findChild),jn=Ye&&Je(function(){return 7!=Zt(Er({},"a",{get:function(){return Er(this,"a",{value:7}).a}})).a})?function(Wt,On,fn){var Rr=Gr(pi,On);Rr&&delete pi[On],Er(Wt,On,fn),Rr&&Wt!==pi&&Er(pi,On,Rr)}:Er;Se||(Pi(Li=(ii=function(){if(Tt(Li,this))throw nr("Symbol is not a constructor");var Wt=arguments.length&&void 0!==arguments[0]?Lt(arguments[0]):void 0,On=ui(Wt),fn=function(Rr){this===pi&&be(fn,qe,Rr),ht(this,bi)&&ht(this[bi],On)&&(this[bi][On]=!1),jn(this,On,Xt(1,Rr))};return Ye&&Qt&&jn(pi,On,{configurable:!0,set:fn}),O(On,Wt)})[v],"toString",function(){return fi(this).tag}),Pi(ii,"withoutSetter",function(Wt){return O(ui(Wt),Wt)}),yi.f=l,Fr.f=d,si.f=te,fr.f=J,mn.f=Lr.f=de,Jn.f=_e,Zn.f=function(Wt){return O(vi(Wt),Wt)},Ye&&(Er(Li,"description",{configurable:!0,get:function(){return fi(this).description}}),Fe||Pi(pi,"propertyIsEnumerable",l,{unsafe:!0}))),he({global:!0,wrap:!0,forced:!Se,sham:!Se},{Symbol:ii}),ri(cn(ce),function(Wt){Oi(Wt)}),he({target:pr,stat:!0,forced:!Se},{for:function(Wt){if(Wt=Lt(Wt),ht(Xe,Wt))return Xe[Wt];var On=ii(Wt);return Xe[Wt]=On,zt[On]=Wt,On},keyFor:function(Wt){if(!Ct(Wt))throw nr(Wt+" is not a symbol");if(ht(zt,Wt))return zt[Wt]},useSetter:function(){Qt=!0},useSimple:function(){Qt=!1}}),he({target:"Object",stat:!0,forced:!Se,sham:!Ye},{create:function(Wt,On){return void 0===On?Zt(Wt):te(Zt(Wt),On)},defineProperty:d,defineProperties:te,getOwnPropertyDescriptor:J}),he({target:"Object",stat:!0,forced:!Se},{getOwnPropertyNames:de,getOwnPropertySymbols:_e}),he({target:"Object",stat:!0,forced:Je(function(){Jn.f(1)})},{getOwnPropertySymbols:function(Wt){return Jn.f(Kt(Wt))}}),Hr&&he({target:"JSON",stat:!0,forced:!Se||Je(function(){var Wt=ii();return"[null]"!=Hr([Wt])||"{}"!=Hr({a:Wt})||"{}"!=Hr(Object(Wt))})},{stringify:function(Wt,On,fn){var Rr=Ti(arguments),Vi=On;if(($t(On)||void 0!==Wt)&&!Ct(Wt))return yt(On)||(On=function(ao,Tr){if(St(Vi)&&(Tr=be(Vi,this,ao,Tr)),!Ct(Tr))return Tr}),Rr[1]=On,fe(Hr,null,Rr)}}),Li[An]||(se=Li.valueOf,Pi(Li,An,function(Wt){return be(se,this)})),Ur(ii,pr),ni[bi]=!0},function(me,we,v){function O(ie,fe){if(ie){if(ie[se]!==ce)try{_e(ie,se,ce)}catch(xe){ie[se]=ce}if(ie[he]||_e(ie,he,fe),l[fe])for(var be in de)if(ie[be]!==de[be])try{_e(ie,be,de[be])}catch(xe){ie[be]=de[be]}}}var d,te=v(0),l=v(138),J=v(139),de=v(5),_e=v(45),se=(v=v(12))("iterator"),he=v("toStringTag"),ce=de.values;for(d in l)O(te[d]&&te[d].prototype,d);O(J,"DOMTokenList")},function(me,we,v){function O(se){if(se&&se.forEach!==de)try{_e(se,"forEach",de)}catch(he){se.forEach=de}}var d,te=v(0),l=v(138),J=v(139),de=v(168),_e=v(45);for(d in l)l[d]&&O(te[d]&&te[d].prototype);O(J)},function(me,we,v){"use strict";var O,d,te,l,J,de,_e,se=v(3),he=v(17),ce=v(0),ie=v(1),fe=v(20),be=v(14),xe=v(44),Fe=v(23),Ye=v(22).f,Se=(v=v(126),ce.Symbol),Je=Se&&Se.prototype;!he||!be(Se)||"description"in Je&&void 0===Se().description||(O={},v(ce=function(){var ht=arguments.length<1||void 0===arguments[0]?void 0:Fe(arguments[0]),yt=xe(Je,this)?new Se(ht):void 0===ht?Se():Se(ht);return""===ht&&(O[yt]=!0),yt},Se),(ce.prototype=Je).constructor=ce,d="Symbol(test)"==String(Se("test")),te=ie(Je.toString),l=ie(Je.valueOf),J=/^Symbol\((.*)\)[^)]+$/,de=ie("".replace),_e=ie("".slice),Ye(Je,"description",{configurable:!0,get:function(){var ht=l(this),yt=te(ht);return fe(O,ht)?"":""===(ht=d?_e(yt,7,-1):de(yt,J,"$1"))?void 0:ht}}),se({global:!0,forced:!0},{Symbol:ce}))},function(me,we,v){v(134)("iterator")},function(me,we,v){var O=v(0),d=v(77),te=v(20),l=v(78),J=v(96),de=v(123),_e=d("wks"),se=O.Symbol,he=se&&se.for,ce=de?se:se&&se.withoutSetter||l;me.exports=function(ie){var fe;return te(_e,ie)&&(J||"string"==typeof _e[ie])||(fe="Symbol."+ie,_e[ie]=J&&te(se,ie)?se[ie]:(de&&he?he:ce)(fe)),_e[ie]}},function(me,we,v){var O=v(3),d=v(36),te=v(66);O({target:"Object",stat:!0,forced:v(2)(function(){te(1)})},{keys:function(l){return te(d(l))}})},function(me,we){me.exports=function(v){return"function"==typeof v}},function(me,we,v){"use strict";var O=v(3),d=v(56).filter;O({target:"Array",proto:!0,forced:!v(94)("filter")},{filter:function(te){return d(this,te,1<arguments.length?arguments[1]:void 0)}})},function(me,we,v){"use strict";var O=v(3);v=v(90),O({target:"RegExp",proto:!0,forced:/./.exec!==v},{exec:v})},function(me,we,v){v=v(2),me.exports=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(me,we,v){var O=v(0),d=v(19),te=O.String,l=O.TypeError;me.exports=function(J){if(d(J))return J;throw l(te(J)+" is not an object")}},function(me,we,v){var O=v(14);me.exports=function(d){return"object"==typeof d?null!==d:O(d)}},function(me,we,v){var O=v(1),d=v(36),te=O({}.hasOwnProperty);me.exports=Object.hasOwn||function(l,J){return te(d(l),J)}},function(me,we,v){v=v(60);var O=Function.prototype.call;me.exports=v?O.bind(O):function(){return O.apply(O,arguments)}},function(me,we,v){var O=v(0),d=v(17),te=v(124),l=v(125),J=v(18),de=v(72),_e=O.TypeError,se=Object.defineProperty,he=Object.getOwnPropertyDescriptor,ce="enumerable",ie="configurable",fe="writable";we.f=d?l?function(be,xe,Fe){var Ye;return J(be),xe=de(xe),J(Fe),"function"==typeof be&&"prototype"===xe&&"value"in Fe&&fe in Fe&&!Fe[fe]&&(Ye=he(be,xe))&&Ye[fe]&&(be[xe]=Fe.value,Fe={configurable:(ie in Fe?Fe:Ye)[ie],enumerable:(ce in Fe?Fe:Ye)[ce],writable:!1}),se(be,xe,Fe)}:se:function(be,xe,Fe){if(J(be),xe=de(xe),J(Fe),te)try{return se(be,xe,Fe)}catch(Ye){}if("get"in Fe||"set"in Fe)throw _e("Accessors not supported");return"value"in Fe&&(be[xe]=Fe.value),be}},function(me,we,v){var O=v(0),d=v(83),te=O.String;me.exports=function(l){if("Symbol"===d(l))throw TypeError("Cannot convert a Symbol value to a string");return te(l)}},function(me,we,v){var O=v(3),d=v(2),te=v(30),l=v(42).f;v=v(17),d=d(function(){l(1)}),O({target:"Object",stat:!0,forced:!v||d,sham:!v},{getOwnPropertyDescriptor:function(J,de){return l(te(J),de)}})},function(me,we,v){var O=v(3),d=v(17),te=v(127),l=v(30),J=v(42),de=v(67);O({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(_e){for(var se,he,ce=l(_e),ie=J.f,fe=te(ce),be={},xe=0;fe.length>xe;)void 0!==(he=ie(ce,se=fe[xe++]))&&de(be,se,he);return be}})},function(me,we,v){"use strict";var O=v(3),d=v(0),te=v(2),l=v(86),J=v(19),de=v(36),_e=v(46),se=v(67),he=v(135),ce=v(94),ie=v(12),fe=(v=v(74),ie("isConcatSpreadable")),be=9007199254740991,xe="Maximum allowed index exceeded",Fe=d.TypeError;ie=51<=v||!te(function(){var Ye=[];return Ye[fe]=!1,Ye.concat()[0]!==Ye}),d=ce("concat"),O({target:"Array",proto:!0,forced:!ie||!d},{concat:function(Ye){for(var Se,Je,ht,yt=de(this),St=he(yt,0),$t=0,Tt=-1,Ct=arguments.length;Tt<Ct;Tt++)if(function(Bt){if(!J(Bt))return!1;var Kt=Bt[fe];return void 0!==Kt?!!Kt:l(Bt)}(ht=-1===Tt?yt:arguments[Tt])){if(Je=_e(ht),be<$t+Je)throw Fe(xe);for(Se=0;Se<Je;Se++,$t++)Se in ht&&se(St,$t,ht[Se])}else{if(be<=$t)throw Fe(xe);se(St,$t++,ht)}return St.length=$t,St}})},function(me,we,v){"use strict";var O=v(3),d=v(0),te=v(86),l=v(85),J=v(19),de=v(101),_e=v(46),se=v(30),he=v(67),ce=v(12),ie=v(94),fe=v(106),be=(v=ie("slice"),ce("species")),xe=d.Array,Fe=Math.max;O({target:"Array",proto:!0,forced:!v},{slice:function(Ye,Se){var Je,ht,yt,St=se(this),$t=_e(St),Tt=de(Ye,$t),Ct=de(void 0===Se?$t:Se,$t);if(te(St)&&((Je=l(Je=St.constructor)&&(Je===xe||te(Je.prototype))||J(Je)&&null===(Je=Je[be])?void 0:Je)===xe||void 0===Je))return fe(St,Tt,Ct);for(ht=new(void 0===Je?xe:Je)(Fe(Ct-Tt,0)),yt=0;Tt<Ct;Tt++,yt++)Tt in St&&he(ht,yt,St[Tt]);return ht.length=yt,ht}})},function(me,we,v){"use strict";var O=v(3),d=v(56).find,te=(v=v(89),"find"),l=!0;te in[]&&Array(1)[te](function(){l=!1}),O({target:"Array",proto:!0,forced:l},{find:function(J){return d(this,J,1<arguments.length?arguments[1]:void 0)}}),v(te)},function(me,we,v){v(3)({target:"Object",stat:!0},{setPrototypeOf:v(104)})},function(me,we,v){var O=v(71),d=v(39);me.exports=function(te){return O(d(te))}},function(me,we,v){var O=v(3),d=v(2),te=v(36),l=v(82);v=v(130),O({target:"Object",stat:!0,forced:d(function(){l(1)}),sham:!v},{getPrototypeOf:function(J){return l(te(J))}})},function(me,we,v){var O=v(3),d=v(43),te=v(84),l=v(159),J=v(131),de=v(18),_e=v(19),se=v(50),he=(v=v(2),d("Reflect","construct")),ce=Object.prototype,ie=[].push,fe=v(function(){function xe(){}return!(he(function(){},[],xe)instanceof xe)}),be=!v(function(){he(function(){})});O({target:"Reflect",stat:!0,forced:d=fe||be,sham:d},{construct:function(xe,Fe){J(xe),de(Fe);var Ye=arguments.length<3?xe:J(arguments[2]);if(be&&!fe)return he(xe,Fe,Ye);if(xe==Ye){switch(Fe.length){case 0:return new xe;case 1:return new xe(Fe[0]);case 2:return new xe(Fe[0],Fe[1]);case 3:return new xe(Fe[0],Fe[1],Fe[2]);case 4:return new xe(Fe[0],Fe[1],Fe[2],Fe[3])}var Se=[null];return te(ie,Se,Fe),new(te(l,xe,Se))}return Ye=se(_e(Se=Ye.prototype)?Se:ce),Se=te(xe,Ye,Fe),_e(Se)?Se:Ye}})},function(me,we,v){"use strict";var O=v(3),d=v(129).includes;v=v(89),O({target:"Array",proto:!0},{includes:function(te){return d(this,te,1<arguments.length?arguments[1]:void 0)}}),v("includes")},function(me,we,v){"use strict";var O=v(17),d=v(0),te=v(1),l=v(81),J=v(37),de=v(20),_e=v(117),se=v(44),he=v(73),ce=v(122),ie=v(2),fe=v(55).f,be=v(42).f,xe=v(22).f,Fe=v(167),Ye=v(92).trim,Se=d[v="Number"],Je=Se.prototype,ht=d.TypeError,yt=te("".slice),St=te("".charCodeAt),$t=function(xt){var jt,Lt,Xt,Zt,cn,mn,Lr,Jn=ce(xt,"number");if(he(Jn))throw ht("Cannot convert a Symbol value to a number");if("string"==typeof Jn&&2<Jn.length)if(Jn=Ye(Jn),43===(xt=St(Jn,0))||45===xt){if(88===(jt=St(Jn,2))||120===jt)return NaN}else if(48===xt){switch(St(Jn,1)){case 66:case 98:Lt=2,Xt=49;break;case 79:case 111:Lt=8,Xt=55;break;default:return+Jn}for(cn=(Zt=yt(Jn,2)).length,mn=0;mn<cn;mn++)if((Lr=St(Zt,mn))<48||Xt<Lr)return NaN;return parseInt(Zt,Lt)}return+Jn};if(l(v,!Se(" 0o1")||!Se("0b1")||Se("+0x1"))){for(var Tt,Ct=function(xt){xt=arguments.length<1?0:Se("bigint"==typeof(Lt=ce(Lt=xt,"number"))?Lt:$t(Lt));var Lt,jt=this;return se(Je,jt)&&ie(function(){Fe(jt)})?_e(Object(xt),jt,Ct):xt},Bt=O?fe(Se):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Kt=0;Bt.length>Kt;Kt++)de(Se,Tt=Bt[Kt])&&!de(Ct,Tt)&&xe(Ct,Tt,be(Se,Tt));J(d,v,(Ct.prototype=Je).constructor=Ct)}},function(me,we,v){var O=v(3),d=v(174);O({target:"Array",stat:!0,forced:!v(152)(function(te){Array.from(te)})},{from:d})},function(me,we,v){var O=v(0),d=v(39),te=O.Object;me.exports=function(l){return te(d(l))}},function(me,we,v){var O=v(0),d=v(14),te=v(20),l=v(45),J=v(98),de=v(100),_e=v(49),se=v(64).CONFIGURABLE,he=_e.get,ce=_e.enforce,ie=String(String).split("String");(me.exports=function(fe,be,xe,Fe){var Ye,Se=!!Fe&&!!Fe.unsafe,Je=!!Fe&&!!Fe.enumerable,ht=!!Fe&&!!Fe.noTargetGet;Fe=Fe&&void 0!==Fe.name?Fe.name:be,d(xe)&&("Symbol("===String(Fe).slice(0,7)&&(Fe="["+String(Fe).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!te(xe,"name")||se&&xe.name!==Fe)&&l(xe,"name",Fe),(Ye=ce(xe)).source||(Ye.source=ie.join("string"==typeof Fe?Fe:""))),fe===O?Je?fe[be]=xe:J(be,xe):(Se?!ht&&fe[be]&&(Je=!0):delete fe[be],Je?fe[be]=xe:l(fe,be,xe))})(Function.prototype,"toString",function(){return d(this)&&he(this).source||de(this)})},function(me,we,v){"use strict";var O=v(84),d=v(21),te=v(1),l=v(112),J=v(115),de=v(18),_e=v(39),se=v(164),he=v(113),ce=v(65),ie=v(23),fe=v(53),be=v(108),xe=v(114),Fe=v(90),Ye=v(111),Se=(v=v(2),Ye.UNSUPPORTED_Y),Je=4294967295,ht=Math.min,yt=[].push,St=te(/./.exec),$t=te(yt),Tt=te("".slice);l("split",function(Ct,Bt,Kt){var xt="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(jt,Lt){var Xt=ie(_e(this)),Zt=void 0===Lt?Je:Lt>>>0;if(0==Zt)return[];if(void 0===jt)return[Xt];if(!J(jt))return d(Bt,Xt,jt,Zt);for(var cn,mn,Lr,Jn=[],fr=(Lt=(jt.ignoreCase?"i":"")+(jt.multiline?"m":"")+(jt.unicode?"u":"")+(jt.sticky?"y":""),0),Fr=new RegExp(jt.source,Lt+"g");(cn=d(Fe,Fr,Xt))&&!(fr<(mn=Fr.lastIndex)&&($t(Jn,Tt(Xt,fr,cn.index)),1<cn.length&&cn.index<Xt.length&&O(yt,Jn,be(cn,1)),Lr=cn[0].length,fr=mn,Zt<=Jn.length));)Fr.lastIndex===cn.index&&Fr.lastIndex++;return fr===Xt.length?!Lr&&St(Fr,"")||$t(Jn,""):$t(Jn,Tt(Xt,fr)),Zt<Jn.length?be(Jn,0,Zt):Jn}:"0".split(void 0,0).length?function(jt,Lt){return void 0===jt&&0===Lt?[]:d(Bt,this,jt,Lt)}:Bt;return[function(jt,Lt){var Xt=_e(this),Zt=null==jt?void 0:fe(jt,Ct);return Zt?d(Zt,jt,Xt,Lt):d(xt,ie(Xt),jt,Lt)},function(jt,Lt){var Xt=de(this),Zt=ie(jt);if((jt=Kt(xt,Xt,Zt,Lt,xt!==Bt)).done)return jt.value;jt=se(Xt,RegExp);var cn=Xt.unicode,Lr=new jt(Se?"^(?:"+Xt.source+")":Xt,(Xt.ignoreCase?"i":"")+(Xt.multiline?"m":"")+(Xt.unicode?"u":"")+(Se?"g":"y")),Jn=void 0===Lt?Je:Lt>>>0;if(0==Jn)return[];if(0===Zt.length)return null===xe(Lr,Zt)?[Zt]:[];for(var fr=0,Fr=0,si=[];Fr<Zt.length;){Lr.lastIndex=Se?0:Fr;var yi,Ti=xe(Lr,Se?Tt(Zt,Fr):Zt);if(null===Ti||(yi=ht(ce(Lr.lastIndex+(Se?Fr:0)),Zt.length))===fr)Fr=he(Zt,Fr,cn);else{if($t(si,Tt(Zt,fr,Fr)),si.length===Jn)return si;for(var Pi=1;Pi<=Ti.length-1;Pi++)if($t(si,Ti[Pi]),si.length===Jn)return si;Fr=fr=yi}}return $t(si,Tt(Zt,fr)),si}]},!!v(function(){var Bt=(Ct=/(?:)/).exec,Ct=(Ct.exec=function(){return Bt.apply(this,arguments)},"ab".split(Ct));return 2!==Ct.length||"a"!==Ct[0]||"b"!==Ct[1]}),Se)},function(me,we,v){var O=v(0).TypeError;me.exports=function(d){if(null==d)throw O("Can't call method on "+d);return d}},function(me,we,v){"use strict";var O=v(1),d=v(64).PROPER,te=v(37),l=v(18),J=v(44),de=v(23),_e=v(2),se=(v=v(110),"toString"),he=RegExp.prototype,ce=he[se],ie=O(v);O=_e(function(){return"/a/b"!=ce.call({source:"a",flags:"b"})}),v=d&&ce.name!=se,(O||v)&&te(RegExp.prototype,se,function(){var fe=l(this),be=de(fe.source),xe=fe.flags;return"/"+be+"/"+de(void 0!==xe||!J(he,fe)||"flags"in he?xe:ie(fe))},{unsafe:!0})},function(me,we,v){var O=v(17),d=v(64).EXISTS,te=v(1),l=(v=v(22).f,Function.prototype),J=te(l.toString),de=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,_e=te(de.exec);O&&!d&&v(l,"name",{configurable:!0,get:function(){try{return _e(de,J(this))[1]}catch(se){return""}}})},function(me,we,v){var O=v(17),d=v(21),te=v(70),l=v(61),J=v(30),de=v(72),_e=v(20),se=v(124),he=Object.getOwnPropertyDescriptor;we.f=O?he:function(ce,ie){if(ce=J(ce),ie=de(ie),se)try{return he(ce,ie)}catch(fe){}if(_e(ce,ie))return l(!d(te.f,ce,ie),ce[ie])}},function(me,we,v){var O=v(0),d=v(14);me.exports=function(te,l){return arguments.length<2?d(J=O[te])?J:void 0:O[te]&&O[te][l];var J}},function(me,we,v){v=v(1),me.exports=v({}.isPrototypeOf)},function(me,we,v){var O=v(17),d=v(22),te=v(61);me.exports=O?function(l,J,de){return d.f(l,J,te(1,de))}:function(l,J,de){return l[J]=de,l}},function(me,we,v){var O=v(65);me.exports=function(d){return O(d.length)}},function(me,we,v){"use strict";var O=v(84),d=v(21),te=v(1),l=v(112),J=v(2),de=v(18),_e=v(14),se=v(80),he=v(65),ce=v(23),ie=v(39),fe=v(113),be=v(53),xe=v(173),Fe=v(114),Ye=v(12)("replace"),Se=Math.max,Je=Math.min,ht=te([].concat),yt=te([].push),St=te("".indexOf),$t=te("".slice),Tt=(v="$0"==="a".replace(/./,"$0"),!!/./[Ye]&&""===/./[Ye]("a","$0"));l("replace",function(Ct,Bt,Kt){var xt=Tt?"$":"$0";return[function(jt,Lt){var Xt=ie(this),Zt=null==jt?void 0:be(jt,Ye);return Zt?d(Zt,jt,Xt,Lt):d(Bt,ce(Xt),jt,Lt)},function(jt,Lt){var Xt=de(this),Zt=ce(jt);if("string"==typeof Lt&&-1===St(Lt,xt)&&-1===St(Lt,"$<")&&(jt=Kt(Bt,Xt,Zt,Lt)).done)return jt.value;for(var cn,mn=_e(Lt),Lr=(mn||(Lt=ce(Lt)),Xt.global),Jn=(Lr&&(cn=Xt.unicode,Xt.lastIndex=0),[]);null!==(Ti=Fe(Xt,Zt))&&(yt(Jn,Ti),Lr);)""===ce(Ti[0])&&(Xt.lastIndex=fe(Zt,he(Xt.lastIndex),cn));for(var fr,Fr="",si=0,yi=0;yi<Jn.length;yi++){for(var Ti,Pi=ce((Ti=Jn[yi])[0]),Nt=Se(Je(se(Ti.index),Zt.length),0),An=[],ni=1;ni<Ti.length;ni++)yt(An,void 0===(fr=Ti[ni])?fr:String(fr));var ui=Ti.groups,vi=mn?(vi=ht([Pi],An,Nt,Zt),void 0!==ui&&yt(vi,ui),ce(O(Lt,void 0,vi))):xe(Pi,Zt,Nt,An,ui,Lt);si<=Nt&&(Fr+=$t(Zt,si,Nt)+vi,si=Nt+Pi.length)}return Fr+$t(Zt,si)}]},!!J(function(){var Ct=/./;return Ct.exec=function(){var Bt=[];return Bt.groups={a:"7"},Bt},"7"!=="".replace(Ct,"$<a>")})||!v||Tt)},function(me,we,v){var O=(v=v(1))({}.toString),d=v("".slice);me.exports=function(te){return d(O(te),8,-1)}},function(me,we,v){var O,d,te,l,J,de,_e,se,he=v(156),ce=v(0),ie=v(1),fe=v(19),be=v(45),xe=v(20),Fe=v(97),Ye=v(79),Se=(v=v(63),"Object already initialized"),Je=ce.TypeError;ce=ce.WeakMap,_e=he||Fe.state?(O=Fe.state||(Fe.state=new ce),d=ie(O.get),te=ie(O.has),l=ie(O.set),J=function(ht,yt){if(te(O,ht))throw new Je(Se);return yt.facade=ht,l(O,ht,yt),yt},de=function(ht){return d(O,ht)||{}},function(ht){return te(O,ht)}):(v[se=Ye("state")]=!0,J=function(ht,yt){if(xe(ht,se))throw new Je(Se);return yt.facade=ht,be(ht,se,yt),yt},de=function(ht){return xe(ht,se)?ht[se]:{}},function(ht){return xe(ht,se)}),me.exports={set:J,get:de,has:_e,enforce:function(ht){return _e(ht)?de(ht):J(ht,{})},getterFor:function(ht){return function(yt){if(fe(yt)&&(yt=de(yt)).type===ht)return yt;throw Je("Incompatible receiver, "+ht+" required")}}}},function(me,we,v){function O(){}var te,l=v(18),J=v(132),de=v(102),_e=v(63),se=v(160),he=v(99),ce=(v=v(79),"prototype"),fe=v("IE_PROTO"),be=function(Fe){return"<script>"+Fe+"<\/script>"},xe=function(){try{te=new ActiveXObject("htmlfile")}catch(Je){}xe="undefined"==typeof document||document.domain&&te?function(Fe){Fe.write(be("")),Fe.close();var Ye=Fe.parentWindow.Object;return Fe=null,Ye}(te):(Ye="javascript:",(Fe=he("iframe")).style.display="none",se.appendChild(Fe),Fe.src=String(Ye),(Ye=Fe.contentWindow.document).open(),Ye.write(be("document.F=Object")),Ye.close(),Ye.F);for(var Fe,Ye,Se=de.length;Se--;)delete xe[ce][de[Se]];return xe()};_e[fe]=!0,me.exports=Object.create||function(Fe,Ye){var Se;return null!==Fe?(O[ce]=l(Fe),Se=new O,O[ce]=null,Se[fe]=Fe):Se=xe(),void 0===Ye?Se:J.f(Se,Ye)}},function(me,we,v){"use strict";var O=v(3),d=v(1),te=v(142),l=v(39),J=v(23),de=(v=v(143),d("".indexOf));O({target:"String",proto:!0,forced:!v("includes")},{includes:function(_e){return!!~de(J(l(this)),J(te(_e)),1<arguments.length?arguments[1]:void 0)}})},function(me,we,v){var O=v(17),d=v(0),te=v(1),l=v(81),J=v(117),de=v(45),_e=v(22).f,se=v(55).f,he=v(44),ce=v(115),ie=v(23),fe=v(110),be=v(111),xe=v(37),Fe=v(2),Ye=v(20),Se=v(49).enforce,Je=v(144),ht=v(12),yt=v(140),St=v(141),$t=ht("match"),Tt=d.RegExp,Ct=Tt.prototype,Bt=d.SyntaxError,Kt=te(fe),xt=te(Ct.exec),jt=te("".charAt),Lt=te("".replace),Xt=te("".indexOf),Zt=te("".slice),cn=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,mn=/a/g,Lr=/a/g,Jn=(v=new Tt(mn)!==mn,be.MISSED_STICKY),fr=be.UNSUPPORTED_Y;if(l("RegExp",ht=O&&(!v||Jn||yt||St||Fe(function(){return Lr[$t]=!1,Tt(mn)!=mn||Tt(Lr)==Lr||"/a/i"!=Tt(mn,"i")})))){for(var yi=function(Nt,An){var ni,ui,vi=he(Ct,this),Zn=ce(Nt),Oi=void 0===An,Ur=[],gr=Nt;if(!vi&&Zn&&Oi&&Nt.constructor===yi)return Nt;if((Zn||he(Ct,Nt))&&(Nt=Nt.source,Oi&&(An="flags"in gr?gr.flags:Kt(gr))),Nt=void 0===Nt?"":ie(Nt),An=void 0===An?"":ie(An),gr=Nt,Zn=An=yt&&"dotAll"in mn&&(ni=!!An&&-1<Xt(An,"s"))?Lt(An,/s/g,""):An,Jn&&"sticky"in mn&&(ui=!!An&&-1<Xt(An,"y"))&&fr&&(An=Lt(An,/y/g,"")),St&&(Nt=(Oi=function(Nt){for(var An,ni=Nt.length,ui=0,vi="",Zn=[],Oi={},Ur=!1,gr=!1,ri=0,bi="";ui<=ni;ui++){if("\\"===(An=jt(Nt,ui)))An+=jt(Nt,++ui);else if("]"===An)Ur=!1;else if(!Ur)switch(!0){case"["===An:Ur=!0;break;case"("===An:xt(cn,Zt(Nt,ui+1))&&(ui+=2,gr=!0),vi+=An,ri++;continue;case">"===An&&gr:if(""===bi||Ye(Oi,bi))throw new Bt("Invalid capture group name");Oi[bi]=!0,gr=!(Zn[Zn.length]=[bi,ri]),bi="";continue}gr?bi+=An:vi+=An}return[vi,Zn]}(Nt))[0],Ur=Oi[1]),Oi=J(Tt(Nt,An),vi?this:Ct,yi),(ni||ui||Ur.length)&&(An=Se(Oi),ni&&(An.dotAll=!0,An.raw=yi(function(Nt){for(var An,ni=Nt.length,ui=0,vi="",Zn=!1;ui<=ni;ui++)"\\"===(An=jt(Nt,ui))?vi+=An+jt(Nt,++ui):Zn||"."!==An?("["===An?Zn=!0:"]"===An&&(Zn=!1),vi+=An):vi+="[\\s\\S]";return vi}(Nt),Zn)),ui&&(An.sticky=!0),Ur.length&&(An.groups=Ur)),Nt!==gr)try{de(Oi,"source",""===gr?"(?:)":gr)}catch(ri){}return Oi},Ti=se(Tt),Pi=0;Ti.length>Pi;)!function(Nt){Nt in yi||_e(yi,Nt,{configurable:!0,get:function(){return Tt[Nt]},set:function(An){Tt[Nt]=An}})}(Ti[Pi++]);(Ct.constructor=yi).prototype=Ct,xe(d,"RegExp",yi)}Je("RegExp")},function(me,we,v){var O=v(62);me.exports=function(d,te){return null==(d=d[te])?void 0:O(d)}},function(me,we){me.exports=!1},function(me,we,v){var O=v(128),d=v(102).concat("length","prototype");we.f=Object.getOwnPropertyNames||function(te){return O(te,d)}},function(me,we,v){function O(he){var ce=1==he,ie=2==he,fe=3==he,be=4==he,xe=6==he,Fe=7==he,Ye=5==he||xe;return function(Se,Je,ht,yt){for(var St,$t,Tt=J(Se),Ct=l(Tt),Bt=d(Je,ht),Kt=de(Ct),xt=0,jt=(Je=yt||_e,ce?Je(Se,Kt):ie||Fe?Je(Se,0):void 0);xt<Kt;xt++)if((Ye||xt in Ct)&&($t=Bt(St=Ct[xt],xt,Tt),he))if(ce)jt[xt]=$t;else if($t)switch(he){case 3:return!0;case 5:return St;case 6:return xt;case 2:se(jt,St)}else switch(he){case 4:return!1;case 7:se(jt,St)}return xe?-1:fe||be?be:jt}}var d=v(88),te=v(1),l=v(71),J=v(36),de=v(46),_e=v(135),se=te([].push);me.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(me,we,v){"use strict";var O=v(3),d=v(1),te=v(42).f,l=v(65),J=v(23),de=v(142),_e=v(39),se=v(143),he=(v=v(54),d("".startsWith)),ce=d("".slice),ie=Math.min;d=se("startsWith"),O({target:"String",proto:!0,forced:!(!v&&!d&&(se=te(String.prototype,"startsWith"))&&!se.writable||d)},{startsWith:function(fe){var be=J(_e(this)),xe=(de(fe),l(ie(1<arguments.length?arguments[1]:void 0,be.length)));return fe=J(fe),he?he(be,fe,xe):ce(be,xe,xe+fe.length)===fe}})},function(me,we,v){"use strict";var O=v(3),d=v(56).map;O({target:"Array",proto:!0,forced:!v(94)("map")},{map:function(te){return d(this,te,1<arguments.length?arguments[1]:void 0)}})},function(me,we,v){var O=v(3),d=v(21),te=v(19),l=v(18),J=v(179),de=v(42),_e=v(82);O({target:"Reflect",stat:!0},{get:function se(he,ce){var ie,fe=arguments.length<3?he:arguments[2];return l(he)===fe?he[ce]:(ie=de.f(he,ce))?J(ie)?ie.value:void 0===ie.get?void 0:d(ie.get,fe):te(ie=_e(he))?se(ie,ce,fe):void 0}})},function(me,we,v){v=v(2),me.exports=!v(function(){var O=function(){}.bind();return"function"!=typeof O||O.hasOwnProperty("prototype")})},function(me,we){me.exports=function(v,O){return{enumerable:!(1&v),configurable:!(2&v),writable:!(4&v),value:O}}},function(me,we,v){var O=v(0),d=v(14),te=v(76),l=O.TypeError;me.exports=function(J){if(d(J))return J;throw l(te(J)+" is not a function")}},function(me,we){me.exports={}},function(me,we,v){var O=v(17),d=(v=v(20),Function.prototype),te=O&&Object.getOwnPropertyDescriptor,l=(v=v(d,"name"))&&"something"===function(){}.name;O=v&&(!O||te(d,"name").configurable),me.exports={EXISTS:v,PROPER:l,CONFIGURABLE:O}},function(me,we,v){var O=v(80),d=Math.min;me.exports=function(te){return 0<te?d(O(te),9007199254740991):0}},function(me,we,v){var O=v(128),d=v(102);me.exports=Object.keys||function(te){return O(te,d)}},function(me,we,v){"use strict";var O=v(72),d=v(22),te=v(61);me.exports=function(l,J,de){(J=O(J))in l?d.f(l,J,te(0,de)):l[J]=de}},function(me,we){me.exports={}},function(me,we,v){"use strict";var O=v(21),d=v(112),te=v(18),l=v(65),J=v(23),de=v(39),_e=v(53),se=v(113),he=v(114);d("match",function(ce,ie,fe){return[function(be){var xe=de(this),Fe=null==be?void 0:_e(be,ce);return Fe?O(Fe,be,xe):new RegExp(be)[ce](J(xe))},function(be){var xe=te(this),Fe=J(be);if((be=fe(ie,xe,Fe)).done)return be.value;if(!xe.global)return he(xe,Fe);for(var Ye=xe.unicode,Se=[],Je=xe.lastIndex=0;null!==(ht=he(xe,Fe));){var ht=J(ht[0]);""===(Se[Je]=ht)&&(xe.lastIndex=se(Fe,l(xe.lastIndex),Ye)),Je++}return 0===Je?null:Se}]})},function(me,we,v){"use strict";var O={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,te=d&&!O.call({1:2},1);we.f=te?function(l){return!!(l=d(this,l))&&l.enumerable}:O},function(me,we,v){var O=v(0),d=v(1),te=v(2),l=v(48),J=O.Object,de=d("".split);me.exports=te(function(){return!J("z").propertyIsEnumerable(0)})?function(_e){return"String"==l(_e)?de(_e,""):J(_e)}:J},function(me,we,v){var O=v(122),d=v(73);me.exports=function(te){return te=O(te,"string"),d(te)?te:te+""}},function(me,we,v){var O=v(0),d=v(43),te=v(14),l=v(44),J=(v=v(123),O.Object);me.exports=v?function(de){return"symbol"==typeof de}:function(de){var _e=d("Symbol");return te(_e)&&l(_e.prototype,J(de))}},function(me,we,v){var O,d,te=v(0),l=(v=v(75),te.process);te=te.Deno,!(d=(te=(l=l&&l.versions||te&&te.version)&&l.v8)?0<(O=te.split("."))[0]&&O[0]<4?1:+(O[0]+O[1]):d)&&v&&(!(O=v.match(/Edge\/(\d+)/))||74<=O[1])&&(O=v.match(/Chrome\/(\d+)/))&&(d=+O[1]),me.exports=d},function(me,we,v){v=v(43),me.exports=v("navigator","userAgent")||""},function(me,we,v){var O=v(0).String;me.exports=function(d){try{return O(d)}catch(te){return"Object"}}},function(me,we,v){var O=v(54),d=v(97);(me.exports=function(te,l){return d[te]||(d[te]=void 0!==l?l:{})})("versions",[]).push({version:"3.21.1",mode:O?"pure":"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(me,we,v){v=v(1);var O=0,d=Math.random(),te=v(1..toString);me.exports=function(l){return"Symbol("+(void 0===l?"":l)+")_"+te(++O+d,36)}},function(me,we,v){var O=v(77),d=v(78),te=O("keys");me.exports=function(l){return te[l]||(te[l]=d(l))}},function(me,we){var v=Math.ceil,O=Math.floor;me.exports=function(d){return(d=+d)!=d||0==d?0:(0<d?O:v)(d)}},function(me,we,v){function O(he,ce){return(he=de[J(he)])==se||he!=_e&&(te(ce)?d(ce):!!ce)}var d=v(2),te=v(14),l=/#|\.prototype\./,J=O.normalize=function(he){return String(he).replace(l,".").toLowerCase()},de=O.data={},_e=O.NATIVE="N",se=O.POLYFILL="P";me.exports=O},function(me,we,v){var O=v(0),d=v(20),te=v(14),l=v(36),J=v(79),de=(v=v(130),J("IE_PROTO")),_e=O.Object,se=_e.prototype;me.exports=v?_e.getPrototypeOf:function(he){if(he=l(he),d(he,de))return he[de];var ce=he.constructor;return te(ce)&&he instanceof ce?ce.prototype:he instanceof _e?se:null}},function(me,we,v){var O=v(0),d=v(105),te=v(14),l=v(48),J=v(12)("toStringTag"),de=O.Object,_e="Arguments"==l(function(){return arguments}());me.exports=d?l:function(se){var he;return void 0===se?"Undefined":null===se?"Null":"string"==typeof(he=function(ce,ie){try{return ce[ie]}catch(fe){}}(se=de(se),J))?he:_e?l(se):"Object"==(he=l(se))&&te(se.callee)?"Arguments":he}},function(me,we,v){v=v(60);var O=Function.prototype,d=O.apply,te=O.call;me.exports="object"==typeof Reflect&&Reflect.apply||(v?te.bind(d):function(){return te.apply(d,arguments)})},function(me,we,v){function O(){}function d(Fe){if(!de(Fe))return!1;try{return ie(O,ce,Fe),!0}catch(Ye){return!1}}function te(Fe){if(!de(Fe))return!1;switch(_e(Fe)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return xe||!!be(fe,he(Fe))}catch(Ye){return!0}}var l=v(1),J=v(2),de=v(14),_e=v(83),se=v(43),he=v(100),ce=[],ie=se("Reflect","construct"),fe=/^\s*(?:class|function)\b/,be=l(fe.exec),xe=!fe.exec(O);te.sham=!0,me.exports=!ie||J(function(){var Fe;return d(d.call)||!d(Object)||!d(function(){Fe=!0})||Fe})?te:d},function(me,we,v){var O=v(48);me.exports=Array.isArray||function(d){return"Array"==O(d)}},function(me,we,v){var O=v(22).f,d=v(20),te=v(12)("toStringTag");me.exports=function(l,J,de){(l=l&&!de?l.prototype:l)&&!d(l,te)&&O(l,te,{configurable:!0,value:J})}},function(me,we,v){var O=v(1),d=v(62),te=v(60),l=O(O.bind);me.exports=function(J,de){return d(J),void 0===de?J:te?l(J,de):function(){return J.apply(de,arguments)}}},function(me,we,v){var O=v(12),d=v(50),te=(v=v(22),O("unscopables")),l=Array.prototype;null==l[te]&&v.f(l,te,{configurable:!0,value:d(null)}),me.exports=function(J){l[te][J]=!0}},function(me,we,v){"use strict";var O=v(21),d=v(1),te=v(23),l=v(110),J=v(111),de=v(77),_e=v(50),se=v(49).get,he=v(140),ce=(v=v(141),de("native-string-replace",String.prototype.replace)),ie=RegExp.prototype.exec,fe=ie,be=d("".charAt),xe=d("".indexOf),Fe=d("".replace),Ye=d("".slice),Se=(de=/b*/g,O(ie,d=/a/,"a"),O(ie,de,"a"),0!==d.lastIndex||0!==de.lastIndex),Je=J.BROKEN_CARET,ht=void 0!==/()??/.exec("")[1];(Se||ht||Je||he||v)&&(fe=function(yt){var St,$t,Tt,Ct,Bt,Kt,xt=this,jt=se(xt);if(yt=te(yt),Lt=jt.raw)return Lt.lastIndex=xt.lastIndex,Zt=O(fe,Lt,yt),xt.lastIndex=Lt.lastIndex,Zt;var Xt=jt.groups,Lt=Je&&xt.sticky,Zt=O(l,xt),cn=(jt=xt.source,0),mn=yt;if(Lt&&(Zt=Fe(Zt,"y",""),-1===xe(Zt,"g")&&(Zt+="g"),mn=Ye(yt,xt.lastIndex),0<xt.lastIndex&&(!xt.multiline||xt.multiline&&"\n"!==be(yt,xt.lastIndex-1))&&(jt="(?: "+jt+")",mn=" "+mn,cn++),St=new RegExp("^(?:"+jt+")",Zt)),ht&&(St=new RegExp("^"+jt+"$(?!\\s)",Zt)),Se&&($t=xt.lastIndex),Tt=O(ie,Lt?St:xt,mn),Lt?Tt?(Tt.input=Ye(Tt.input,cn),Tt[0]=Ye(Tt[0],cn),Tt.index=xt.lastIndex,xt.lastIndex+=Tt[0].length):xt.lastIndex=0:Se&&Tt&&(xt.lastIndex=xt.global?Tt.index+Tt[0].length:$t),ht&&Tt&&1<Tt.length&&O(ce,Tt[0],St,function(){for(Ct=1;Ct<arguments.length-2;Ct++)void 0===arguments[Ct]&&(Tt[Ct]=void 0)}),Tt&&Xt)for(Tt.groups=Bt=_e(null),Ct=0;Ct<Xt.length;Ct++)Bt[(Kt=Xt[Ct])[0]]=Tt[Kt[1]];return Tt}),me.exports=fe},function(me,we,v){"use strict";var O=v(3),d=v(92).trim;O({target:"String",proto:!0,forced:v(165)("trim")},{trim:function(){return d(this)}})},function(me,we,v){function O(se){return function(he){return he=l(te(he)),1&se&&(he=J(he,de,"")),2&se?J(he,_e,""):he}}var d=v(1),te=v(39),l=v(23),J=(v=v(93),d("".replace)),de=(d="["+v+"]",RegExp("^"+d+d+"*")),_e=RegExp(d+d+"*$");me.exports={start:O(1),end:O(2),trim:O(3)}},function(me,we){me.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(me,we,v){var O=v(2),d=v(12),te=v(74),l=d("species");me.exports=function(J){return 51<=te||!O(function(){var de=[];return(de.constructor={})[l]=function(){return{foo:1}},1!==de[J](Boolean).foo})}},function(me,we,v){"use strict";var O=v(3),d=v(1),te=v(71),l=v(30),J=(v=v(118),d([].join));d=te!=Object,te=v("join",","),O({target:"Array",proto:!0,forced:d||!te},{join:function(de){return J(l(this),void 0===de?",":de)}})},function(me,we,v){var O=v(74);v=v(2),me.exports=!!Object.getOwnPropertySymbols&&!v(function(){var d=Symbol();return!String(d)||!(Object(d)instanceof Symbol)||!Symbol.sham&&O&&O<41})},function(me,we,v){var O=v(0),d=(v=v(98),"__core-js_shared__");O=O[d]||v(d,{}),me.exports=O},function(me,we,v){var O=v(0),d=Object.defineProperty;me.exports=function(te,l){try{d(O,te,{value:l,configurable:!0,writable:!0})}catch(J){O[te]=l}return l}},function(me,we,v){var O=v(0),d=(v=v(19),O.document),te=v(d)&&v(d.createElement);me.exports=function(l){return te?d.createElement(l):{}}},function(me,we,v){var O=v(1),d=v(14),te=(v=v(97),O(Function.toString));d(v.inspectSource)||(v.inspectSource=function(l){return te(l)}),me.exports=v.inspectSource},function(me,we,v){var O=v(80),d=Math.max,te=Math.min;me.exports=function(l,J){return(l=O(l))<0?d(l+J,0):te(l,J)}},function(me,we){me.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(me,we){we.f=Object.getOwnPropertySymbols},function(me,we,v){var O=v(1),d=v(18),te=v(157);me.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,J=!1,de={};try{(l=O(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(de,[]),J=de instanceof Array}catch(_e){}return function(_e,se){return d(_e),te(se),J?l(_e,se):_e.__proto__=se,_e}}():void 0)},function(me,we,v){var O={};O[v(12)("toStringTag")]="z",me.exports="[object z]"===String(O)},function(me,we,v){v=v(1),me.exports=v([].slice)},function(me,we,v){var O=v(48),d=v(30),te=v(55).f,l=v(108),J="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];me.exports.f=function(de){if(!J||"Window"!=O(de))return te(d(de));try{return te(de)}catch(_e){return l(J)}}},function(me,we,v){var O=v(0),d=v(101),te=v(46),l=v(67),J=O.Array,de=Math.max;me.exports=function(_e,se,he){for(var ce=te(_e),ie=d(se,ce),fe=d(void 0===he?ce:he,ce),be=J(de(fe-ie,0)),xe=0;ie<fe;ie++,xe++)l(be,xe,_e[ie]);return be.length=xe,be}},function(me,we,v){"use strict";function O(){return this}var d=v(3),te=v(21),l=v(54),J=v(64),de=v(14),_e=v(163),se=v(82),he=v(104),ce=v(87),ie=v(45),fe=v(37),be=v(12),xe=v(68),Fe=(v=v(136),J.PROPER),Ye=J.CONFIGURABLE,Se=v.IteratorPrototype,Je=v.BUGGY_SAFARI_ITERATORS,ht=be("iterator"),yt="values",St="entries";me.exports=function($t,Tt,Ct,Bt,Kt,xt,jt){function Lt(Fr){if(Fr===Kt&&Jn)return Jn;if(!Je&&Fr in mn)return mn[Fr];switch(Fr){case"keys":case yt:case St:return function(){return new Ct(this,Fr)}}return function(){return new Ct(this)}}_e(Ct,Tt,Bt),Bt=Tt+" Iterator";var Xt,Zt,cn=!1,mn=$t.prototype,Lr=mn[ht]||mn["@@iterator"]||Kt&&mn[Kt],Jn=!Je&&Lr||Lt(Kt),fr="Array"==Tt&&mn.entries||Lr;if(fr&&(fr=se(fr.call(new $t)))!==Object.prototype&&fr.next&&(l||se(fr)===Se||(he?he(fr,Se):de(fr[ht])||fe(fr,ht,O)),ce(fr,Bt,!0,!0),l&&(xe[Bt]=O)),Fe&&Kt==yt&&Lr&&Lr.name!==yt&&(!l&&Ye?ie(mn,"name",yt):(cn=!0,Jn=function(){return te(Lr,this)})),Kt)if(Xt={values:Lt(yt),keys:xt?Jn:Lt("keys"),entries:Lt(St)},jt)for(Zt in Xt)!Je&&!cn&&Zt in mn||fe(mn,Zt,Xt[Zt]);else d({target:Tt,proto:!0,forced:Je||cn},Xt);return l&&!jt||mn[ht]===Jn||fe(mn,ht,Jn,{name:Kt}),xe[Tt]=Jn,Xt}},function(me,we,v){"use strict";var O=v(18);me.exports=function(){var d=O(this),te="";return d.global&&(te+="g"),d.ignoreCase&&(te+="i"),d.multiline&&(te+="m"),d.dotAll&&(te+="s"),d.unicode&&(te+="u"),d.sticky&&(te+="y"),te}},function(me,we,v){var O=v(2),d=v(0).RegExp,te=(v=O(function(){var l=d("a","y");return l.lastIndex=2,null!=l.exec("abcd")}))||O(function(){return!d("a","y").sticky});O=v||O(function(){var l=d("^r","gy");return l.lastIndex=2,null!=l.exec("str")}),me.exports={BROKEN_CARET:O,MISSED_STICKY:te,UNSUPPORTED_Y:v}},function(me,we,v){"use strict";v(16);var O=v(1),d=v(37),te=v(90),l=v(2),J=v(12),de=v(45),_e=J("species"),se=RegExp.prototype;me.exports=function(he,ce,ie,fe){var be,xe=J(he),Fe=!l(function(){var Se={};return Se[xe]=function(){return 7},7!=""[he](Se)}),Ye=Fe&&!l(function(){var Se=!1,Je=/a/;return"split"===he&&((Je={constructor:{}}).constructor[_e]=function(){return Je},Je.flags="",Je[xe]=/./[xe]),Je.exec=function(){return Se=!0,null},Je[xe](""),!Se});Fe&&Ye&&!ie||(be=O(/./[xe]),Ye=ce(xe,""[he],function(Se,Je,ht,yt,St){Se=O(Se);var $t=Je.exec;return $t===te||$t===se.exec?Fe&&!St?{done:!0,value:be(Je,ht,yt)}:{done:!0,value:Se(ht,Je,yt)}:{done:!1}}),d(String.prototype,he,Ye[0]),d(se,xe,Ye[1])),fe&&de(se[xe],"sham",!0)}},function(me,we,v){"use strict";var O=v(137).charAt;me.exports=function(d,te,l){return te+(l?O(d,te).length:1)}},function(me,we,v){var O=v(0),d=v(21),te=v(18),l=v(14),J=v(48),de=v(90),_e=O.TypeError;me.exports=function(se,he){var ce=se.exec;if(l(ce))return null!==(ce=d(ce,se,he))&&te(ce),ce;if("RegExp"===J(se))return d(de,se,he);throw _e("RegExp#exec called on incompatible receiver")}},function(me,we,v){var O=v(19),d=v(48),te=v(12)("match");me.exports=function(l){var J;return O(l)&&(void 0!==(J=l[te])?!!J:"RegExp"==d(l))}},function(me,we,v){var O=v(3);v=v(166),O({target:"Number",stat:!0,forced:Number.parseFloat!=v},{parseFloat:v})},function(me,we,v){var O=v(14),d=v(19),te=v(104);me.exports=function(l,J,de){return te&&O(J=J.constructor)&&J!==de&&d(J=J.prototype)&&J!==de.prototype&&te(l,J),l}},function(me,we,v){"use strict";var O=v(2);me.exports=function(d,te){var l=[][d];return!!l&&O(function(){l.call(null,te||function(){return 1},1)})}},function(me,we,v){"use strict";v(145)("Set",function(O){return function(){return O(this,arguments.length?arguments[0]:void 0)}},v(153))},function(me,we,v){var O=v(83),d=v(53),te=v(68),l=v(12)("iterator");me.exports=function(J){if(null!=J)return d(J,l)||d(J,"@@iterator")||te[O(J)]}},function(me,we,v){var O=v(3);v=v(178),O({target:"Number",stat:!0,forced:Number.parseInt!=v},{parseInt:v})},function(me,we,v){var O=v(0),d=v(21),te=v(19),l=v(73),J=v(53),de=v(155),_e=(v=v(12),O.TypeError),se=v("toPrimitive");me.exports=function(he,ce){if(!te(he)||l(he))return he;var ie=J(he,se);if(ie){if(ie=d(ie,he,ce=void 0===ce?"default":ce),!te(ie)||l(ie))return ie;throw _e("Can't convert object to primitive value")}return de(he,ce=void 0===ce?"number":ce)}},function(me,we,v){v=v(96),me.exports=v&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(me,we,v){var O=v(17),d=v(2),te=v(99);me.exports=!O&&!d(function(){return 7!=Object.defineProperty(te("div"),"a",{get:function(){return 7}}).a})},function(me,we,v){var O=v(17);v=v(2),me.exports=O&&v(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},function(me,we,v){var O=v(20),d=v(127),te=v(42),l=v(22);me.exports=function(J,de,_e){for(var se=d(de),he=l.f,ce=te.f,ie=0;ie<se.length;ie++){var fe=se[ie];O(J,fe)||_e&&O(_e,fe)||he(J,fe,ce(de,fe))}}},function(me,we,v){var O=v(43),d=v(1),te=v(55),l=v(103),J=v(18),de=d([].concat);me.exports=O("Reflect","ownKeys")||function(_e){var se=te.f(J(_e)),he=l.f;return he?de(se,he(_e)):se}},function(me,we,v){var O=v(1),d=v(20),te=v(30),l=v(129).indexOf,J=v(63),de=O([].push);me.exports=function(_e,se){var he,ce=te(_e),ie=0,fe=[];for(he in ce)!d(J,he)&&d(ce,he)&&de(fe,he);for(;se.length>ie;)!d(ce,he=se[ie++])||~l(fe,he)||de(fe,he);return fe}},function(me,we,v){function O(J){return function(de,_e,se){var he,ce=d(de),ie=l(ce),fe=te(se,ie);if(J&&_e!=_e){for(;fe<ie;)if((he=ce[fe++])!=he)return!0}else for(;fe<ie;fe++)if((J||fe in ce)&&ce[fe]===_e)return J||fe||0;return!J&&-1}}var d=v(30),te=v(101),l=v(46);me.exports={includes:O(!0),indexOf:O(!1)}},function(me,we,v){v=v(2),me.exports=!v(function(){function O(){}return O.prototype.constructor=null,Object.getPrototypeOf(new O)!==O.prototype})},function(me,we,v){var O=v(0),d=v(85),te=v(76),l=O.TypeError;me.exports=function(J){if(d(J))return J;throw l(te(J)+" is not a constructor")}},function(me,we,v){var O=v(17),d=v(125),te=v(22),l=v(18),J=v(30),de=v(66);we.f=O&&!d?Object.defineProperties:function(_e,se){l(_e);for(var he,ce=J(se),ie=de(se),fe=ie.length,be=0;be<fe;)te.f(_e,he=ie[be++],ce[he]);return _e}},function(me,we,v){v=v(12),we.f=v},function(me,we,v){var O=v(161),d=v(20),te=v(133),l=v(22).f;me.exports=function(J){var de=O.Symbol||(O.Symbol={});d(de,J)||l(de,J,{value:te.f(J)})}},function(me,we,v){var O=v(162);me.exports=function(d,te){return new(O(d))(0===te?0:te)}},function(me,we,v){"use strict";var O,d,te=v(2),l=v(14),J=v(50),de=v(82),_e=v(37),se=v(12),he=(v=v(54),se("iterator"));se=!1,[].keys&&("next"in(d=[].keys())?(de=de(de(d)))!==Object.prototype&&(O=de):se=!0),null==O||te(function(){var ce={};return O[he].call(ce)!==ce})?O={}:v&&(O=J(O)),l(O[he])||_e(O,he,function(){return this}),me.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:se}},function(me,we,v){function O(he){return function(ce,ie){ce=l(J(ce)),ie=te(ie);var fe,be=ce.length;return ie<0||be<=ie?he?"":void 0:(fe=_e(ce,ie))<55296||56319<fe||ie+1===be||(be=_e(ce,ie+1))<56320||57343<be?he?de(ce,ie):fe:he?se(ce,ie,ie+2):be-56320+(fe-55296<<10)+65536}}var d=v(1),te=v(80),l=v(23),J=v(39),de=d("".charAt),_e=d("".charCodeAt),se=d("".slice);me.exports={codeAt:O(!1),charAt:O(!0)}},function(me,we){me.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(me,we,v){v=v(99)("span").classList,me.exports=(v=v&&v.constructor&&v.constructor.prototype)===Object.prototype?void 0:v},function(me,we,v){var O=v(2),d=v(0).RegExp;me.exports=O(function(){var te=d(".","s");return!(te.dotAll&&te.exec("\n")&&"s"===te.flags)})},function(me,we,v){var O=v(2),d=v(0).RegExp;me.exports=O(function(){var te=d("(?<a>b)","g");return"b"!==te.exec("b").groups.a||"bc"!=="b".replace(te,"$<a>c")})},function(me,we,v){var O=v(0),d=v(115),te=O.TypeError;me.exports=function(l){if(d(l))throw te("The method doesn't accept regular expressions");return l}},function(me,we,v){var O=v(12)("match");me.exports=function(d){var te=/./;try{"/./"[d](te)}catch(l){try{return te[O]=!1,"/./"[d](te)}catch(J){}}return!1}},function(me,we,v){"use strict";var O=v(43),d=v(22),te=v(12),l=v(17),J=te("species");me.exports=function(de){de=O(de),l&&de&&!de[J]&&(0,d.f)(de,J,{configurable:!0,get:function(){return this}})}},function(me,we,v){"use strict";var O=v(3),d=v(0),te=v(1),l=v(81),J=v(37),de=v(146),_e=v(147),se=v(151),he=v(14),ce=v(19),ie=v(2),fe=v(152),be=v(87),xe=v(117);me.exports=function(Fe,Ye,Se){function Je(Zt){var cn=te(jt[Zt]);J(jt,Zt,"add"==Zt?function(mn){return cn(this,0===mn?0:mn),this}:"delete"==Zt?function(mn){return!(Bt&&!ce(mn))&&cn(this,0===mn?0:mn)}:"get"==Zt?function(mn){return Bt&&!ce(mn)?void 0:cn(this,0===mn?0:mn)}:"has"==Zt?function(mn){return!(Bt&&!ce(mn))&&cn(this,0===mn?0:mn)}:function(mn,Lr){return cn(this,0===mn?0:mn,Lr),this})}var ht,yt,St,$t,Tt,Ct=-1!==Fe.indexOf("Map"),Bt=-1!==Fe.indexOf("Weak"),Kt=Ct?"set":"add",xt=d[Fe],jt=xt&&xt.prototype,Lt=xt,Xt={};return l(Fe,!he(xt)||!(Bt||jt.forEach&&!ie(function(){(new xt).entries().next()})))?(Lt=Se.getConstructor(Ye,Fe,Ct,Kt),de.enable()):l(Fe,!0)&&(yt=(ht=new Lt)[Kt](Bt?{}:-0,1)!=ht,St=ie(function(){ht.has(1)}),$t=fe(function(Zt){new xt(Zt)}),Tt=!Bt&&ie(function(){for(var Zt=new xt,cn=5;cn--;)Zt[Kt](cn,cn);return!Zt.has(-0)}),$t||(((Lt=Ye(function(Zt,cn){return se(Zt,jt),Zt=xe(new xt,Zt,Lt),null!=cn&&_e(cn,Zt[Kt],{that:Zt,AS_ENTRIES:Ct}),Zt})).prototype=jt).constructor=Lt),(St||Tt)&&(Je("delete"),Je("has"),Ct&&Je("get")),(Tt||yt)&&Je(Kt),Bt&&jt.clear&&delete jt.clear),Xt[Fe]=Lt,O({global:!0,forced:Lt!=xt},Xt),be(Lt,Fe),Bt||Se.setStrong(Lt,Fe,Ct),Lt}},function(me,we,v){function O(Se){_e(Se,xe,{value:{objectID:"O"+Fe++,weakData:{}}})}var d=v(3),te=v(1),l=v(63),J=v(19),de=v(20),_e=v(22).f,se=v(55),he=v(107),ce=v(169),ie=v(78),fe=v(171),be=!1,xe=ie("meta"),Fe=0,Ye=me.exports={enable:function(){Ye.enable=function(){},be=!0;var Se=se.f,Je=te([].splice),ht={};ht[xe]=1,Se(ht).length&&(se.f=function(yt){for(var St=Se(yt),$t=0,Tt=St.length;$t<Tt;$t++)if(St[$t]===xe){Je(St,$t,1);break}return St},d({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:he.f}))},fastKey:function(Se,Je){if(!J(Se))return"symbol"==typeof Se?Se:("string"==typeof Se?"S":"P")+Se;if(!de(Se,xe)){if(!ce(Se))return"F";if(!Je)return"E";O(Se)}return Se[xe].objectID},getWeakData:function(Se,Je){if(!de(Se,xe)){if(!ce(Se))return!0;if(!Je)return!1;O(Se)}return Se[xe].weakData},onFreeze:function(Se){return fe&&be&&ce(Se)&&!de(Se,xe)&&O(Se),Se}};l[xe]=!0},function(me,we,v){function O(Fe,Ye){this.stopped=Fe,this.result=Ye}var d=v(0),te=v(88),l=v(21),J=v(18),de=v(76),_e=v(148),se=v(46),he=v(44),ce=v(149),ie=v(120),fe=v(150),be=d.TypeError,xe=O.prototype;me.exports=function(Fe,Ye,Se){function Je(Zt){return yt&&fe(yt,"normal",Zt),new O(!0,Zt)}function ht(Zt){return xt?(J(Zt),Lt?Xt(Zt[0],Zt[1],Je):Xt(Zt[0],Zt[1])):Lt?Xt(Zt,Je):Xt(Zt)}var yt,St,$t,Tt,Ct,Bt,xt=!(!Se||!Se.AS_ENTRIES),jt=!(!Se||!Se.IS_ITERATOR),Lt=!(!Se||!Se.INTERRUPTED),Xt=te(Ye,Se&&Se.that);if(jt)yt=Fe;else{if(!(Se=ie(Fe)))throw be(de(Fe)+" is not iterable");if(_e(Se)){for(St=0,$t=se(Fe);St<$t;St++)if((Tt=ht(Fe[St]))&&he(xe,Tt))return Tt;return new O(!1)}yt=ce(Fe,Se)}for(Ct=yt.next;!(Bt=l(Ct,yt)).done;){try{Tt=ht(Bt.value)}catch(Zt){fe(yt,"throw",Zt)}if("object"==typeof Tt&&Tt&&he(xe,Tt))return Tt}return new O(!1)}},function(me,we,v){var O=v(12),d=v(68),te=O("iterator"),l=Array.prototype;me.exports=function(J){return void 0!==J&&(d.Array===J||l[te]===J)}},function(me,we,v){var O=v(0),d=v(21),te=v(62),l=v(18),J=v(76),de=v(120),_e=O.TypeError;me.exports=function(se,he){var ce=arguments.length<2?de(se):he;if(te(ce))return l(d(ce,se));throw _e(J(se)+" is not iterable")}},function(me,we,v){var O=v(21),d=v(18),te=v(53);me.exports=function(l,J,de){var _e,se;d(l);try{if(!(_e=te(l,"return"))){if("throw"===J)throw de;return de}_e=O(_e,l)}catch(he){se=!0,_e=he}if("throw"===J)throw de;if(se)throw _e;return d(_e),de}},function(me,we,v){var O=v(0),d=v(44),te=O.TypeError;me.exports=function(l,J){if(d(J,l))return l;throw te("Incorrect invocation")}},function(me,we,v){var O=v(12)("iterator"),d=!1;try{var te=0,l={next:function(){return{done:!!te++}},return:function(){d=!0}};l[O]=function(){return this},Array.from(l,function(){throw 2})}catch(J){}me.exports=function(J,de){if(!de&&!d)return!1;var _e=!1;try{var se={};se[O]=function(){return{next:function(){return{done:_e=!0}}}},J(se)}catch(he){}return _e}},function(me,we,v){"use strict";var O=v(22).f,d=v(50),te=v(172),l=v(88),J=v(151),de=v(147),_e=v(109),se=v(144),he=v(17),ce=v(146).fastKey,ie=(v=v(49)).set,fe=v.getterFor;me.exports={getConstructor:function(be,xe,Fe,Ye){function Se(St,$t,Tt){var Ct,Bt=yt(St),Kt=Je(St,$t);return Kt?Kt.value=Tt:(Bt.last=Kt={index:Ct=ce($t,!0),key:$t,value:Tt,previous:$t=Bt.last,next:void 0,removed:!1},Bt.first||(Bt.first=Kt),$t&&($t.next=Kt),he?Bt.size++:St.size++,"F"!==Ct&&(Bt.index[Ct]=Kt)),St}function Je(St,$t){St=yt(St);var Tt,Ct=ce($t);if("F"!==Ct)return St.index[Ct];for(Tt=St.first;Tt;Tt=Tt.next)if(Tt.key==$t)return Tt}var ht=(be=be(function(St,$t){J(St,ht),ie(St,{type:xe,index:d(null),first:void 0,last:void 0,size:0}),he||(St.size=0),null!=$t&&de($t,St[Ye],{that:St,AS_ENTRIES:Fe})})).prototype,yt=fe(xe);return te(ht,{clear:function(){for(var St=yt(this),$t=St.index,Tt=St.first;Tt;)Tt.removed=!0,Tt.previous&&(Tt.previous=Tt.previous.next=void 0),delete $t[Tt.index],Tt=Tt.next;St.first=St.last=void 0,he?St.size=0:this.size=0},delete:function(St){var $t,Tt,Ct=yt(this);return(St=Je(this,St))&&($t=St.next,Tt=St.previous,delete Ct.index[St.index],St.removed=!0,Tt&&(Tt.next=$t),$t&&($t.previous=Tt),Ct.first==St&&(Ct.first=$t),Ct.last==St&&(Ct.last=Tt),he?Ct.size--:this.size--),!!St},forEach:function(St){for(var $t,Tt=yt(this),Ct=l(St,1<arguments.length?arguments[1]:void 0);$t=$t?$t.next:Tt.first;)for(Ct($t.value,$t.key,this);$t&&$t.removed;)$t=$t.previous},has:function(St){return!!Je(this,St)}}),te(ht,Fe?{get:function(St){return(St=Je(this,St))&&St.value},set:function(St,$t){return Se(this,0===St?0:St,$t)}}:{add:function(St){return Se(this,St=0===St?0:St,St)}}),he&&O(ht,"size",{get:function(){return yt(this).size}}),be},setStrong:function(be,xe,Fe){var Ye=xe+" Iterator",Se=fe(xe),Je=fe(Ye);_e(be,xe,function(ht,yt){ie(this,{type:Ye,target:ht,state:Se(ht),kind:yt,last:void 0})},function(){for(var ht=Je(this),yt=ht.kind,St=ht.last;St&&St.removed;)St=St.previous;return ht.target&&(ht.last=St=St?St.next:ht.state.first)?"keys"==yt?{value:St.key,done:!1}:"values"==yt?{value:St.value,done:!1}:{value:[St.key,St.value],done:!1}:{value:ht.target=void 0,done:!0}},Fe?"entries":"values",!Fe,!0),se(xe)}}},function(me,we){var v=function(){return this}();try{v=v||new Function("return this")()}catch(O){"object"==typeof window&&(v=window)}me.exports=v},function(me,we,v){var O=v(0),d=v(21),te=v(14),l=v(19),J=O.TypeError;me.exports=function(de,_e){var se,he;if("string"===_e&&te(se=de.toString)&&!l(he=d(se,de))||te(se=de.valueOf)&&!l(he=d(se,de))||"string"!==_e&&te(se=de.toString)&&!l(he=d(se,de)))return he;throw J("Can't convert object to primitive value")}},function(me,we,v){var O=v(0),d=v(14);v=v(100),me.exports=d(O=O.WeakMap)&&/native code/.test(v(O))},function(me,we,v){var O=v(0),d=v(14),te=O.String,l=O.TypeError;me.exports=function(J){if("object"==typeof J||d(J))return J;throw l("Can't set "+te(J)+" as a prototype")}},function(me,we,v){"use strict";var O=v(105),d=v(83);me.exports=O?{}.toString:function(){return"[object "+d(this)+"]"}},function(me,we,v){"use strict";var O=v(0),d=v(1),te=v(62),l=v(19),J=v(20),de=v(106),_e=(v=v(60),O.Function),se=d([].concat),he=d([].join),ce={};me.exports=v?_e.bind:function(ie){var fe=te(this),be=fe.prototype,xe=de(arguments,1),Fe=function(){var Ye=se(xe,de(arguments));if(this instanceof Fe){var Se=fe,Je=Ye.length,ht=Ye;if(!J(ce,Je)){for(var yt=[],St=0;St<Je;St++)yt[St]="a["+St+"]";ce[Je]=_e("C,a","return new C("+he(yt,",")+")")}return ce[Je](Se,ht)}return fe.apply(ie,Ye)};return l(be)&&(Fe.prototype=be),Fe}},function(me,we,v){v=v(43),me.exports=v("document","documentElement")},function(me,we,v){v=v(0),me.exports=v},function(me,we,v){var O=v(0),d=v(86),te=v(85),l=v(19),J=v(12)("species"),de=O.Array;me.exports=function(_e){var se;return d(_e)&&(te(se=_e.constructor)&&(se===de||d(se.prototype))||l(se)&&null===(se=se[J]))&&(se=void 0),void 0===se?de:se}},function(me,we,v){"use strict";function O(){return this}var d=v(136).IteratorPrototype,te=v(50),l=v(61),J=v(87),de=v(68);me.exports=function(_e,se,he,ce){return se+=" Iterator",_e.prototype=te(d,{next:l(+!ce,he)}),J(_e,se,!1,!0),de[se]=O,_e}},function(me,we,v){var O=v(18),d=v(131),te=v(12)("species");me.exports=function(l,J){return void 0===(l=O(l).constructor)||null==(l=O(l)[te])?J:d(l)}},function(me,we,v){var O=v(64).PROPER,d=v(2),te=v(93);me.exports=function(l){return d(function(){return!!te[l]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[l]()||O&&te[l].name!==l})}},function(me,we,v){var O=v(0),d=v(2),te=v(1),l=v(23),J=v(92).trim,de=(v=v(93),te("".charAt)),_e=O.parseFloat,se=(te=O.Symbol)&&te.iterator;O=1/_e(v+"-0")!=-1/0||se&&!d(function(){_e(Object(se))}),me.exports=O?function(he){he=J(l(he));var ce=_e(he);return 0===ce&&"-"==de(he,0)?-0:ce}:_e},function(me,we,v){v=v(1),me.exports=v(1..valueOf)},function(me,we,v){"use strict";var O=v(56).forEach;v=v(118)("forEach"),me.exports=v?[].forEach:function(d){return O(this,d,1<arguments.length?arguments[1]:void 0)}},function(me,we,v){var O=v(2),d=v(19),te=v(48),l=v(170),J=Object.isExtensible;v=O(function(){J(1)}),me.exports=v||l?function(de){return!!d(de)&&(!l||"ArrayBuffer"!=te(de))&&(!J||J(de))}:J},function(me,we,v){v=v(2),me.exports=v(function(){var O;"function"==typeof ArrayBuffer&&(O=new ArrayBuffer(8),Object.isExtensible(O)&&Object.defineProperty(O,"a",{value:8}))})},function(me,we,v){v=v(2),me.exports=!v(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(me,we,v){var O=v(37);me.exports=function(d,te,l){for(var J in te)O(d,J,te[J],l);return d}},function(me,we,v){var O=v(1),d=v(36),te=Math.floor,l=O("".charAt),J=O("".replace),de=O("".slice),_e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,se=/\$([$&'`]|\d{1,2})/g;me.exports=function(he,ce,ie,fe,be,xe){var Fe=ie+he.length,Ye=fe.length,Se=se;return void 0!==be&&(be=d(be),Se=_e),J(xe,Se,function(Je,ht){var yt;switch(l(ht,0)){case"$":return"$";case"&":return he;case"`":return de(ce,0,ie);case"'":return de(ce,Fe);case"<":yt=be[de(ht,1,-1)];break;default:var St,$t=+ht;if(0==$t)return Je;if(Ye<$t)return 0!==(St=te($t/10))&&St<=Ye?void 0===fe[St-1]?l(ht,1):fe[St-1]+l(ht,1):Je;yt=fe[$t-1]}return void 0===yt?"":yt})}},function(me,we,v){"use strict";var O=v(0),d=v(88),te=v(21),l=v(36),J=v(175),de=v(148),_e=v(85),se=v(46),he=v(67),ce=v(149),ie=v(120),fe=O.Array;me.exports=function(be){var xe,Fe,Ye,Se,Je,ht,St,yt=l(be),$t=(be=_e(this),1<(St=arguments.length)?arguments[1]:void 0),Tt=void 0!==$t,Ct=0;if(Tt&&($t=d($t,2<St?arguments[2]:void 0)),!(St=ie(yt))||this==fe&&de(St))for(xe=se(yt),Fe=be?new this(xe):fe(xe);Ct<xe;Ct++)ht=Tt?$t(yt[Ct],Ct):yt[Ct],he(Fe,Ct,ht);else for(Je=(Se=ce(yt,St)).next,Fe=be?new this:[];!(Ye=te(Je,Se)).done;Ct++)ht=Tt?J(Se,$t,[Ye.value,Ct],!0):Ye.value,he(Fe,Ct,ht);return Fe.length=Ct,Fe}},function(me,we,v){var O=v(18),d=v(150);me.exports=function(te,l,J,de){try{return de?l(O(J)[0],J[1]):l(J)}catch(_e){d(te,"throw",_e)}}},function(me,we,v){var O=v(3),d=v(2);v=v(107).f,O({target:"Object",stat:!0,forced:d(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:v})},function(me,we,v){"use strict";v(145)("Map",function(O){return function(){return O(this,arguments.length?arguments[0]:void 0)}},v(153))},function(me,we,v){var O=v(0),d=v(2),te=v(1),l=v(23),J=v(92).trim,de=(v=v(93),O.parseInt),_e=(O=O.Symbol)&&O.iterator,se=/^[+-]?0x/i,he=te(se.exec);O=8!==de(v+"08")||22!==de(v+"0x16")||_e&&!d(function(){de(Object(_e))}),me.exports=O?function(ce,ie){return ce=J(l(ce)),de(ce,ie>>>0||(he(se,ce)?16:10))}:de},function(me,we,v){var O=v(20);me.exports=function(d){return void 0!==d&&(O(d,"value")||O(d,"writable"))}},function(me,we,v){"use strict";var O=v(3),d=v(1),te=v(62),l=v(36),J=v(46),de=v(23),_e=v(2),se=v(181),he=v(118),ce=v(182),ie=v(183),fe=v(74),be=v(184),xe=[],Fe=d(xe.sort),Ye=d(xe.push),Se=(v=_e(function(){xe.sort(void 0)}),d=_e(function(){xe.sort(null)}),he=he("sort"),!_e(function(){if(fe)return fe<70;if(!(ce&&3<ce)){if(ie)return!0;if(be)return be<603;for(var Je,ht,yt,St="",$t=65;$t<76;$t++){switch(Je=String.fromCharCode($t),$t){case 66:case 69:case 70:case 72:ht=3;break;case 68:case 71:ht=4;break;default:ht=2}for(yt=0;yt<47;yt++)xe.push({k:Je+yt,v:ht})}for(xe.sort(function(Tt,Ct){return Ct.v-Tt.v}),yt=0;yt<xe.length;yt++)Je=xe[yt].k.charAt(0),St.charAt(St.length-1)!==Je&&(St+=Je);return"DGBEFHACIJK"!==St}}));O({target:"Array",proto:!0,forced:v||!d||!he||!Se},{sort:function(Je){void 0!==Je&&te(Je);var ht=l(this);if(Se)return void 0===Je?Fe(ht):Fe(ht,Je);for(var yt,St,$t=[],Tt=J(ht),Ct=0;Ct<Tt;Ct++)Ct in ht&&Ye($t,ht[Ct]);for(se($t,(St=Je,function(Bt,Kt){return void 0===Kt?-1:void 0===Bt?1:void 0!==St?+St(Bt,Kt)||0:de(Bt)>de(Kt)?1:-1})),yt=$t.length,Ct=0;Ct<yt;)ht[Ct]=$t[Ct++];for(;Ct<Tt;)delete ht[Ct++];return ht}})},function(me,we,v){var d=v(108),te=Math.floor;me.exports=function O(l,J){var de=l.length,_e=te(de/2);if(de<8){for(var se,he,ce=l,ie=J,fe=ce.length,be=1;be<fe;){for(se=ce[he=be];he&&0<ie(ce[he-1],se);)ce[he]=ce[--he];he!==be++&&(ce[he]=se)}return ce}for(var xe=l,Fe=O(d(l,0,_e),J),Ye=O(d(l,_e),J),Se=J,Je=Fe.length,ht=Ye.length,yt=0,St=0;yt<Je||St<ht;)xe[yt+St]=yt<Je&&St<ht?Se(Fe[yt],Ye[St])<=0?Fe[yt++]:Ye[St++]:yt<Je?Fe[yt++]:Ye[St++];return xe}},function(me,we,v){v=v(75).match(/firefox\/(\d+)/i),me.exports=!!v&&+v[1]},function(me,we,v){v=v(75),me.exports=/MSIE|Trident/.test(v)},function(me,we,v){v=v(75).match(/AppleWebKit\/(\d+)\./),me.exports=!!v&&+v[1]},function(me,we,v){var O=v(3);v=v(186),O({target:"Object",stat:!0,forced:Object.assign!==v},{assign:v})},function(me,we,v){"use strict";var O=v(17),d=v(1),te=v(21),l=v(2),J=v(66),de=v(103),_e=v(70),se=v(36),he=v(71),ce=Object.assign,ie=Object.defineProperty,fe=d([].concat);me.exports=!ce||l(function(){if(O&&1!==ce({b:1},ce(ie({},"a",{enumerable:!0,get:function(){ie(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var be={},xe={},Fe=Symbol(),Ye="abcdefghijklmnopqrst";return be[Fe]=7,Ye.split("").forEach(function(Se){xe[Se]=Se}),7!=ce({},be)[Fe]||J(ce({},xe)).join("")!=Ye})?function(be,xe){for(var Fe=se(be),Ye=arguments.length,Se=1,Je=de.f,ht=_e.f;Se<Ye;)for(var yt,St=he(arguments[Se++]),$t=Je?fe(J(St),Je(St)):J(St),Tt=$t.length,Ct=0;Ct<Tt;)yt=$t[Ct++],O&&!te(ht,St,yt)||(Fe[yt]=St[yt]);return Fe}:ce},function(me,we,v){"use strict";var O=v(3),d=v(56).findIndex,te=(v=v(89),"findIndex"),l=!0;te in[]&&Array(1)[te](function(){l=!1}),O({target:"Array",proto:!0,forced:l},{findIndex:function(J){return d(this,J,1<arguments.length?arguments[1]:void 0)}}),v(te)},function(me,we,v){v(3)({target:"Number",stat:!0},{isNaN:function(O){return O!=O}})},function(me,we,v){var O=v(3),d=v(190).values;O({target:"Object",stat:!0},{values:function(te){return d(te)}})},function(me,we,v){function O(se){return function(he){for(var ce,ie=J(he),fe=l(ie),be=fe.length,xe=0,Fe=[];xe<be;)ce=fe[xe++],d&&!de(ie,ce)||_e(Fe,se?[ce,ie[ce]]:ie[ce]);return Fe}}var d=v(17),te=v(1),l=v(66),J=v(30),de=te(v(70).f),_e=te([].push);me.exports={entries:O(!0),values:O(!1)}},function(me,we,v){v=v(3);var O=Math.ceil,d=Math.floor;v({target:"Math",stat:!0},{trunc:function(te){return(0<te?d:O)(te)}})},,function(me,we,v){"use strict";v.r(we);var O={};function d(M){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function te(M){return(M=St(M))&&document.querySelector(M)?M:null}function l(M){return(M=St(M))?document.querySelector(M):null}function J(M){M.dispatchEvent(new Event(yt))}function de(M){return $t(M)?M.jquery?M[0]:M:"string"==typeof M&&0<M.length?document.querySelector(M):null}function _e(M,D,L){Object.keys(L).forEach(function(N){var C=L[N],S=(S=D[N])&&$t(S)?"element":null==S?"".concat(S):{}.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(C).test(S))throw new TypeError("".concat(M.toUpperCase(),': Option "').concat(N,'" provided type "').concat(S,'" but expected type "').concat(C,'".'))})}function se(M){return!(!$t(M)||0===M.getClientRects().length)&&"visible"===getComputedStyle(M).getPropertyValue("visibility")}function he(M){return!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(void 0!==M.disabled?M.disabled:M.hasAttribute("disabled")&&"false"!==M.getAttribute("disabled"))}function ce(M){return document.documentElement.attachShadow?"function"==typeof M.getRootNode?(D=M.getRootNode())instanceof ShadowRoot?D:null:M instanceof ShadowRoot?M:M.parentNode?ce(M.parentNode):null:null;var D}function ie(){}function be(){var M=window.jQuery;return M&&!document.body.hasAttribute("data-bs-no-jquery")?M:null}function xe(){return"rtl"===document.documentElement.dir}function Fe(M){var D;D=function(){var L,N,C=be();C&&(N=C.fn[L=M.NAME],C.fn[L]=M.jQueryInterface,C.fn[L].Constructor=M,C.fn[L].noConflict=function(){return C.fn[L]=N,M.jQueryInterface})},"loading"===document.readyState?(Tt.length||document.addEventListener("DOMContentLoaded",function(){Tt.forEach(function(L){return L()})}),Tt.push(D)):D()}function Ye(M){"function"==typeof M&&M()}function Se(M,D){var L,N;2<arguments.length&&void 0!==arguments[2]&&!arguments[2]?Ye(M):(L=function(C){if(!C)return 0;var S=(C=window.getComputedStyle(C)).transitionDuration,H=(C=C.transitionDelay,Number.parseFloat(S)),K=Number.parseFloat(C);return H||K?(S=S.split(",")[0],C=C.split(",")[0],(Number.parseFloat(S)+Number.parseFloat(C))*ht):0}(D)+5,N=!1,D.addEventListener(yt,function C(S){S.target===D&&(N=!0,D.removeEventListener(yt,C),Ye(M))}),setTimeout(function(){N||J(D)},L))}function Je(M,D,L,N){if(-1===(D=M.indexOf(D)))return M[!L&&N?M.length-1:0];var C=M.length;return D+=L?1:-1,N&&(D=(D+C)%C),M[Math.max(0,Math.min(D,C-1))]}v.r(O),v.d(O,"top",function(){return ii}),v.d(O,"bottom",function(){return Li}),v.d(O,"right",function(){return nr}),v.d(O,"left",function(){return Hr}),v.d(O,"auto",function(){return Gr}),v.d(O,"basePlacements",function(){return Er}),v.d(O,"start",function(){return Cr}),v.d(O,"end",function(){return lr}),v.d(O,"clippingParents",function(){return ir}),v.d(O,"viewport",function(){return Pt}),v.d(O,"popper",function(){return qe}),v.d(O,"reference",function(){return Xe}),v.d(O,"variationPlacements",function(){return zt}),v.d(O,"placements",function(){return Qt}),v.d(O,"beforeRead",function(){return jn}),v.d(O,"read",function(){return Wt}),v.d(O,"afterRead",function(){return On}),v.d(O,"beforeMain",function(){return fn}),v.d(O,"main",function(){return Rr}),v.d(O,"afterMain",function(){return Vi}),v.d(O,"beforeWrite",function(){return ao}),v.d(O,"write",function(){return Tr}),v.d(O,"afterWrite",function(){return Nn}),v.d(O,"modifierPhases",function(){return mi}),v.d(O,"applyStyles",function(){return it}),v.d(O,"arrow",function(){return hr}),v.d(O,"computeStyles",function(){return Zr}),v.d(O,"eventListeners",function(){return dt}),v.d(O,"flip",function(){return Ms}),v.d(O,"hide",function(){return ge}),v.d(O,"offset",function(){return Be}),v.d(O,"popperOffsets",function(){return rt}),v.d(O,"preventOverflow",function(){return Mt}),v.d(O,"popperGenerator",function(){return oi}),v.d(O,"detectOverflow",function(){return Vs}),v.d(O,"createPopperBase",function(){return zi}),v.d(O,"createPopper",function(){return Wr}),v.d(O,"createPopperLite",function(){return Vl}),v(29),v(31),v(4),v(32),v(7),v(10),v(11),v(5),v(6),v(8),v(16),v(69),v(33),v(51),v(57),v(38),v(91),v(116),v(34),v(9),v(13),v(52),v(40),v(26);var ht=1e3,yt="transitionend",St=function(M){var D=M.getAttribute("data-bs-target");if(!D||"#"===D){if(!(M=M.getAttribute("href"))||!M.includes("#")&&!M.startsWith("."))return null;D=(M=M.includes("#")&&!M.startsWith("#")?"#".concat(M.split("#")[1]):M)&&"#"!==M?M.trim():null}return D},$t=function(M){return!(!M||"object"!==d(M))&&void 0!==(M=void 0!==M.jquery?M[0]:M).nodeType},Tt=[];function Ct(M,D){return function(L){if(Array.isArray(L))return L}(M)||function(L,N){var C=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=C){var S,H,K=[],Ee=!0,Te=!1;try{for(C=C.call(L);!(Ee=(S=C.next()).done)&&(K.push(S.value),!N||K.length!==N);Ee=!0);}catch(He){Te=!0,H=He}finally{try{Ee||null==C.return||C.return()}finally{if(Te)throw H}}return K}}(M,D)||function(L,N){if(L){if("string"==typeof L)return Bt(L,N);var C=Object.prototype.toString.call(L).slice(8,-1);return"Map"===(C="Object"===C&&L.constructor?L.constructor.name:C)||"Set"===C?Array.from(L):"Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?Bt(L,N):void 0}}(M,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}v(119),v(47),v(27),v(41),v(35);var Kt=/[^.]*(?=\..*)\.|.*/,xt=/\..*/,jt=/::\d+$/,Lt={},Xt=1,Zt={mouseenter:"mouseover",mouseleave:"mouseout"},cn=/^(mouseenter|mouseleave)/i,mn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Lr(M,D){return D&&"".concat(D,"::").concat(Xt++)||M.uidEvent||Xt++}function Jn(M){var D=Lr(M);return M.uidEvent=D,Lt[D]=Lt[D]||{},Lt[D]}function fr(M,D,L){for(var N=2<arguments.length&&void 0!==L?L:null,C=Object.keys(M),S=0,H=C.length;S<H;S++){var K=M[C[S]];if(K.originalHandler===D&&K.delegationSelector===N)return K}return null}function Fr(M,D,L){var N="string"==typeof D;return L=N?L:D,D=Ti(M),[N,L,D=mn.has(D)?D:M]}function si(M,D,L,N,C){var S,H,K,Ee,Te,He,Ot,Ft,In,dn;"string"==typeof D&&M&&(L||(L=N,N=null),cn.test(D)&&(K=function(Gn){return function(en){if(!en.relatedTarget||en.relatedTarget!==en.delegateTarget&&!en.delegateTarget.contains(en.relatedTarget))return Gn.call(this,en)}},N?N=K(N):L=K(L)),S=(K=Ct(Fr(D,L,N),3))[0],H=K[1],K=K[2],(Te=fr(Ee=(Ee=Jn(M))[K]||(Ee[K]={}),H,S?L:null))?Te.oneOff=Te.oneOff&&C:(Te=Lr(H,D.replace(Kt,"")),(D=S?(Ft=M,In=L,dn=N,function Gn(en){for(var xn=Ft.querySelectorAll(In),yn=en.target;yn&&yn!==this;yn=yn.parentNode)for(var Dn=xn.length;Dn--;)if(xn[Dn]===yn)return en.delegateTarget=yn,Gn.oneOff&&Pi.off(Ft,en.type,In,dn),dn.apply(yn,[en]);return null}):(He=M,Ot=L,function Gn(en){return en.delegateTarget=He,Gn.oneOff&&Pi.off(He,en.type,Ot),Ot.apply(He,[en])})).delegationSelector=S?L:null,D.originalHandler=H,D.oneOff=C,Ee[D.uidEvent=Te]=D,M.addEventListener(K,D,S)))}function yi(M,D,L,N,C){(N=fr(D[L],N,C))&&(M.removeEventListener(L,N,Boolean(C)),delete D[L][N.uidEvent])}function Ti(M){return M=M.replace(xt,""),Zt[M]||M}var Pi={on:function(M,D,L,N){si(M,D,L,N,!1)},one:function(M,D,L,N){si(M,D,L,N,!0)},off:function(M,D,L,N){if("string"==typeof D&&M){var C=(N=Ct(Fr(D,L,N),3))[0],S=N[1],H=N[2],K=H!==D,Ee=Jn(M);if(N=D.startsWith("."),void 0!==S)return Ee&&Ee[H]?void yi(M,Ee,H,S,C?L:null):void 0;N&&Object.keys(Ee).forEach(function(Ot){var Ft,In,dn,Gn,en;Ft=M,In=Ee,dn=Ot,Gn=D.slice(1),en=In[dn]||{},Object.keys(en).forEach(function(xn){xn.includes(Gn)&&yi(Ft,In,dn,(xn=en[xn]).originalHandler,xn.delegationSelector)})});var Te=Ee[H]||{};Object.keys(Te).forEach(function(Ot){var Ft=Ot.replace(jt,"");K&&!D.includes(Ft)||yi(M,Ee,H,(Ft=Te[Ot]).originalHandler,Ft.delegationSelector)})}},trigger:function(M,D,L){if("string"!=typeof D||!M)return null;var N,C=be(),S=Ti(D),H=D!==S,K=mn.has(S),Ee=!0,Te=!0,He=!1,Ot=null;return H&&C&&(N=C.Event(D,L),C(M).trigger(N),Ee=!N.isPropagationStopped(),Te=!N.isImmediatePropagationStopped(),He=N.isDefaultPrevented()),K?(Ot=document.createEvent("HTMLEvents")).initEvent(S,Ee,!0):Ot=new CustomEvent(D,{bubbles:Ee,cancelable:!0}),void 0!==L&&Object.keys(L).forEach(function(Ft){Object.defineProperty(Ot,Ft,{get:function(){return L[Ft]}})}),He&&Ot.preventDefault(),Te&&M.dispatchEvent(Ot),Ot.defaultPrevented&&void 0!==N&&N.preventDefault(),Ot}},Nt=Pi,An=(v(176),v(177),new Map),ni=function(M,D,L){An.has(M)||An.set(M,new Map),(M=An.get(M)).has(D)||0===M.size?M.set(D,L):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(M.keys())[0],"."))};function Zn(M){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Oi(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}var Ur=function(){function M(C){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");(C=de(C))&&(this._element=C,ni(this._element,this.constructor.DATA_KEY,this))}var D,L,N;return D=M,N=[{key:"getInstance",value:function(C){return function(M,D){return An.has(M)&&An.get(M).get(D)||null}(de(C),this.DATA_KEY)}},{key:"getOrCreateInstance",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(C)||new this(C,"object"===Zn(S)?S:null)}},{key:"VERSION",get:function(){return"5.1.3"}},{key:"NAME",get:function(){throw new Error('You have to implement the static method "NAME", for each component!')}},{key:"DATA_KEY",get:function(){return"bs.".concat(this.NAME)}},{key:"EVENT_KEY",get:function(){return".".concat(this.DATA_KEY)}}],(L=[{key:"dispose",value:function(){var C=this;(function(M,D){var L;An.has(M)&&((L=An.get(M)).delete(D),0===L.size&&An.delete(M))})(this._element,this.constructor.DATA_KEY),Nt.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(function(S){C[S]=null})}},{key:"_queueCallback",value:function(C,S){Se(C,S,!(2<arguments.length&&void 0!==arguments[2])||arguments[2])}}])&&Oi(D.prototype,L),N&&Oi(D,N),Object.defineProperty(D,"prototype",{writable:!1}),M}();function gr(M){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function ri(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function bi(M,D){return(bi=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function _o(M){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}we=".".concat("bs.button");var fi='[data-bs-toggle="button"]',pi=(we="click".concat(we).concat(".data-api"),function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&bi(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=_o(M);if(L=D?(L=_o(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===gr(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(){var S=this,H=C;if(S instanceof H)return N.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"NAME",get:function(){return"button"}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this);"toggle"===S&&H[S]()})}}],(L=[{key:"toggle",value:function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}}])&&ri(M.prototype,L),D&&ri(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}()),ii=(Nt.on(document,we,fi,function(M){M.preventDefault(),M=M.target.closest(fi),pi.getOrCreateInstance(M).toggle()}),Fe(pi),we=pi,v(28),v(58),v(121),v(15),v(59),v(24),v(25),"top"),Li="bottom",nr="right",Hr="left",Gr="auto",Er=[ii,Li,nr,Hr],Cr="start",lr="end",ir="clippingParents",Pt="viewport",qe="popper",Xe="reference",zt=Er.reduce(function(M,D){return M.concat([D+"-"+Cr,D+"-"+lr])},[]),Qt=[].concat(Er,[Gr]).reduce(function(M,D){return M.concat([D,D+"-"+Cr,D+"-"+lr])},[]),jn="beforeRead",Wt="read",On="afterRead",fn="beforeMain",Rr="main",Vi="afterMain",ao="beforeWrite",Tr="write",Nn="afterWrite",mi=[jn,Wt,On,fn,Rr,Vi,ao,Tr,Nn];function ke(M){return M?(M.nodeName||"").toLowerCase():null}function ne(M){return null==M?window:"[object Window]"!==M.toString()?(D=M.ownerDocument)&&D.defaultView||window:M;var D}function ue(M){return M instanceof ne(M).Element||M instanceof Element}function Re(M){return M instanceof ne(M).HTMLElement||M instanceof HTMLElement}function Ge(M){if("undefined"!=typeof ShadowRoot)return M instanceof ne(M).ShadowRoot||M instanceof ShadowRoot}var it={name:"applyStyles",enabled:!0,phase:"write",fn:function(M){var D=M.state;Object.keys(D.elements).forEach(function(L){var N=D.styles[L]||{},C=D.attributes[L]||{},S=D.elements[L];Re(S)&&ke(S)&&(Object.assign(S.style,N),Object.keys(C).forEach(function(H){var K=C[H];!1===K?S.removeAttribute(H):S.setAttribute(H,!0===K?"":K)}))})},effect:function(M){var D=M.state,L={popper:{position:D.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(D.elements.popper.style,L.popper),D.styles=L,D.elements.arrow&&Object.assign(D.elements.arrow.style,L.arrow),function(){Object.keys(D.elements).forEach(function(N){var C=D.elements[N],S=D.attributes[N]||{};N=Object.keys((D.styles.hasOwnProperty(N)?D.styles:L)[N]).reduce(function(H,K){return H[K]="",H},{}),Re(C)&&ke(C)&&(Object.assign(C.style,N),Object.keys(S).forEach(function(H){C.removeAttribute(H)}))})}},requires:["computeStyles"]};function vt(M){return M.split("-")[0]}var wt=Math.max,at=Math.min,It=Math.round;function an(M,D){void 0===D&&(D=!1);var L=M.getBoundingClientRect(),N=1,C=1;return Re(M)&&D&&(D=M.offsetHeight,0<(M=M.offsetWidth)&&(N=It(L.width)/M||1),0<D&&(C=It(L.height)/D||1)),{width:L.width/N,height:L.height/C,top:L.top/C,right:L.right/N,bottom:L.bottom/C,left:L.left/N,x:L.left/N,y:L.top/C}}function wn(M){var D=an(M),L=M.offsetWidth,N=M.offsetHeight;return Math.abs(D.width-L)<=1&&(L=D.width),Math.abs(D.height-N)<=1&&(N=D.height),{x:M.offsetLeft,y:M.offsetTop,width:L,height:N}}function Jt(M,D){var L=D.getRootNode&&D.getRootNode();if(M.contains(D))return!0;if(L&&Ge(L)){var N=D;do{if(N&&M.isSameNode(N))return!0}while(N=N.parentNode||N.host)}return!1}function er(M){return ne(M).getComputedStyle(M)}function sr(M){return((ue(M)?M.ownerDocument:M.document)||window.document).documentElement}function tr(M){return"html"===ke(M)?M:M.assignedSlot||M.parentNode||(Ge(M)?M.host:null)||sr(M)}function Xn(M){return Re(M)&&"fixed"!==er(M).position?M.offsetParent:null}function mr(M){for(var L=ne(M),N=Xn(M);N&&0<=["table","td","th"].indexOf(ke(N))&&"static"===er(N).position;)N=Xn(N);return(!N||"html"!==ke(N)&&("body"!==ke(N)||"static"!==er(N).position))&&(N||function(C){var S=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Re(C)&&"fixed"===er(C).position)return null;var K=tr(C);for(Ge(K)&&(K=K.host);Re(K)&&["html","body"].indexOf(ke(K))<0;){var Ee=er(K);if("none"!==Ee.transform||"none"!==Ee.perspective||"paint"===Ee.contain||-1!==["transform","perspective"].indexOf(Ee.willChange)||S&&"filter"===Ee.willChange||S&&Ee.filter&&"none"!==Ee.filter)return K;K=K.parentNode}return null}(M))||L}function Vr(M){return 0<=["top","bottom"].indexOf(M)?"x":"y"}function Mr(M,D,L){return wt(M,at(D,L))}function qn(M){return Object.assign({},{top:0,right:0,bottom:0,left:0},M)}function ut(M,D){return D.reduce(function(L,N){return L[N]=M,L},{})}var hr={name:"arrow",enabled:!0,phase:"main",fn:function(M){var D,L,N,C,S=M.state,H=M.name,K=(M=M.options,S.elements.arrow),Ee=S.modifiersData.popperOffsets,Te=Vr(He=vt(S.placement)),He=0<=[Hr,nr].indexOf(He)?"height":"width";K&&Ee&&(L=S,L=qn("number"!=typeof(M="function"==typeof(M=M.padding)?M(Object.assign({},L.rects,{placement:L.placement})):M)?M:ut(M,Er)),M=wn(K),C="y"===Te?ii:Hr,N="y"===Te?Li:nr,D=S.rects.reference[He]+S.rects.reference[Te]-Ee[Te]-S.rects.popper[He],Ee=Ee[Te]-S.rects.reference[Te],K=(K=mr(K))?"y"===Te?K.clientHeight||0:K.clientWidth||0:0,C=L[C],L=K-M[He]-L[N],C=Mr(C,N=K/2-M[He]/2+(D/2-Ee/2),L),S.modifiersData[H]=((K={})[Te]=C,K.centerOffset=C-N,K))},effect:function(M){var D=M.state;null!=(M=void 0===(M=M.options.element)?"[data-popper-arrow]":M)&&("string"!=typeof M||(M=D.elements.popper.querySelector(M)))&&Jt(D.elements.popper,M)&&(D.elements.arrow=M)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bn(M){return M.split("-")[1]}var Wi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function os(M){var D,L,N,C=M.popper,S=M.popperRect,H=M.placement,K=M.variation,Ee=M.offsets,Te=M.position,He=M.gpuAcceleration,Ot=M.adaptive,Ft=M.roundOffsets,In=(M=M.isFixed,void 0===(In=Ee.x)?0:In),dn=void 0===(dn=Ee.y)?0:dn,Gn=(In=(Gn="function"==typeof Ft?Ft({x:In,y:dn}):{x:In,y:dn}).x,dn=Gn.y,Ee.hasOwnProperty("x")),en=(Ee=Ee.hasOwnProperty("y"),Hr),xn=ii,yn=window;return Ot&&(L="clientHeight",D="clientWidth",(N=mr(C))===ne(C)&&"static"!==er(N=sr(C)).position&&"absolute"===Te&&(L="scrollHeight",D="scrollWidth"),H!==ii&&(H!==Hr&&H!==nr||K!==lr)||(xn=Li,dn=(dn-((M&&N===yn&&yn.visualViewport?yn.visualViewport.height:N[L])-S.height))*(He?1:-1)),H!==Hr&&(H!==ii&&H!==Li||K!==lr)||(en=nr,In=(In-((M&&N===yn&&yn.visualViewport?yn.visualViewport.width:N[D])-S.width))*(He?1:-1))),C=Object.assign({position:Te},Ot&&Wi),In=(M=!0===Ft?(H=(L={x:In,y:dn}).x,L=L.y,K=window.devicePixelRatio||1,{x:It(H*K)/K||0,y:It(L*K)/K||0}):{x:In,y:dn}).x,dn=M.y,Object.assign({},C,He?((N={})[xn]=Ee?"0":"",N[en]=Gn?"0":"",N.transform=(yn.devicePixelRatio||1)<=1?"translate("+In+"px, "+dn+"px)":"translate3d("+In+"px, "+dn+"px, 0)",N):((D={})[xn]=Ee?dn+"px":"",D[en]=Gn?In+"px":"",D.transform="",D))}var Zr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(M){var D=M.state,L=void 0===(L=(M=M.options).gpuAcceleration)||L,N=void 0===(N=M.adaptive)||N;M=void 0===(M=M.roundOffsets)||M,L={placement:vt(D.placement),variation:Bn(D.placement),popper:D.elements.popper,popperRect:D.rects.popper,gpuAcceleration:L,isFixed:"fixed"===D.options.strategy},null!=D.modifiersData.popperOffsets&&(D.styles.popper=Object.assign({},D.styles.popper,os(Object.assign({},L,{offsets:D.modifiersData.popperOffsets,position:D.options.strategy,adaptive:N,roundOffsets:M})))),null!=D.modifiersData.arrow&&(D.styles.arrow=Object.assign({},D.styles.arrow,os(Object.assign({},L,{offsets:D.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:M})))),D.attributes.popper=Object.assign({},D.attributes.popper,{"data-popper-placement":D.placement})},data:{}},_t={passive:!0},dt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(M){var D=M.state,L=M.instance,N=(M=M.options).scroll,C=void 0===N||N,S=void 0===(N=M.resize)||N,H=ne(D.elements.popper),K=[].concat(D.scrollParents.reference,D.scrollParents.popper);return C&&K.forEach(function(Ee){Ee.addEventListener("scroll",L.update,_t)}),S&&H.addEventListener("resize",L.update,_t),function(){C&&K.forEach(function(Ee){Ee.removeEventListener("scroll",L.update,_t)}),S&&H.removeEventListener("resize",L.update,_t)}},data:{}},Ne={left:"right",right:"left",bottom:"top",top:"bottom"};function We(M){return M.replace(/left|right|bottom|top/g,function(D){return Ne[D]})}var bt={start:"end",end:"start"};function Sn(M){return M.replace(/start|end/g,function(D){return bt[D]})}function vr(M){return{scrollLeft:(M=ne(M)).pageXOffset,scrollTop:M.pageYOffset}}function Br(M){return an(sr(M)).left+vr(M).scrollLeft}function or(M){var L=(M=er(M)).overflowX;return/auto|scroll|overlay|hidden/.test(M.overflow+(M=M.overflowY)+L)}function Ui(M,D){void 0===D&&(D=[]),M=(L=function C(S){return 0<=["html","body","#document"].indexOf(ke(S))?S.ownerDocument.body:Re(S)&&or(S)?S:C(tr(S))}(M))===(null==(M=M.ownerDocument)?void 0:M.body);var N=ne(L),L=(N=M?[N].concat(N.visualViewport||[],or(L)?L:[]):L,D.concat(N));return M?L:L.concat(Ui(tr(N)))}function ts(M){return Object.assign({},M,{left:M.x,top:M.y,right:M.x+M.width,bottom:M.y+M.height})}function ss(M,D){return D===Pt?ts((N=ne(L=M),S=(C=sr(L)).clientWidth,C=C.clientHeight,K=H=0,(N=N.visualViewport)&&(S=N.width,C=N.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(H=N.offsetLeft,K=N.offsetTop)),{width:S,height:C,x:H+Br(L),y:K})):ue(D)?((S=an(N=D)).top=S.top+N.clientTop,S.left=S.left+N.clientLeft,S.bottom=S.top+N.clientHeight,S.right=S.left+N.clientWidth,S.width=N.clientWidth,S.height=N.clientHeight,S.x=S.left,S.y=S.top,S):ts((C=sr(M),H=sr(C),L=vr(C),K=null==(K=C.ownerDocument)?void 0:K.body,D=wt(H.scrollWidth,H.clientWidth,K?K.scrollWidth:0,K?K.clientWidth:0),M=wt(H.scrollHeight,H.clientHeight,K?K.scrollHeight:0,K?K.clientHeight:0),C=-L.scrollLeft+Br(C),L=-L.scrollTop,"rtl"===er(K||H).direction&&(C+=wt(H.clientWidth,K?K.clientWidth:0)-D),{width:D,height:M,x:C,y:L}));var L,N,C,S,H,K}function Sr(M){var D,L=M.reference,N=M.element,C=(M=M.placement)?vt(M):null,S=(M=M?Bn(M):null,L.x+L.width/2-N.width/2),H=L.y+L.height/2-N.height/2;switch(C){case ii:D={x:S,y:L.y-N.height};break;case Li:D={x:S,y:L.y+L.height};break;case nr:D={x:L.x+L.width,y:H};break;case Hr:D={x:L.x-N.width,y:H};break;default:D={x:L.x,y:L.y}}var K=C?Vr(C):null;if(null!=K){var Ee="y"===K?"height":"width";switch(M){case Cr:D[K]=D[K]-(L[Ee]/2-N[Ee]/2);break;case lr:D[K]=D[K]+(L[Ee]/2-N[Ee]/2)}}return D}function Vs(M,D){var L,N=void 0===(N=(D=D=void 0===D?{}:D).placement)?M.placement:N,C=void 0===(C=D.boundary)?ir:C,S=void 0===(S=D.rootBoundary)?Pt:S,H=void 0===(H=D.elementContext)?qe:H,K=void 0!==(K=D.altBoundary)&&K,Ee=(D=qn("number"!=typeof(D=void 0===(D=D.padding)?0:D)?D:ut(D,Er)),M.rects.popper),Te=(K=function(M,D,L){var N,C="clippingParents"===D?(S=Ui(tr(C=M)),ue(N=0<=["absolute","fixed"].indexOf(er(C).position)&&Re(C)?mr(C):C)?S.filter(function(H){return ue(H)&&Jt(H,N)&&"body"!==ke(H)}):[]):[].concat(D),S=[].concat(C,[L]);return(L=S.reduce(function(H,K){return K=ss(M,K),H.top=wt(K.top,H.top),H.right=at(K.right,H.right),H.bottom=at(K.bottom,H.bottom),H.left=wt(K.left,H.left),H},ss(M,D=S[0]))).width=L.right-L.left,L.height=L.bottom-L.top,L.x=L.left,L.y=L.top,L}(ue(K=M.elements[K?H===qe?Xe:qe:H])?K:K.contextElement||sr(M.elements.popper),C,S),S=Sr({reference:C=an(M.elements.reference),element:Ee,strategy:"absolute",placement:N}),Ee=ts(Object.assign({},Ee,S)),{top:K.top-(S=H===qe?Ee:C).top+D.top,bottom:S.bottom-K.bottom+D.bottom,left:K.left-S.left+D.left,right:S.right-K.right+D.right});return Ee=M.modifiersData.offset,H===qe&&Ee&&(L=Ee[N],Object.keys(Te).forEach(function(He){var Ot=0<=[nr,Li].indexOf(He)?1:-1,Ft=0<=[ii,Li].indexOf(He)?"y":"x";Te[He]+=L[Ft]*Ot})),Te}var Ms={name:"flip",enabled:!0,phase:"main",fn:function(M){var D=M.state,L=M.options;if(!D.modifiersData[M=M.name]._skip){for(var He,C=void 0===(N=L.mainAxis)||N,S=void 0===(N=L.altAxis)||N,N=L.fallbackPlacements,H=L.padding,K=L.boundary,Ee=L.rootBoundary,Te=L.altBoundary,Ot=void 0===(He=L.flipVariations)||He,Ft=L.allowedAutoPlacements,In=(L=vt(He=D.options.placement),N=N||(L!==He&&Ot?function(Ei){if(vt(Ei)===Gr)return[];var Ns=We(Ei);return[Sn(Ei),Ns,Sn(Ns)]}(He):[We(He)]),[He].concat(N).reduce(function(Ei,Ns){return Ei.concat(vt(Ns)===Gr?(Rl=D,bs=(Ei=Ei=void 0===(Ei={placement:Ns,boundary:K,rootBoundary:Ee,padding:H,flipVariations:Ot,allowedAutoPlacements:Ft})?{}:Ei).placement,ch=Ei.boundary,oo=Ei.rootBoundary,ga=Ei.padding,Yh=Ei.flipVariations,Qh=void 0===(Ei=Ei.allowedAutoPlacements)?Qt:Ei,Ei=(Pc=Bn(bs))?Yh?zt:zt.filter(function(uh){return Bn(uh)===Pc}):Er,Ad=(bs=0===(bs=Ei.filter(function(uh){return 0<=Qh.indexOf(uh)})).length?Ei:bs).reduce(function(uh,Pd){return uh[Pd]=Vs(Rl,{placement:Pd,boundary:ch,rootBoundary:oo,padding:ga})[vt(Pd)],uh},{}),Object.keys(Ad).sort(function(uh,Pd){return Ad[uh]-Ad[Pd]})):Ns);var Rl,bs,ch,oo,ga,Yh,Qh,Pc,Ad},[])),dn=D.rects.reference,Gn=D.rects.popper,en=new Map,xn=!0,yn=In[0],Dn=0;Dn<In.length;Dn++){var wi=In[Dn],Kr=vt(wi),Or=Bn(wi)===Cr,Bi=(Yr=0<=[ii,Li].indexOf(Kr))?"width":"height",es=Vs(D,{placement:wi,boundary:K,rootBoundary:Ee,altBoundary:Te,padding:H}),Yr=Yr?Or?nr:Hr:Or?Li:ii;if(dn[Bi]>Gn[Bi]&&(Yr=We(Yr)),Or=We(Yr),Bi=[],C&&Bi.push(es[Kr]<=0),S&&Bi.push(es[Yr]<=0,es[Or]<=0),Bi.every(function(Ei){return Ei})){yn=wi,xn=!1;break}en.set(wi,Bi)}if(xn)for(var Ac=Ot?3:1;0<Ac&&"break"!==function(Bo){var Ei=In.find(function(Ns){if(Ns=en.get(Ns))return Ns.slice(0,Bo).every(function(Rl){return Rl})});if(Ei)return yn=Ei,"break"}(Ac);Ac--);D.placement!==yn&&(D.modifiersData[M]._skip=!0,D.placement=yn,D.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ms(M,D,L){return{top:M.top-D.height-(L=void 0===L?{x:0,y:0}:L).y,right:M.right-D.width+L.x,bottom:M.bottom-D.height+L.y,left:M.left-D.width-L.x}}function Et(M){return[ii,nr,Li,Hr].some(function(D){return 0<=M[D]})}var ge={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(M){var D=M.state,L=(M=M.name,D.rects.reference),N=D.rects.popper,C=D.modifiersData.preventOverflow,S=Vs(D,{elementContext:"reference"}),H=Vs(D,{altBoundary:!0});S=ms(S,L),L=ms(H,N,C),H=Et(S),N=Et(L),D.modifiersData[M]={referenceClippingOffsets:S,popperEscapeOffsets:L,isReferenceHidden:H,hasPopperEscaped:N},D.attributes.popper=Object.assign({},D.attributes.popper,{"data-popper-reference-hidden":H,"data-popper-escaped":N})}},Be={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(M){var D=M.state,L=M.options,N=(M=M.name,void 0===(L=L.offset)?[0,0]:L),C=(S=(L=Qt.reduce(function(H,K){var Ee,Te,He,Ot;return H[K]=(Ee=D.rects,Te=N,He=vt(K),Ot=0<=[Hr,ii].indexOf(He)?-1:1,K=(Ee="function"==typeof Te?Te(Object.assign({},Ee,{placement:K})):Te)[0]||0,Te=(Ee[1]||0)*Ot,0<=[Hr,nr].indexOf(He)?{x:Te,y:K}:{x:K,y:Te}),H},{}))[D.placement]).x,S=S.y;null!=D.modifiersData.popperOffsets&&(D.modifiersData.popperOffsets.x+=C,D.modifiersData.popperOffsets.y+=S),D.modifiersData[M]=L}},rt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(M){var D=M.state;D.modifiersData[M=M.name]=Sr({reference:D.rects.reference,element:D.rects.popper,strategy:"absolute",placement:D.placement})},data:{}},Mt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(M){var D,L,N,C,S,H,K,Ee,Te,He=M.state,Ot=M.options,Ft=(M=M.name,void 0===(Ft=Ot.mainAxis)||Ft),In=void 0!==(In=Ot.altAxis)&&In,dn=Ot.boundary,Gn=Ot.rootBoundary,en=Ot.altBoundary,xn=Ot.padding,yn=void 0===(yn=Ot.tether)||yn,Dn=(Ot=void 0===(Ot=Ot.tetherOffset)?0:Ot,dn=Vs(He,{boundary:dn,rootBoundary:Gn,padding:xn,altBoundary:en}),Gn=vt(He.placement),en=!(xn=Bn(He.placement)),Vr(Gn)),wi="x"===Dn?"y":"x",Kr=He.modifiersData.popperOffsets,Or=He.rects.reference,Yr=He.rects.popper,Bi=(Ot="number"==typeof(Ot="function"==typeof Ot?Ot(Object.assign({},He.rects,{placement:He.placement})):Ot)?{mainAxis:Ot,altAxis:Ot}:Object.assign({mainAxis:0,altAxis:0},Ot),He.modifiersData.offset?He.modifiersData.offset[He.placement]:null),es={x:0,y:0};Kr&&(Ft&&(Ft="y"===Dn?"height":"width",H=(K=Kr[Dn])+dn[L="y"===Dn?ii:Hr],Ee=K-dn[Te="y"===Dn?Li:nr],D=yn?-Yr[Ft]/2:0,C=(xn===Cr?Or:Yr)[Ft],xn=xn===Cr?-Yr[Ft]:-Or[Ft],S=He.elements.arrow,S=yn&&S?wn(S):{width:0,height:0},L=(N=He.modifiersData["arrow#persistent"]?He.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0})[L],N=N[Te],Te=Mr(0,Or[Ft],S[Ft]),S=en?Or[Ft]/2-D-Te-L-Ot.mainAxis:C-Te-L-Ot.mainAxis,C=en?-Or[Ft]/2+D+Te+N+Ot.mainAxis:xn+Te+N+Ot.mainAxis,en=(L=He.elements.arrow&&mr(He.elements.arrow))?"y"===Dn?L.clientTop||0:L.clientLeft||0:0,xn=K+C-(D=null!=(Ft=null==Bi?void 0:Bi[Dn])?Ft:0),Te=Mr(yn?at(H,K+S-D-en):H,K,yn?wt(Ee,xn):Ee),Kr[Dn]=Te,es[Dn]=Te-K),In&&(N="y"==wi?"height":"width",C=(L=Kr[wi])+dn["x"===Dn?ii:Hr],Ft=L-dn["x"===Dn?Li:nr],S=-1!==[ii,Hr].indexOf(Gn),en=null!=(D=null==Bi?void 0:Bi[wi])?D:0,H=S?C:L-Or[N]-Yr[N]-en+Ot.altAxis,xn=S?L+Or[N]+Yr[N]-en-Ot.altAxis:Ft,K=yn&&S?(Ee=Mr(Ee=H,L,Te=xn),Te<Ee?Te:Ee):Mr(yn?H:C,L,yn?xn:Ft),Kr[wi]=K,es[wi]=K-L),He.modifiersData[M]=es)},requiresIfExists:["offset"]};function Ln(M,D,L){void 0===L&&(L=!1);var N=Re(D),C=Re(D)&&(H=(C=D).getBoundingClientRect(),S=It(H.width)/C.offsetWidth||1,H=It(H.height)/C.offsetHeight||1,1!==S||1!==H),S=sr(D),H=an(M,C),K=(M={scrollLeft:0,scrollTop:0},{x:0,y:0});return!N&&L||("body"===ke(D)&&!or(S)||(M=(N=D)!==ne(N)&&Re(N)?{scrollLeft:N.scrollLeft,scrollTop:N.scrollTop}:vr(N)),Re(D)?((K=an(D,!0)).x+=D.clientLeft,K.y+=D.clientTop):S&&(K.x=Br(S))),{x:H.left+M.scrollLeft-K.x,y:H.top+M.scrollTop-K.y,width:H.width,height:H.height}}var Fn={placement:"bottom",modifiers:[],strategy:"absolute"};function Ar(){for(var M=arguments.length,D=new Array(M),L=0;L<M;L++)D[L]=arguments[L];return!D.some(function(N){return!(N&&"function"==typeof N.getBoundingClientRect)})}function oi(M){var D,L=void 0===(D=(M=M=void 0===M?{}:M).defaultModifiers)?[]:D,N=void 0===(D=M.defaultOptions)?Fn:D;return function(C,S,H){void 0===H&&(H=N);var K,Ee,Te={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fn,N),modifiersData:{},elements:{reference:C,popper:S},attributes:{},styles:{}},He=[],Ot=!1,Ft={state:Te,setOptions:function(dn){var Gn,en;return dn="function"==typeof dn?dn(Te.options):dn,In(),Te.options=Object.assign({},N,Te.options,dn),Te.scrollParents={reference:ue(C)?Ui(C):C.contextElement?Ui(C.contextElement):[],popper:Ui(S)},dn=[].concat(L,Te.options.modifiers),en=dn.reduce(function(xn,yn){var Dn=xn[yn.name];return xn[yn.name]=Dn?Object.assign({},Dn,yn,{options:Object.assign({},Dn.options,yn.options),data:Object.assign({},Dn.data,yn.data)}):yn,xn},{}),dn=Object.keys(en).map(function(xn){return en[xn]}),Gn=function(M){var D=new Map,L=new Set,N=[];return M.forEach(function(C){D.set(C.name,C)}),M.forEach(function(C){L.has(C.name)||function S(H){L.add(H.name),[].concat(H.requires||[],H.requiresIfExists||[]).forEach(function(K){L.has(K)||(K=D.get(K))&&S(K)}),N.push(H)}(C)}),N}(dn),dn=mi.reduce(function(xn,yn){return xn.concat(Gn.filter(function(Dn){return Dn.phase===yn}))},[]),Te.orderedModifiers=dn.filter(function(xn){return xn.enabled}),Te.orderedModifiers.forEach(function(xn){var yn=xn.name,Dn=xn.options;"function"==typeof(xn=xn.effect)&&(xn=xn({state:Te,name:yn,instance:Ft,options:void 0===Dn?{}:Dn}),He.push(xn||function(){}))}),Ft.update()},forceUpdate:function(){if(!Ot){var dn,Gn=(dn=Te.elements).reference;if(Ar(Gn,dn=dn.popper)){Te.rects={reference:Ln(Gn,mr(dn),"fixed"===Te.options.strategy),popper:wn(dn)},Te.reset=!1,Te.placement=Te.options.placement,Te.orderedModifiers.forEach(function(wi){return Te.modifiersData[wi.name]=Object.assign({},wi.data)});for(var en,xn,yn,Dn=0;Dn<Te.orderedModifiers.length;Dn++)!0===Te.reset?(Te.reset=!1,Dn=-1):(en=(yn=Te.orderedModifiers[Dn]).fn,xn=yn.options,yn=yn.name,"function"==typeof en&&(Te=en({state:Te,options:void 0===xn?{}:xn,name:yn,instance:Ft})||Te))}}},update:(K=function(){return new Promise(function(dn){Ft.forceUpdate(),dn(Te)})},function(){return Ee=Ee||new Promise(function(dn){Promise.resolve().then(function(){Ee=void 0,dn(K())})})}),destroy:function(){In(),Ot=!0}};return Ar(C,S)&&Ft.setOptions(H).then(function(dn){!Ot&&H.onFirstUpdate&&H.onFirstUpdate(dn)}),Ft;function In(){He.forEach(function(dn){return dn()}),He=[]}}}var zi=oi(),Wr=oi({defaultModifiers:[dt,rt,Zr,it,Be,Ms,Mt,hr,ge]}),Vl=oi({defaultModifiers:[dt,rt,Zr,it]});function va(M){return"true"===M||"false"!==M&&(M===Number(M).toString()?Number(M):""===M||"null"===M?null:M)}function Qa(M){return M.replace(/[A-Z]/g,function(D){return"-".concat(D.toLowerCase())})}var Di={setDataAttribute:function(M,D,L){M.setAttribute("data-bs-".concat(Qa(D)),L)},removeDataAttribute:function(M,D){M.removeAttribute("data-bs-".concat(Qa(D)))},getDataAttributes:function(M){if(!M)return{};var D={};return Object.keys(M.dataset).filter(function(L){return L.startsWith("bs")}).forEach(function(L){var N=(N=L.replace(/^bs/,"")).charAt(0).toLowerCase()+N.slice(1,N.length);D[N]=va(M.dataset[L])}),D},getDataAttribute:function(M,D){return va(M.getAttribute("data-bs-".concat(Qa(D))))},offset:function(M){return{top:(M=M.getBoundingClientRect()).top+window.pageYOffset,left:M.left+window.pageXOffset}},position:function(M){return{top:M.offsetTop,left:M.offsetLeft}}};function ba(M){return function(D){if(Array.isArray(D))return Ul(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||function(D,L){if(D){if("string"==typeof D)return Ul(D,L);var N=Object.prototype.toString.call(D).slice(8,-1);return"Map"===(N="Object"===N&&D.constructor?D.constructor.name:N)||"Set"===N?Array.from(D):"Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?Ul(D,L):void 0}}(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ul(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}v(95);var xr={find:function(M){var D,L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(D=[]).concat.apply(D,ba(Element.prototype.querySelectorAll.call(L,M)))},findOne:function(M){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(D,M)},children:function(M,D){var L;return(L=[]).concat.apply(L,ba(M.children)).filter(function(N){return N.matches(D)})},parents:function(M,D){for(var L=[],N=M.parentNode;N&&N.nodeType===Node.ELEMENT_NODE&&3!==N.nodeType;)N.matches(D)&&L.push(N),N=N.parentNode;return L},prev:function(M,D){for(var L=M.previousElementSibling;L;){if(L.matches(D))return[L];L=L.previousElementSibling}return[]},next:function(M,D){for(var L=M.nextElementSibling;L;){if(L.matches(D))return[L];L=L.nextElementSibling}return[]},focusableChildren:function(M){var D=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(function(L){return"".concat(L,':not([tabindex^="-"])')}).join(", ");return this.find(D,M).filter(function(L){return!he(L)&&se(L)})}};function xa(M){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function yl(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function vl(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?yl(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):yl(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function du(M){return function(D){if(Array.isArray(D))return Us(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||function(D,L){if(D){if("string"==typeof D)return Us(D,L);var N=Object.prototype.toString.call(D).slice(8,-1);return"Map"===(N="Object"===N&&D.constructor?D.constructor.name:N)||"Set"===N?Array.from(D):"Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?Us(D,L):void 0}}(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Us(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}function fu(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function pu(){return(pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=As(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function Ja(M,D){return(Ja=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function As(M){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}var as="dropdown",Xi=".".concat("bs.dropdown"),$s=".data-api",Rc="Escape",mu="ArrowUp",wa="ArrowDown",Gs=new RegExp("".concat(mu,"|").concat(wa,"|").concat(Rc)),uc="hide".concat(Xi),gu="hidden".concat(Xi),hc="show".concat(Xi),Lc="shown".concat(Xi),ls="click".concat(Xi).concat($s),mo="keydown".concat(Xi).concat($s),Ea=(Xi="keyup".concat(Xi).concat($s),"show"),el='[data-bs-toggle="dropdown"]',Ca=".dropdown-menu",Hl=xe()?"top-end":"top-start",cs=xe()?"top-start":"top-end",Ta=xe()?"bottom-end":"bottom-start",Q=xe()?"bottom-start":"bottom-end",ve=xe()?"left-start":"right-start",ee=xe()?"right-start":"left-start",Me={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},mt={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"},Vt=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&Ja(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=As(M);if(L=D?(L=As(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===xa(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(this instanceof C)return(S=N.call(this,S))._popper=null,S._config=S._getConfig(H),S._menu=S._getMenuElement(),S._inNavbar=S._detectNavbar(),S;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"Default",get:function(){return Me}},{key:"DefaultType",get:function(){return mt}},{key:"NAME",get:function(){return as}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}},{key:"clearMenus",value:function(S){if(!S||2!==S.button&&("keyup"!==S.type||"Tab"===S.key))for(var H=xr.find(el),K=0,Ee=H.length;K<Ee;K++){var Te=C.getInstance(H[K]);if(Te&&!1!==Te._config.autoClose&&Te._isShown()){var He={relatedTarget:Te._element};if(S){var Ot=S.composedPath(),Ft=Ot.includes(Te._menu);if(Ot.includes(Te._element)||"inside"===Te._config.autoClose&&!Ft||"outside"===Te._config.autoClose&&Ft||Te._menu.contains(S.target)&&("keyup"===S.type&&"Tab"===S.key||/input|select|option|textarea|form/i.test(S.target.tagName)))continue;"click"===S.type&&(He.clickEvent=S)}Te._completeHide(He)}}}},{key:"getParentFromElement",value:function(S){return l(S)||S.parentNode}},{key:"dataApiKeydownHandler",value:function(S){if(/input|textarea/i.test(S.target.tagName)?!("Space"===S.key||S.key!==Rc&&(S.key!==wa&&S.key!==mu||S.target.closest(Ca))):Gs.test(S.key)){var H=this.classList.contains(Ea);if((H||S.key!==Rc)&&(S.preventDefault(),S.stopPropagation(),!he(this))){var K=this.matches(el)?this:xr.prev(this,el)[0];if(K=C.getOrCreateInstance(K),S.key!==Rc)return S.key===mu||S.key===wa?(H||K.show(),void K._selectMenuItem(S)):void(H&&"Space"!==S.key||C.clearMenus());K.hide()}}}}],(L=[{key:"toggle",value:function(){return this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var S,H;he(this._element)||this._isShown(this._menu)||Nt.trigger(this._element,hc,S={relatedTarget:this._element}).defaultPrevented||(H=C.getParentFromElement(this._element),this._inNavbar?Di.setDataAttribute(this._menu,"popper","none"):this._createPopper(H),"ontouchstart"in document.documentElement&&!H.closest(".navbar-nav")&&(H=[]).concat.apply(H,du(document.body.children)).forEach(function(K){return Nt.on(K,"mouseover",ie)}),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ea),this._element.classList.add(Ea),Nt.trigger(this._element,Lc,S))}},{key:"hide",value:function(){!he(this._element)&&this._isShown(this._menu)&&this._completeHide({relatedTarget:this._element})}},{key:"dispose",value:function(){this._popper&&this._popper.destroy(),pu(As(C.prototype),"dispose",this).call(this)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}},{key:"_completeHide",value:function(S){var H;Nt.trigger(this._element,uc,S).defaultPrevented||("ontouchstart"in document.documentElement&&(H=[]).concat.apply(H,du(document.body.children)).forEach(function(K){return Nt.off(K,"mouseover",ie)}),this._popper&&this._popper.destroy(),this._menu.classList.remove(Ea),this._element.classList.remove(Ea),this._element.setAttribute("aria-expanded","false"),Di.removeDataAttribute(this._menu,"popper"),Nt.trigger(this._element,gu,S))}},{key:"_getConfig",value:function(S){if(S=vl(vl(vl({},this.constructor.Default),Di.getDataAttributes(this._element)),S),_e(as,S,this.constructor.DefaultType),"object"!==xa(S.reference)||$t(S.reference)||"function"==typeof S.reference.getBoundingClientRect)return S;throw new TypeError("".concat(as.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'))}},{key:"_createPopper",value:function(S){if(void 0===O)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var H=this._element,K=("parent"===this._config.reference?H=S:$t(this._config.reference)?H=de(this._config.reference):"object"===xa(this._config.reference)&&(H=this._config.reference),S=this._getPopperConfig()).modifiers.find(function(Ee){return"applyStyles"===Ee.name&&!1===Ee.enabled});this._popper=Wr(H,this._menu,S),K&&Di.setDataAttribute(this._menu,"popper","static")}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(Ea)}},{key:"_getMenuElement",value:function(){return xr.next(this._element,Ca)[0]}},{key:"_getPlacement",value:function(){var S=this._element.parentNode;if(S.classList.contains("dropend"))return ve;if(S.classList.contains("dropstart"))return ee;var H="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return S.classList.contains("dropup")?H?cs:Hl:H?Q:Ta}},{key:"_detectNavbar",value:function(){return null!==this._element.closest(".".concat("navbar"))}},{key:"_getOffset",value:function(){var S=this,H=this._config.offset;return"string"==typeof H?H.split(",").map(function(K){return Number.parseInt(K,10)}):"function"==typeof H?function(K){return H(K,S._element)}:H}},{key:"_getPopperConfig",value:function(){var S={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(S.modifiers=[{name:"applyStyles",enabled:!1}]),vl(vl({},S),"function"==typeof this._config.popperConfig?this._config.popperConfig(S):this._config.popperConfig)}},{key:"_selectMenuItem",value:function(S){var H=S.key,K=(S=S.target,xr.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(se));K.length&&Je(K,S,H===wa,!K.includes(S)).focus()}}])&&fu(M.prototype,L),D&&fu(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function on(M){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function br(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Fi(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?br(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):br(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function Pr(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function ur(M,D){return(ur=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function no(M){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}Nt.on(document,mo,el,Vt.dataApiKeydownHandler),Nt.on(document,mo,Ca,Vt.dataApiKeydownHandler),Nt.on(document,ls,Vt.clearMenus),Nt.on(document,Xi,Vt.clearMenus),Nt.on(document,ls,el,function(M){M.preventDefault(),Vt.getOrCreateInstance(this).toggle()}),Fe(Vt),$s=Vt;var hi="collapse",Zo="bs.collapse",Ps=(mo=".".concat(Zo),{toggle:!0,parent:null}),Hi={toggle:"boolean",parent:"(null|element)"},Co="show".concat(mo),tl="shown".concat(mo),Da="hide".concat(mo),Sa="hidden".concat(mo),ws=(Xi="click".concat(mo).concat(".data-api"),"show"),bl="collapse",xl="collapsing",zr="collapsed",Fc=":scope .".concat(bl," .").concat(bl),_u='[data-bs-toggle="collapse"]',$l=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&ur(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=no(M);if(L=D?(L=no(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===on(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){var K;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");(K=N.call(this,S))._isTransitioning=!1,K._config=K._getConfig(H),K._triggerArray=[];for(var Ee=xr.find(_u),Te=0,He=Ee.length;Te<He;Te++){var Ot=Ee[Te],Ft=te(Ot),In=xr.find(Ft).filter(function(dn){return dn===K._element});null!==Ft&&In.length&&(K._selector=Ft,K._triggerArray.push(Ot))}return K._initializeChildren(),K._config.parent||K._addAriaAndCollapsedClass(K._triggerArray,K._isShown()),K._config.toggle&&K.toggle(),K}return M=C,D=[{key:"Default",get:function(){return Ps}},{key:"NAME",get:function(){return hi}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H={};if("string"==typeof S&&/show|hide/.test(S)&&(H.toggle=!1),H=C.getOrCreateInstance(this,H),"string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}}],(L=[{key:"toggle",value:function(){this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var S=this;if(!this._isTransitioning&&!this._isShown()){var H,K,Ee=[],Te=(this._config.parent&&(H=xr.find(Fc,this._config.parent),Ee=xr.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(function(Ft){return!H.includes(Ft)})),xr.findOne(this._selector));if(Ee.length){var He,Ot=Ee.find(function(Ft){return Te!==Ft});if((He=Ot?C.getInstance(Ot):null)&&He._isTransitioning)return}Nt.trigger(this._element,Co).defaultPrevented||(Ee.forEach(function(Ft){Te!==Ft&&C.getOrCreateInstance(Ft,{toggle:!1}).hide(),He||ni(Ft,Zo,null)}),K=this._getDimension(),this._element.classList.remove(bl),this._element.classList.add(xl),this._element.style[K]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0,Ot=K[0].toUpperCase()+K.slice(1),Ee="scroll".concat(Ot),this._queueCallback(function(){S._isTransitioning=!1,S._element.classList.remove(xl),S._element.classList.add(bl,ws),S._element.style[K]="",Nt.trigger(S._element,tl)},this._element,!0),this._element.style[K]="".concat(this._element[Ee],"px"))}}},{key:"hide",value:function(){var S=this;if(!this._isTransitioning&&this._isShown()&&!(H=Nt.trigger(this._element,Da)).defaultPrevented){for(var H=this._getDimension(),K=(this._element.style[H]="".concat(this._element.getBoundingClientRect()[H],"px"),this._element.classList.add(xl),this._element.classList.remove(bl,ws),this._triggerArray.length),Ee=0;Ee<K;Ee++){var Te=this._triggerArray[Ee],He=l(Te);He&&!this._isShown(He)&&this._addAriaAndCollapsedClass([Te],!1)}this._isTransitioning=!0,this._element.style[H]="",this._queueCallback(function(){S._isTransitioning=!1,S._element.classList.remove(xl),S._element.classList.add(bl),Nt.trigger(S._element,Sa)},this._element,!0)}}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(ws)}},{key:"_getConfig",value:function(S){return(S=Fi(Fi(Fi({},Ps),Di.getDataAttributes(this._element)),S)).toggle=Boolean(S.toggle),S.parent=de(S.parent),_e(hi,S,Hi),S}},{key:"_getDimension",value:function(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}},{key:"_initializeChildren",value:function(){var S,H=this;this._config.parent&&(S=xr.find(Fc,this._config.parent),xr.find(_u,this._config.parent).filter(function(K){return!S.includes(K)}).forEach(function(K){var Ee=l(K);Ee&&H._addAriaAndCollapsedClass([K],H._isShown(Ee))}))}},{key:"_addAriaAndCollapsedClass",value:function(S,H){S.length&&S.forEach(function(K){H?K.classList.remove(zr):K.classList.add(zr),K.setAttribute("aria-expanded",H)})}}])&&Pr(M.prototype,L),D&&Pr(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();Nt.on(document,Xi,_u,function(M){("A"===M.target.tagName||M.delegateTarget&&"A"===M.delegateTarget.tagName)&&M.preventDefault(),M=te(this),xr.find(M).forEach(function(D){$l.getOrCreateInstance(D,{toggle:!1}).toggle()})}),Fe($l),ls=$l;var yu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",nl=".sticky-top",Gl=function(){function M(){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._element=document.body}var D,L;return D=M,(L=[{key:"getWidth",value:function(){var C=document.documentElement.clientWidth;return Math.abs(window.innerWidth-C)}},{key:"hide",value:function(){var C=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",function(S){return S+C}),this._setElementAttributes(yu,"paddingRight",function(S){return S+C}),this._setElementAttributes(nl,"marginRight",function(S){return S-C})}},{key:"_disableOverFlow",value:function(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}},{key:"_setElementAttributes",value:function(C,S,H){var K=this,Ee=this.getWidth();this._applyManipulationCallback(C,function(Te){var He;Te!==K._element&&window.innerWidth>Te.clientWidth+Ee||(K._saveInitialAttribute(Te,S),He=window.getComputedStyle(Te)[S],Te.style[S]="".concat(H(Number.parseFloat(He)),"px"))})}},{key:"reset",value:function(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(yu,"paddingRight"),this._resetElementAttributes(nl,"marginRight")}},{key:"_saveInitialAttribute",value:function(C,S){var H=C.style[S];H&&Di.setDataAttribute(C,S,H)}},{key:"_resetElementAttributes",value:function(C,S){this._applyManipulationCallback(C,function(H){var K=Di.getDataAttribute(H,S);void 0===K?H.style.removeProperty(S):(Di.removeDataAttribute(H,S),H.style[S]=K)})}},{key:"_applyManipulationCallback",value:function(C,S){$t(C)?S(C):xr.find(C,this._element).forEach(S)}},{key:"isOverflowing",value:function(){return 0<this.getWidth()}}])&&function(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}(D.prototype,L),Object.defineProperty(D,"prototype",{writable:!1}),M}();function En(M){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Si(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Uu(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?Si(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):Si(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}var Ch={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},wl={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},ra="backdrop",dc="mousedown.bs.".concat(ra),fc=function(){function M(C){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._config=this._getConfig(C),this._isAppended=!1,this._element=null}var D,L;return D=M,(L=[{key:"show",value:function(C){this._config.isVisible?(this._append(),this._config.isAnimated&&this._getElement(),this._getElement().classList.add("show"),this._emulateAnimation(function(){Ye(C)})):Ye(C)}},{key:"hide",value:function(C){var S=this;this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(function(){S.dispose(),Ye(C)})):Ye(C)}},{key:"_getElement",value:function(){var C;return this._element||((C=document.createElement("div")).className=this._config.className,this._config.isAnimated&&C.classList.add("fade"),this._element=C),this._element}},{key:"_getConfig",value:function(C){return(C=Uu(Uu({},Ch),"object"===En(C)?C:{})).rootElement=de(C.rootElement),_e(ra,C,wl),C}},{key:"_append",value:function(){var C=this;this._isAppended||(this._config.rootElement.append(this._getElement()),Nt.on(this._getElement(),dc,function(){Ye(C._config.clickCallback)}),this._isAppended=!0)}},{key:"dispose",value:function(){this._isAppended&&(Nt.off(this._element,dc),this._element.remove(),this._isAppended=!1)}},{key:"_emulateAnimation",value:function(C){Se(C,this._getElement(),this._config.isAnimated)}}])&&function(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}(D.prototype,L),Object.defineProperty(D,"prototype",{writable:!1}),M}();function Hu(M){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function dd(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Ma(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?dd(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):dd(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function co(M){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hide",L="click.dismiss".concat(M.EVENT_KEY),N=M.NAME;Nt.on(document,L,'[data-bs-dismiss="'.concat(N,'"]'),function(C){["A","AREA"].includes(this.tagName)&&C.preventDefault(),he(this)||(C=l(this)||this.closest(".".concat(N)),M.getOrCreateInstance(C)[D]())})}var rl={trapElement:null,autofocus:!0},vu={trapElement:"element",autofocus:"boolean"},Os=".".concat("bs.focustrap"),Aa="focusin".concat(Os),Th="keydown.tab".concat(Os),Wl="backward",fd=function(){function M(C){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._config=this._getConfig(C),this._isActive=!1,this._lastTabNavDirection=null}var D,L;return D=M,(L=[{key:"activate",value:function(){var C=this,H=(S=this._config).trapElement,S=S.autofocus;this._isActive||(S&&H.focus(),Nt.off(document,Os),Nt.on(document,Aa,function(K){return C._handleFocusin(K)}),Nt.on(document,Th,function(K){return C._handleKeydown(K)}),this._isActive=!0)}},{key:"deactivate",value:function(){this._isActive&&(this._isActive=!1,Nt.off(document,Os))}},{key:"_handleFocusin",value:function(C){var S=this._config.trapElement;(C=C.target)===document||C===S||S.contains(C)||(0===(C=xr.focusableChildren(S)).length?S:this._lastTabNavDirection===Wl?C[C.length-1]:C[0]).focus()}},{key:"_handleKeydown",value:function(C){"Tab"===C.key&&(this._lastTabNavDirection=C.shiftKey?Wl:"forward")}},{key:"_getConfig",value:function(C){return _e("focustrap",C=Ma(Ma({},rl),"object"===Hu(C)?C:{}),vu),C}}])&&function(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}(D.prototype,L),Object.defineProperty(D,"prototype",{writable:!1}),M}();function Dh(M){return(Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function $u(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Zl(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?$u(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):$u(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function Gu(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function bu(){return(bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=El(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function xu(M,D){return(xu=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function El(M){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}var wu="offcanvas",xi=(mo=".".concat("bs.offcanvas"),Xi=".data-api","load".concat(mo).concat(Xi)),Bc={backdrop:!0,keyboard:!0,scroll:!1},Pa={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},ql=".offcanvas.show",Zu="show".concat(mo),pc="shown".concat(mo),Uo="hide".concat(mo),Oa="hidden".concat(mo),yo=(Xi="click".concat(mo).concat(Xi),"keydown.dismiss".concat(mo)),di=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&xu(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=El(M);if(L=D?(L=El(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===Dh(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(this instanceof C)return(S=N.call(this,S))._config=S._getConfig(H),S._isShown=!1,S._backdrop=S._initializeBackDrop(),S._focustrap=S._initializeFocusTrap(),S._addEventListeners(),S;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"NAME",get:function(){return wu}},{key:"Default",get:function(){return Bc}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S]||S.startsWith("_")||"constructor"===S)throw new TypeError('No method named "'.concat(S,'"'));H[S](this)}})}}],(L=[{key:"toggle",value:function(S){return this._isShown?this.hide():this.show(S)}},{key:"show",value:function(S){var H=this;this._isShown||Nt.trigger(this._element,Zu,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new Gl).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(function(){H._config.scroll||H._focustrap.activate(),Nt.trigger(H._element,pc,{relatedTarget:S})},this._element,!0))}},{key:"hide",value:function(){var S=this;this._isShown&&!Nt.trigger(this._element,Uo).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(function(){S._element.setAttribute("aria-hidden",!0),S._element.removeAttribute("aria-modal"),S._element.removeAttribute("role"),S._element.style.visibility="hidden",S._config.scroll||(new Gl).reset(),Nt.trigger(S._element,Oa)},this._element,!0))}},{key:"dispose",value:function(){this._backdrop.dispose(),this._focustrap.deactivate(),bu(El(C.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(S){return S=Zl(Zl(Zl({},Bc),Di.getDataAttributes(this._element)),"object"===Dh(S)?S:{}),_e(wu,S,Pa),S}},{key:"_initializeBackDrop",value:function(){var S=this;return new fc({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:function(){return S.hide()}})}},{key:"_initializeFocusTrap",value:function(){return new fd({trapElement:this._element})}},{key:"_addEventListeners",value:function(){var S=this;Nt.on(this._element,yo,function(H){S._config.keyboard&&"Escape"===H.key&&S.hide()})}}])&&Gu(M.prototype,L),D&&Gu(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function mc(M){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function qu(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function zc(M,D){return(zc=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function Sh(M){return(Sh=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}Nt.on(document,Xi,'[data-bs-toggle="offcanvas"]',function(M){var D=this,L=l(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),he(this)||(Nt.one(L,Oa,function(){se(D)&&D.focus()}),(M=xr.findOne(ql))&&M!==L&&di.getInstance(M).hide(),di.getOrCreateInstance(L).toggle(this))}),Nt.on(window,xi,function(){return xr.find(ql).forEach(function(M){return di.getOrCreateInstance(M).show()})}),co(di),Fe(di),mo=di,Xi=".".concat("bs.alert");var ka="close".concat(Xi),jc="closed".concat(Xi);function ks(M){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function _c(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Ra(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?_c(Object(L),!0).forEach(function(N){Xl(M,N,L[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):_c(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function ia(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function La(M,D){return(La=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function Eu(M){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}function Xl(M,D,L){D in M?Object.defineProperty(M,D,{value:L,enumerable:!0,configurable:!0,writable:!0}):M[D]=L}xi=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&zc(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=Sh(M);if(L=D?(L=Sh(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===mc(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(){var S=this,H=C;if(S instanceof H)return N.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"NAME",get:function(){return"alert"}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this);if("string"==typeof S){if(void 0===H[S]||S.startsWith("_")||"constructor"===S)throw new TypeError('No method named "'.concat(S,'"'));H[S](this)}})}}],(L=[{key:"close",value:function(){var S,H=this;Nt.trigger(this._element,ka).defaultPrevented||(this._element.classList.remove("show"),S=this._element.classList.contains("fade"),this._queueCallback(function(){return H._destroyElement()},this._element,S))}},{key:"_destroyElement",value:function(){this._element.remove(),Nt.trigger(this._element,jc),this.dispose()}}])&&qu(M.prototype,L),D&&qu(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}(),co(xi,"close"),Fe(xi),Xi=xi;var oa="carousel",Un=(xi=".".concat("bs.carousel"),".data-api"),Rs={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},gs={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Kl="next",Ws="prev",Oo="left",_s="right",sa=(Xl(Fa={},"ArrowLeft",_s),Xl(Fa,"ArrowRight",Oo),Fa),Tl="slide".concat(xi),yc="slid".concat(xi),Cu="keydown".concat(xi),Yl="mouseenter".concat(xi),il="mouseleave".concat(xi),Vc="touchstart".concat(xi),Xu="touchmove".concat(xi),Uc="touchend".concat(xi),Tu="pointerdown".concat(xi),Ih="pointerup".concat(xi),aa="dragstart".concat(xi),Fa="load".concat(xi).concat(Un),ko=(xi="click".concat(xi).concat(Un),"active"),Zs=".active.carousel-item",Ql=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&La(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=Eu(M);if(L=D?(L=Eu(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===ks(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(this instanceof C)return(S=N.call(this,S))._items=null,S._interval=null,S._activeElement=null,S._isPaused=!1,S._isSliding=!1,S.touchTimeout=null,S.touchStartX=0,S.touchDeltaX=0,S._config=S._getConfig(H),S._indicatorsElement=xr.findOne(".carousel-indicators",S._element),S._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,S._pointerEvent=Boolean(window.PointerEvent),S._addEventListeners(),S;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"Default",get:function(){return Rs}},{key:"NAME",get:function(){return oa}},{key:"carouselInterface",value:function(S,H){var K=(S=C.getOrCreateInstance(S,H))._config,Ee=("object"===ks(H)&&(K=Ra(Ra({},K),H)),"string"==typeof H?H:K.slide);if("number"==typeof H)S.to(H);else if("string"==typeof Ee){if(void 0===S[Ee])throw new TypeError('No method named "'.concat(Ee,'"'));S[Ee]()}else K.interval&&K.ride&&(S.pause(),S.cycle())}},{key:"jQueryInterface",value:function(S){return this.each(function(){C.carouselInterface(this,S)})}},{key:"dataApiClickHandler",value:function(S){var H,K,Ee=l(this);Ee&&Ee.classList.contains("carousel")&&(H=Ra(Ra({},Di.getDataAttributes(Ee)),Di.getDataAttributes(this)),(K=this.getAttribute("data-bs-slide-to"))&&(H.interval=!1),C.carouselInterface(Ee,H),K&&C.getInstance(Ee).to(K),S.preventDefault())}}],(L=[{key:"next",value:function(){this._slide(Kl)}},{key:"nextWhenVisible",value:function(){!document.hidden&&se(this._element)&&this.next()}},{key:"prev",value:function(){this._slide(Ws)}},{key:"pause",value:function(S){S||(this._isPaused=!0),xr.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(J(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(S){S||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}},{key:"to",value:function(S){var H=this,K=(this._activeElement=xr.findOne(Zs,this._element),this._getItemIndex(this._activeElement));if(!(S>this._items.length-1||S<0))if(this._isSliding)Nt.one(this._element,yc,function(){return H.to(S)});else{if(K===S)return this.pause(),void this.cycle();this._slide(K<S?Kl:Ws,this._items[S])}}},{key:"_getConfig",value:function(S){return S=Ra(Ra(Ra({},Rs),Di.getDataAttributes(this._element)),"object"===ks(S)?S:{}),_e(oa,S,gs),S}},{key:"_handleSwipe",value:function(){var S=Math.abs(this.touchDeltaX);S<=40||(S/=this.touchDeltaX,this.touchDeltaX=0,S&&this._slide(0<S?_s:Oo))}},{key:"_addEventListeners",value:function(){var S=this;this._config.keyboard&&Nt.on(this._element,Cu,function(H){return S._keydown(H)}),"hover"===this._config.pause&&(Nt.on(this._element,Yl,function(H){return S.pause(H)}),Nt.on(this._element,il,function(H){return S.cycle(H)})),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){function S(Te){Ee(Te)?K.touchStartX=Te.clientX:K._pointerEvent||(K.touchStartX=Te.touches[0].clientX)}function H(Te){Ee(Te)&&(K.touchDeltaX=Te.clientX-K.touchStartX),K._handleSwipe(),"hover"===K._config.pause&&(K.pause(),K.touchTimeout&&clearTimeout(K.touchTimeout),K.touchTimeout=setTimeout(function(He){return K.cycle(He)},500+K._config.interval))}var K=this,Ee=function(Te){return K._pointerEvent&&("pen"===Te.pointerType||"touch"===Te.pointerType)};xr.find(".carousel-item img",this._element).forEach(function(Te){Nt.on(Te,aa,function(He){return He.preventDefault()})}),this._pointerEvent?(Nt.on(this._element,Tu,S),Nt.on(this._element,Ih,H),this._element.classList.add("pointer-event")):(Nt.on(this._element,Vc,S),Nt.on(this._element,Xu,function(Te){K.touchDeltaX=Te.touches&&1<Te.touches.length?0:Te.touches[0].clientX-K.touchStartX}),Nt.on(this._element,Uc,H))}},{key:"_keydown",value:function(S){var H;/input|textarea/i.test(S.target.tagName)||(H=sa[S.key])&&(S.preventDefault(),this._slide(H))}},{key:"_getItemIndex",value:function(S){return this._items=S&&S.parentNode?xr.find(".carousel-item",S.parentNode):[],this._items.indexOf(S)}},{key:"_getItemByOrder",value:function(S,H){return Je(this._items,H,S===Kl,this._config.wrap)}},{key:"_triggerSlideEvent",value:function(S,H){var K=this._getItemIndex(S),Ee=this._getItemIndex(xr.findOne(Zs,this._element));return Nt.trigger(this._element,Tl,{relatedTarget:S,direction:H,from:Ee,to:K})}},{key:"_setActiveIndicatorElement",value:function(S){if(this._indicatorsElement)for(var H=xr.findOne(".active",this._indicatorsElement),K=(H.classList.remove(ko),H.removeAttribute("aria-current"),xr.find("[data-bs-target]",this._indicatorsElement)),Ee=0;Ee<K.length;Ee++)if(Number.parseInt(K[Ee].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(S)){K[Ee].classList.add(ko),K[Ee].setAttribute("aria-current","true");break}}},{key:"_updateInterval",value:function(){var S=this._activeElement||xr.findOne(Zs,this._element);S&&((S=Number.parseInt(S.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=S):this._config.interval=this._config.defaultInterval||this._config.interval)}},{key:"_slide",value:function(S,H){var K,Ee=this,Te=(S=this._directionToOrder(S),xr.findOne(Zs,this._element)),He=this._getItemIndex(Te),Ot=H||this._getItemByOrder(S,Te),Ft=this._getItemIndex(Ot),In=(H=Boolean(this._interval),S===Kl),dn=In?"carousel-item-start":"carousel-item-end",Gn=In?"carousel-item-next":"carousel-item-prev",en=this._orderToDirection(S);Ot&&Ot.classList.contains(ko)?this._isSliding=!1:this._isSliding||this._triggerSlideEvent(Ot,en).defaultPrevented||Te&&Ot&&(this._isSliding=!0,H&&this.pause(),this._setActiveIndicatorElement(Ot),this._activeElement=Ot,K=function(){Nt.trigger(Ee._element,yc,{relatedTarget:Ot,direction:en,from:He,to:Ft})},this._element.classList.contains("slide")?(Ot.classList.add(Gn),Te.classList.add(dn),Ot.classList.add(dn),this._queueCallback(function(){Ot.classList.remove(dn,Gn),Ot.classList.add(ko),Te.classList.remove(ko,Gn,dn),Ee._isSliding=!1,setTimeout(K,0)},Te,!0)):(Te.classList.remove(ko),Ot.classList.add(ko),this._isSliding=!1,K()),H&&this.cycle())}},{key:"_directionToOrder",value:function(S){return[_s,Oo].includes(S)?xe()?S===Oo?Ws:Kl:S===Oo?Kl:Ws:S}},{key:"_orderToDirection",value:function(S){return[Kl,Ws].includes(S)?xe()?S===Ws?Oo:_s:S===Ws?_s:Oo:S}}])&&ia(M.prototype,L),D&&ia(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function vc(M){return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Hc(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function bc(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?Hc(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):Hc(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function $c(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function Dl(){return(Dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=xc(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function Gc(M,D){return(Gc=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function xc(M){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}Nt.on(document,xi,"[data-bs-slide], [data-bs-slide-to]",Ql.dataApiClickHandler),Nt.on(window,Fa,function(){for(var M=xr.find('[data-bs-ride="carousel"]'),D=0,L=M.length;D<L;D++)Ql.carouselInterface(M[D],Ql.getInstance(M[D]))}),Fe(Ql),Un=Ql;var us=".".concat("bs.modal"),Ah={backdrop:!0,keyboard:!0,focus:!0},Wc={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Ro="hide".concat(us),Ud="hidePrevented".concat(us),Du="hidden".concat(us),Su="show".concat(us),wc="shown".concat(us),Na="resize".concat(us),Sl="click.dismiss".concat(us),Il="keydown.dismiss".concat(us),hs="mouseup.dismiss".concat(us),ol="mousedown.dismiss".concat(us),$n=(xi="click".concat(us).concat(".data-api"),"modal-open"),sl="modal-static",Ls=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&Gc(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=xc(M);if(L=D?(L=xc(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===vc(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(this instanceof C)return(S=N.call(this,S))._config=S._getConfig(H),S._dialog=xr.findOne(".modal-dialog",S._element),S._backdrop=S._initializeBackDrop(),S._focustrap=S._initializeFocusTrap(),S._isShown=!1,S._ignoreBackdropClick=!1,S._isTransitioning=!1,S._scrollBar=new Gl,S;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"Default",get:function(){return Ah}},{key:"NAME",get:function(){return"modal"}},{key:"jQueryInterface",value:function(S,H){return this.each(function(){var K=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===K[S])throw new TypeError('No method named "'.concat(S,'"'));K[S](H)}})}}],(L=[{key:"toggle",value:function(S){return this._isShown?this.hide():this.show(S)}},{key:"show",value:function(S){var H=this;this._isShown||this._isTransitioning||Nt.trigger(this._element,Su,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add($n),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Nt.on(this._dialog,ol,function(){Nt.one(H._element,hs,function(K){K.target===H._element&&(H._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return H._showElement(S)}))}},{key:"hide",value:function(){var S,H=this;!this._isShown||this._isTransitioning||Nt.trigger(this._element,Ro).defaultPrevented||(this._isShown=!1,(S=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove("show"),Nt.off(this._element,Sl),Nt.off(this._dialog,ol),this._queueCallback(function(){return H._hideModal()},this._element,S))}},{key:"dispose",value:function(){[window,this._dialog].forEach(function(S){return Nt.off(S,us)}),this._backdrop.dispose(),this._focustrap.deactivate(),Dl(xc(C.prototype),"dispose",this).call(this)}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_initializeBackDrop",value:function(){return new fc({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}},{key:"_initializeFocusTrap",value:function(){return new fd({trapElement:this._element})}},{key:"_getConfig",value:function(S){return _e("modal",S=bc(bc(bc({},Ah),Di.getDataAttributes(this._element)),"object"===vc(S)?S:{}),Wc),S}},{key:"_showElement",value:function(S){var H=this,K=this._isAnimated(),Ee=xr.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,Ee&&(Ee.scrollTop=0),this._element.classList.add("show"),this._queueCallback(function(){H._config.focus&&H._focustrap.activate(),H._isTransitioning=!1,Nt.trigger(H._element,wc,{relatedTarget:S})},this._dialog,K)}},{key:"_setEscapeEvent",value:function(){var S=this;this._isShown?Nt.on(this._element,Il,function(H){S._config.keyboard&&"Escape"===H.key?(H.preventDefault(),S.hide()):S._config.keyboard||"Escape"!==H.key||S._triggerBackdropTransition()}):Nt.off(this._element,Il)}},{key:"_setResizeEvent",value:function(){var S=this;this._isShown?Nt.on(window,Na,function(){return S._adjustDialog()}):Nt.off(window,Na)}},{key:"_hideModal",value:function(){var S=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(function(){document.body.classList.remove($n),S._resetAdjustments(),S._scrollBar.reset(),Nt.trigger(S._element,Du)})}},{key:"_showBackdrop",value:function(S){var H=this;Nt.on(this._element,Sl,function(K){H._ignoreBackdropClick?H._ignoreBackdropClick=!1:K.target===K.currentTarget&&(!0===H._config.backdrop?H.hide():"static"===H._config.backdrop&&H._triggerBackdropTransition())}),this._backdrop.show(S)}},{key:"_isAnimated",value:function(){return this._element.classList.contains("fade")}},{key:"_triggerBackdropTransition",value:function(){var S,H,Ee,Te,He=this;Nt.trigger(this._element,Ud).defaultPrevented||(H=(S=this._element).classList,Ee=S.style,!(Te=S.scrollHeight>document.documentElement.clientHeight)&&"hidden"===Ee.overflowY||H.contains(sl)||(Te||(Ee.overflowY="hidden"),H.add(sl),this._queueCallback(function(){H.remove(sl),Te||He._queueCallback(function(){Ee.overflowY=""},He._dialog)},this._dialog),this._element.focus()))}},{key:"_adjustDialog",value:function(){var S=this._element.scrollHeight>document.documentElement.clientHeight,H=this._scrollBar.getWidth(),K=0<H;(!K&&S&&!xe()||K&&!S&&xe())&&(this._element.style.paddingLeft="".concat(H,"px")),(K&&!S&&!xe()||!K&&S&&xe())&&(this._element.style.paddingRight="".concat(H,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}}])&&$c(M.prototype,L),D&&$c(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function To(M){return function(D){if(Array.isArray(D))return Es(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||function(D,L){if(D){if("string"==typeof D)return Es(D,L);var N=Object.prototype.toString.call(D).slice(8,-1);return"Map"===(N="Object"===N&&D.constructor?D.constructor.name:N)||"Set"===N?Array.from(D):"Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?Es(D,L):void 0}}(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}Nt.on(document,xi,'[data-bs-toggle="modal"]',function(M){var D=this,L=l(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),Nt.one(L,Su,function(N){N.defaultPrevented||Nt.one(L,Du,function(){se(D)&&D.focus()})}),(M=xr.findOne(".modal.show"))&&Ls.getInstance(M).hide(),Ls.getOrCreateInstance(L).toggle(this)}),co(Ls),Fe(Ls),Fa=Ls;var pd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ph=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Hd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function Ku(M,D,L){if(!M.length)return M;if(L&&"function"==typeof L)return L(M);L=(new window.DOMParser).parseFromString(M,"text/html");for(var N=(M=[]).concat.apply(M,To(L.body.querySelectorAll("*"))),C=function(Ee,Te){var He=N[Ee];if(Ee=He.nodeName.toLowerCase(),!Object.keys(D).includes(Ee))return He.remove(),"continue";var Ot=(Ot=[]).concat.apply(Ot,To(He.attributes)),Ft=[].concat(D["*"]||[],D[Ee]||[]);Ot.forEach(function(In){!function(dn,Gn){var en=dn.nodeName.toLowerCase();if(Gn.includes(en))return!pd.has(en)||Boolean(Ph.test(dn.nodeValue)||Hd.test(dn.nodeValue));for(var xn=Gn.filter(function(wi){return wi instanceof RegExp}),yn=0,Dn=xn.length;yn<Dn;yn++)if(xn[yn].test(en))return!0;return!1}(In,Ft)&&He.removeAttribute(In.nodeName)})},S=0,H=N.length;S<H;S++)C(S);return L.body.innerHTML}function Ki(M){return(Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function al(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function qs(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?al(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):al(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function go(M){return function(D){if(Array.isArray(D))return Ba(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||function(D,L){if(D){if("string"==typeof D)return Ba(D,L);var N=Object.prototype.toString.call(D).slice(8,-1);return"Map"===(N="Object"===N&&D.constructor?D.constructor.name:N)||"Set"===N?Array.from(D):"Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?Ba(D,L):void 0}}(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}function Jl(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function $d(){return($d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=ec(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function Iu(M,D){return(Iu=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function ec(M){return(ec=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}xi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var Yu="tooltip",uo=".".concat("bs.tooltip"),Lo=new Set(["sanitize","allowList","sanitizeFn"]),Mu={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Do={AUTO:"auto",TOP:"top",RIGHT:xe()?"left":"right",BOTTOM:"bottom",LEFT:xe()?"right":"left"},la={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:xi,popperConfig:null},Zc={HIDE:"hide".concat(uo),HIDDEN:"hidden".concat(uo),SHOW:"show".concat(uo),SHOWN:"shown".concat(uo),INSERTED:"inserted".concat(uo),CLICK:"click".concat(uo),FOCUSIN:"focusin".concat(uo),FOCUSOUT:"focusout".concat(uo),MOUSEENTER:"mouseenter".concat(uo),MOUSELEAVE:"mouseleave".concat(uo)},Au="fade",ll="show",ns="show",Xs=".tooltip-inner",Ec=".".concat("modal"),za="hide.bs.modal",ys="hover",tc="focus",qc=(xi=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&Iu(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=ec(M);if(L=D?(L=ec(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===Ki(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");if(void 0===O)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(S=N.call(this,S))._isEnabled=!0,S._timeout=0,S._hoverState="",S._activeTrigger={},S._popper=null,S._config=S._getConfig(H),S.tip=null,S._setListeners(),S}return M=C,D=[{key:"Default",get:function(){return la}},{key:"NAME",get:function(){return Yu}},{key:"Event",get:function(){return Zc}},{key:"DefaultType",get:function(){return Mu}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}}],(L=[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(S){this._isEnabled&&(S?((S=this._initializeOnDelegatedTarget(S))._activeTrigger.click=!S._activeTrigger.click,S._isWithActiveTrigger()?S._enter(null,S):S._leave(null,S)):this.getTipElement().classList.contains(ll)?this._leave(null,this):this._enter(null,this))}},{key:"dispose",value:function(){clearTimeout(this._timeout),Nt.off(this._element.closest(Ec),za,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),$d(ec(C.prototype),"dispose",this).call(this)}},{key:"show",value:function(){var S,H,K,Ee=this;if("none"===this._element.style.display)throw new Error("Please use show on visible elements");this.isWithContent()&&this._isEnabled&&(H=Nt.trigger(this._element,this.constructor.Event.SHOW),K=(null===(K=ce(this._element))?this._element.ownerDocument.documentElement:K).contains(this._element),!H.defaultPrevented&&K&&("tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(Xs).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null),H=this.getTipElement(),K=function(Te){for(;Te+=Math.floor(1e6*Math.random()),document.getElementById(Te););return Te}(this.constructor.NAME),H.setAttribute("id",K),this._element.setAttribute("aria-describedby",K),this._config.animation&&H.classList.add(Au),K="function"==typeof this._config.placement?this._config.placement.call(this,H,this._element):this._config.placement,K=this._getAttachment(K),this._addAttachmentClass(K),S=this._config.container,ni(H,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(S.append(H),Nt.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Wr(this._element,H,this._getPopperConfig(K)),H.classList.add(ll),(S=this._resolvePossibleFunction(this._config.customClass))&&(K=H.classList).add.apply(K,go(S.split(" "))),"ontouchstart"in document.documentElement&&(H=[]).concat.apply(H,go(document.body.children)).forEach(function(Te){Nt.on(Te,"mouseover",ie)}),K=this.tip.classList.contains(Au),this._queueCallback(function(){var Te=Ee._hoverState;Ee._hoverState=null,Nt.trigger(Ee._element,Ee.constructor.Event.SHOWN),"out"===Te&&Ee._leave(null,Ee)},this.tip,K)))}},{key:"hide",value:function(){var S,H,K=this;this._popper&&(S=this.getTipElement(),Nt.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(S.classList.remove(ll),"ontouchstart"in document.documentElement&&(H=[]).concat.apply(H,go(document.body.children)).forEach(function(Ee){return Nt.off(Ee,"mouseover",ie)}),this._activeTrigger.click=!1,this._activeTrigger[tc]=!1,this._activeTrigger[ys]=!1,H=this.tip.classList.contains(Au),this._queueCallback(function(){K._isWithActiveTrigger()||(K._hoverState!==ns&&S.remove(),K._cleanTipClass(),K._element.removeAttribute("aria-describedby"),Nt.trigger(K._element,K.constructor.Event.HIDDEN),K._disposePopper())},this.tip,H),this._hoverState=""))}},{key:"update",value:function(){null!==this._popper&&this._popper.update()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){if(this.tip)return this.tip;var S=((S=document.createElement("div")).innerHTML=this._config.template,S.children[0]);return this.setContent(S),S.classList.remove(Au,ll),this.tip=S,this.tip}},{key:"setContent",value:function(S){this._sanitizeAndSetContent(S,this.getTitle(),Xs)}},{key:"_sanitizeAndSetContent",value:function(S,H,K){K=xr.findOne(K,S),!H&&K?K.remove():this.setElementContent(K,H)}},{key:"setElementContent",value:function(S,H){if(null!==S)return $t(H)?(H=de(H),void(this._config.html?H.parentNode!==S&&(S.innerHTML="",S.append(H)):S.textContent=H.textContent)):void(this._config.html?(this._config.sanitize&&(H=Ku(H,this._config.allowList,this._config.sanitizeFn)),S.innerHTML=H):S.textContent=H)}},{key:"getTitle",value:function(){var S=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(S)}},{key:"updateAttachment",value:function(S){return"right"===S?"end":"left"===S?"start":S}},{key:"_initializeOnDelegatedTarget",value:function(S,H){return H||this.constructor.getOrCreateInstance(S.delegateTarget,this._getDelegateConfig())}},{key:"_getOffset",value:function(){var S=this,H=this._config.offset;return"string"==typeof H?H.split(",").map(function(K){return Number.parseInt(K,10)}):"function"==typeof H?function(K){return H(K,S._element)}:H}},{key:"_resolvePossibleFunction",value:function(S){return"function"==typeof S?S.call(this._element):S}},{key:"_getPopperConfig",value:function(S){var H=this;return qs(qs({},S={placement:S,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:function(K){return H._handlePopperPlacementChange(K)}}],onFirstUpdate:function(K){K.options.placement!==K.placement&&H._handlePopperPlacementChange(K)}}),"function"==typeof this._config.popperConfig?this._config.popperConfig(S):this._config.popperConfig)}},{key:"_addAttachmentClass",value:function(S){this.getTipElement().classList.add("".concat(this._getBasicClassPrefix(),"-").concat(this.updateAttachment(S)))}},{key:"_getAttachment",value:function(S){return Do[S.toUpperCase()]}},{key:"_setListeners",value:function(){var S=this;this._config.trigger.split(" ").forEach(function(H){var K;"click"===H?Nt.on(S._element,S.constructor.Event.CLICK,S._config.selector,function(Ee){return S.toggle(Ee)}):"manual"!==H&&(K=H===ys?S.constructor.Event.MOUSEENTER:S.constructor.Event.FOCUSIN,H=H===ys?S.constructor.Event.MOUSELEAVE:S.constructor.Event.FOCUSOUT,Nt.on(S._element,K,S._config.selector,function(Ee){return S._enter(Ee)}),Nt.on(S._element,H,S._config.selector,function(Ee){return S._leave(Ee)}))}),this._hideModalHandler=function(){S._element&&S.hide()},Nt.on(this._element.closest(Ec),za,this._hideModalHandler),this._config.selector?this._config=qs(qs({},this._config),{},{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var S=this._element.getAttribute("title"),H=Ki(this._element.getAttribute("data-bs-original-title"));!S&&"string"===H||(this._element.setAttribute("data-bs-original-title",S||""),!S||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",S),this._element.setAttribute("title",""))}},{key:"_enter",value:function(S,H){H=this._initializeOnDelegatedTarget(S,H),S&&(H._activeTrigger["focusin"===S.type?tc:ys]=!0),H.getTipElement().classList.contains(ll)||H._hoverState===ns?H._hoverState=ns:(clearTimeout(H._timeout),H._hoverState=ns,H._config.delay&&H._config.delay.show?H._timeout=setTimeout(function(){H._hoverState===ns&&H.show()},H._config.delay.show):H.show())}},{key:"_leave",value:function(S,H){H=this._initializeOnDelegatedTarget(S,H),S&&(H._activeTrigger["focusout"===S.type?tc:ys]=H._element.contains(S.relatedTarget)),H._isWithActiveTrigger()||(clearTimeout(H._timeout),H._hoverState="out",H._config.delay&&H._config.delay.hide?H._timeout=setTimeout(function(){"out"===H._hoverState&&H.hide()},H._config.delay.hide):H.hide())}},{key:"_isWithActiveTrigger",value:function(){for(var S in this._activeTrigger)if(this._activeTrigger[S])return!0;return!1}},{key:"_getConfig",value:function(S){var H=Di.getDataAttributes(this._element);return Object.keys(H).forEach(function(K){Lo.has(K)&&delete H[K]}),(S=qs(qs(qs({},this.constructor.Default),H),"object"===Ki(S)&&S?S:{})).container=!1===S.container?document.body:de(S.container),"number"==typeof S.delay&&(S.delay={show:S.delay,hide:S.delay}),"number"==typeof S.title&&(S.title=S.title.toString()),"number"==typeof S.content&&(S.content=S.content.toString()),_e(Yu,S,this.constructor.DefaultType),S.sanitize&&(S.template=Ku(S.template,S.allowList,S.sanitizeFn)),S}},{key:"_getDelegateConfig",value:function(){var S,H={};for(S in this._config)this.constructor.Default[S]!==this._config[S]&&(H[S]=this._config[S]);return H}},{key:"_cleanTipClass",value:function(){var S=this.getTipElement(),H=new RegExp("(^|\\s)".concat(this._getBasicClassPrefix(),"\\S+"),"g");null!==(H=S.getAttribute("class").match(H))&&0<H.length&&H.map(function(K){return K.trim()}).forEach(function(K){return S.classList.remove(K)})}},{key:"_getBasicClassPrefix",value:function(){return"bs-tooltip"}},{key:"_handlePopperPlacementChange",value:function(S){(S=S.state)&&(this.tip=S.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(S.placement)))}},{key:"_disposePopper",value:function(){this._popper&&(this._popper.destroy(),this._popper=null)}}])&&Jl(M.prototype,L),D&&Jl(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}(),Fe(xi),xi);function Oh(M){return(Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Pu(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function Xc(M,D){return(Xc=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function o(M){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}function u(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function g(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?u(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):u(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}uo=".".concat("bs.popover");var E=g(g({},qc.Default),{},{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),I=g(g({},qc.DefaultType),{},{content:"(string|element|function)"}),B={HIDE:"hide".concat(uo),HIDDEN:"hidden".concat(uo),SHOW:"show".concat(uo),SHOWN:"shown".concat(uo),INSERTED:"inserted".concat(uo),CLICK:"click".concat(uo),FOCUSIN:"focusin".concat(uo),FOCUSOUT:"focusout".concat(uo),MOUSEENTER:"mouseenter".concat(uo),MOUSELEAVE:"mouseleave".concat(uo)};function z(M){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function U(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Z(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?U(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):U(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function X(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function ae(){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=Ae(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function ye(M,D){return(ye=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function Ae(M){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}xi=function(){var M=C,D=qc;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&Xc(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=o(M);if(L=D?(L=o(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===Oh(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(){var S=this,H=C;if(S instanceof H)return N.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"Default",get:function(){return E}},{key:"NAME",get:function(){return"popover"}},{key:"Event",get:function(){return B}},{key:"DefaultType",get:function(){return I}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}}],(L=[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"setContent",value:function(S){this._sanitizeAndSetContent(S,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(S,this._getContent(),".popover-body")}},{key:"_getContent",value:function(){return this._resolvePossibleFunction(this._config.content)}},{key:"_getBasicClassPrefix",value:function(){return"bs-popover"}}])&&Pu(M.prototype,L),D&&Pu(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}(),Fe(xi),uo=xi,v(180);var De="scrollspy",Oe=".".concat("bs.scrollspy"),Ce={offset:10,method:"auto",target:""},Ve={offset:"number",method:"string",target:"(string|element)"},ze="activate".concat(Oe),ft="scroll".concat(Oe),ot=(xi="load".concat(Oe).concat(".data-api"),"dropdown-item"),Ke="active",st=".nav-link",tt=".list-group-item",gt="".concat(st,", ").concat(tt,", .").concat(ot),kt="position",ln=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&ye(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=Ae(M);if(L=D?(L=Ae(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===z(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){var K;if(this instanceof C)return(K=N.call(this,S))._scrollElement="BODY"===K._element.tagName?window:K._element,K._config=K._getConfig(H),K._offsets=[],K._targets=[],K._activeTarget=null,K._scrollHeight=0,Nt.on(K._scrollElement,ft,function(){return K._process()}),K.refresh(),K._process(),K;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"Default",get:function(){return Ce}},{key:"NAME",get:function(){return De}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}}],(L=[{key:"refresh",value:function(){var S=this,K="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":kt:this._config.method,Ee=K===kt?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),xr.find(gt,this._config.target).map(function(Te){var He=(Te=te(Te))?xr.findOne(Te):null;if(He){var Ot=He.getBoundingClientRect();if(Ot.width||Ot.height)return[Di[K](He).top+Ee,Te]}return null}).filter(function(Te){return Te}).sort(function(Te,He){return Te[0]-He[0]}).forEach(function(Te){S._offsets.push(Te[0]),S._targets.push(Te[1])})}},{key:"dispose",value:function(){Nt.off(this._scrollElement,Oe),ae(Ae(C.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(S){return(S=Z(Z(Z({},Ce),Di.getDataAttributes(this._element)),"object"===z(S)&&S?S:{})).target=de(S.target)||document.documentElement,_e(De,S,Ve),S}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_getOffsetHeight",value:function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}},{key:"_process",value:function(){var S=this._getScrollTop()+this._config.offset,H=this._getScrollHeight(),K=this._config.offset+H-this._getOffsetHeight();if(this._scrollHeight!==H&&this.refresh(),K<=S)this._activeTarget!==(H=this._targets[this._targets.length-1])&&this._activate(H);else{if(this._activeTarget&&S<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var Ee=this._offsets.length;Ee--;)this._activeTarget!==this._targets[Ee]&&S>=this._offsets[Ee]&&(void 0===this._offsets[Ee+1]||S<this._offsets[Ee+1])&&this._activate(this._targets[Ee])}}},{key:"_activate",value:function(S){this._activeTarget=S,this._clear();var H=gt.split(",").map(function(K){return"".concat(K,'[data-bs-target="').concat(S,'"],').concat(K,'[href="').concat(S,'"]')});(H=xr.findOne(H.join(","),this._config.target)).classList.add(Ke),H.classList.contains(ot)?xr.findOne(".dropdown-toggle",H.closest(".dropdown")).classList.add(Ke):xr.parents(H,".nav, .list-group").forEach(function(K){xr.prev(K,"".concat(st,", ").concat(tt)).forEach(function(Ee){return Ee.classList.add(Ke)}),xr.prev(K,".nav-item").forEach(function(Ee){xr.children(Ee,st).forEach(function(Te){return Te.classList.add(Ke)})})}),Nt.trigger(this._scrollElement,ze,{relatedTarget:S})}},{key:"_clear",value:function(){xr.find(gt,this._config.target).filter(function(S){return S.classList.contains(Ke)}).forEach(function(S){return S.classList.remove(Ke)})}}])&&X(M.prototype,L),D&&X(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function At(M){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function sn(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function rn(M,D){return(rn=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function qt(M){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}Nt.on(window,xi,function(){xr.find('[data-bs-spy="scroll"]').forEach(function(M){return new ln(M)})}),Fe(ln),xi=ln;var _n=".".concat("bs.tab"),hn="hide".concat(_n),Vn="hidden".concat(_n),Rn="show".concat(_n),Qn="shown".concat(_n),ar=(_n="click".concat(_n).concat(".data-api"),"active"),dr=".active",qr=":scope > li > .active",rr=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&rn(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=qt(M);if(L=D?(L=qt(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===At(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(){var S=this,H=C;if(S instanceof H)return N.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"NAME",get:function(){return"tab"}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S]()}})}}],(L=[{key:"show",value:function(){var S,H,K,Ee,Te=this;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(ar)||(S=l(this._element),(H=this._element.closest(".nav, .list-group"))&&(K=(K=xr.find(Ee="UL"===H.nodeName||"OL"===H.nodeName?qr:dr,H))[K.length-1]),Ee=K?Nt.trigger(K,hn,{relatedTarget:this._element}):null,Nt.trigger(this._element,Rn,{relatedTarget:K}).defaultPrevented||null!==Ee&&Ee.defaultPrevented||(this._activate(this._element,H),Ee=function(){Nt.trigger(K,Vn,{relatedTarget:Te._element}),Nt.trigger(Te._element,Qn,{relatedTarget:K})},S?this._activate(S,S.parentNode,Ee):Ee()))}},{key:"_activate",value:function(S,H,K){function Ee(){return Te._transitionComplete(S,He,K)}var Te=this,He=(!H||"UL"!==H.nodeName&&"OL"!==H.nodeName?xr.children(H,dr):xr.find(qr,H))[0];H=K&&He&&He.classList.contains("fade"),He&&H?(He.classList.remove("show"),this._queueCallback(Ee,S,!0)):Ee()}},{key:"_transitionComplete",value:function(S,H,K){H&&(H.classList.remove(ar),(Ee=xr.findOne(":scope > .dropdown-menu .active",H.parentNode))&&Ee.classList.remove(ar),"tab"===H.getAttribute("role")&&H.setAttribute("aria-selected",!1)),S.classList.add(ar),"tab"===S.getAttribute("role")&&S.setAttribute("aria-selected",!0),S.classList.contains("fade")&&S.classList.add("show");var Ee=S.parentNode;(Ee=Ee&&"LI"===Ee.nodeName?Ee.parentNode:Ee)&&Ee.classList.contains("dropdown-menu")&&((H=S.closest(".dropdown"))&&xr.find(".dropdown-toggle",H).forEach(function(Te){return Te.classList.add(ar)}),S.setAttribute("aria-expanded",!0)),K&&K()}}])&&sn(M.prototype,L),D&&sn(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}();function Ir(M){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Xr(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Yi(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?Xr(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):Xr(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function Qi(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function ki(){return(ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,D,L){var N=function(C,S){for(;!Object.prototype.hasOwnProperty.call(C,S)&&null!==(C=Ks(C)););return C}(M,D);if(N)return(N=Object.getOwnPropertyDescriptor(N,D)).get?N.get.call(arguments.length<3?M:L):N.value}).apply(this,arguments)}function ro(M,D){return(ro=Object.setPrototypeOf||function(L,N){return L.__proto__=N,L})(M,D)}function Ks(M){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(M)}function Ji(M){for(;M+=Math.floor(Math.random()*ff),document.getElementById(M););return M}function Gi(M,D,L){Object.keys(L).forEach(function(N){var C,S=L[N],H=(H=D[N])&&((C=H)[0]||C).nodeType?"element":null==(C=H)?"".concat(C):{}.toString.call(C).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(S).test(H))throw new Error("".concat(M.toUpperCase(),": ")+'Option "'.concat(N,'" provided type "').concat(H,'" ')+'but expected type "'.concat(S,'".'))})}function jr(){var M=window.jQuery;return M&&!document.body.hasAttribute("data-mdb-no-jquery")?M:null}function So(M){return document.createElement(M)}Nt.on(document,_n,'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),he(this)||rr.getOrCreateInstance(this).show()}),Fe(rr),_n=rr;var Ni,$o,Io=".".concat("bs.toast"),ds="mouseover".concat(Io),ca="mouseout".concat(Io),Kc="focusin".concat(Io),ja="focusout".concat(Io),vs="hide".concat(Io),Va="hidden".concat(Io),Ml="show".concat(Io),Ou="shown".concat(Io),Qu="show",kh="showing",Yc={animation:"boolean",autohide:"boolean",delay:"number"},gd={animation:!0,autohide:!0,delay:5e3},ff=(Io=function(){var M=C,D=Ur;if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),D&&ro(M,D);var L,N=function(M){var D=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,N=Ks(M);if(L=D?(L=Ks(this).constructor,Reflect.construct(N,arguments,L)):N.apply(this,arguments),N=this,L&&("object"===Ir(L)||"function"==typeof L))return L;if(void 0!==L)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==N)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(C);function C(S,H){if(this instanceof C)return(S=N.call(this,S))._config=S._getConfig(H),S._timeout=null,S._hasMouseInteraction=!1,S._hasKeyboardInteraction=!1,S._setListeners(),S;throw new TypeError("Cannot call a class as a function")}return M=C,D=[{key:"DefaultType",get:function(){return Yc}},{key:"Default",get:function(){return gd}},{key:"NAME",get:function(){return"toast"}},{key:"jQueryInterface",value:function(S){return this.each(function(){var H=C.getOrCreateInstance(this,S);if("string"==typeof S){if(void 0===H[S])throw new TypeError('No method named "'.concat(S,'"'));H[S](this)}})}}],(L=[{key:"show",value:function(){var S=this;Nt.trigger(this._element,Ml).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Qu),this._element.classList.add(kh),this._queueCallback(function(){S._element.classList.remove(kh),Nt.trigger(S._element,Ou),S._maybeScheduleHide()},this._element,this._config.animation))}},{key:"hide",value:function(){var S=this;this._element.classList.contains(Qu)&&!Nt.trigger(this._element,vs).defaultPrevented&&(this._element.classList.add(kh),this._queueCallback(function(){S._element.classList.add("hide"),S._element.classList.remove(kh),S._element.classList.remove(Qu),Nt.trigger(S._element,Va)},this._element,this._config.animation))}},{key:"dispose",value:function(){this._clearTimeout(),this._element.classList.contains(Qu)&&this._element.classList.remove(Qu),ki(Ks(C.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(S){return _e("toast",S=Yi(Yi(Yi({},gd),Di.getDataAttributes(this._element)),"object"===Ir(S)&&S?S:{}),this.constructor.DefaultType),S}},{key:"_maybeScheduleHide",value:function(){var S=this;!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(function(){S.hide()},this._config.delay))}},{key:"_onInteraction",value:function(S,H){switch(S.type){case"mouseover":case"mouseout":this._hasMouseInteraction=H;break;case"focusin":case"focusout":this._hasKeyboardInteraction=H}H?this._clearTimeout():this._element===(S=S.relatedTarget)||this._element.contains(S)||this._maybeScheduleHide()}},{key:"_setListeners",value:function(){var S=this;Nt.on(this._element,ds,function(H){return S._onInteraction(H,!0)}),Nt.on(this._element,ca,function(H){return S._onInteraction(H,!1)}),Nt.on(this._element,Kc,function(H){return S._onInteraction(H,!0)}),Nt.on(this._element,ja,function(H){return S._onInteraction(H,!1)})}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout),this._timeout=null}}])&&Qi(M.prototype,L),D&&Qi(M,D),Object.defineProperty(M,"prototype",{writable:!1}),C}(),co(Io),Fe(Io),1e6),Gd=(document,Ni={},$o=1,{set:function(M,D,L){void 0===M[D]&&(M[D]={key:D,id:$o},$o++),Ni[M[D].id]=L},get:function(M,D){return M&&void 0!==M[D]&&(M=M[D]).key===D?Ni[M.id]:null},delete:function(M,D){var L;void 0!==M[D]&&(L=M[D]).key===D&&(delete Ni[L.id],delete M[D])}}),Ys_setData=function(M,D,L){Gd.set(M,D,L)},Ys_getData=function(M,D){return Gd.get(M,D)},Ys_removeData=function(M,D){Gd.delete(M,D)};function Rh(M,D){return function(L){if(Array.isArray(L))return L}(M)||function(L,N){var C=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=C){var S,H,K=[],Ee=!0,Te=!1;try{for(C=C.call(L);!(Ee=(S=C.next()).done)&&(K.push(S.value),!N||K.length!==N);Ee=!0);}catch(He){Te=!0,H=He}finally{try{Ee||null==C.return||C.return()}finally{if(Te)throw H}}return K}}(M,D)||function(L,N){if(L){if("string"==typeof L)return Al(L,N);var C=Object.prototype.toString.call(L).slice(8,-1);return"Map"===(C="Object"===C&&L.constructor?L.constructor.name:C)||"Set"===C?Array.from(L):"Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?Al(L,N):void 0}}(M,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Al(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}var Cc=jr(),_d=/[^.]*(?=\..*)\.|.*/,pf=/\..*/,Np=/::\d+$/,Lh={},mf=1,Ju={mouseenter:"mouseover",mouseleave:"mouseout"},Wd=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function eh(M,D){return D&&"".concat(D,"::").concat(mf++)||M.uidEvent||mf++}function Fh(M){var D=eh(M);return M.uidEvent=D,Lh[D]=Lh[D]||{},Lh[D]}function yd(M,D,L){for(var N=2<arguments.length&&void 0!==L?L:null,C=Object.keys(M),S=0,H=C.length;S<H;S++){var K=M[C[S]];if(K.originalHandler===D&&K.delegationSelector===N)return K}return null}function th(M,D,L){var N="string"==typeof D;return L=N?L:D,D=M.replace(pf,""),[N,L,D=-1<Wd.indexOf(D=Ju[D]||D)?D:M]}function Tc(M,D,L,N,C){var S,H,K,Ee,Te,He,Ot,Ft,In,dn;"string"==typeof D&&M&&(L||(L=N,N=null),S=(K=Rh(th(D,L,N),3))[0],H=K[1],K=K[2],(Te=yd(Ee=(Ee=Fh(M))[K]||(Ee[K]={}),H,S?L:null))?Te.oneOff=Te.oneOff&&C:(Te=eh(H,D.replace(_d,"")),(D=S?(Ft=M,In=L,dn=N,function Gn(en){for(var xn=Ft.querySelectorAll(In),yn=en.target;yn&&yn!==this;yn=yn.parentNode)for(var Dn=xn.length;Dn--;)if(xn[Dn]===yn)return en.delegateTarget=yn,Gn.oneOff&&nc.off(Ft,en.type,dn),dn.apply(yn,[en]);return null}):(He=M,Ot=L,function Gn(en){return en.delegateTarget=He,Gn.oneOff&&nc.off(He,en.type,Ot),Ot.apply(He,[en])})).delegationSelector=S?L:null,D.originalHandler=H,D.oneOff=C,Ee[D.uidEvent=Te]=D,M.addEventListener(K,D,S)))}function Qc(M,D,L,N,C){(N=yd(D[L],N,C))&&(M.removeEventListener(L,N,Boolean(C)),delete D[L][N.uidEvent])}var nc={on:function(M,D,L,N){Tc(M,D,L,N,!1)},one:function(M,D,L,N){Tc(M,D,L,N,!0)},off:function(M,D,L,N){if("string"==typeof D&&M){var C=(N=Rh(th(D,L,N),3))[0],S=N[1],H=N[2],K=H!==D,Ee=Fh(M);if(N="."===D.charAt(0),void 0!==S)return Ee&&Ee[H]?void Qc(M,Ee,H,S,C?L:null):void 0;N&&Object.keys(Ee).forEach(function(Ot){var Ft,In,dn,Gn,en;Ft=M,In=Ee,dn=Ot,Gn=D.slice(1),en=In[dn]||{},Object.keys(en).forEach(function(xn){-1<xn.indexOf(Gn)&&Qc(Ft,In,dn,(xn=en[xn]).originalHandler,xn.delegationSelector)})});var Te=Ee[H]||{};Object.keys(Te).forEach(function(Ot){var Ft=Ot.replace(Np,"");(!K||-1<D.indexOf(Ft))&&Qc(M,Ee,H,(Ft=Te[Ot]).originalHandler,Ft.delegationSelector)})}},trigger:function(M,D,L){if("string"!=typeof D||!M)return null;var N,C=D.replace(pf,""),S=D!==C,H=-1<Wd.indexOf(C),K=!0,Ee=!0,Te=!1,He=null;return S&&Cc&&(N=Cc.Event(D,L),Cc(M).trigger(N),K=!N.isPropagationStopped(),Ee=!N.isImmediatePropagationStopped(),Te=N.isDefaultPrevented()),H?(He=document.createEvent("HTMLEvents")).initEvent(C,K,!0):He=new CustomEvent(D,{bubbles:K,cancelable:!0}),void 0!==L&&Object.keys(L).forEach(function(Ot){Object.defineProperty(He,Ot,{get:function(){return L[Ot]}})}),Te&&He.preventDefault(),Ee&&M.dispatchEvent(He),He.defaultPrevented&&void 0!==N&&N.preventDefault(),He}},Dc=function(M,D,L,N){for(var C=D.split(" "),S=0;S<C.length;S++)nc.on(M,C[S],L,N)},_r=nc;function vd(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Jc(M){return"true"===M||"false"!==M&&(M===Number(M).toString()?Number(M):""===M||"null"===M?null:M)}v(185);var Rt_getDataAttributes=function(M){if(!M)return{};var D=function(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?vd(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):vd(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}({},M.dataset);return Object.keys(D).filter(function(L){return L.startsWith("mdb")}).forEach(function(L){var N=(N=L.replace(/^mdb/,"")).charAt(0).toLowerCase()+N.slice(1,N.length);D[N]=Jc(D[L])}),D},Rt_style=function(M,D){Object.assign(M.style,D)},Rt_addClass=function(M,D){M.classList.contains(D)||M.classList.add(D)},Rt_addStyle=function(M,D){Object.keys(D).forEach(function(L){M.style[L]=D[L]})},Rt_removeClass=function(M,D){M.classList.contains(D)&&M.classList.remove(D)},Rt_hasClass=function(M,D){return M.classList.contains(D)};function Pl(M){return function(D){if(Array.isArray(D))return ua(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||function(D,L){if(D){if("string"==typeof D)return ua(D,L);var N=Object.prototype.toString.call(D).slice(8,-1);return"Map"===(N="Object"===N&&D.constructor?D.constructor.name:N)||"Set"===N?Array.from(D):"Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?ua(D,L):void 0}}(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}var Tn={closest:function(M,D){return M.closest(D)},matches:function(M,D){return M.matches(D)},find:function(M){var D,L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(D=[]).concat.apply(D,Pl(Element.prototype.querySelectorAll.call(L,M)))},findOne:function(M){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(D,M)},children:function(M,D){var L;return(L=[]).concat.apply(L,Pl(M.children)).filter(function(N){return N.matches(D)})},parents:function(M,D){for(var L=[],N=M.parentNode;N&&N.nodeType===Node.ELEMENT_NODE&&3!==N.nodeType;)this.matches(N,D)&&L.push(N),N=N.parentNode;return L},prev:function(M,D){for(var L=M.previousElementSibling;L;){if(L.matches(D))return[L];L=L.previousElementSibling}return[]},next:function(M,D){for(var L=M.nextElementSibling;L;){if(this.matches(L,D))return[L];L=L.nextElementSibling}return[]}};function ic(M){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function gf(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function _f(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?gf(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):gf(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function yf(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}var M,Sc="ripple",Nh="mdb.ripple",Ol="ripple-surface",Ua="ripple-wave",Zd=["[data-mdb-ripple]"],nh="ripple-surface-unbound",vo=[0,0,0],wr=["primary","secondary","success","danger","warning","info","light","dark"],eu={rippleCentered:!1,rippleColor:"",rippleDuration:"500ms",rippleRadius:0,rippleUnbound:!1},Fo={rippleCentered:"boolean",rippleColor:"string",rippleDuration:"string",rippleRadius:"number",rippleUnbound:"boolean"},li=function(){function M(C,S){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._element=C,this._options=this._getConfig(S),this._element&&(Ys_setData(C,Nh,this),Rt_addClass(this._element,Ol)),this._clickHandler=this._createRipple.bind(this),this._rippleTimer=null,this._isMinWidthSet=!1,this.init()}var D,L,N;return D=M,N=[{key:"NAME",get:function(){return Sc}},{key:"autoInitial",value:function(C){return function(S){C._autoInit(S)}}},{key:"jQueryInterface",value:function(C){return this.each(function(){return Ys_getData(this,Nh)?null:new M(this,C)})}},{key:"getInstance",value:function(C){return Ys_getData(C,Nh)}},{key:"getOrCreateInstance",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(C)||new this(C,"object"===ic(S)?S:null)}}],(L=[{key:"init",value:function(){this._addClickEvent(this._element)}},{key:"dispose",value:function(){Ys_removeData(this._element,Nh),_r.off(this._element,"click",this._clickHandler),this._element=null,this._options=null}},{key:"_autoInit",value:function(C){var S=this;Zd.forEach(function(H){Tn.closest(C.target,H)&&(S._element=Tn.closest(C.target,H))}),this._element.style.minWidth||(Rt_style(this._element,{"min-width":"".concat(this._element.offsetWidth,"px")}),this._isMinWidthSet=!0),Rt_addClass(this._element,Ol),this._options=this._getConfig(),this._createRipple(C)}},{key:"_addClickEvent",value:function(C){_r.on(C,"mousedown",this._clickHandler)}},{key:"_createRipple",value:function(C){Rt_hasClass(this._element,Ol)||Rt_addClass(this._element,Ol);var S=C.layerX,H=(C=C.layerY,this._element.offsetHeight),K=this._element.offsetWidth,Ee=this._durationToMsNumber(this._options.rippleDuration),Te=this._getDiameter(Te={offsetX:this._options.rippleCentered?H/2:S,offsetY:this._options.rippleCentered?K/2:C,height:H,width:K}),He=this._options.rippleRadius||Te/2,Ot={delay:.5*Ee,duration:Ee-.5*Ee};K={left:"".concat(this._options.rippleCentered?K/2-He:S-He,"px"),top:"".concat(this._options.rippleCentered?H/2-He:C-He,"px"),height:"".concat(2*this._options.rippleRadius||Te,"px"),width:"".concat(2*this._options.rippleRadius||Te,"px"),transitionDelay:"0s, ".concat(Ot.delay,"ms"),transitionDuration:"".concat(Ee,"ms, ").concat(Ot.duration,"ms")},S=So("div"),this._createHTMLRipple({wrapper:this._element,ripple:S,styles:K}),this._removeHTMLRipple({ripple:S,duration:Ee})}},{key:"_createHTMLRipple",value:function(C){var S=C.wrapper,H=C.ripple,K=C.styles;Object.keys(K).forEach(function(Ee){return H.style[Ee]=K[Ee]}),H.classList.add(Ua),""!==this._options.rippleColor&&(this._removeOldColorClasses(S),this._addColor(H,S)),this._toggleUnbound(S),this._appendRipple(H,S)}},{key:"_removeHTMLRipple",value:function(C){var S=this,H=C.ripple;C=C.duration,this._rippleTimer&&(clearTimeout(this._rippleTimer),this._rippleTimer=null),this._rippleTimer=setTimeout(function(){H&&(H.remove(),S._element&&(Tn.find(".".concat(Ua),S._element).forEach(function(K){K.remove()}),S._isMinWidthSet&&(Rt_style(S._element,{"min-width":""}),S._isMinWidthSet=!1),Rt_removeClass(S._element,Ol)))},C)}},{key:"_durationToMsNumber",value:function(C){return Number(C.replace("ms","").replace("s","000"))}},{key:"_getConfig",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=Rt_getDataAttributes(this._element);return C=_f(_f(_f({},eu),S),C),Gi(Sc,C,Fo),C}},{key:"_getDiameter",value:function(C){function S(Gn,en){return Math.sqrt(Math.pow(Gn,2)+Math.pow(en,2))}var H=C.offsetX,K=C.offsetY,Ee=C.height,He=H<=(C=C.width)/2,Ot=K===Ee/2&&H===C/2,Ft=1==(Te=K<=Ee/2)&&0==He,In=1==Te&&1==He,dn=0==Te&&1==He,Te=0==Te&&0==He;return He={topLeft:S(H,K),topRight:S(C-H,K),bottomLeft:S(H,Ee-K),bottomRight:S(C-H,Ee-K)},C=0,Ot||Te?C=He.topLeft:dn?C=He.topRight:In?C=He.bottomRight:Ft&&(C=He.bottomLeft),2*C}},{key:"_appendRipple",value:function(C,S){S.appendChild(C),setTimeout(function(){Rt_addClass(C,"active")},50)}},{key:"_toggleUnbound",value:function(C){!0===this._options.rippleUnbound?Rt_addClass(C,nh):C.classList.remove(nh)}},{key:"_addColor",value:function(C,S){var H=this;wr.find(function(K){return K===H._options.rippleColor.toLowerCase()})?Rt_addClass(S,"".concat(Ol,"-").concat(this._options.rippleColor.toLowerCase())):(S=this._colorToRGB(this._options.rippleColor).join(","),S="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(S)),C.style.backgroundImage="radial-gradient(circle, ".concat(S,")"))}},{key:"_removeOldColorClasses",value:function(C){var S=new RegExp("".concat(Ol,"-[a-z]+"),"gi");(C.classList.value.match(S)||[]).forEach(function(H){C.classList.remove(H)})}},{key:"_colorToRGB",value:function(C){return"transparent"===C.toLowerCase()?vo:"#"===C[0]?((S=C).length<7&&(S="#".concat(S[1]).concat(S[1]).concat(S[2]).concat(S[2]).concat(S[3]).concat(S[3])),[parseInt(S.substr(1,2),16),parseInt(S.substr(3,2),16),parseInt(S.substr(5,2),16)]):(-1===C.indexOf("rgb")&&(S=C,(H=document.body.appendChild(document.createElement("fictum"))).style.color=K="rgb(1, 2, 3)",C=H.style.color!==K?vo:(H.style.color=S,H.style.color===K||""===H.style.color?vo:(S=getComputedStyle(H).color,document.body.removeChild(H),S))),0===C.indexOf("rgb")?((K=(K=C).match(/[.\d]+/g).map(function(Ee){return+Number(Ee)})).length=3,K):vo);var S,H,K}}])&&yf(D.prototype,L),N&&yf(D,N),Object.defineProperty(D,"prototype",{writable:!1}),M}(),xd=(Zd.forEach(function(M){_r.one(document,"mousedown",M,li.autoInitial(new li))}),M=function(){var M,D=jr();D&&(M=D.fn[Sc],D.fn[Sc]=li.jQueryInterface,D.fn[Sc].Constructor=li,D.fn[Sc].noConflict=function(){return D.fn[Sc]=M,li.jQueryInterface})},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M):M(),li);v(187);var ha=function(){function M(C){var S=this,H=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},K=2<arguments.length?arguments[2]:void 0,Ee=this,Te=M;if(!(Ee instanceof Te))throw new TypeError("Cannot call a class as a function");this._element=C,this._toggler=K,this._event=H.event||"blur",this._condition=H.condition||function(){return!0},this._selector=H.selector||'button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])',this._onlyVisible=H.onlyVisible||!1,this._focusableElements=[],this._firstElement=null,this._lastElement=null,this.handler=function(He){S._condition(He)&&He.target===S._lastElement&&(He.preventDefault(),S._firstElement.focus())}}var D,L;return D=M,(L=[{key:"trap",value:function(){this._setElements(),this._init(),this._setFocusTrap()}},{key:"disable",value:function(){var C=this;this._focusableElements.forEach(function(S){S.removeEventListener(C._event,C.handler)}),this._toggler&&this._toggler.focus()}},{key:"update",value:function(){this._setElements(),this._setFocusTrap()}},{key:"_init",value:function(){var C=this;window.addEventListener("keydown",function S(H){C._firstElement&&"Tab"===H.key&&!C._focusableElements.includes(H.target)&&(H.preventDefault(),C._firstElement.focus(),window.removeEventListener("keydown",S))})}},{key:"_filterVisible",value:function(C){return C.filter(function(S){if(!(H=S)||!(H.style&&H.parentNode&&H.parentNode.style)||(K=getComputedStyle(H),H=getComputedStyle(H.parentNode),"none"===K.display||"none"===H.display||"hidden"===K.visibility))return!1;for(var H,K,Ee=Tn.parents(S,"*"),Te=0;Te<Ee.length;Te++){var He=window.getComputedStyle(Ee[Te]);if(He&&("none"===He.display||"hidden"===He.visibility))return!1}return!0})}},{key:"_setElements",value:function(){this._focusableElements=Tn.find(this._selector,this._element),this._onlyVisible&&(this._focusableElements=this._filterVisible(this._focusableElements)),this._firstElement=this._focusableElements[0],this._lastElement=this._focusableElements[this._focusableElements.length-1]}},{key:"_setFocusTrap",value:function(){var C=this;this._focusableElements.forEach(function(S,H){H===C._focusableElements.length-1?S.addEventListener(C._event,C.handler):S.removeEventListener(C._event,C.handler)})}}])&&function(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}(D.prototype,L),Object.defineProperty(D,"prototype",{writable:!1}),M}();function qo(M){return M.getDate()}function Cs(M){return M.getDay()}function bo(M){return M.getMonth()}function Ri(M){return M.getFullYear()}function Bh(M){return fa(M.getFullYear(),M.getMonth()+1,0).getDate()}function da(){return new Date}function Ha(M,D){return Xo(M,12*D)}function Xo(M,D){return D=fa(M.getFullYear(),M.getMonth()+D,M.getDate()),qo(M)!==qo(D)&&D.setDate(0),D}function Ko(M,D){return fa(M.getFullYear(),M.getMonth(),M.getDate()+D)}function fa(M,D,L){return D=new Date(M,D,L),0<=M&&M<100&&D.setFullYear(D.getFullYear()-1900),D}function zh(M){return fa((M=M.split("-"))[0],M[1],M[2])}function Ru(M,D){return M.setHours(0,0,0,0),D.setHours(0,0,0,0),M.getTime()===D.getTime()}function rs(M,D){return((Ri(M)-(S=0,C&&(S=(C=Ri(C))-void 0+1),S))%D+D)%D;var C,S}function Lu(M,D,L,N,C){return"days"===L?Ri(M)===Ri(D)&&bo(M)===bo(D):"months"===L?Ri(M)===Ri(D):"years"===L&&Ri(D)>=C&&Ri(D)<=N}function cl(M,D,L){return M=function(N,C,S){for(var H=[],K=bo(N),Ee=bo(Xo(N,-1)),Te=bo(Xo(N,1)),He=Ri(N),Ot=(es=He,Bo=0<(Bo=(Bo=S).startDay)?7-Bo:0,7<=(es=new Date(es,K).getDay()+Bo)?es-7:es),Ft=Bh(N),In=Bh(Xo(N,-1)),dn=1,Gn=!1,en=1;en<7;en++){var xn=[];if(1===en){for(var yn=In-Ot+1;yn<=In;yn++){var Dn=fa(He,Ee,yn);xn.push({date:Dn,currentMonth:Gn,isSelected:C&&Ru(Dn,C),isToday:Ru(Dn,da()),dayNumber:qo(Dn)})}Gn=!0;for(var wi=7-xn.length,Kr=0;Kr<wi;Kr++){var Or=fa(He,K,dn);xn.push({date:Or,currentMonth:Gn,isSelected:C&&Ru(Or,C),isToday:Ru(Or,da()),dayNumber:qo(Or)}),dn++}}else for(var Yr=1;Yr<8;Yr++){Ft<dn&&(Gn=!(dn=1));var Bi=fa(He,Gn?K:Te,dn);xn.push({date:Bi,currentMonth:Gn,isSelected:C&&Ru(Bi,C),isToday:Ru(Bi,da()),dayNumber:qo(Bi)}),dn++}H.push(xn)}var es,Bo;return H}(M,D,L),D="\n      <tr>\n        ".concat((D=L.weekdaysNarrow).map(function(N,C){return'<th class="datepicker-day-heading" scope="col" aria-label="'.concat(L.weekdaysFull[C],'">').concat(N,"</th>")}).join(""),"\n      </tr>\n    "),M=M.map(function(N){return"\n        <tr>\n          ".concat(N.map(function(C){return'\n              <td\n              class="datepicker-cell datepicker-small-cell datepicker-day-cell\n              '.concat(C.currentMonth?"":"disabled"," ").concat(C.disabled?"disabled":"","\n              ").concat(C.isToday&&"current"," ").concat(C.isSelected&&"selected",'"\n              data-mdb-date="').concat(Ri(C.date),"-").concat(bo(C.date),"-").concat(qo(C.date),'"\n              aria-label="').concat(C.date,'"\n              aria-selected="').concat(C.isSelected,'">\n                <div\n                  class="datepicker-cell-content datepicker-small-cell-content"\n                  style="').concat(C.currentMonth?"display: block":"display: none",'">\n                  ').concat(C.dayNumber,"\n                  </div>\n              </td>\n            ")}).join(""),"\n        </tr>\n      ")}).join(""),'\n      <table class="datepicker-table">\n        <thead>\n          '.concat(D,'\n        </thead>\n        <tbody class="datepicker-table-body">\n         ').concat(M,"\n        </tbody>\n      </table>\n    ")}function oc(M,D,L,N,C){C=function(H,K){for(var Ee=[],Te=[],He=0;He<H.monthsShort.length;He++)Te.push(H.monthsShort[He]),Te.length===K&&(Ee.push(Te),Te=[]);return Ee}(N,C);var S=bo(da());return C="\n      ".concat(C.map(function(H){return"\n          <tr>\n            ".concat(H.map(function(K){var Ee=N.monthsShort.indexOf(K);return'\n                <td class="datepicker-cell datepicker-large-cell datepicker-month-cell '.concat(Ee===L&&M===D?"selected":""," ").concat(Ee===S?"current":"",'" data-mdb-month="').concat(Ee,'" data-mdb-year="').concat(M,'" aria-label="').concat(K,", ").concat(M,'">\n                  <div class="datepicker-cell-content datepicker-large-cell-content">').concat(K,"</div>\n                </td>\n              ")}).join(""),"\n          </tr>\n        ")}).join(""),"\n    "),'\n      <table class="datepicker-table">\n        <tbody class="datepicker-table-body">\n         '.concat(C,"\n        </tbody>\n      </table>\n    ")}function tu(M,D,L,N,C){M=function(H,K,Ee){for(var Te=[],Ot=Ri(H)-(H=rs(H,K)),Ft=[],In=0;In<K;In++)Ft.push(Ot+In),Ft.length===Ee&&(Te.push(Ft),Ft=[]);return Te}(M,N,C);var S=Ri(da());return N="\n    ".concat(M.map(function(H){return"\n        <tr>\n          ".concat(H.map(function(K){return'\n              <td class="datepicker-cell datepicker-large-cell datepicker-year-cell '.concat(K===D?"selected":""," ").concat(K===S?"current":"",'" aria-label="').concat(K,'" data-mdb-year="').concat(K,'">\n                <div class="datepicker-cell-content datepicker-large-cell-content">').concat(K,"</div>\n              </td>\n            ")}).join(""),"\n        </tr>\n      ")}).join(""),"\n  "),'\n      <table class="datepicker-table">\n        <tbody class="datepicker-table-body">\n        '.concat(N,"\n        </tbody>\n      </table>\n    ")}function jh(M){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Vh(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function wd(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?Vh(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):Vh(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function qd(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}v(188);var ih="datepicker",Ed="mdb.datepicker",nu=".".concat(Ed),bf="close".concat(nu),Uh="open".concat(nu),Fu="dateChange".concat(nu),Hh="click".concat(nu).concat(".data-api"),oh={title:"Select date",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysNarrow:["S","M","T","W","T","F","S"],okBtnText:"Ok",clearBtnText:"Clear",cancelBtnText:"Cancel",okBtnLabel:"Confirm selection",clearBtnLabel:"Clear selection",cancelBtnLabel:"Cancel selection",nextMonthLabel:"Next month",prevMonthLabel:"Previous month",nextYearLabel:"Next year",prevYearLabel:"Previous year",nextMultiYearLabel:"Next 24 years",prevMultiYearLabel:"Previous 24 years",switchToMultiYearViewLabel:"Choose year and month",switchToMonthViewLabel:"Choose date",switchToDayViewLabel:"Choose date",startDate:null,startDay:0,format:"dd/mm/yyyy",view:"days",toggleButton:!0,disableToggleButton:!1,disableInput:!1},Xd={title:"string",monthsFull:"array",monthsShort:"array",weekdaysFull:"array",weekdaysShort:"array",weekdaysNarrow:"array",okBtnText:"string",clearBtnText:"string",cancelBtnText:"string",okBtnLabel:"string",clearBtnLabel:"string",cancelBtnLabel:"string",nextMonthLabel:"string",prevMonthLabel:"string",nextYearLabel:"string",prevYearLabel:"string",nextMultiYearLabel:"string",prevMultiYearLabel:"string",switchToMultiYearViewLabel:"string",switchToMonthViewLabel:"string",switchToDayViewLabel:"string",startDate:"(null|string|date)",startDay:"number",format:"string",view:"string",toggleButton:"boolean",disableToggleButton:"boolean",disableInput:"boolean"},sh=function(){function M(C,S){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._element=C,this._input=Tn.findOne("input",this._element),this._options=this._getConfig(S),this._activeDate=new Date,this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this._view=this._options.view,this._popper=null,this._focusTrap=null,this._isOpen=!1,this._toggleButtonId=Ji("datepicker-toggle-"),this._element&&Ys_setData(C,Ed,this),this._init(),this.toggleButton&&this._options.disableToggle&&(this.toggleButton.disabled="true"),this._options.disableInput&&(this._input.disabled="true")}var D,L,N;return D=M,N=[{key:"NAME",get:function(){return ih}},{key:"getInstance",value:function(C){return Ys_getData(C,Ed)}},{key:"getOrCreateInstance",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(C)||new this(C,"object"===jh(S)?S:null)}}],(L=[{key:"container",get:function(){return Tn.findOne(".datepicker-modal-container".concat("-",this._toggleButtonId))||Tn.findOne(".datepicker-dropdown-container".concat("-",this._toggleButtonId))}},{key:"options",get:function(){return this._options}},{key:"activeCell",get:function(){var C;return"days"===this._view&&(C=this._getActiveDayCell()),"months"===this._view&&(C=this._getActiveMonthCell()),"years"===this._view?this._getActiveYearCell():C}},{key:"activeDay",get:function(){return qo(this._activeDate)}},{key:"activeMonth",get:function(){return bo(this._activeDate)}},{key:"activeYear",get:function(){return Ri(this._activeDate)}},{key:"firstYearInView",get:function(){return this.activeYear-rs(this._activeDate,24)}},{key:"lastYearInView",get:function(){return this.firstYearInView+24-1}},{key:"viewChangeButton",get:function(){return Tn.findOne(".datepicker-view-change-button",this.container)}},{key:"previousButton",get:function(){return Tn.findOne(".datepicker-previous-button",this.container)}},{key:"nextButton",get:function(){return Tn.findOne(".datepicker-next-button",this.container)}},{key:"okButton",get:function(){return Tn.findOne(".datepicker-ok-btn",this.container)}},{key:"cancelButton",get:function(){return Tn.findOne(".datepicker-cancel-btn",this.container)}},{key:"clearButton",get:function(){return Tn.findOne(".datepicker-clear-btn",this.container)}},{key:"datesContainer",get:function(){return Tn.findOne(".datepicker-view",this.container)}},{key:"toggleButton",get:function(){return Tn.findOne(".datepicker-toggle-button",this._element)}},{key:"_getConfig",value:function(C){var S=Rt_getDataAttributes(this._element);return C=wd(wd(wd({},oh),S),C),Gi(ih,C,Xd),C.startDay&&0!==C.startDay&&(S=this._getNewDaysOrderArray(C),C.weekdaysNarrow=S),C}},{key:"_getNewDaysOrderArray",value:function(C){var S=C.startDay;return(C=C.weekdaysNarrow).slice(S).concat(C.slice(0,S))}},{key:"_init",value:function(){!this.toggleButton&&this._options.toggleButton&&(this._appendToggleButton(),(this._input.readOnly||this._input.disabled)&&(this.toggleButton.style.pointerEvents="none")),this._listenToUserInput(),this._listenToToggleClick(),this._listenToToggleKeydown()}},{key:"_appendToggleButton",value:function(){var C='\n    <button id="'.concat(this._toggleButtonId,'" type="button" class="datepicker-toggle-button" data-mdb-toggle="datepicker">\n      <i class="far fa-calendar datepicker-toggle-icon"></i>\n    </button>\n  ');this._element.insertAdjacentHTML("beforeend",C),Rt_addClass(this._input,"form-icon-trailing")}},{key:"open",value:function(){var C,S,H=this;this._input.readOnly||this._input.disabled||(C=_r.trigger(this._element,Uh),this._isOpen||C.defaultPrevented||(this._setInitialDate(),C=So("div"),Rt_addClass(C,"datepicker-backdrop"),S=function(M,D,L,N,C,S,H,K,Ee){var Te,He,en,xn,yn,Ot=bo(M),Ft=Ri(M),In=qo(M),dn=Cs(M),Gn=So("div");return H="\n      ".concat((Te=Ot,'\n      <div class="datepicker-header">\n        <div class="datepicker-title">\n          <span class="datepicker-title-text">'.concat((He=C).title,'</span>\n        </div>\n        <div class="datepicker-date">\n          <span class="datepicker-date-text">').concat(He.weekdaysShort[dn],", ").concat(He.monthsShort[Te]," ").concat(In,"</span>\n        </div>\n      </div>\n    ")),"\n      ").concat((dn=M,He=D,Te=L,In=N,M=S,D=H,L=24,'\n    <div class="datepicker-main">\n      '.concat((en=Ot,xn=N=Ft,yn=S=C,'\n    <div class="datepicker-date-controls">\n      <button class="datepicker-view-change-button" aria-label="'.concat(yn.switchToMultiYearViewLabel,'">\n        ').concat(yn.monthsFull[en]," ").concat(xn,'\n      </button>\n      <div class="datepicker-arrow-controls">\n        <button class="datepicker-previous-button" aria-label="').concat(yn.prevMonthLabel,'"></button>\n        <button class="datepicker-next-button" aria-label="').concat(yn.nextMonthLabel,'"></button>\n      </div>\n    </div>\n    ')),'\n      <div class="datepicker-view" tabindex="0">\n        ').concat(function(en,xn,yn,Dn,wi,Kr,Or,Yr,Bi){return"days"===Kr.view?cl(en,yn,Kr):"months"===Kr.view?oc(xn,Dn,wi,Kr,Or):tu(en,Dn,0,Yr,Bi)}(dn,N,He,Te,In,S,M,D,L),"\n      </div>\n      ").concat(function(en){return'\n        <div class="datepicker-footer">\n          <button class="datepicker-footer-btn datepicker-clear-btn" aria-label="'.concat(en.clearBtnLabel,'">').concat(en.clearBtnText,'</button>\n          <button class="datepicker-footer-btn datepicker-cancel-btn" aria-label="').concat(en.cancelBtnLabel,'">').concat(en.cancelBtnText,'</button>\n          <button class="datepicker-footer-btn datepicker-ok-btn" aria-label="').concat(en.okBtnLabel,'">').concat(en.okBtnText,"</button>\n        </div>\n      ")}(S),"\n    </div>\n  ")),"\n    "),Rt_addClass(Gn,"datepicker-modal-container"),Rt_addClass(Gn,"datepicker-modal-container-".concat(Ee)),Gn.innerHTML=H,Gn}(this._activeDate,this._selectedDate,this._selectedYear,this._selectedMonth,this._options,4,24,0,this._toggleButtonId),this._openModal(C,S),Rt_addClass(this.container,"animation"),Rt_addClass(this.container,"fade-in"),this.container.style.animationDuration="300ms",Rt_addClass(C,"animation"),Rt_addClass(C,"fade-in"),C.style.animationDuration="150ms",this._setFocusTrap(this.container),this._listenToDateSelection(),this._addControlsListeners(),this._listenToEscapeClick(),this._listenToKeyboardNavigation(),this._listenToDatesContainerFocus(),this._listenToDatesContainerBlur(),this._asyncFocusDatesContainer(),this._updateViewControlsAndAttributes(this._view),this._isOpen=!0,setTimeout(function(){H._listenToOutsideClick()},0)))}},{key:"_openDropdown",value:function(C){this._popper=Wr(this._input,C,{placement:"bottom-start"}),document.body.appendChild(C)}},{key:"_openModal",value:function(C,S){document.body.appendChild(C),document.body.appendChild(S),window.innerWidth>document.documentElement.clientWidth&&(document.body.style.overflow="hidden",document.body.style.paddingRight="15px")}},{key:"_setFocusTrap",value:function(C){this._focusTrap=new ha(C,{event:"keydown",condition:function(S){return"Tab"===S.key}}),this._focusTrap.trap()}},{key:"_listenToUserInput",value:function(){var C=this;_r.on(this._input,"input",function(S){C._handleUserInput(S.target.value)})}},{key:"_listenToToggleClick",value:function(){var C=this;_r.on(this._element,Hh,'[data-mdb-toggle="datepicker"]',function(S){S.preventDefault(),C.open()})}},{key:"_listenToToggleKeydown",value:function(){var C=this;_r.on(this._element,"keydown",'[data-mdb-toggle="datepicker"]',function(S){13!==S.keyCode||C._isOpen||C.open()})}},{key:"_listenToDateSelection",value:function(){var C=this;_r.on(this.datesContainer,"click",function(S){var H,K=("DIV"===S.target.nodeName?S.target.parentNode:S.target).dataset;S="DIV"===S.target.nodeName?S.target.parentNode:S.target,K.mdbDate&&C._pickDay(K.mdbDate,S),K.mdbMonth&&K.mdbYear&&(S=parseInt(K.mdbMonth,10),H=parseInt(K.mdbYear,10),C._pickMonth(S,H)),K.mdbYear&&!K.mdbMonth&&(S=parseInt(K.mdbYear,10),C._pickYear(S)),C._updateHeaderDate(C._activeDate,C._options.monthsShort,C._options.weekdaysShort)})}},{key:"_updateHeaderDate",value:function(C,S,H){var K=Tn.findOne(".datepicker-date-text",this.container),Ee=bo(C),Te=qo(C);C=Cs(C),K.innerHTML="".concat(H[C],", ").concat(S[Ee]," ").concat(Te)}},{key:"_addControlsListeners",value:function(){var C=this;_r.on(this.nextButton,"click",function(){"days"===C._view?C.nextMonth():"years"===C._view?C.nextYears():C.nextYear()}),_r.on(this.previousButton,"click",function(){"days"===C._view?C.previousMonth():"years"===C._view?C.previousYears():C.previousYear()}),_r.on(this.viewChangeButton,"click",function(){"days"===C._view?C._changeView("years"):"years"!==C._view&&"months"!==C._view||C._changeView("days")}),this._listenToFooterButtonsClick()}},{key:"_listenToFooterButtonsClick",value:function(){var C=this;_r.on(this.okButton,"click",function(){return C.handleOk()}),_r.on(this.cancelButton,"click",function(){return C.handleCancel()}),_r.on(this.clearButton,"click",function(){return C.handleClear()})}},{key:"_listenToOutsideClick",value:function(){var C=this;_r.on(document,Hh,function(S){var H=S.target===C.container;S=C.container&&C.container.contains(S.target),H||S||C.close()})}},{key:"_listenToEscapeClick",value:function(){var C=this;_r.on(document,"keydown",function(S){27===S.keyCode&&C._isOpen&&C.close()})}},{key:"_listenToKeyboardNavigation",value:function(){var C=this;_r.on(this.datesContainer,"keydown",function(S){C._handleKeydown(S)})}},{key:"_listenToDatesContainerFocus",value:function(){var C=this;_r.on(this.datesContainer,"focus",function(){C._focusActiveCell(C.activeCell)})}},{key:"_listenToDatesContainerBlur",value:function(){var C=this;_r.on(this.datesContainer,"blur",function(){C._removeCurrentFocusStyles()})}},{key:"_handleKeydown",value:function(C){"days"===this._view&&this._handleDaysViewKeydown(C),"months"===this._view&&this._handleMonthsViewKeydown(C),"years"===this._view&&this._handleYearsViewKeydown(C)}},{key:"_handleDaysViewKeydown",value:function(C){var S=this._activeDate,H=this.activeCell;switch(C.keyCode){case 37:this._activeDate=Ko(this._activeDate,-1);break;case 39:this._activeDate=Ko(this._activeDate,1);break;case 38:this._activeDate=Ko(this._activeDate,-7);break;case 40:this._activeDate=Ko(this._activeDate,7);break;case 36:this._activeDate=Ko(this._activeDate,1-qo(this._activeDate));break;case 35:this._activeDate=Ko(this._activeDate,Bh(this._activeDate)-qo(this._activeDate));break;case 33:this._activeDate=Xo(this._activeDate,-1);break;case 34:this._activeDate=Xo(this._activeDate,1);break;case 13:case 32:return this._selectDate(this._activeDate),void C.preventDefault();default:return}Lu(S,this._activeDate,this._view,24,0)||this._changeView("days"),this._removeHighlightFromCell(H),this._focusActiveCell(this.activeCell),C.preventDefault()}},{key:"_asyncFocusDatesContainer",value:function(){var C=this;setTimeout(function(){C.datesContainer.focus()},0)}},{key:"_focusActiveCell",value:function(C){C&&Rt_addClass(C,"focused")}},{key:"_removeHighlightFromCell",value:function(C){C&&C.classList.remove("focused")}},{key:"_getActiveDayCell",value:function(){var C=this,S=Tn.find("td",this.datesContainer);return Array.from(S).find(function(H){return Ru(zh(H.dataset.mdbDate),C._activeDate)})}},{key:"_handleMonthsViewKeydown",value:function(C){var S=this._activeDate,H=this.activeCell;switch(C.keyCode){case 37:this._activeDate=Xo(this._activeDate,-1);break;case 39:this._activeDate=Xo(this._activeDate,1);break;case 38:this._activeDate=Xo(this._activeDate,-4);break;case 40:this._activeDate=Xo(this._activeDate,4);break;case 36:this._activeDate=Xo(this._activeDate,-this.activeMonth);break;case 35:this._activeDate=Xo(this._activeDate,11-this.activeMonth);break;case 33:this._activeDate=Ha(this._activeDate,-1);break;case 34:this._activeDate=Ha(this._activeDate,1);break;case 13:case 32:return void this._selectMonth(this.activeMonth);default:return}Lu(S,this._activeDate,this._view,24,0)||this._changeView("months"),this._removeHighlightFromCell(H),this._focusActiveCell(this.activeCell),C.preventDefault()}},{key:"_getActiveMonthCell",value:function(){var C=this,S=Tn.find("td",this.datesContainer);return Array.from(S).find(function(H){var K=parseInt(H.dataset.mdbYear,10);return H=parseInt(H.dataset.mdbMonth,10),K===C.activeYear&&H===C.activeMonth})}},{key:"_handleYearsViewKeydown",value:function(C){var S=this._activeDate,H=this.activeCell;switch(C.keyCode){case 37:this._activeDate=Ha(this._activeDate,-1);break;case 39:this._activeDate=Ha(this._activeDate,1);break;case 38:this._activeDate=Ha(this._activeDate,-4);break;case 40:this._activeDate=Ha(this._activeDate,4);break;case 36:this._activeDate=Ha(this._activeDate,-rs(this._activeDate,24));break;case 35:this._activeDate=Ha(this._activeDate,24-rs(this._activeDate,24)-1);break;case 33:this._activeDate=Ha(this._activeDate,-24);break;case 34:this._activeDate=Ha(this._activeDate,24);break;case 13:case 32:return void this._selectYear(this.activeYear);default:return}Lu(S,this._activeDate,this._view,24,0)||this._changeView("years"),this._removeHighlightFromCell(H),this._focusActiveCell(this.activeCell),C.preventDefault()}},{key:"_getActiveYearCell",value:function(){var C=this,S=Tn.find("td",this.datesContainer);return Array.from(S).find(function(H){return parseInt(H.dataset.mdbYear,10)===C.activeYear})}},{key:"_setInitialDate",value:function(){this._input.value?this._handleUserInput(this._input.value):this._activeDate=this._options.startDate?new Date(this._options.startDate):new Date}},{key:"close",value:function(){var C=_r.trigger(this._element,bf);this._isOpen&&!C.defaultPrevented&&(this._removeDatepickerListeners(),Rt_addClass(this.container,"animation"),Rt_addClass(this.container,"fade-out"),this._closeModal(),this._isOpen=!1,this._view=this._options.view,(this.toggleButton||this._input).focus())}},{key:"_closeDropdown",value:function(){var C=this,S=Tn.findOne(".datepicker-dropdown-container");S.addEventListener("animationend",function(){S&&document.body.removeChild(S),C._popper&&C._popper.destroy()}),this._removeFocusTrap()}},{key:"_closeModal",value:function(){var C=Tn.findOne(".datepicker-backdrop"),S=Tn.findOne(".datepicker-modal-container");Rt_addClass(C,"animation"),Rt_addClass(C,"fade-out"),S&&C&&C.addEventListener("animationend",function(){document.body.removeChild(C),document.body.removeChild(S),document.body.style.overflow="",document.body.style.paddingRight=""})}},{key:"_removeFocusTrap",value:function(){this._focusTrap&&(this._focusTrap.disable(),this._focusTrap=null)}},{key:"_removeDatepickerListeners",value:function(){_r.off(this.nextButton,"click"),_r.off(this.previousButton,"click"),_r.off(this.viewChangeButton,"click"),_r.off(this.okButton,"click"),_r.off(this.cancelButton,"click"),_r.off(this.clearButton,"click"),_r.off(this.datesContainer,"click"),_r.off(this.datesContainer,"keydown"),_r.off(this.datesContainer,"focus"),_r.off(this.datesContainer,"blur"),_r.off(document,Hh)}},{key:"dispose",value:function(){this._isOpen&&this.close(),this._removeInputAndToggleListeners();var C=Tn.findOne("#".concat(this._toggleButtonId));C&&this._element.removeChild(C),Ys_removeData(this._element,Ed),this._element=null,this._input=null,this._options=null,this._activeDate=null,this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this._view=null,this._popper=null,this._focusTrap=null}},{key:"_removeInputAndToggleListeners",value:function(){_r.off(this._input,"input"),_r.off(this._element,Hh,'[data-mdb-toggle="datepicker"]'),_r.off(this._element,"keydown",'[data-mdb-toggle="datepicker"]')}},{key:"handleOk",value:function(){this._confirmSelection(this._selectedDate),this.close()}},{key:"_selectDate",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(S),this._selectedDate=C}},{key:"_selectYear",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(S),this._selectedYear=C,this._asyncChangeView("months")}},{key:"_selectMonth",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(S),this._selectedMonth=C,this._asyncChangeView("days")}},{key:"_removeSelectedStyles",value:function(C){C&&C.classList.remove("selected")}},{key:"_addSelectedStyles",value:function(C){C&&Rt_addClass(C,"selected")}},{key:"_confirmSelection",value:function(C){var S;C&&(S=this.formatDate(C),this._input.value=S,Rt_addClass(this._input,"active"),_r.trigger(this._element,Fu,{date:C}))}},{key:"handleCancel",value:function(){this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this.close()}},{key:"handleClear",value:function(){this._selectedDate=null,this._selectedMonth=null,this._selectedYear=null,this._removeCurrentSelectionStyles(),this._input.value="",this._input.classList.remove("active"),this._setInitialDate(),this._changeView("days")}},{key:"_removeCurrentSelectionStyles",value:function(){var C=Tn.findOne(".selected",this.container);C&&C.classList.remove("selected")}},{key:"_removeCurrentFocusStyles",value:function(){var C=Tn.findOne(".focused",this.container);C&&C.classList.remove("focused")}},{key:"formatDate",value:function(C){var S=qo(C),H=this._addLeadingZero(qo(C)),K=this._options.weekdaysShort[Cs(C)],Ee=this._options.weekdaysFull[Cs(C)],Te=bo(C)+1,He=this._addLeadingZero(bo(C)+1),Ot=this._options.monthsShort[bo(C)],Ft=this._options.monthsFull[bo(C)],In=2===Ri(C).toString().length?Ri(C):Ri(C).toString().slice(2,4),dn=Ri(C),Gn=(C=this._options.format.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),"");return C.forEach(function(en){switch(en){case"dddd":en=en.replace(en,Ee);break;case"ddd":en=en.replace(en,K);break;case"dd":en=en.replace(en,H);break;case"d":en=en.replace(en,S);break;case"mmmm":en=en.replace(en,Ft);break;case"mmm":en=en.replace(en,Ot);break;case"mm":en=en.replace(en,He);break;case"m":en=en.replace(en,Te);break;case"yyyy":en=en.replace(en,dn);break;case"yy":en=en.replace(en,In)}Gn+=en}),Gn}},{key:"_addLeadingZero",value:function(C){return parseInt(C,10)<10?"0".concat(C):C}},{key:"_pickDay",value:function(C,S){C=zh(C),this._activeDate=C,this._selectDate(C,S)}},{key:"_pickYear",value:function(C){var S=fa(C,this.activeMonth,this.activeDay);this._activeDate=S,this._selectedDate=S,this._selectYear(C)}},{key:"_pickMonth",value:function(C,S){S=fa(S,C,this.activeDay),this._activeDate=S,this._selectMonth(C)}},{key:"nextMonth",value:function(){var C,S=cl(C=Xo(this._activeDate,1),this._selectedDate,this._options);this._activeDate=C,this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.datesContainer.innerHTML=S}},{key:"previousMonth",value:function(){var C=Xo(this._activeDate,-1);C=cl(this._activeDate=C,this._selectedDate,this._options),this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.datesContainer.innerHTML=C}},{key:"nextYear",value:function(){var C=Ha(this._activeDate,1);this._activeDate=C,this.viewChangeButton.textContent="".concat(this.activeYear),C=oc(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4),this.datesContainer.innerHTML=C}},{key:"previousYear",value:function(){var C=Ha(this._activeDate,-1);this._activeDate=C,this.viewChangeButton.textContent="".concat(this.activeYear),C=oc(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4),this.datesContainer.innerHTML=C}},{key:"nextYears",value:function(){var C=Ha(this._activeDate,24);C=tu(this._activeDate=C,this._selectedYear,0,24,4),this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.datesContainer.innerHTML=C}},{key:"previousYears",value:function(){var C=Ha(this._activeDate,-24);C=tu(this._activeDate=C,this._selectedYear,0,24,4),this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.datesContainer.innerHTML=C}},{key:"_asyncChangeView",value:function(C){var S=this;setTimeout(function(){S._changeView(C)},0)}},{key:"_changeView",value:function(C){this._view=C,this.datesContainer.blur(),"days"===C&&(this.datesContainer.innerHTML=cl(this._activeDate,this._selectedDate,this._options)),"months"===C&&(this.datesContainer.innerHTML=oc(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4)),"years"===C&&(this.datesContainer.innerHTML=tu(this._activeDate,this._selectedYear,0,24,4)),this.datesContainer.focus(),this._updateViewControlsAndAttributes(C)}},{key:"_updateViewControlsAndAttributes",value:function(C){"days"===C&&(this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.viewChangeButton.setAttribute("aria-label",this._options.switchToMultiYearViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevMonthLabel),this.nextButton.setAttribute("aria-label",this._options.nextMonthLabel)),"months"===C&&(this.viewChangeButton.textContent="".concat(this.activeYear),this.viewChangeButton.setAttribute("aria-label",this._options.switchToDayViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevYearLabel),this.nextButton.setAttribute("aria-label",this._options.nextYearLabel)),"years"===C&&(this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.viewChangeButton.setAttribute("aria-label",this._options.switchToMonthViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevMultiYearLabel),this.nextButton.setAttribute("aria-label",this._options.nextMultiYearLabel))}},{key:"_handleUserInput",value:function(C){var S=this._getDelimeters(this._options.format);C=this._parseDate(C,this._options.format,S),Number.isNaN(C.getTime())?(this._activeDate=new Date,this._selectedDate=null,this._selectedMonth=null,this._selectedYear=null):(this._activeDate=C,this._selectedDate=C)}},{key:"_getDelimeters",value:function(C){return C.match(/[^(dmy)]{1,}/g)}},{key:"_parseDate",value:function(C,S,H){H=H[0]!==H[1]?H[0]+H[1]:H[0],H=new RegExp("[".concat(H,"]"));for(var K=C.split(H),Ee=S.split(H),Te=(C=-1!==S.indexOf("mmm"),[]),He=0;He<Ee.length;He++)-1!==Ee[He].indexOf("yy")&&(Te[0]={value:K[He],format:Ee[He]}),-1!==Ee[He].indexOf("m")&&(Te[1]={value:K[He],format:Ee[He]}),-1!==Ee[He].indexOf("d")&&Ee[He].length<=2&&(Te[2]={value:K[He],format:Ee[He]});return H=-1!==S.indexOf("mmmm")?this._options.monthsFull:this._options.monthsShort,fa(Number(Te[0].value),C?this.getMonthNumberByMonthName(Te[1].value,H):Number(Te[1].value)-1,Number(Te[2].value))}},{key:"getMonthNumberByMonthName",value:function(C,S){return S.findIndex(function(H){return H===C})}}])&&qd(D.prototype,L),N&&qd(D,N),Object.defineProperty(D,"prototype",{writable:!1}),M}();function ah(M,D){return function(L){if(Array.isArray(L))return L}(M)||function(L,N){var C=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=C){var S,H,K=[],Ee=!0,Te=!1;try{for(C=C.call(L);!(Ee=(S=C.next()).done)&&(K.push(S.value),!N||K.length!==N);Ee=!0);}catch(He){Te=!0,H=He}finally{try{Ee||null==C.return||C.return()}finally{if(Te)throw H}}return K}}(M,D)||function(L,N){if(L){if("string"==typeof L)return $h(L,N);var C=Object.prototype.toString.call(L).slice(8,-1);return"Map"===(C="Object"===C&&L.constructor?L.constructor.name:C)||"Set"===C?Array.from(L):"Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?$h(L,N):void 0}}(M,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $h(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}function ru(M,D){var L=M.clientX,N=M.clientY,C=(M=M.touches,2<arguments.length&&void 0!==arguments[2]&&arguments[2]),S=(D=D.getBoundingClientRect()).left,H=(D=D.top,{});return C&&M?C&&0<Object.keys(M).length&&(H={x:M[0].clientX-S,y:M[0].clientY-D}):H={x:L-S,y:N-D},H}function iu(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}nu=sh,Tn.find(".datepicker").forEach(function(M){sh.getInstance(M)||new sh(M)}),v(189),v(191);var xf=function(M){return M&&"[object Date]"===Object.prototype.toString.call(M)&&!isNaN(M)},$a=function(M){return(M=(1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?M:M.value).replace(/:/gi," ")).split(" ")};function Cd(M){return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function Qs(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Nu(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?Qs(Object(L),!0).forEach(function(N){y(M,N,L[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):Qs(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function No(M,D){return function(L){if(Array.isArray(L))return L}(M)||function(L,N){var C=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=C){var S,H,K=[],Ee=!0,Te=!1;try{for(C=C.call(L);!(Ee=(S=C.next()).done)&&(K.push(S.value),!N||K.length!==N);Ee=!0);}catch(He){Te=!0,H=He}finally{try{Ee||null==C.return||C.return()}finally{if(Te)throw H}}return K}}(M,D)||ou(M,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(M){return function(D){if(Array.isArray(D))return T(D)}(M)||function(D){if("undefined"!=typeof Symbol&&null!=D[Symbol.iterator]||null!=D["@@iterator"])return Array.from(D)}(M)||ou(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(M,D){if(M){if("string"==typeof M)return T(M,D);var L=Object.prototype.toString.call(M).slice(8,-1);return"Map"===(L="Object"===L&&M.constructor?M.constructor.name:L)||"Set"===L?Array.from(M):"Arguments"===L||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?T(M,D):void 0}}function T(M,D){(null==D||D>M.length)&&(D=M.length);for(var L=0,N=new Array(D);L<D;L++)N[L]=M[L];return N}function x(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}function y(M,D,L){D in M?Object.defineProperty(M,D,{value:L,enumerable:!0,configurable:!0,writable:!0}):M[D]=L}var R="timepicker",W="mdb.".concat(R),le="active",Ze="".concat(R,"-am"),lt="".concat(R,"-cancel"),nn="".concat(R,"-clear"),cr="".concat(R,"-submit"),Ii="".concat(R,"-circle"),Dr="".concat(R,"-clock-animation"),Zi="".concat(R,"-clock"),$r="".concat(R,"-clock-inner"),Ga="".concat(R,"-clock-wrapper"),Js=".".concat(R,"-current"),is="".concat(R,"-current-inline"),kl="".concat(R,"-hand-pointer"),io="".concat(R,"-hour"),Go="".concat(R,"-hour-mode"),su="".concat(R,"-icon-down"),Jo="".concat(R,"-icon-inline-hour"),wf="".concat(R,"-icon-inline-minute"),Wh="".concat(R,"-icon-up"),Ic="".concat(R,"-inline-hour-icons"),Zh="".concat(R,"-middle-dot"),Ef="".concat(R,"-minute"),Cf="".concat(R,"-modal"),qh="".concat(R,"-pm"),Td="".concat(R,"-tips-element"),sc="".concat(R,"-time-tips-hours"),Dd="".concat(R,"-tips-inner-element"),au="".concat(R,"-time-tips-inner"),pa="".concat(R,"-time-tips-minutes"),Kd="".concat(R,"-transform"),Yd="".concat(R,"-wrapper"),ma="".concat(R,"-input"),Tf={appendValidationInfo:!0,bodyID:"",cancelLabel:"Cancel",clearLabel:"Clear",closeModalOnBackdropClick:!0,closeModalOnMinutesClick:!1,defaultTime:"",disabled:!1,focusInputAfterApprove:!1,footerID:"",format12:!0,headID:"",increment:!1,invalidLabel:"Invalid Time Format",maxHour:"",minHour:"",maxTime:"",minTime:"",modalID:"",okLabel:"Ok",overflowHidden:!0,pickerID:"",readOnly:!1,showClearBtn:!0,switchHoursToMinutesOnClick:!0,iconClass:"far fa-clock fa-sm timepicker-icon",withIcon:!0,pmLabel:"PM",amLabel:"AM"},Bp={appendValidationInfo:"boolean",bodyID:"string",cancelLabel:"string",clearLabel:"string",closeModalOnBackdropClick:"boolean",closeModalOnMinutesClick:"boolean",disabled:"boolean",footerID:"string",format12:"boolean",headID:"string",increment:"boolean",invalidLabel:"string",maxHour:"(string|number)",minHour:"(string|number)",modalID:"string",okLabel:"string",overflowHidden:"boolean",pickerID:"string",readOnly:"boolean",showClearBtn:"boolean",switchHoursToMinutesOnClick:"boolean",defaultTime:"(string|date|number)",iconClass:"string",withIcon:"boolean",pmLabel:"string",amLabel:"string"},Sd=function(){function M(C){var S=this,H=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},K=this,Ee=M;if(!(K instanceof Ee))throw new TypeError("Cannot call a class as a function");y(this,"_toggleBackgroundColorCircle",function(Te){null!==S._modal.querySelector(".".concat(Te,".").concat(le))?Rt_addStyle(S._circle,{backgroundColor:"#1976d2"}):Rt_addStyle(S._circle,{backgroundColor:"transparent"})}),y(this,"_toggleClassActive",function(Te,He,Ot){var Ft=He.textContent,In=Gh(Te).find(function(dn){return Number(dn)===Number(Ft)});return Ot.forEach(function(dn){Rt_hasClass(dn,"disabled")||(dn.textContent===In?Rt_addClass(dn,le):Rt_removeClass(dn,le))})}),y(this,"_makeMinutesDegrees",function(Te,He){var Ot=S._options.increment;return Te=Te<0?(He=Math.round(360+Te/6)%60,360+6*Math.round(Te/6)):(He=Math.round(Te/6)%60,6*Math.round(Te/6)),Ot&&(Te=30*Math.round(Te/30),60==(He=6*Math.round(Te/6)/6)&&(He="00")),{degrees:Te=360<=Te?0:Te,minute:He,addDegrees:Ot?30:6}}),y(this,"_makeHourDegrees",function(Te,He,Ot){var In=(Ft=S._options).maxHour,Ft=Ft.minHour;if(Te&&(Rt_hasClass(Te,$r)||Rt_hasClass(Te,au)||Rt_hasClass(Te,Dd)?He<0?(Ot=Math.round(360+He/30)%24,He=360+He):12===(Ot=Math.round(He/30)+12)&&(Ot="00"):He<0?(Ot=Math.round(360+He/30)%12,He=360+He):(0==(Ot=Math.round(He/30)%12)||12<Ot)&&(Ot=12),360<=He&&(He=0),!(""!==In&&Ot>Number(In)||""!==Ft&&Ot<Number(Ft))))return{degrees:He,hour:Ot,addDegrees:30}}),y(this,"_makeInnerHoursDegrees",function(Te,He){return Te<0?(He=Math.round(360+Te/30)%24,Te=360+Te):12===(He=Math.round(Te/30)+12)&&(He="00"),{degrees:Te,hour:He,addDegrees:30}}),y(this,"_getAppendClock",function(){var Te,He,Ot,Kr,Ft=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],In=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".".concat(Zi),dn=2<arguments.length?arguments[2]:void 0,en=(Gn=S._options).maxHour,xn=Gn.minHour,yn=Gn.minTime,Dn=Gn.maxTime,wi=Gn.inline,Gn=Gn.format12,Or=(Kr=No($a(Dn,!1),3))[0],Yr=Kr[1],Bi=Kr[2],es=(Kr=No($a(yn,!1),3))[0],Ac=Kr[1],Bo=Kr[2],Ei=(wi||Gn&&S._isInvalidTimeFormat&&!Rt_hasClass(S._AM,"active")&&Rt_addClass(S._PM,"active"),Tn.findOne(".".concat(Go,".").concat(le))),Ns=Tn.findOne(In),Rl=360/Ft.length;null!==Ns&&(He=(Ns.offsetHeight-32)/2,Ot=(Te=(Ns.offsetWidth-32)/2)-4,Gh(Ft).forEach(function(bs,ch){ch=ch*Rl*(Math.PI/180);var oo=So("span"),ga=So("span"),Yh=(ga.innerHTML=bs,Rt_addClass(oo,dn),oo.offsetWidth),Qh=oo.offsetHeight;return Rt_addStyle(oo,{left:"".concat(Te+Math.sin(ch)*Ot-Yh,"px"),bottom:"".concat(He+Math.cos(ch)*Ot-Qh,"px")}),Ft.includes("05")&&Rt_addClass(oo,"".concat(pa)),Ft.includes("13")?ga.classList.add(Dd):ga.classList.add(Td),Rt_hasClass(oo,"".concat(pa))?Rt_hasClass(oo,"".concat(pa))&&(""!==Dn&&Number(bs)>Number(Yr)&&Number(S._hour.textContent)>=Number(Or)&&Rt_addClass(oo,"disabled"),""!==yn&&Number(bs)<Number(Ac)&&Number(S._hour.textContent)<=Number(es)&&Rt_addClass(oo,"disabled"),""!==Dn&&void 0!==Bi&&("PM"===Bi&&"PM"===Ei.textContent?Number(bs)>Number(Yr)&&Number(S._hour.textContent)>=Number(Or)&&Rt_addClass(oo,"disabled"):"PM"===Bi&&"AM"===Ei.textContent&&Rt_removeClass(oo,"disabled"),("AM"===Bi&&"PM"===Ei.textContent||"AM"===Bi&&"AM"===Ei.textContent&&Number(S._hour.textContent)>=Number(Or)&&Number(bs)>Number(Yr))&&Rt_addClass(oo,"disabled")),""!==yn&&void 0!==Bo&&("PM"===Bo&&"PM"===Ei.textContent?(Number(bs)<Number(Ac)&&Number(S._hour.textContent)===Number(es)||Number(S._hour.textContent)<Number(es))&&Rt_addClass(oo,"disabled"):"PM"===Bo&&"AM"===Ei.textContent&&Rt_addClass(oo,"disabled"),"AM"===Bo&&"PM"===Ei.textContent?Rt_removeClass(oo,"disabled"):"AM"===Bo&&"AM"===Ei.textContent&&(Number(S._hour.textContent)===Number(es)&&Number(bs)<Number(Ac)||Number(S._hour.textContent)<Number(es))&&Rt_addClass(oo,"disabled"))):(""!==en&&Number(bs)>Number(en)&&Rt_addClass(oo,"disabled"),""!==xn&&Number(bs)<Number(xn)&&Rt_addClass(oo,"disabled"),""!==Dn&&(void 0!==Bi?("PM"===Bi&&"PM"===Ei.textContent&&(S._isAmEnabled=!1,S._isPmEnabled=!0,Number(bs)>Number(Or)&&Rt_addClass(oo,"disabled")),"AM"===Bi&&"PM"===Ei.textContent?(S._isAmEnabled=!1,S._isPmEnabled=!0,Rt_addClass(oo,"disabled")):"AM"===Bi&&"AM"===Ei.textContent&&(S._isAmEnabled=!0,S._isPmEnabled=!1,Number(bs)>Number(Or)&&Rt_addClass(oo,"disabled"))):Number(bs)>Number(Or)&&Rt_addClass(oo,"disabled")),""!==yn&&Number(bs)<Number(es)&&Rt_addClass(oo,"disabled"),""!==yn&&void 0!==Bo&&("PM"===Bo&&"PM"===Ei.textContent?(S._isAmEnabled=!1,S._isPmEnabled=!0,Number(bs)<Number(es)&&Rt_addClass(oo,"disabled")):"PM"===Bo&&"AM"===Ei.textContent&&(S._isAmEnabled=!0,S._isPmEnabled=!1,Rt_addClass(oo,"disabled")),"AM"===Bo&&"PM"===Ei.textContent?(S._isAmEnabled=!1,S._isPmEnabled=!0,Rt_removeClass(oo,"disabled")):"AM"===Bo&&"AM"===Ei.textContent&&(S._isAmEnabled=!0,S._isPmEnabled=!1,Number(bs)<Number(es)&&Rt_addClass(oo,"disabled")))),oo.appendChild(ga),Ns.appendChild(oo)}))}),this._element=C,this._element&&Ys_setData(C,W,this),this._document=document,this._options=this._getConfig(H),this._currentTime=null,this._toggleButtonId=Ji("timepicker-toggle-"),this.hoursArray=["12","1","2","3","4","5","6","7","8","9","10","11"],this.innerHours=["00","13","14","15","16","17","18","19","20","21","22","23"],this.minutesArray=["00","05","10","15","20","25","30","35","40","45","50","55"],this.input=Tn.findOne("input",this._element),this.dataWithIcon=C.dataset.withIcon,this.dataToggle=C.dataset.toggle,this.customIcon=Tn.findOne(".timepicker-toggle-button",this._element),this._checkToggleButton(),this.inputFormatShow=Tn.findOne("[data-mdb-timepicker-format24]",this._element),this.inputFormat=null===this.inputFormatShow?"":Object.values(this.inputFormatShow.dataset)[0],this.elementToggle=Tn.findOne("[data-mdb-toggle]",this._element),this.toggleElement=Object.values(C.querySelector("[data-mdb-toggle]").dataset)[0],this._hour=null,this._minutes=null,this._AM=null,this._PM=null,this._wrapper=null,this._modal=null,this._hand=null,this._circle=null,this._focusTrap=null,this._popper=null,this._interval=null,this._inputValue=""!==this._options.defaultTime?this._options.defaultTime:this.input.value,this._options.format12&&(this._currentTime=function(Te){var He,Ot,Ft;if(""!==Te)return xf(Te)?(He=Te.getHours(),0==(He%=12)&&(Ft="AM"),He=He||12,void 0===Ft&&(Ft=12<=He?"PM":"AM"),Ot=(Ot=Te.getMinutes())<10?"0".concat(Ot):Ot):(He=(Te=ah($a(Te,!1),3))[0],Ot=Te[1],Ft=Te[2],0==(He%=12)&&(Ft="AM"),He=He||12,void 0===Ft&&(Ft=12<=He?"PM":"AM")),{hours:He,minutes:Ot,amOrPm:Ft}}(this._inputValue)),this._options.readOnly&&this.input.setAttribute("readonly",!0),this.init(),this._isHours=!0,this._isMinutes=!1,this._isInvalidTimeFormat=!1,this._isMouseMove=!1,this._isInner=!1,this._isAmEnabled=!1,this._isPmEnabled=!1,this._objWithDataOnChange={degrees:null}}var D,L,N;return D=M,N=[{key:"NAME",get:function(){return R}},{key:"getInstance",value:function(C){return Ys_getData(C,W)}},{key:"getOrCreateInstance",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(C)||new this(C,"object"===Cd(S)?S:null)}}],(L=[{key:"init",value:function(){var C,S,H,K;Rt_addClass(this.input,ma),void 0!==this._currentTime?(H=(C=this._currentTime).hours,K=C.minutes,C=C.amOrPm,S=Number(H)<10?0:"",H="".concat(S).concat(Number(H),":").concat(K),K=C,this.input.value="".concat(H," ").concat(K)):this.input.value=K=H=S="",0<this.input.value.length&&""!==this.input.value&&Rt_addClass(this.input,"active"),null===this._options&&null===this._element||(this._handleOpen(),this._listenToToggleKeydown())}},{key:"dispose",value:function(){this._removeModal(),null!==this._element&&Ys_removeData(this._element,W),this._element=null,this._options=null,this.input=null,this._focusTrap=null,_r.off(this._document,"click","[data-mdb-toggle='".concat(this.toggleElement,"']")),_r.off(this._element,"keydown","[data-mdb-toggle='".concat(this.toggleElement,"']"))}},{key:"_checkToggleButton",value:function(){null===this.customIcon&&(void 0!==this.dataWithIcon&&(this._options.withIcon=null,"true"===this.dataWithIcon&&this._appendToggleButton(this._options)),this._options.withIcon&&this._appendToggleButton(this._options))}},{key:"_appendToggleButton",value:function(){var S,C=(S=(S=this._options).iconClass,'\n  <button id="'.concat(this._toggleButtonId,'" tabindex="0" type="button" class="timepicker-toggle-button" data-mdb-toggle="timepicker"  >\n    <i class="').concat(S,'"></i>\n  </button>\n'));this.input.insertAdjacentHTML("afterend",C)}},{key:"_getDomElements",value:function(){this._hour=Tn.findOne(".".concat(io)),this._minutes=Tn.findOne(".".concat(Ef)),this._AM=Tn.findOne(".".concat(Ze)),this._PM=Tn.findOne(".".concat(qh)),this._wrapper=Tn.findOne(".".concat(Yd)),this._modal=Tn.findOne(".".concat(Cf)),this._hand=Tn.findOne(".".concat(kl)),this._circle=Tn.findOne(".".concat(Ii)),this._clock=Tn.findOne(".".concat(Zi)),this._clockInner=Tn.findOne(".".concat($r))}},{key:"_handlerMaxMinHoursOptions",value:function(C,S,H,K,Ee,Te){var He=""!==H?30*H:"",Ot=""!==K?30*K:"";if(""!==H&&""!==K){if((C=C<=0?360+C:C)<=He&&Ot<=C)return S()}else if(""!==K){if(C<=0&&(C=360+C),(Ot=12<Number(K)?30*K-Ot:Ot)<=C&&void 0===Te)return S();if(void 0!==Te){if("PM"===Te&&this._isAmEnabled)return;if("PM"===Te&&this._isPmEnabled&&Ot<=C||"AM"===Te&&this._isPmEnabled||"AM"===Te&&this._isAmEnabled&&Ot<=C)return S()}}else{if(""===H||(C=C<=0?360+C:C)<=He&&void 0===Ee)return S();if(void 0!==Ee){if("AM"===Ee&&this._isPmEnabled)return;if("AM"===Ee&&this._isAmEnabled&&C<=He)return S();if("PM"===Ee&&this._isPmEnabled){if(C<=He)return S()}else if("PM"===Ee&&this._isAmEnabled)return S()}}return S}},{key:"_handleKeyboard",value:function(){var C=this;_r.on(this._document,"keydown","",function(S){var H,Ee=(K=C._options).maxHour,Te=K.minHour,K=K.increment,He=null!==Tn.findOne(".".concat(pa)),Ot=null!==Tn.findOne(".".concat(au)),Ft=Number(C._hand.style.transform.replace(/[^\d-]/g,"")),In=Tn.find(".".concat(pa),C._modal),dn=Tn.find(".".concat(sc),C._modal),Gn=Tn.find(".".concat(au),C._modal),en=""!==Ee?Number(Ee):"",xn=""!==Te?Number(Te):"",yn=C._makeHourDegrees(S.target,Ft,void 0).hour,wi=(Dn=C._makeHourDegrees(S.target,Ft,void 0)).degrees,Kr=Dn.addDegrees,Or=(Dn=C._makeMinutesDegrees(Ft,void 0)).minute,Dn=Dn.degrees,Yr=C._makeMinutesDegrees(Ft,void 0).addDegrees;Ft=C._makeInnerHoursDegrees(Ft,void 0).hour,27===S.keyCode&&(H=Tn.findOne(".".concat(lt),C._modal),_r.trigger(H,"click")),He?(38===S.keyCode&&(Rt_addStyle(C._hand,{transform:"rotateZ(".concat(Dn+=Yr,"deg)")}),Or+=1,K&&"0014"==(Or+=4)&&(Or=5),C._minutes.textContent=C._setHourOrMinute(59<Or?0:Or),C._toggleClassActive(C.minutesArray,C._minutes,In),C._toggleBackgroundColorCircle("".concat(pa))),40===S.keyCode&&(Rt_addStyle(C._hand,{transform:"rotateZ(".concat(Dn-=Yr,"deg)")}),K?Or-=5:--Or,-1===Or?Or=59:-5===Or&&(Or=55),C._minutes.textContent=C._setHourOrMinute(Or),C._toggleClassActive(C.minutesArray,C._minutes,In),C._toggleBackgroundColorCircle("".concat(pa)))):(Ot&&(39===S.keyCode&&(C._isInner=!1,Rt_addStyle(C._hand,{height:"calc(40% + 1px)"}),C._hour.textContent=C._setHourOrMinute(12<yn?1:yn),C._toggleClassActive(C.hoursArray,C._hour,dn),C._toggleClassActive(C.innerHours,C._hour,Gn)),37===S.keyCode&&(C._isInner=!0,Rt_addStyle(C._hand,{height:"21.5%"}),C._hour.textContent=C._setHourOrMinute(24<=Ft||"00"===Ft?0:Ft),C._toggleClassActive(C.innerHours,C._hour,Gn),C._toggleClassActive(C.hoursArray,C._hour-1,dn))),38===S.keyCode&&(C._handlerMaxMinHoursOptions(wi+30,function(){return Rt_addStyle(C._hand,{transform:"rotateZ(".concat(wi+Kr,"deg)")})},Ee,Te),C._isInner?(24===(Ft+=1)?Ft=0:25!==Ft&&"001"!==Ft||(Ft=13),C._hour.textContent=C._setHourOrMinute(Ft),C._toggleClassActive(C.innerHours,C._hour,Gn)):(yn+=1,""!==Ee&&""!==Te?Ee<yn?yn=en:yn<Te&&(yn=xn):""!==Ee&&""===Te?Ee<yn&&(yn=en):""===Ee&&""!==Te&&12<=yn&&(yn=12),C._hour.textContent=C._setHourOrMinute(12<yn?1:yn),C._toggleClassActive(C.hoursArray,C._hour,dn))),40===S.keyCode&&(C._handlerMaxMinHoursOptions(wi-30,function(){return Rt_addStyle(C._hand,{transform:"rotateZ(".concat(wi-Kr,"deg)")})},Ee,Te),C._isInner?(12==--Ft?Ft=0:-1===Ft&&(Ft=23),C._hour.textContent=C._setHourOrMinute(Ft),C._toggleClassActive(C.innerHours,C._hour,Gn)):(--yn,""!==Ee&&""!==Te?en<yn?yn=en:yn<xn&&(yn=xn):""===Ee&&""!==Te?yn<=xn&&(yn=xn):""!==Ee&&""===Te&&yn<=1&&(yn=1),C._hour.textContent=C._setHourOrMinute(0===yn?12:yn),C._toggleClassActive(C.hoursArray,C._hour,dn))))})}},{key:"_setActiveClassToTipsOnOpen",value:function(C){var S=this;if(!this._isInvalidTimeFormat){for(var H=arguments.length,K=new Array(1<H?H-1:0),Ee=1;Ee<H;Ee++)K[Ee-1]=arguments[Ee];[].concat(K).filter(function(He){return"PM"===He?Rt_addClass(S._PM,le):"AM"===He?Rt_addClass(S._AM,le):(Rt_removeClass(S._AM,le),Rt_removeClass(S._PM,le)),He});var Te=Tn.find(".".concat(sc),this._modal);this._addActiveClassToTip(Te,C)}}},{key:"_setTipsAndTimesDependOnInputValue",value:function(C,S){var K=(H=this._options).inline,H=H.format12;this._isInvalidTimeFormat?(this._hour.textContent="12",this._minutes.textContent="00",K||Rt_addStyle(this._hand,{transform:"rotateZ(0deg)"}),H&&Rt_addClass(this._PM,le)):(H=12<C?30*C-360:30*C,this._hour.textContent=C,this._minutes.textContent=S,K||(Rt_addStyle(this._hand,{transform:"rotateZ(".concat(H,"deg)")}),Rt_addStyle(this._circle,{backgroundColor:"#1976d2"}),(12<Number(C)||"00"===C)&&Rt_addStyle(this._hand,{height:"21.5%"})))}},{key:"_listenToToggleKeydown",value:function(){var C=this;_r.on(this._element,"keydown","[data-mdb-toggle='".concat(this.toggleElement,"']"),function(S){13===S.keyCode&&(S.preventDefault(),_r.trigger(C.elementToggle,"click"))})}},{key:"_handleOpen",value:function(){var C=this;Dc(this._element,"click","[data-mdb-toggle='".concat(this.toggleElement,"']"),function(S){var H;null!==C._options&&(H=null!==function(M,D){return Jc(M.getAttribute("data-mdb-".concat(function(M){return M.replace(/[A-Z]/g,function(D){return"-".concat(D.toLowerCase())})}(D))))}(C.input,"toggle")?200:0,setTimeout(function(){Rt_addStyle(C.elementToggle,{pointerEvents:"none"}),C.elementToggle.blur(),Kr=""===$a(C.input)[0]?["12","00","PM"]:$a(C.input);var K,Ee,Te,He,Ot,Ft,In,dn,Gn,en,yn=(xn=C._options).modalID,Dn=xn.inline,wi=xn.format12,xn=xn.overflowHidden,Or=(Kr=No(Kr,3))[0],Yr=Kr[1],Kr=Kr[2],Bi=So("div");(12<Number(Or)||"00"===Or)&&(C._isInner=!0),C.input.blur(),S.target.blur(),Bi.innerHTML=(Ee=(K=C._options).okLabel,Te=K.cancelLabel,en=K.headID,He=K.footerID,Ot=K.bodyID,Gn=K.pickerID,Ft=K.clearLabel,In=K.showClearBtn,dn=K.amLabel,K=K.pmLabel,"<div id='".concat(Gn,"' class='timepicker-wrapper h-full flex items-center justify-center flex-col fixed'>\n      <div class=\"flex items-center justify-center flex-col timepicker-container\">\n        <div class=\"flex flex-col timepicker-elements justify-around\">\n        <div id='").concat(en,"' class='timepicker-head flex flex-row items-center justify-center'>\n        <div class='timepicker-head-content flex w-100 justify-evenly'>\n            <div class=\"timepicker-current-wrapper\">\n              <span class=\"relative h-100\">\n                <button type='button' class='timepicker-current timepicker-hour active ripple' tabindex=\"0\">21</button>\n              </span>\n              <button type='button' class='timepicker-dot' disabled>:</button>\n            <span class=\"relative h-100\">\n              <button type='button' class='timepicker-current timepicker-minute ripple' tabindex=\"0\">21</button>\n            </span>\n            </div>\n            <div class=\"flex flex-col justify-center timepicker-mode-wrapper\">\n              <button type='button' class=\"timepicker-hour-mode timepicker-am ripple\" tabindex=\"0\">").concat(dn,'</button>\n              <button class="timepicker-hour-mode timepicker-pm ripple" tabindex="0">').concat(K,"</button>\n            </div>\n        </div>\n      </div>\n      <div id='").concat(Ot,"' class='timepicker-clock-wrapper flex justify-center flex-col items-center'>\n        <div class='timepicker-clock'>\n          <span class='timepicker-middle-dot absolute'></span>\n          <div class='timepicker-hand-pointer absolute'>\n            <div class='timepicker-circle absolute'></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id='").concat(He,"' class='timepicker-footer'>\n      <div class=\"w-full flex justify-between\">\n        ").concat(In?"<button type='button' class='timepicker-button timepicker-clear ripple' tabindex=\"0\">".concat(Ft,"</button>"):"","\n        <button type='button' class='timepicker-button timepicker-cancel ripple' tabindex=\"0\">").concat(Te,"</button>\n        <button type='button' class='timepicker-button timepicker-submit ripple' tabindex=\"0\">").concat(Ee,"</button>\n      </div>\n    </div>\n  </div>\n</div>")),Rt_addClass(Bi,Cf),Bi.setAttribute("role","dialog"),Bi.setAttribute("tabIndex","-1"),Bi.setAttribute("id",yn),Dn&&(C._popper=Wr(C.input,Bi,{placement:"bottom-start"})),C._document.body.appendChild(Bi),C._getDomElements(),C._toggleBackdropAnimation(),C._setActiveClassToTipsOnOpen(Or,Yr,Kr),C._appendTimes(),C._setActiveClassToTipsOnOpen(Or,Yr,Kr),C._setTipsAndTimesDependOnInputValue(Or,Yr),""===C.input.value&&(Gn=Tn.find(".".concat(sc),C._modal),wi&&Rt_addClass(C._PM,le),C._hour.textContent="12",C._minutes.textContent="00",C._addActiveClassToTip(Gn,Number(C._hour.textContent))),C._handleSwitchTimeMode(),C._handleOkButton(),C._handleClose(),Dn?(C._handleHoverInlineBtn(),C._handleDocumentClickInline(),C._handleInlineClicks()):(C._handleSwitchHourMinute(),C._handleClockClick(),C._handleKeyboard(),Rt_addStyle(C._hour,{pointerEvents:"none"}),Rt_addStyle(C._minutes,{pointerEvents:""})),xn&&(en=window.innerWidth>document.documentElement.clientWidth,Rt_addStyle(C._document.body,{overflow:"hidden"}),!iu()&&en&&Rt_addStyle(C._document.body,{paddingRight:"15px"})),C._focusTrap=new ha(C._wrapper,{event:"keydown",condition:function(es){return"Tab"===es.key}}),C._focusTrap.trap()},H))})}},{key:"_handleInlineClicks",value:function(){var C=this;Dc(this._modal,"click mousedown mouseup touchstart touchend contextmenu",".".concat(Wh,", .").concat(su),function(S){function H(xn){xn=en(xn),C._hour.textContent=C._setHourOrMinute(xn)}function K(xn){xn=Gn(xn),C._minutes.textContent=C._setHourOrMinute(xn)}function Ee(){H(In+=1)}function Te(){K(dn+=1)}function He(){H(--In)}function Ot(){K(--dn)}var Ft=S.target,In=(S=S.type,Number(C._hour.textContent)),dn=Number(C._minutes.textContent),Gn=function(xn){return 59<xn?xn=0:xn<0&&(xn=59),xn},en=function(xn){return 12<xn?xn=1:xn<1&&(xn=12),12<xn?1:xn};Rt_hasClass(Ft,Wh)?Rt_hasClass(Ft.parentNode,Ic)?"mousedown"===S||"touchstart"===S?(clearInterval(C._interval),C._interval=setInterval(Ee,100)):"mouseup"===S||"touchend"===S||"contextmenu"===S?clearInterval(C._interval):Ee():"mousedown"===S||"touchstart"===S?(clearInterval(C._interval),C._interval=setInterval(Te,100)):"mouseup"===S||"touchend"===S||"contextmenu"===S?clearInterval(C._interval):Te():Rt_hasClass(Ft,su)&&(Rt_hasClass(Ft.parentNode,Ic)?"mousedown"===S||"touchstart"===S?(clearInterval(C._interval),C._interval=setInterval(He,100)):"mouseup"===S||"touchend"===S?clearInterval(C._interval):He():"mousedown"===S||"touchstart"===S?(clearInterval(C._interval),C._interval=setInterval(Ot,100)):"mouseup"===S||"touchend"===S?clearInterval(C._interval):Ot())})}},{key:"_handleClose",value:function(){var C=this;_r.on(this._modal,"click",".".concat(Yd,", .").concat(lt,", .").concat(nn),function(S){var K,Ee,Te,He=C._options.closeModalOnBackdropClick;Rt_hasClass(S=S.target,nn)?(C.input.value="",Rt_removeClass(C.input,"active"),K=(Te=No(Te=""===$a(C.input)[0]?["12","00","PM"]:$a(C.input),3))[0],Ee=Te[1],Te=Te[2],C._setTipsAndTimesDependOnInputValue("12","00"),C._setActiveClassToTipsOnOpen(K,Ee,Te),C._hour.click()):(Rt_hasClass(S,lt)||Rt_hasClass(S,Yd)&&He)&&(Rt_addStyle(C.elementToggle,{pointerEvents:"auto"}),C._toggleBackdropAnimation(!0),C._removeModal(),C._focusTrap.disable(),C._focusTrap=null,C.elementToggle?C.elementToggle.focus():C.input&&C.input.focus())})}},{key:"showValueInput",value:function(){return this.input.value}},{key:"_handleOkButton",value:function(){var C=this;Dc(this._modal,"click",".".concat(cr),function(){var H=(S=C._options).readOnly,S=S.focusInputAfterApprove,K=C._document.querySelector(".".concat(Go,".").concat(le)),Ee="".concat(C._hour.textContent,":").concat(C._minutes.textContent);Rt_addClass(C.input,"active"),Rt_addStyle(C.elementToggle,{pointerEvents:"auto"}),C._isInvalidTimeFormat&&Rt_removeClass(C.input,"is-invalid"),!H&&S&&C.input.focus(),Rt_addStyle(C.elementToggle,{pointerEvents:"auto"}),C.input.value=null===K?"".concat(Ee," PM"):"".concat(Ee," ").concat(K.textContent),C._toggleBackdropAnimation(!0),C._removeModal(),_r.trigger(C.input,"input.mdb.timepicker")})}},{key:"_handleHoverInlineBtn",value:function(){var C=this;Dc(this._modal,"mouseover mouseleave",".".concat(is),function(S){var H=S.type,K=(S=S.target,Tn.find(".".concat(Jo),C._modal)),Ee=Tn.find(".".concat(wf),C._modal);"mouseover"===H?Rt_hasClass(S,io)?K.forEach(function(Te){return Rt_addClass(Te,le)}):Ee.forEach(function(Te){return Rt_addClass(Te,le)}):Rt_hasClass(S,io)?K.forEach(function(Te){return Rt_removeClass(Te,le)}):Ee.forEach(function(Te){return Rt_removeClass(Te,le)})})}},{key:"_handleDocumentClickInline",value:function(){var C=this;_r.on(document,"click",function(S){S=S.target,!C._modal||C._modal.contains(S)||Rt_hasClass(S,"timepicker-icon")||(clearInterval(C._interval),Rt_addStyle(C.elementToggle,{pointerEvents:"auto"}),C._removeModal())})}},{key:"_handleSwitchHourMinute",value:function(){var S,H=this;S=Js,_r.on(document,"click",S,function(K){Rt_hasClass(K=K.target,"active")||(document.querySelectorAll(S).forEach(function(Ee){Rt_hasClass(Ee,"active")&&Rt_removeClass(Ee,"active")}),Rt_addClass(K,"active"))}),_r.on(this._modal,"click",Js,function(){function K(dn,Gn){He.forEach(function(en){return en.remove()}),Te.forEach(function(en){return en.remove()}),Rt_addClass(H._hand,Kd),setTimeout(function(){Rt_removeClass(H._hand,Kd)},401),H._getAppendClock(dn,".".concat(Zi),Gn),setTimeout(function(){var en,xn;en=Tn.find(".".concat(sc),H._modal),xn=Tn.find(".".concat(pa),H._modal),H._addActiveClassToTip(en,Ft),H._addActiveClassToTip(xn,In)},401)}var Ee=Tn.find(Js,H._modal),Te=Tn.find(".".concat(pa),H._modal),He=Tn.find(".".concat(sc),H._modal),Ot=Tn.find(".".concat(au),H._modal),Ft=Number(H._hour.textContent),In=Number(H._minutes.textContent);Ee.forEach(function(dn){Rt_hasClass(dn,le)&&(Rt_hasClass(dn,Ef)?(Rt_addClass(H._hand,Kd),Rt_addStyle(H._hand,{transform:"rotateZ(".concat(6*H._minutes.textContent,"deg)"),height:"calc(40% + 1px)"}),0<Ot.length&&Ot.forEach(function(Gn){return Gn.remove()}),K(H.minutesArray,"".concat(pa)),H._hour.style.pointerEvents="",H._minutes.style.pointerEvents="none"):Rt_hasClass(dn,io)&&(Rt_addStyle(H._hand,{transform:"rotateZ(".concat(30*H._hour.textContent,"deg)")}),12<Number(H._hour.textContent)?(Rt_addStyle(H._hand,{transform:"rotateZ(".concat(30*H._hour.textContent-360,"deg)"),height:"21.5%"}),12<Number(H._hour.textContent)&&Rt_addStyle(H._hand,{height:"21.5%"})):Rt_addStyle(H._hand,{height:"calc(40% + 1px)"}),0<Ot.length&&Ot.forEach(function(Gn){return Gn.remove()}),K(H.hoursArray,"".concat(sc)),Rt_addStyle(H._hour,{pointerEvents:"none"}),Rt_addStyle(H._minutes,{pointerEvents:""})))})})}},{key:"_handleSwitchTimeMode",value:function(){_r.on(document,"click",".".concat(Go),function(C){Rt_hasClass(C=C.target,le)||(Tn.find(".".concat(Go)).forEach(function(S){Rt_hasClass(S,le)&&Rt_removeClass(S,le)}),Rt_addClass(C,le))})}},{key:"_handleClockClick",value:function(){var C=this,S=Tn.findOne(".".concat(Ga));Dc(document,"mousedown mouseup mousemove mouseleave mouseover touchstart touchmove touchend","",function(H){iu()||H.preventDefault();var Ee=(K=C._options).maxHour,K=K.minHour,Te=H.type,He=H.target,Ft=(Ot=C._options).closeModalOnMinutesClick,Ot=Ot.switchHoursToMinutesOnClick,In=null!==Tn.findOne(".".concat(pa),C._modal),dn=null!==Tn.findOne(".".concat(sc),C._modal),Gn=null!==Tn.findOne(".".concat(au),C._modal),en=Tn.find(".".concat(pa),C._modal),xn=ru(H,S),yn=S.offsetWidth/2,Dn=(xn=Math.atan2(xn.y-yn,xn.x-yn),iu()&&(wi=ru(H,S,!0),xn=Math.atan2(wi.y-yn,wi.x-yn)),null);if("mousedown"===Te||"mousemove"===Te||"touchmove"===Te||"touchstart"===Te?"mousedown"!==Te&&"touchstart"!==Te&&"touchmove"!==Te||(Rt_hasClass(He,Ga)||Rt_hasClass(He,Zi)||Rt_hasClass(He,pa)||Rt_hasClass(He,$r)||Rt_hasClass(He,au)||Rt_hasClass(He,sc)||Rt_hasClass(He,Ii)||Rt_hasClass(He,kl)||Rt_hasClass(He,Zh)||Rt_hasClass(He,Td)||Rt_hasClass(He,Dd))&&(C._isMouseMove=!0,iu()&&H.touches&&(wi=H.touches[0].clientX,yn=H.touches[0].clientY,Dn=document.elementFromPoint(wi,yn))):"mouseup"!==Te&&"touchend"!==Te||(C._isMouseMove=!1,(Rt_hasClass(He,Zi)||Rt_hasClass(He,$r)||Rt_hasClass(He,au)||Rt_hasClass(He,sc)||Rt_hasClass(He,Ii)||Rt_hasClass(He,kl)||Rt_hasClass(He,Zh)||Rt_hasClass(He,Td)||Rt_hasClass(He,Dd))&&(dn||Gn)&&Ot&&_r.trigger(C._minutes,"click"),In&&Ft&&(wi=Tn.findOne(".".concat(cr),C._modal),_r.trigger(wi,"click"))),In){if(yn=Math.trunc(180*xn/Math.PI)+90,Te=C._makeMinutesDegrees(yn,void 0),void 0===C._handlerMaxMinMinutesOptions(Ot=Te.degrees,Ft=Te.minute))return;var wi=C._handlerMaxMinMinutesOptions(Ot,Ft);if(In=wi.degrees,yn=wi.minute,C._isMouseMove){if(Rt_addStyle(C._hand,{transform:"rotateZ(".concat(In,"deg)")}),void 0===yn)return;C._minutes.textContent=10<=yn||"00"===yn?yn:"0".concat(yn),C._toggleClassActive(C.minutesArray,C._minutes,en),C._toggleBackgroundColorCircle("".concat(pa)),C._objWithDataOnChange.degreesMinutes=In,C._objWithDataOnChange.minutes=yn}}if(dn||Gn){var Kr=Math.trunc(180*xn/Math.PI)+90;if(Kr=30*Math.round(Kr/30),Rt_addStyle(C._circle,{backgroundColor:"#1976d2"}),void 0===C._makeHourDegrees(He,Kr,void 0))return;C._objWithDataOnChange.degreesHours=Kr,C._handlerMaxMinHoursOptions(Kr,function(){var Or,Yr;return iu()&&Kr?(Or=(Yr=C._makeHourDegrees(Dn,Kr,void 0)).degrees,C._handleMoveHand(Dn,Yr=Yr.hour,Or)):(Or=(Yr=C._makeHourDegrees(He,Kr,void 0)).degrees,C._handleMoveHand(He,Yr=Yr.hour,Or))},Ee,K)}H.stopPropagation()})}},{key:"_handleMoveHand",value:function(C,S,H){var K=Tn.find(".".concat(sc),this._modal),Ee=Tn.find(".".concat(au),this._modal);this._isMouseMove&&(Rt_hasClass(C,$r)||Rt_hasClass(C,au)||Rt_hasClass(C,Dd)?Rt_addStyle(this._hand,{height:"21.5%"}):Rt_addStyle(this._hand,{height:"calc(40% + 1px)"}),Rt_addStyle(this._hand,{transform:"rotateZ(".concat(H,"deg)")}),this._hour.textContent=10<=S||"00"===S?S:"0".concat(S),this._toggleClassActive(this.hoursArray,this._hour,K),this._toggleClassActive(this.innerHours,this._hour,Ee),this._objWithDataOnChange.hour=10<=S||"00"===S?S:"0".concat(S))}},{key:"_handlerMaxMinMinutesOptions",value:function(C,S){var K=(H=this._options).increment,Ee=H.maxTime,H=H.minTime,Te=$a(Ee,!1)[1],He=$a(H,!1)[1],Ot=$a(Ee,!1)[0],Ft=$a(H,!1)[0],In=$a(Ee,!1)[2],dn=$a(H,!1)[2];if(Te=""!==Te?6*Te:"",He=""!==He?6*He:"",void 0===In&&void 0===dn){if(""!==Ee&&""!==H){if(C<=Te&&He<=C)return C}else if(""!==H&&Number(this._hour.textContent)<=Number(Ft)){if(C<=He-6)return C}else if(""!==Ee&&Number(this._hour.textContent)>=Number(Ot)&&Te+6<=C)return C}else if(""!==H){if("PM"===dn&&this._isAmEnabled)return;if("PM"===dn&&this._isPmEnabled){if(Number(this._hour.textContent)<Number(Ft))return;if(Number(this._hour.textContent)<=Number(Ft)&&C<=He-6)return C}else if("AM"===dn&&this._isAmEnabled){if(Number(this._hour.textContent)<Number(Ft))return;if(Number(this._hour.textContent)<=Number(Ft)&&C<=He-6)return C}}else if(""!==Ee){if("AM"===In&&this._isPmEnabled)return;if("PM"===In&&this._isPmEnabled){if(Number(this._hour.textContent)>=Number(Ot)&&Te+6<=C)return C}else if("AM"===In&&this._isAmEnabled&&Number(this._hour.textContent)>=Number(Ot)&&Te+6<=C)return C}return(C=K?30*Math.round(C/30):C)<=0?C=360+C:360<=C&&(C=0),{degrees:C,minute:S}}},{key:"_removeModal",value:function(){var C=this;setTimeout(function(){C._modal.remove(),Rt_addStyle(C._document.body,{overflow:""}),iu()||Rt_addStyle(C._document.body,{paddingRight:""})},300),function(M,D,L,N){for(var C="click keydown mousedown mouseup mousemove mouseleave mouseover touchmove touchend".split(" "),S=0;S<C.length;S++)nc.off(M,C[S],undefined,undefined)}(this._document)}},{key:"_toggleBackdropAnimation",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]?(Rt_addClass(this._wrapper,"animation"),Rt_addClass(this._wrapper,"fade-out"),this._wrapper.style.animationDuration="300ms"):(Rt_addClass(this._wrapper,"animation"),Rt_addClass(this._wrapper,"fade-in"),this._wrapper.style.animationDuration="300ms",this._options.inline||Rt_addClass(this._clock,Dr))}},{key:"_addActiveClassToTip",value:function(C,S){C.forEach(function(H){Number(H.textContent)===Number(S)&&Rt_addClass(H,le)})}},{key:"_setHourOrMinute",value:function(C){return C<10?"0".concat(C):C}},{key:"_appendTimes",value:function(){this._getAppendClock(this.hoursArray,".".concat(Zi),"".concat(sc))}},{key:"_getConfig",value:function(C){var S=Rt_getDataAttributes(this._element);return C=Nu(Nu(Nu({},Tf),S),C),Gi(R,C,Bp),C}}])&&x(D.prototype,L),N&&x(D,N),Object.defineProperty(D,"prototype",{writable:!1}),M}();function zp(M){return(zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(M)}function jp(M,D){var L,N=Object.keys(M);return Object.getOwnPropertySymbols&&(L=Object.getOwnPropertySymbols(M),D&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(M,C).enumerable})),N.push.apply(N,L)),N}function Qd(M){for(var D=1;D<arguments.length;D++){var L=null!=arguments[D]?arguments[D]:{};D%2?jp(Object(L),!0).forEach(function(N){var C,S;S=L[N],N in(C=M)?Object.defineProperty(C,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):C[N]=S}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(L)):jp(Object(L)).forEach(function(N){Object.defineProperty(M,N,Object.getOwnPropertyDescriptor(L,N))})}return M}function Df(M,D){for(var L=0;L<D.length;L++){var N=D[L];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}v=Sd,_r.on(window,"DOMContentLoaded",function(){Tn.find(".".concat(R)).forEach(function(M){Sd.getInstance(M)||new Sd(M)})});var Ts="stepper",Xh="mdb.stepper",Wa=".".concat(Xh),Ds="horizontal",ul="vertical",ap={stepperType:"string",stepperLinear:"boolean",stepperNoEditable:"boolean",stepperActive:"string",stepperCompleted:"string",stepperInvalid:"string",stepperDisabled:"string",stepperVerticalBreakpoint:"number",stepperMobileBreakpoint:"number",stepperMobileBarBreakpoint:"number"},Vp={stepperType:Ds,stepperLinear:!1,stepperNoEditable:!1,stepperActive:"",stepperCompleted:"",stepperInvalid:"",stepperDisabled:"",stepperVerticalBreakpoint:0,stepperMobileBreakpoint:0,stepperMobileBarBreakpoint:4},lp="mousedown".concat(Wa),cp="keydown".concat(Wa),Id="keyup".concat(Wa),up="resize".concat(Wa),lh="animationend",Mc="".concat(Ts,"-step"),fs="".concat(Ts,"-head"),Fs="".concat(Ts,"-content"),Kh="".concat(Ts,"-active"),hp="".concat(Ts,"-completed"),Jd="".concat(Ts,"-invalid"),Lm="".concat(Ts,"-disabled"),Sf="".concat(Ts,"-").concat(ul),dp="".concat(Ts,"-content-hide"),Up="".concat(Ts,"-").concat(Ds),Md=function(){function M(C,S){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");this._element=C,this._options=this._getConfig(S),this._elementHeight=0,this._steps=Tn.find(".".concat(Mc),this._element),this._currentView="",this._activeStepIndex=0,this._verticalStepperStyles=[],this._element&&(Ys_setData(C,Xh,this),this._init())}var D,L,N;return D=M,N=[{key:"NAME",get:function(){return Ts}},{key:"getInstance",value:function(C){return Ys_getData(C,Xh)}},{key:"getOrCreateInstance",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(C)||new this(C,"object"===zp(S)?S:null)}}],(L=[{key:"activeStep",get:function(){return this._steps[this._activeStepIndex]}},{key:"activeStepIndex",get:function(){return this._activeStepIndex}},{key:"dispose",value:function(){this._steps.forEach(function(C){_r.off(C,lp),_r.off(C,cp)}),_r.off(window,up),Ys_removeData(this._element,Xh),this._element=null}},{key:"changeStep",value:function(C){this._toggleStep(C)}},{key:"nextStep",value:function(){this._toggleStep(this._activeStepIndex+1)}},{key:"previousStep",value:function(){this._toggleStep(this._activeStepIndex-1)}},{key:"_init",value:function(){var C=Tn.findOne(".".concat(Kh),this._element);C?this._activeStepIndex=this._steps.indexOf(C):this._toggleStepClass(this._activeStepIndex,"add",Kh),this._toggleStepClass(this._activeStepIndex,"add",this._options.stepperActive),this._bindMouseDown(),this._bindKeysNavigation(),this._options.stepperType===ul?this._toggleVertical():this._toggleHorizontal(),(this._options.stepperVerticalBreakpoint||this._options.stepperMobileBreakpoint)&&this._toggleStepperView(),this._bindResize()}},{key:"_getConfig",value:function(C){var S=Rt_getDataAttributes(this._element);return C=Qd(Qd(Qd({},Vp),S),C),Gi(Ts,C,ap),C}},{key:"_bindMouseDown",value:function(){var C=this;this._steps.forEach(function(S){S=Tn.findOne(".".concat(fs),S),_r.on(S,lp,function(H){var K=Tn.parents(H.target,".".concat(Mc))[0];K=C._steps.indexOf(K),H.preventDefault(),C._toggleStep(K)})})}},{key:"_bindResize",value:function(){var C=this;_r.on(window,up,function(){C._currentView===ul&&C._setSingleStepHeight(C.activeStep),C._currentView===Ds&&C._setHeight(C.activeStep),(C._options.stepperVerticalBreakpoint||C._options.stepperMobileBreakpoint)&&C._toggleStepperView()})}},{key:"_toggleStepperView",value:function(){var C=this,S=this._options.stepperVerticalBreakpoint<window.innerWidth,H=this._options.stepperVerticalBreakpoint>window.innerWidth,K=this._options.stepperMobileBreakpoint>window.innerWidth;S&&this._currentView!==Ds&&this._toggleHorizontal(),H&&!K&&this._currentView!==ul&&(this._steps.forEach(function(Ee){Ee=Tn.findOne(".".concat(Fs),Ee),C._resetStepperHeight(),C._showElement(Ee)}),this._toggleVertical())}},{key:"_toggleStep",value:function(C){this._activeStepIndex!==C&&(this._options.stepperNoEditable&&this._toggleDisabled(),this._showElement(Tn.findOne(".".concat(Fs),this._steps[C])),this._toggleActive(C),C>this._activeStepIndex&&this._toggleCompleted(this._activeStepIndex),this._currentView===Ds?this._animateHorizontalStep(C):(this._animateVerticalStep(C),this._setSingleStepHeight(this._steps[C])),this._toggleStepTabIndex(Tn.findOne(".".concat(fs),this.activeStep),Tn.findOne(".".concat(fs),this._steps[C])),this._activeStepIndex=C)}},{key:"_resetStepperHeight",value:function(){this._element.style.height=""}},{key:"_setStepsHeight",value:function(){var C=this;this._steps.forEach(function(S){S=Tn.findOne(".".concat(Fs),S);var H=window.getComputedStyle(S);C._verticalStepperStyles.push({paddingTop:parseFloat(H.paddingTop),paddingBottom:parseFloat(H.paddingBottom)}),S.style.height="".concat(H=S.scrollHeight,"px")})}},{key:"_setSingleStepHeight",value:function(C){var S=Tn.findOne(".".concat(Fs),C),H=this.activeStep===C;C=this._steps.indexOf(C),H=H?(S.style.height="",S.scrollHeight):S.scrollHeight+this._verticalStepperStyles[C].paddingTop+this._verticalStepperStyles[C].paddingBottom,S.style.height="".concat(H,"px")}},{key:"_toggleVertical",value:function(){this._currentView=ul,this._toggleStepperClass(Sf),this._setStepsHeight(),this._hideInactiveSteps()}},{key:"_toggleHorizontal",value:function(){this._currentView=Ds,this._toggleStepperClass(Up),this._setHeight(this.activeStep),this._hideInactiveSteps()}},{key:"_toggleStepperClass",value:function(C){this._element.classList.remove(Up,Sf),this._element.classList.add(C),C!==Sf&&this._steps.forEach(function(S){Tn.findOne(".".concat(Fs),S).classList.remove(dp)})}},{key:"_toggleStepClass",value:function(C,S,H){H&&this._steps[C].classList[S](H)}},{key:"_bindKeysNavigation",value:function(){var C=this;this._toggleStepTabIndex(!1,Tn.findOne(".".concat(fs),this.activeStep)),this._steps.forEach(function(S){S=Tn.findOne(".".concat(fs),S),_r.on(S,cp,function(H){var K=Tn.parents(H.currentTarget,".".concat(Mc))[0],Ee=Tn.next(K,".".concat(Mc))[0],Te=Tn.prev(K,".".concat(Mc))[0],He=Tn.findOne(".".concat(fs),K),Ot=Tn.findOne(".".concat(fs),C.activeStep),Ft=null,In=null;Ee&&(Ft=Tn.findOne(".".concat(fs),Ee)),Te&&(In=Tn.findOne(".".concat(fs),Te)),37===H.keyCode&&C._currentView!==ul&&(In?(C._toggleStepTabIndex(He,In),C._toggleOutlineStyles(He,In),In.focus()):Ft&&(C._toggleStepTabIndex(He,Ft),C._toggleOutlineStyles(He,Ft),Ft.focus())),39===H.keyCode&&C._currentView!==ul&&(Ft?(C._toggleStepTabIndex(He,Ft),C._toggleOutlineStyles(He,Ft),Ft.focus()):In&&(C._toggleStepTabIndex(He,In),C._toggleOutlineStyles(He,In),In.focus())),40===H.keyCode&&C._currentView===ul&&(H.preventDefault(),Ft&&(C._toggleStepTabIndex(He,Ft),C._toggleOutlineStyles(He,Ft),Ft.focus())),38===H.keyCode&&C._currentView===ul&&(H.preventDefault(),In&&(C._toggleStepTabIndex(He,In),C._toggleOutlineStyles(He,In),In.focus())),36===H.keyCode&&(Ee=Tn.findOne(".".concat(fs),C._steps[0]),C._toggleStepTabIndex(He,Ee),C._toggleOutlineStyles(He,Ee),Ee.focus()),35===H.keyCode&&(Te=C._steps[C._steps.length-1],Ft=Tn.findOne(".".concat(fs),Te),C._toggleStepTabIndex(He,Ft),C._toggleOutlineStyles(He,Ft),Ft.focus()),13!==H.keyCode&&32!==H.keyCode||(H.preventDefault(),C.changeStep(C._steps.indexOf(K))),9===H.keyCode&&(C._toggleStepTabIndex(He,Ot),C._toggleOutlineStyles(He,!1),Ot.focus())}),_r.on(S,Id,function(H){var K=Tn.parents(H.currentTarget,".".concat(Mc))[0],Ee=(K=Tn.findOne(".".concat(fs),K),Tn.findOne(".".concat(fs),C.activeStep));9===H.keyCode&&(C._toggleStepTabIndex(K,Ee),C._toggleOutlineStyles(!1,Ee),Ee.focus())})})}},{key:"_toggleStepTabIndex",value:function(C,S){C&&C.setAttribute("tabIndex",-1),S&&S.setAttribute("tabIndex",0)}},{key:"_toggleOutlineStyles",value:function(C,S){C&&(C.style.outline=""),S&&(S.style.outline="revert")}},{key:"_toggleDisabled",value:function(){this._toggleStepClass(this._activeStepIndex,"add",Lm),this._toggleStepClass(this._activeStepIndex,"add",this._options.stepperDisabled)}},{key:"_toggleActive",value:function(C){this._toggleStepClass(C,"add",Kh),this._toggleStepClass(this._activeStepIndex,"remove",Kh),this._toggleStepClass(C,"add",this._options.stepperActive),this._toggleStepClass(this._activeStepIndex,"remove",this._options.stepperActive)}},{key:"_toggleCompleted",value:function(C){this._toggleStepClass(C,"add",hp),this._toggleStepClass(C,"remove",Jd),this._toggleStepClass(C,"add",this._options.stepperCompleted),this._toggleStepClass(C,"remove",this._options.stepperInvalid)}},{key:"_hideInactiveSteps",value:function(){var C=this;this._steps.forEach(function(S){S.classList.contains(Kh)||C._hideElement(Tn.findOne(".".concat(Fs),S))})}},{key:"_setHeight",value:function(C){var S=Tn.findOne(".".concat(Fs),C),H=getComputedStyle(S),K=(C=Tn.findOne(".".concat(fs),C),getComputedStyle(C));S=S.offsetHeight+parseFloat(H.marginTop)+parseFloat(H.marginBottom),H=C.offsetHeight+parseFloat(K.marginTop)+parseFloat(K.marginBottom),this._element.style.height="".concat(H+S,"px")}},{key:"_hideElement",value:function(C){Tn.parents(C,".".concat(Mc))[0].classList.contains(Kh)||this._currentView===ul?C.classList.add(dp):C.style.display="none"}},{key:"_showElement",value:function(C){this._currentView===ul?C.classList.remove(dp):C.style.display="block"}},{key:"_animateHorizontalStep",value:function(C){var S,H=this,K=C>this._activeStepIndex,Ee=Tn.findOne(".".concat(Fs),this._steps[C]),Te=Tn.findOne(".".concat(Fs),this.activeStep);this._steps.forEach(function(He,Ot){He=Tn.findOne(".".concat(Fs),He),H._clearStepAnimation(He),Ot!==C&&Ot!==H._activeStepIndex&&H._hideElement(He)}),K=K?(S="slide-out-left","slide-in-right"):(S="slide-out-right","slide-in-left"),Te.classList.add(S,"animation","fast"),Ee.classList.add(K,"animation","fast"),this._setHeight(this._steps[C]),_r.one(Te,lh,function(He){H._clearStepAnimation(He.target),H._hideElement(He.target)}),_r.one(Ee,lh,function(He){H._clearStepAnimation(He.target)})}},{key:"_animateVerticalStep",value:function(C){C=Tn.findOne(".".concat(Fs),this._steps[C]);var S=Tn.findOne(".".concat(Fs),this.activeStep);this._hideElement(S),this._showElement(C)}},{key:"_clearStepAnimation",value:function(C){C.classList.remove("slide-out-left","slide-in-right","slide-out-right","slide-in-left","animation","fast")}}])&&Df(D.prototype,L),N&&Df(D,N),Object.defineProperty(D,"prototype",{writable:!1}),M}();Tn.find('[data-mdb-stepper="stepper"]').forEach(function(M){return Md.getInstance(M)||new Md(M)}),Wa=Md,window.Alert=Xi,window.Button=we,window.Dropdown=$s,window.Carousel=Un,window.Collapse=ls,window.Offcanvas=mo,window.Modal=Fa,window.Popover=uo,window.ScrollSpy=xi,window.Tab=_n,window.Toast=Io,window.Tooltip=qc,window.Ripple=xd,window.Datepicker=nu,window.Timepicker=v,window.Stepper=Wa}])},3562:(me,we,v)=>{"use strict";var O=v(9075),d=v(3018),te=v(2958),l=v.n(te),J=v(8583),de=v(9412),_e=v(5917),se=v(6215),he=v(9112),ce=v(9897),ie=v(3410),fe=v(8071),be=v(1439),xe=v(9193),Fe=v(2441),Ye=v(9765),Se=v(8002),Je=v(5345);function ht(T,x){return"function"==typeof x?y=>y.pipe(ht((R,W)=>(0,de.D)(T(R,W)).pipe((0,Se.U)((le,Ze)=>x(R,le,W,Ze))))):y=>y.lift(new yt(T))}class yt{constructor(x){this.project=x}call(x,y){return y.subscribe(new St(x,this.project))}}class St extends Je.Ds{constructor(x,y){super(x),this.project=y,this.index=0}_next(x){let y;const R=this.index++;try{y=this.project(x,R)}catch(W){return void this.destination.error(W)}this._innerSub(y)}_innerSub(x){const y=this.innerSubscription;y&&y.unsubscribe();const R=new Je.IY(this),W=this.destination;W.add(R),this.innerSubscription=(0,Je.ft)(x,R),this.innerSubscription!==R&&W.add(this.innerSubscription)}_complete(){const{innerSubscription:x}=this;(!x||x.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(x){this.destination.next(x)}}var $t=v(7393),Tt=v(7108);function Ct(T){return x=>0===T?(0,xe.c)():x.lift(new Bt(T))}class Bt{constructor(x){if(this.total=x,this.total<0)throw new Tt.W}call(x,y){return y.subscribe(new Kt(x,this.total))}}class Kt extends $t.L{constructor(x,y){super(x),this.total=y,this.count=0}_next(x){const y=this.total,R=++this.count;R<=y&&(this.destination.next(x),R===y&&(this.destination.complete(),this.unsubscribe()))}}var xt=v(4869);function Lt(T,x){let y=!1;return arguments.length>=2&&(y=!0),function(W){return W.lift(new Xt(T,x,y))}}class Xt{constructor(x,y,R=!1){this.accumulator=x,this.seed=y,this.hasSeed=R}call(x,y){return y.subscribe(new Zt(x,this.accumulator,this.seed,this.hasSeed))}}class Zt extends $t.L{constructor(x,y,R,W){super(x),this.accumulator=y,this._seed=R,this.hasSeed=W,this.index=0}get seed(){return this._seed}set seed(x){this.hasSeed=!0,this._seed=x}_next(x){if(this.hasSeed)return this._tryNext(x);this.seed=x,this.destination.next(x)}_tryNext(x){const y=this.index++;let R;try{R=this.accumulator(this.seed,x,y)}catch(W){this.destination.error(W)}this.seed=R,this.destination.next(R)}}var cn=v(5435);function mn(T){return function(y){const R=new Lr(T),W=y.lift(R);return R.caught=W}}class Lr{constructor(x){this.selector=x}call(x,y){return y.subscribe(new Jn(x,this.selector,this.caught))}}class Jn extends Je.Ds{constructor(x,y,R){super(x),this.selector=y,this.caught=R}error(x){if(!this.isStopped){let y;try{y=this.selector(x,this.caught)}catch(le){return void super.error(le)}this._unsubscribeAndRecycle();const R=new Je.IY(this);this.add(R);const W=(0,Je.ft)(y,R);W!==R&&this.add(W)}}}var fr=v(4612);function Fr(T){return function(y){return 0===T?(0,xe.c)():y.lift(new si(T))}}class si{constructor(x){if(this.total=x,this.total<0)throw new Tt.W}call(x,y){return y.subscribe(new yi(x,this.total))}}class yi extends $t.L{constructor(x,y){super(x),this.total=y,this.ring=new Array,this.count=0}_next(x){const y=this.ring,R=this.total,W=this.count++;y.length<R?y.push(x):y[W%R]=x}_complete(){const x=this.destination;let y=this.count;if(y>0){const R=this.count>=this.total?this.total:this.count,W=this.ring;for(let le=0;le<R;le++){const Ze=y++%R;x.next(W[Ze])}}x.complete()}}function Ti(T=An){return x=>x.lift(new Pi(T))}class Pi{constructor(x){this.errorFactory=x}call(x,y){return y.subscribe(new Nt(x,this.errorFactory))}}class Nt extends $t.L{constructor(x,y){super(x),this.errorFactory=y,this.hasValue=!1}_next(x){this.hasValue=!0,this.destination.next(x)}_complete(){if(this.hasValue)return this.destination.complete();{let x;try{x=this.errorFactory()}catch(y){x=y}this.destination.error(x)}}}function An(){return new ie.K}function ni(T=null){return x=>x.lift(new ui(T))}class ui{constructor(x){this.defaultValue=x}call(x,y){return y.subscribe(new vi(x,this.defaultValue))}}class vi extends $t.L{constructor(x,y){super(x),this.defaultValue=y,this.isEmpty=!0}_next(x){this.isEmpty=!1,this.destination.next(x)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Zn=v(4487);function Ur(T,x){const y=arguments.length>=2;return R=>R.pipe(T?(0,cn.h)((W,le)=>T(W,le,R)):Zn.y,Ct(1),y?ni(x):Ti(()=>new ie.K))}var gr=v(9773),ri=v(8640),bi=v(9105);function pr(T,x,y){return function(W){return W.lift(new _o(T,x,y))}}class _o{constructor(x,y,R){this.nextOrObserver=x,this.error=y,this.complete=R}call(x,y){return y.subscribe(new fi(x,this.nextOrObserver,this.error,this.complete))}}class fi extends $t.L{constructor(x,y,R,W){super(x),this._tapNext=ri.Z,this._tapError=ri.Z,this._tapComplete=ri.Z,this._tapError=R||ri.Z,this._tapComplete=W||ri.Z,(0,bi.m)(y)?(this._context=this,this._tapNext=y):y&&(this._context=y,this._tapNext=y.next||ri.Z,this._tapError=y.error||ri.Z,this._tapComplete=y.complete||ri.Z)}_next(x){try{this._tapNext.call(this._context,x)}catch(y){return void this.destination.error(y)}this.destination.next(x)}_error(x){try{this._tapError.call(this._context,x)}catch(y){return void this.destination.error(y)}this.destination.error(x)}_complete(){try{this._tapComplete.call(this._context)}catch(x){return void this.destination.error(x)}return this.destination.complete()}}var pi=v(1307),ii=v(826);class nr{constructor(x){this.callback=x}call(x,y){return y.subscribe(new Hr(x,this.callback))}}class Hr extends $t.L{constructor(x,y){super(x),this.add(new ii.w(y))}}var Gr=v(3282);class Er{constructor(x,y){this.id=x,this.url=y}}class Cr extends Er{constructor(x,y,R="imperative",W=null){super(x,y),this.navigationTrigger=R,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lr extends Er{constructor(x,y,R){super(x,y),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ir extends Er{constructor(x,y,R){super(x,y),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pt extends Er{constructor(x,y,R){super(x,y),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qe extends Er{constructor(x,y,R,W){super(x,y),this.urlAfterRedirects=R,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe extends Er{constructor(x,y,R,W){super(x,y),this.urlAfterRedirects=R,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends Er{constructor(x,y,R,W,le){super(x,y),this.urlAfterRedirects=R,this.state=W,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qt extends Er{constructor(x,y,R,W){super(x,y),this.urlAfterRedirects=R,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends Er{constructor(x,y,R,W){super(x,y),this.urlAfterRedirects=R,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wt{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class On{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fn{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rr{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vi{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ao{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tr{constructor(x,y,R){this.routerEvent=x,this.position=y,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nn="primary";class mi{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const y=this.params[x];return Array.isArray(y)?y[0]:y}return null}getAll(x){if(this.has(x)){const y=this.params[x];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function ke(T){return new mi(T)}const ne="ngNavigationCancelingError";function ue(T){const x=Error("NavigationCancelingError: "+T);return x[ne]=!0,x}function Ge(T,x,y){const R=y.path.split("/");if(R.length>T.length||"full"===y.pathMatch&&(x.hasChildren()||R.length<T.length))return null;const W={};for(let le=0;le<R.length;le++){const Ze=R[le],lt=T[le];if(Ze.startsWith(":"))W[Ze.substring(1)]=lt;else if(Ze!==lt.path)return null}return{consumed:T.slice(0,R.length),posParams:W}}function vt(T,x){const y=T?Object.keys(T):void 0,R=x?Object.keys(x):void 0;if(!y||!R||y.length!=R.length)return!1;let W;for(let le=0;le<y.length;le++)if(W=y[le],!wt(T[W],x[W]))return!1;return!0}function wt(T,x){if(Array.isArray(T)&&Array.isArray(x)){if(T.length!==x.length)return!1;const y=[...T].sort(),R=[...x].sort();return y.every((W,le)=>R[le]===W)}return T===x}function at(T){return Array.prototype.concat.apply([],T)}function It(T){return T.length>0?T[T.length-1]:null}function wn(T,x){for(const y in T)T.hasOwnProperty(y)&&x(T[y],y)}function Jt(T){return(0,d.\u0275isObservable)(T)?T:(0,d.\u0275isPromise)(T)?(0,de.D)(Promise.resolve(T)):(0,_e.of)(T)}const sr={exact:function Vr(T,x,y){if(!Zr(T.segments,x.segments)||!ut(T.segments,x.segments,y)||T.numberOfChildren!==x.numberOfChildren)return!1;for(const R in x.children)if(!T.children[R]||!Vr(T.children[R],x.children[R],y))return!1;return!0},subset:ai},tr={exact:function(T,x){return vt(T,x)},subset:function(T,x){return Object.keys(x).length<=Object.keys(T).length&&Object.keys(x).every(y=>wt(T[y],x[y]))},ignored:()=>!0};function Xn(T,x,y){return sr[y.paths](T.root,x.root,y.matrixParams)&&tr[y.queryParams](T.queryParams,x.queryParams)&&!("exact"===y.fragment&&T.fragment!==x.fragment)}function ai(T,x,y){return qn(T,x,x.segments,y)}function qn(T,x,y,R){if(T.segments.length>y.length){const W=T.segments.slice(0,y.length);return!(!Zr(W,y)||x.hasChildren()||!ut(W,y,R))}if(T.segments.length===y.length){if(!Zr(T.segments,y)||!ut(T.segments,y,R))return!1;for(const W in x.children)if(!T.children[W]||!ai(T.children[W],x.children[W],R))return!1;return!0}{const W=y.slice(0,T.segments.length),le=y.slice(T.segments.length);return!!(Zr(T.segments,W)&&ut(T.segments,W,R)&&T.children[Nn])&&qn(T.children[Nn],x,le,R)}}function ut(T,x,y){return x.every((R,W)=>tr[y](T[W].parameters,R.parameters))}class hr{constructor(x,y,R){this.root=x,this.queryParams=y,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ke(this.queryParams)),this._queryParamMap}toString(){return We.serialize(this)}}class Bn{constructor(x,y){this.segments=x,this.children=y,this.parent=null,wn(y,(R,W)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bt(this)}}class Wi{constructor(x,y){this.path=x,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=ke(this.parameters)),this._parameterMap}toString(){return qi(this)}}function Zr(T,x){return T.length===x.length&&T.every((y,R)=>y.path===x[R].path)}class dt{}class Ne{parse(x){const y=new Mt(x);return new hr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(x){const y=`/${Sn(x.root,!0)}`,R=function(T){const x=Object.keys(T).map(y=>{const R=T[y];return Array.isArray(R)?R.map(W=>`${Br(y)}=${Br(W)}`).join("&"):`${Br(y)}=${Br(R)}`}).filter(y=>!!y);return x.length?`?${x.join("&")}`:""}(x.queryParams);var T;return`${y}${R}${"string"==typeof x.fragment?`#${T=x.fragment,encodeURI(T)}`:""}`}}const We=new Ne;function bt(T){return T.segments.map(x=>qi(x)).join("/")}function Sn(T,x){if(!T.hasChildren())return bt(T);if(x){const y=T.children[Nn]?Sn(T.children[Nn],!1):"",R=[];return wn(T.children,(W,le)=>{le!==Nn&&R.push(`${le}:${Sn(W,!1)}`)}),R.length>0?`${y}(${R.join("//")})`:y}{const y=function(T,x){let y=[];return wn(T.children,(R,W)=>{W===Nn&&(y=y.concat(x(R,W)))}),wn(T.children,(R,W)=>{W!==Nn&&(y=y.concat(x(R,W)))}),y}(T,(R,W)=>W===Nn?[Sn(T.children[Nn],!1)]:[`${W}:${Sn(R,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Nn]?`${bt(T)}/${y[0]}`:`${bt(T)}/(${y.join("//")})`}}function vr(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Br(T){return vr(T).replace(/%3B/gi,";")}function Ui(T){return vr(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ts(T){return decodeURIComponent(T)}function ss(T){return ts(T.replace(/\+/g,"%20"))}function qi(T){return`${Ui(T.path)}${function(T){return Object.keys(T).map(x=>`;${Ui(x)}=${Ui(T[x])}`).join("")}(T.parameters)}`}const Ms=/^[^\/()?;=#]+/;function ms(T){const x=T.match(Ms);return x?x[0]:""}const Et=/^[^=?&#]+/,Be=/^[^?&#]+/;class Mt{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(x.length>0||Object.keys(y).length>0)&&(R[Nn]=new Bn(x,y)),R}parseSegment(){const x=ms(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new Wi(ts(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const y=ms(this.remaining);if(!y)return;this.capture(y);let R="";if(this.consumeOptional("=")){const W=ms(this.remaining);W&&(R=W,this.capture(R))}x[ts(y)]=ts(R)}parseQueryParam(x){const y=function(T){const x=T.match(Et);return x?x[0]:""}(this.remaining);if(!y)return;this.capture(y);let R="";if(this.consumeOptional("=")){const Ze=function(T){const x=T.match(Be);return x?x[0]:""}(this.remaining);Ze&&(R=Ze,this.capture(R))}const W=ss(y),le=ss(R);if(x.hasOwnProperty(W)){let Ze=x[W];Array.isArray(Ze)||(Ze=[Ze],x[W]=Ze),Ze.push(le)}else x[W]=le}parseParens(x){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=ms(this.remaining),W=this.remaining[R.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let le;R.indexOf(":")>-1?(le=R.substr(0,R.indexOf(":")),this.capture(le),this.capture(":")):x&&(le=Nn);const Ze=this.parseChildren();y[le]=1===Object.keys(Ze).length?Ze[Nn]:new Bn([],Ze),this.consumeOptional("//")}return y}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class Ln{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const y=this.pathFromRoot(x);return y.length>1?y[y.length-2]:null}children(x){const y=Yn(x,this._root);return y?y.children.map(R=>R.value):[]}firstChild(x){const y=Yn(x,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(x){const y=Fn(x,this._root);return y.length<2?[]:y[y.length-2].children.map(W=>W.value).filter(W=>W!==x)}pathFromRoot(x){return Fn(x,this._root).map(y=>y.value)}}function Yn(T,x){if(T===x.value)return x;for(const y of x.children){const R=Yn(T,y);if(R)return R}return null}function Fn(T,x){if(T===x.value)return[x];for(const y of x.children){const R=Fn(T,y);if(R.length)return R.unshift(x),R}return[]}class Ar{constructor(x,y){this.value=x,this.children=y}toString(){return`TreeNode(${this.value})`}}function oi(T){const x={};return T&&T.children.forEach(y=>x[y.value.outlet]=y),x}class zi extends Ln{constructor(x,y){super(x),this.snapshot=y,xr(this,x)}toString(){return this.snapshot.toString()}}function Wr(T,x){const y=function(T,x){const Ze=new ba([],{},{},"",{},Nn,x,null,T.root,-1,{});return new Ul("",new Ar(Ze,[]))}(T,x),R=new se.X([new Wi("",{})]),W=new se.X({}),le=new se.X({}),Ze=new se.X({}),lt=new se.X(""),nn=new va(R,W,Ze,lt,le,Nn,x,y.root);return nn.snapshot=y.root,new zi(new Ar(nn,[]),y)}class va{constructor(x,y,R,W,le,Ze,lt,nn){this.url=x,this.params=y,this.queryParams=R,this.fragment=W,this.data=le,this.outlet=Ze,this.component=lt,this._futureSnapshot=nn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Se.U)(x=>ke(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Se.U)(x=>ke(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qa(T,x="emptyOnly"){const y=T.pathFromRoot;let R=0;if("always"!==x)for(R=y.length-1;R>=1;){const W=y[R],le=y[R-1];if(W.routeConfig&&""===W.routeConfig.path)R--;else{if(le.component)break;R--}}return function(T){return T.reduce((x,y)=>({params:Object.assign(Object.assign({},x.params),y.params),data:Object.assign(Object.assign({},x.data),y.data),resolve:Object.assign(Object.assign({},x.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(R))}class ba{constructor(x,y,R,W,le,Ze,lt,nn,cr,Ii,Dr){this.url=x,this.params=y,this.queryParams=R,this.fragment=W,this.data=le,this.outlet=Ze,this.component=lt,this.routeConfig=nn,this._urlSegment=cr,this._lastPathIndex=Ii,this._resolve=Dr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ke(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ke(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ul extends Ln{constructor(x,y){super(y),this.url=x,xr(this,y)}toString(){return xa(this._root)}}function xr(T,x){x.value._routerState=T,x.children.forEach(y=>xr(T,y))}function xa(T){const x=T.children.length>0?` { ${T.children.map(xa).join(", ")} } `:"";return`${T.value}${x}`}function yl(T){if(T.snapshot){const x=T.snapshot,y=T._futureSnapshot;T.snapshot=y,vt(x.queryParams,y.queryParams)||T.queryParams.next(y.queryParams),x.fragment!==y.fragment&&T.fragment.next(y.fragment),vt(x.params,y.params)||T.params.next(y.params),function(T,x){if(T.length!==x.length)return!1;for(let y=0;y<T.length;++y)if(!vt(T[y],x[y]))return!1;return!0}(x.url,y.url)||T.url.next(y.url),vt(x.data,y.data)||T.data.next(y.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function vl(T,x){const y=vt(T.params,x.params)&&function(T,x){return Zr(T,x)&&T.every((y,R)=>vt(y.parameters,x[R].parameters))}(T.url,x.url);return y&&!(!T.parent!=!x.parent)&&(!T.parent||vl(T.parent,x.parent))}function Us(T,x,y){if(y&&T.shouldReuseRoute(x.value,y.value.snapshot)){const R=y.value;R._futureSnapshot=x.value;const W=function(T,x,y){return x.children.map(R=>{for(const W of y.children)if(T.shouldReuseRoute(R.value,W.value.snapshot))return Us(T,R,W);return Us(T,R)})}(T,x,y);return new Ar(R,W)}{if(T.shouldAttach(x.value)){const le=T.retrieve(x.value);if(null!==le){const Ze=le.route;return fu(x,Ze),Ze}}const R=function(T){return new va(new se.X(T.url),new se.X(T.params),new se.X(T.queryParams),new se.X(T.fragment),new se.X(T.data),T.outlet,T.component,T)}(x.value),W=x.children.map(le=>Us(T,le));return new Ar(R,W)}}function fu(T,x){if(T.value.routeConfig!==x.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(T.children.length!==x.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");x.value._futureSnapshot=T.value;for(let y=0;y<T.children.length;++y)fu(T.children[y],x.children[y])}function As(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function as(T){return"object"==typeof T&&null!=T&&T.outlets}function Xi(T,x,y,R,W){let le={};return R&&wn(R,(Ze,lt)=>{le[lt]=Array.isArray(Ze)?Ze.map(nn=>`${nn}`):`${Ze}`}),new hr(y.root===T?x:$s(y.root,T,x),le,W)}function $s(T,x,y){const R={};return wn(T.children,(W,le)=>{R[le]=W===x?y:$s(W,x,y)}),new Bn(T.segments,R)}class Rc{constructor(x,y,R){if(this.isAbsolute=x,this.numberOfDoubleDots=y,this.commands=R,x&&R.length>0&&As(R[0]))throw new Error("Root segment cannot have matrix parameters");const W=R.find(as);if(W&&W!==It(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wa{constructor(x,y,R){this.segmentGroup=x,this.processChildren=y,this.index=R}}function hc(T,x,y){if(T||(T=new Bn([],{})),0===T.segments.length&&T.hasChildren())return Lc(T,x,y);const R=function(T,x,y){let R=0,W=x;const le={match:!1,pathIndex:0,commandIndex:0};for(;W<T.segments.length;){if(R>=y.length)return le;const Ze=T.segments[W],lt=y[R];if(as(lt))break;const nn=`${lt}`,cr=R<y.length-1?y[R+1]:null;if(W>0&&void 0===nn)break;if(nn&&cr&&"object"==typeof cr&&void 0===cr.outlets){if(!Ca(nn,cr,Ze))return le;R+=2}else{if(!Ca(nn,{},Ze))return le;R++}W++}return{match:!0,pathIndex:W,commandIndex:R}}(T,x,y),W=y.slice(R.commandIndex);if(R.match&&R.pathIndex<T.segments.length){const le=new Bn(T.segments.slice(0,R.pathIndex),{});return le.children[Nn]=new Bn(T.segments.slice(R.pathIndex),T.children),Lc(le,0,W)}return R.match&&0===W.length?new Bn(T.segments,{}):R.match&&!T.hasChildren()?mo(T,x,y):R.match?Lc(T,0,W):mo(T,x,y)}function Lc(T,x,y){if(0===y.length)return new Bn(T.segments,{});{const R=function(T){return as(T[0])?T[0].outlets:{[Nn]:T}}(y),W={};return wn(R,(le,Ze)=>{"string"==typeof le&&(le=[le]),null!==le&&(W[Ze]=hc(T.children[Ze],x,le))}),wn(T.children,(le,Ze)=>{void 0===R[Ze]&&(W[Ze]=le)}),new Bn(T.segments,W)}}function mo(T,x,y){const R=T.segments.slice(0,x);let W=0;for(;W<y.length;){const le=y[W];if(as(le)){const nn=Ea(le.outlets);return new Bn(R,nn)}if(0===W&&As(y[0])){R.push(new Wi(T.segments[x].path,el(y[0]))),W++;continue}const Ze=as(le)?le.outlets[Nn]:`${le}`,lt=W<y.length-1?y[W+1]:null;Ze&&lt&&As(lt)?(R.push(new Wi(Ze,el(lt))),W+=2):(R.push(new Wi(Ze,{})),W++)}return new Bn(R,{})}function Ea(T){const x={};return wn(T,(y,R)=>{"string"==typeof y&&(y=[y]),null!==y&&(x[R]=mo(new Bn([],{}),0,y))}),x}function el(T){const x={};return wn(T,(y,R)=>x[R]=`${y}`),x}function Ca(T,x,y){return T==y.path&&vt(x,y.parameters)}class cs{constructor(x,y,R,W){this.routeReuseStrategy=x,this.futureState=y,this.currState=R,this.forwardEvent=W}activate(x){const y=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,R,x),yl(this.futureState.root),this.activateChildRoutes(y,R,x)}deactivateChildRoutes(x,y,R){const W=oi(y);x.children.forEach(le=>{const Ze=le.value.outlet;this.deactivateRoutes(le,W[Ze],R),delete W[Ze]}),wn(W,(le,Ze)=>{this.deactivateRouteAndItsChildren(le,R)})}deactivateRoutes(x,y,R){const W=x.value,le=y?y.value:null;if(W===le)if(W.component){const Ze=R.getContext(W.outlet);Ze&&this.deactivateChildRoutes(x,y,Ze.children)}else this.deactivateChildRoutes(x,y,R);else le&&this.deactivateRouteAndItsChildren(y,R)}deactivateRouteAndItsChildren(x,y){this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,y):this.deactivateRouteAndOutlet(x,y)}detachAndStoreRouteSubtree(x,y){const R=y.getContext(x.value.outlet);if(R&&R.outlet){const W=R.outlet.detach(),le=R.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:W,route:x,contexts:le})}}deactivateRouteAndOutlet(x,y){const R=y.getContext(x.value.outlet),W=R&&x.value.component?R.children:y,le=oi(x);for(const Ze of Object.keys(le))this.deactivateRouteAndItsChildren(le[Ze],W);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(x,y,R){const W=oi(y);x.children.forEach(le=>{this.activateRoutes(le,W[le.value.outlet],R),this.forwardEvent(new ao(le.value.snapshot))}),x.children.length&&this.forwardEvent(new Rr(x.value.snapshot))}activateRoutes(x,y,R){const W=x.value,le=y?y.value:null;if(yl(W),W===le)if(W.component){const Ze=R.getOrCreateContext(W.outlet);this.activateChildRoutes(x,y,Ze.children)}else this.activateChildRoutes(x,y,R);else if(W.component){const Ze=R.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const lt=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Ze.children.onOutletReAttached(lt.contexts),Ze.attachRef=lt.componentRef,Ze.route=lt.route.value,Ze.outlet&&Ze.outlet.attach(lt.componentRef,lt.route.value),Ta(lt.route)}else{const lt=function(T){for(let x=T.parent;x;x=x.parent){const y=x.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(W.snapshot),nn=lt?lt.module.componentFactoryResolver:null;Ze.attachRef=null,Ze.route=W,Ze.resolver=nn,Ze.outlet&&Ze.outlet.activateWith(W,nn),this.activateChildRoutes(x,null,Ze.children)}}else this.activateChildRoutes(x,null,R)}}function Ta(T){yl(T.value),T.children.forEach(Ta)}class ve{constructor(x,y){this.routes=x,this.module=y}}function ee(T){return"function"==typeof T}function mt(T){return T instanceof hr}const Pr=Symbol("INITIAL_VALUE");function ur(){return ht(T=>(0,he.aj)(T.map(x=>x.pipe(Ct(1),function(...T){const x=T[T.length-1];return(0,xt.K)(x)?(T.pop(),y=>(0,fe.z)(T,y,x)):y=>(0,fe.z)(T,y)}(Pr)))).pipe(Lt((x,y)=>{let R=!1;return y.reduce((W,le,Ze)=>W!==Pr?W:(le===Pr&&(R=!0),R||!1!==le&&Ze!==y.length-1&&!mt(le)?W:le),x)},Pr),(0,cn.h)(x=>x!==Pr),(0,Se.U)(x=>mt(x)?x:!0===x),Ct(1)))}let gi=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,R){1&y&&d.\u0275\u0275element(0,"router-outlet")},directives:function(){return[Cu]},encapsulation:2}),T})();function no(T,x=""){for(let y=0;y<T.length;y++){const R=T[y];hi(R,Zo(x,R))}}function hi(T,x){T.children&&no(T.children,x)}function Zo(T,x){return x?T||x.path?T&&!x.path?`${T}/`:!T&&x.path?x.path:`${T}/${x.path}`:"":T}function Ps(T){const x=T.children&&T.children.map(Ps),y=x?Object.assign(Object.assign({},T),{children:x}):Object.assign({},T);return!y.component&&(x||y.loadChildren)&&y.outlet&&y.outlet!==Nn&&(y.component=gi),y}function Hi(T){return T.outlet||Nn}function Co(T,x){const y=T.filter(R=>Hi(R)===x);return y.push(...T.filter(R=>Hi(R)!==x)),y}const tl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Da(T,x,y){var R;if(""===x.path)return"full"===x.pathMatch&&(T.hasChildren()||y.length>0)?Object.assign({},tl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const le=(x.matcher||Ge)(y,T,x);if(!le)return Object.assign({},tl);const Ze={};wn(le.posParams,(nn,cr)=>{Ze[cr]=nn.path});const lt=le.consumed.length>0?Object.assign(Object.assign({},Ze),le.consumed[le.consumed.length-1].parameters):Ze;return{matched:!0,consumedSegments:le.consumed,lastChild:le.consumed.length,parameters:lt,positionalParamSegments:null!==(R=le.posParams)&&void 0!==R?R:{}}}function Sa(T,x,y,R,W="corrected"){if(y.length>0&&function(T,x,y){return y.some(R=>Fc(T,x,R)&&Hi(R)!==Nn)}(T,y,R)){const Ze=new Bn(x,function(T,x,y,R){const W={};W[Nn]=R,R._sourceSegment=T,R._segmentIndexShift=x.length;for(const le of y)if(""===le.path&&Hi(le)!==Nn){const Ze=new Bn([],{});Ze._sourceSegment=T,Ze._segmentIndexShift=x.length,W[Hi(le)]=Ze}return W}(T,x,R,new Bn(y,T.children)));return Ze._sourceSegment=T,Ze._segmentIndexShift=x.length,{segmentGroup:Ze,slicedSegments:[]}}if(0===y.length&&function(T,x,y){return y.some(R=>Fc(T,x,R))}(T,y,R)){const Ze=new Bn(T.segments,function(T,x,y,R,W,le){const Ze={};for(const lt of R)if(Fc(T,y,lt)&&!W[Hi(lt)]){const nn=new Bn([],{});nn._sourceSegment=T,nn._segmentIndexShift="legacy"===le?T.segments.length:x.length,Ze[Hi(lt)]=nn}return Object.assign(Object.assign({},W),Ze)}(T,x,y,R,T.children,W));return Ze._sourceSegment=T,Ze._segmentIndexShift=x.length,{segmentGroup:Ze,slicedSegments:y}}const le=new Bn(T.segments,T.children);return le._sourceSegment=T,le._segmentIndexShift=x.length,{segmentGroup:le,slicedSegments:y}}function Fc(T,x,y){return(!(T.hasChildren()||x.length>0)||"full"!==y.pathMatch)&&""===y.path}function _u(T,x,y,R){return!!(Hi(T)===R||R!==Nn&&Fc(x,y,T))&&("**"===T.path||Da(x,T,y).matched)}function $l(T,x,y){return 0===x.length&&!T.children[y]}class Ia{constructor(x){this.segmentGroup=x||null}}class yu{constructor(x){this.urlTree=x}}function nl(T){return new ce.y(x=>x.error(new Ia(T)))}function Gl(T){return new ce.y(x=>x.error(new yu(T)))}function En(T){return new ce.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T}'`)))}class Po{constructor(x,y,R,W,le){this.configLoader=y,this.urlSerializer=R,this.urlTree=W,this.config=le,this.allowRedirects=!0,this.ngModule=x.get(d.NgModuleRef)}apply(){const x=Sa(this.urlTree.root,[],[],this.config).segmentGroup,y=new Bn(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,y,Nn).pipe((0,Se.U)(le=>this.createUrlTree(wl(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mn(le=>{if(le instanceof yu)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof Ia?this.noMatchError(le):le}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,Nn).pipe((0,Se.U)(W=>this.createUrlTree(wl(W),x.queryParams,x.fragment))).pipe(mn(W=>{throw W instanceof Ia?this.noMatchError(W):W}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,y,R){const W=x.segments.length>0?new Bn([],{[Nn]:x}):x;return new hr(W,y,R)}expandSegmentGroup(x,y,R,W){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(x,y,R).pipe((0,Se.U)(le=>new Bn([],le))):this.expandSegment(x,R,y,R.segments,W,!0)}expandChildren(x,y,R){const W=[];for(const le of Object.keys(R.children))"primary"===le?W.unshift(le):W.push(le);return(0,de.D)(W).pipe((0,fr.b)(le=>{const Ze=R.children[le],lt=Co(y,le);return this.expandSegmentGroup(x,lt,Ze,le).pipe((0,Se.U)(nn=>({segment:nn,outlet:le})))}),Lt((le,Ze)=>(le[Ze.outlet]=Ze.segment,le),{}),function(T,x){const y=arguments.length>=2;return R=>R.pipe(T?(0,cn.h)((W,le)=>T(W,le,R)):Zn.y,Fr(1),y?ni(x):Ti(()=>new ie.K))}())}expandSegment(x,y,R,W,le,Ze){return(0,de.D)(R).pipe((0,fr.b)(lt=>this.expandSegmentAgainstRoute(x,y,R,lt,W,le,Ze).pipe(mn(cr=>{if(cr instanceof Ia)return(0,_e.of)(null);throw cr}))),Ur(lt=>!!lt),mn((lt,nn)=>{if(lt instanceof ie.K||"EmptyError"===lt.name){if($l(y,W,le))return(0,_e.of)(new Bn([],{}));throw new Ia(y)}throw lt}))}expandSegmentAgainstRoute(x,y,R,W,le,Ze,lt){return _u(W,y,le,Ze)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(x,y,W,le,Ze):lt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,y,R,W,le,Ze):nl(y):nl(y)}expandSegmentAgainstRouteUsingRedirect(x,y,R,W,le,Ze){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,R,W,Ze):this.expandRegularSegmentAgainstRouteUsingRedirect(x,y,R,W,le,Ze)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,y,R,W){const le=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?Gl(le):this.lineralizeSegments(R,le).pipe((0,gr.zg)(Ze=>{const lt=new Bn(Ze,{});return this.expandSegment(x,lt,y,Ze,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,y,R,W,le,Ze){const{matched:lt,consumedSegments:nn,lastChild:cr,positionalParamSegments:Ii}=Da(y,W,le);if(!lt)return nl(y);const Dr=this.applyRedirectCommands(nn,W.redirectTo,Ii);return W.redirectTo.startsWith("/")?Gl(Dr):this.lineralizeSegments(W,Dr).pipe((0,gr.zg)(Zi=>this.expandSegment(x,y,R,Zi.concat(le.slice(cr)),Ze,!1)))}matchSegmentAgainstRoute(x,y,R,W,le){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,_e.of)(R._loadedConfig):this.configLoader.load(x.injector,R)).pipe((0,Se.U)(Zi=>(R._loadedConfig=Zi,new Bn(W,{})))):(0,_e.of)(new Bn(W,{}));const{matched:Ze,consumedSegments:lt,lastChild:nn}=Da(y,R,W);if(!Ze)return nl(y);const cr=W.slice(nn);return this.getChildConfig(x,R,W).pipe((0,gr.zg)(Dr=>{const Zi=Dr.module,$r=Dr.routes,{segmentGroup:Ga,slicedSegments:Js}=Sa(y,lt,cr,$r),is=new Bn(Ga.segments,Ga.children);if(0===Js.length&&is.hasChildren())return this.expandChildren(Zi,$r,is).pipe((0,Se.U)(su=>new Bn(lt,su)));if(0===$r.length&&0===Js.length)return(0,_e.of)(new Bn(lt,{}));const kl=Hi(R)===le;return this.expandSegment(Zi,is,$r,Js,kl?Nn:le,!0).pipe((0,Se.U)(Go=>new Bn(lt.concat(Go.segments),Go.children)))}))}getChildConfig(x,y,R){return y.children?(0,_e.of)(new ve(y.children,x)):y.loadChildren?void 0!==y._loadedConfig?(0,_e.of)(y._loadedConfig):this.runCanLoadGuards(x.injector,y,R).pipe((0,gr.zg)(W=>{return W?this.configLoader.load(x.injector,y).pipe((0,Se.U)(le=>(y._loadedConfig=le,le))):(T=y,new ce.y(x=>x.error(ue(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))));var T})):(0,_e.of)(new ve([],x))}runCanLoadGuards(x,y,R){const W=y.canLoad;if(!W||0===W.length)return(0,_e.of)(!0);const le=W.map(Ze=>{const lt=x.get(Ze);let nn;if((T=lt)&&ee(T.canLoad))nn=lt.canLoad(y,R);else{if(!ee(lt))throw new Error("Invalid CanLoad guard");nn=lt(y,R)}var T;return Jt(nn)});return(0,_e.of)(le).pipe(ur(),pr(Ze=>{if(!mt(Ze))return;const lt=ue(`Redirecting to "${this.urlSerializer.serialize(Ze)}"`);throw lt.url=Ze,lt}),(0,Se.U)(Ze=>!0===Ze))}lineralizeSegments(x,y){let R=[],W=y.root;for(;;){if(R=R.concat(W.segments),0===W.numberOfChildren)return(0,_e.of)(R);if(W.numberOfChildren>1||!W.children[Nn])return En(x.redirectTo);W=W.children[Nn]}}applyRedirectCommands(x,y,R){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),x,R)}applyRedirectCreatreUrlTree(x,y,R,W){const le=this.createSegmentGroup(x,y.root,R,W);return new hr(le,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(x,y){const R={};return wn(x,(W,le)=>{if("string"==typeof W&&W.startsWith(":")){const lt=W.substring(1);R[le]=y[lt]}else R[le]=W}),R}createSegmentGroup(x,y,R,W){const le=this.createSegments(x,y.segments,R,W);let Ze={};return wn(y.children,(lt,nn)=>{Ze[nn]=this.createSegmentGroup(x,lt,R,W)}),new Bn(le,Ze)}createSegments(x,y,R,W){return y.map(le=>le.path.startsWith(":")?this.findPosParam(x,le,W):this.findOrReturn(le,R))}findPosParam(x,y,R){const W=R[y.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${x}'. Cannot find '${y.path}'.`);return W}findOrReturn(x,y){let R=0;for(const W of y){if(W.path===x.path)return y.splice(R),W;R++}return x}}function wl(T){const x={};for(const R of Object.keys(T.children)){const le=wl(T.children[R]);(le.segments.length>0||le.hasChildren())&&(x[R]=le)}return function(T){if(1===T.numberOfChildren&&T.children[Nn]){const x=T.children[Nn];return new Bn(T.segments.concat(x.segments),x.children)}return T}(new Bn(T.segments,x))}class dc{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class fc{constructor(x,y){this.component=x,this.route=y}}function Hu(T,x,y){const R=T._root;return co(R,x?x._root:null,y,[R.value])}function Ma(T,x,y){const R=function(T){if(!T)return null;for(let x=T.parent;x;x=x.parent){const y=x.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(x);return(R?R.module.injector:y).get(T)}function co(T,x,y,R,W={canDeactivateChecks:[],canActivateChecks:[]}){const le=oi(x);return T.children.forEach(Ze=>{(function(T,x,y,R,W={canDeactivateChecks:[],canActivateChecks:[]}){const le=T.value,Ze=x?x.value:null,lt=y?y.getContext(T.value.outlet):null;if(Ze&&le.routeConfig===Ze.routeConfig){const nn=function(T,x,y){if("function"==typeof y)return y(T,x);switch(y){case"pathParamsChange":return!Zr(T.url,x.url);case"pathParamsOrQueryParamsChange":return!Zr(T.url,x.url)||!vt(T.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vl(T,x)||!vt(T.queryParams,x.queryParams);default:return!vl(T,x)}}(Ze,le,le.routeConfig.runGuardsAndResolvers);nn?W.canActivateChecks.push(new dc(R)):(le.data=Ze.data,le._resolvedData=Ze._resolvedData),co(T,x,le.component?lt?lt.children:null:y,R,W),nn&&lt&&lt.outlet&&lt.outlet.isActivated&&W.canDeactivateChecks.push(new fc(lt.outlet.component,Ze))}else Ze&&Os(x,lt,W),W.canActivateChecks.push(new dc(R)),co(T,null,le.component?lt?lt.children:null:y,R,W)})(Ze,le[Ze.value.outlet],y,R.concat([Ze.value]),W),delete le[Ze.value.outlet]}),wn(le,(Ze,lt)=>Os(Ze,y.getContext(lt),W)),W}function Os(T,x,y){const R=oi(T),W=T.value;wn(R,(le,Ze)=>{Os(le,W.component?x?x.children.getContext(Ze):null:x,y)}),y.canDeactivateChecks.push(new fc(W.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,W))}class bu{}function xu(T){return new ce.y(x=>x.error(T))}class El{constructor(x,y,R,W,le,Ze){this.rootComponentType=x,this.config=y,this.urlTree=R,this.url=W,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=Ze}recognize(){const x=Sa(this.urlTree.root,[],[],this.config.filter(Ze=>void 0===Ze.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,x,Nn);if(null===y)return null;const R=new ba([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nn,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Ar(R,y),le=new Ul(this.url,W);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(x){const y=x.value,R=Qa(y,this.paramsInheritanceStrategy);y.params=Object.freeze(R.params),y.data=Object.freeze(R.data),x.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(x,y,R){return 0===y.segments.length&&y.hasChildren()?this.processChildren(x,y):this.processSegment(x,y,y.segments,R)}processChildren(x,y){const R=[];for(const le of Object.keys(y.children)){const Ze=y.children[le],lt=Co(x,le),nn=this.processSegmentGroup(lt,Ze,le);if(null===nn)return null;R.push(...nn)}const W=Pa(R);return W.sort((x,y)=>x.value.outlet===Nn?-1:y.value.outlet===Nn?1:x.value.outlet.localeCompare(y.value.outlet)),W}processSegment(x,y,R,W){for(const le of x){const Ze=this.processSegmentAgainstRoute(le,y,R,W);if(null!==Ze)return Ze}return $l(y,R,W)?[]:null}processSegmentAgainstRoute(x,y,R,W){if(x.redirectTo||!_u(x,y,R,W))return null;let le,Ze=[],lt=[];if("**"===x.path){const $r=R.length>0?It(R).parameters:{};le=new ba(R,$r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uo(x),Hi(x),x.component,x,Zu(y),pc(y)+R.length,Oa(x))}else{const $r=Da(y,x,R);if(!$r.matched)return null;Ze=$r.consumedSegments,lt=R.slice($r.lastChild),le=new ba(Ze,$r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uo(x),Hi(x),x.component,x,Zu(y),pc(y)+Ze.length,Oa(x))}const nn=(T=x).children?T.children:T.loadChildren?T._loadedConfig.routes:[],{segmentGroup:cr,slicedSegments:Ii}=Sa(y,Ze,lt,nn.filter($r=>void 0===$r.redirectTo),this.relativeLinkResolution);var T;if(0===Ii.length&&cr.hasChildren()){const $r=this.processChildren(nn,cr);return null===$r?null:[new Ar(le,$r)]}if(0===nn.length&&0===Ii.length)return[new Ar(le,[])];const Dr=Hi(x)===W,Zi=this.processSegment(nn,cr,Ii,Dr?Nn:W);return null===Zi?null:[new Ar(le,Zi)]}}function Bc(T){const x=T.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Pa(T){const x=[],y=new Set;for(const R of T){if(!Bc(R)){x.push(R);continue}const W=x.find(le=>R.value.routeConfig===le.value.routeConfig);void 0!==W?(W.children.push(...R.children),y.add(W)):x.push(R)}for(const R of y){const W=Pa(R.children);x.push(new Ar(R.value,W))}return x.filter(R=>!y.has(R))}function Zu(T){let x=T;for(;x._sourceSegment;)x=x._sourceSegment;return x}function pc(T){let x=T,y=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,y+=x._segmentIndexShift?x._segmentIndexShift:0;return y-1}function Uo(T){return T.data||{}}function Oa(T){return T.resolve||{}}function gc(T){return ht(x=>{const y=T(x);return y?(0,de.D)(y).pipe((0,Se.U)(()=>x)):(0,_e.of)(x)})}class jc extends class{shouldDetach(x){return!1}store(x,y){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,y){return x.routeConfig===y.routeConfig}}{}const ks=new d.InjectionToken("ROUTES");class _c{constructor(x,y,R,W){this.loader=x,this.compiler=y,this.onLoadStartListener=R,this.onLoadEndListener=W}load(x,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const W=this.loadModuleFactory(y.loadChildren).pipe((0,Se.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(y);const Ze=le.create(x);return new ve(at(Ze.injector.get(ks,void 0,d.InjectFlags.Self|d.InjectFlags.Optional)).map(Ps),Ze)}),mn(le=>{throw y._loader$=void 0,le}));return y._loader$=new Fe.c(W,()=>new Ye.xQ).pipe((0,pi.x)()),y._loader$}loadModuleFactory(x){return"string"==typeof x?(0,de.D)(this.loader.load(x)):Jt(x()).pipe((0,gr.zg)(y=>y instanceof d.NgModuleFactory?(0,_e.of)(y):(0,de.D)(this.compiler.compileModuleAsync(y))))}}class Ra{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ia,this.attachRef=null}}class ia{constructor(){this.contexts=new Map}onChildOutletCreated(x,y){const R=this.getOrCreateContext(x);R.outlet=y,this.contexts.set(x,R)}onChildOutletDestroyed(x){const y=this.getContext(x);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let y=this.getContext(x);return y||(y=new Ra,this.contexts.set(x,y)),y}getContext(x){return this.contexts.get(x)||null}}class Cl{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,y){return x}}function Eu(T){throw T}function Xl(T,x,y){return x.parse("/")}function oa(T,x){return(0,_e.of)(null)}const Un={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class T{constructor(y,R,W,le,Ze,lt,nn,cr){this.rootComponentType=y,this.urlSerializer=R,this.rootContexts=W,this.location=le,this.config=cr,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ye.xQ,this.errorHandler=Eu,this.malformedUriErrorHandler=Xl,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oa,afterPreactivation:oa},this.urlHandlingStrategy=new Cl,this.routeReuseStrategy=new jc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ze.get(d.NgModuleRef),this.console=Ze.get(d.\u0275Console);const Zi=Ze.get(d.NgZone);this.isNgZoneEnabled=Zi instanceof d.NgZone&&d.NgZone.isInAngularZone(),this.resetConfig(cr),this.currentUrlTree=new hr(new Bn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _c(lt,nn,$r=>this.triggerEvent(new Wt($r)),$r=>this.triggerEvent(new On($r))),this.routerState=Wr(this.currentUrlTree,this.rootComponentType),this.transitions=new se.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const R=this.events;return y.pipe((0,cn.h)(W=>0!==W.id),(0,Se.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),ht(W=>{let le=!1,Ze=!1;return(0,_e.of)(W).pipe(pr(lt=>{this.currentNavigation={id:lt.id,initialUrl:lt.currentRawUrl,extractedUrl:lt.extractedUrl,trigger:lt.source,extras:lt.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ht(lt=>{const nn=this.browserUrlTree.toString(),cr=!this.navigated||lt.extractedUrl.toString()!==nn||nn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||cr)&&this.urlHandlingStrategy.shouldProcessUrl(lt.rawUrl))return Ws(lt.source)&&(this.browserUrlTree=lt.extractedUrl),(0,_e.of)(lt).pipe(ht(Dr=>{const Zi=this.transitions.getValue();return R.next(new Cr(Dr.id,this.serializeUrl(Dr.extractedUrl),Dr.source,Dr.restoredState)),Zi!==this.transitions.getValue()?xe.E:Promise.resolve(Dr)}),function(T,x,y,R){return ht(W=>function(T,x,y,R,W){return new Po(T,x,y,R,W).apply()}(T,x,y,W.extractedUrl,R).pipe((0,Se.U)(le=>Object.assign(Object.assign({},W),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),pr(Dr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Dr.urlAfterRedirects})}),function(T,x,y,R,W){return(0,gr.zg)(le=>function(T,x,y,R,W="emptyOnly",le="legacy"){try{const Ze=new El(T,x,y,R,W,le).recognize();return null===Ze?xu(new bu):(0,_e.of)(Ze)}catch(Ze){return xu(Ze)}}(T,x,le.urlAfterRedirects,y(le.urlAfterRedirects),R,W).pipe((0,Se.U)(Ze=>Object.assign(Object.assign({},le),{targetSnapshot:Ze}))))}(this.rootComponentType,this.config,Dr=>this.serializeUrl(Dr),this.paramsInheritanceStrategy,this.relativeLinkResolution),pr(Dr=>{"eager"===this.urlUpdateStrategy&&(Dr.extras.skipLocationChange||this.setBrowserUrl(Dr.urlAfterRedirects,Dr),this.browserUrlTree=Dr.urlAfterRedirects);const Zi=new qe(Dr.id,this.serializeUrl(Dr.extractedUrl),this.serializeUrl(Dr.urlAfterRedirects),Dr.targetSnapshot);R.next(Zi)}));if(cr&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Zi,extractedUrl:$r,source:Ga,restoredState:Js,extras:is}=lt,kl=new Cr(Zi,this.serializeUrl($r),Ga,Js);R.next(kl);const io=Wr($r,this.rootComponentType).snapshot;return(0,_e.of)(Object.assign(Object.assign({},lt),{targetSnapshot:io,urlAfterRedirects:$r,extras:Object.assign(Object.assign({},is),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=lt.rawUrl,this.browserUrlTree=lt.urlAfterRedirects,lt.resolve(null),xe.E}),gc(lt=>{const{targetSnapshot:nn,id:cr,extractedUrl:Ii,rawUrl:Dr,extras:{skipLocationChange:Zi,replaceUrl:$r}}=lt;return this.hooks.beforePreactivation(nn,{navigationId:cr,appliedUrlTree:Ii,rawUrlTree:Dr,skipLocationChange:!!Zi,replaceUrl:!!$r})}),pr(lt=>{const nn=new Xe(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot);this.triggerEvent(nn)}),(0,Se.U)(lt=>Object.assign(Object.assign({},lt),{guards:Hu(lt.targetSnapshot,lt.currentSnapshot,this.rootContexts)})),function(T,x){return(0,gr.zg)(y=>{const{targetSnapshot:R,currentSnapshot:W,guards:{canActivateChecks:le,canDeactivateChecks:Ze}}=y;return 0===Ze.length&&0===le.length?(0,_e.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function(T,x,y,R){return(0,de.D)(T).pipe((0,gr.zg)(W=>function(T,x,y,R,W){const le=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,_e.of)(!0);const Ze=le.map(lt=>{const nn=Ma(lt,x,W);let cr;if(function(T){return T&&ee(T.canDeactivate)}(nn))cr=Jt(nn.canDeactivate(T,x,y,R));else{if(!ee(nn))throw new Error("Invalid CanDeactivate guard");cr=Jt(nn(T,x,y,R))}return cr.pipe(Ur())});return(0,_e.of)(Ze).pipe(ur())}(W.component,W.route,y,x,R)),Ur(W=>!0!==W,!0))}(Ze,R,W,T).pipe((0,gr.zg)(lt=>lt&&function(T){return"boolean"==typeof T}(lt)?function(T,x,y,R){return(0,de.D)(x).pipe((0,fr.b)(W=>(0,fe.z)(function(T,x){return null!==T&&x&&x(new fn(T)),(0,_e.of)(!0)}(W.route.parent,R),function(T,x){return null!==T&&x&&x(new Vi(T)),(0,_e.of)(!0)}(W.route,R),function(T,x,y){const R=x[x.length-1],le=x.slice(0,x.length-1).reverse().map(Ze=>function(T){const x=T.routeConfig?T.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:T,guards:x}:null}(Ze)).filter(Ze=>null!==Ze).map(Ze=>(0,be.P)(()=>{const lt=Ze.guards.map(nn=>{const cr=Ma(nn,Ze.node,y);let Ii;if(function(T){return T&&ee(T.canActivateChild)}(cr))Ii=Jt(cr.canActivateChild(R,T));else{if(!ee(cr))throw new Error("Invalid CanActivateChild guard");Ii=Jt(cr(R,T))}return Ii.pipe(Ur())});return(0,_e.of)(lt).pipe(ur())}));return(0,_e.of)(le).pipe(ur())}(T,W.path,y),function(T,x,y){const R=x.routeConfig?x.routeConfig.canActivate:null;if(!R||0===R.length)return(0,_e.of)(!0);const W=R.map(le=>(0,be.P)(()=>{const Ze=Ma(le,x,y);let lt;if(function(T){return T&&ee(T.canActivate)}(Ze))lt=Jt(Ze.canActivate(x,T));else{if(!ee(Ze))throw new Error("Invalid CanActivate guard");lt=Jt(Ze(x,T))}return lt.pipe(Ur())}));return(0,_e.of)(W).pipe(ur())}(T,W.route,y))),Ur(W=>!0!==W,!0))}(R,le,T,x):(0,_e.of)(lt)),(0,Se.U)(lt=>Object.assign(Object.assign({},y),{guardsResult:lt})))})}(this.ngModule.injector,lt=>this.triggerEvent(lt)),pr(lt=>{if(mt(lt.guardsResult)){const cr=ue(`Redirecting to "${this.serializeUrl(lt.guardsResult)}"`);throw cr.url=lt.guardsResult,cr}const nn=new zt(lt.id,this.serializeUrl(lt.extractedUrl),this.serializeUrl(lt.urlAfterRedirects),lt.targetSnapshot,!!lt.guardsResult);this.triggerEvent(nn)}),(0,cn.h)(lt=>!!lt.guardsResult||(this.restoreHistory(lt),this.cancelNavigationTransition(lt,""),!1)),gc(lt=>{if(lt.guards.canActivateChecks.length)return(0,_e.of)(lt).pipe(pr(nn=>{const cr=new Qt(nn.id,this.serializeUrl(nn.extractedUrl),this.serializeUrl(nn.urlAfterRedirects),nn.targetSnapshot);this.triggerEvent(cr)}),ht(nn=>{let cr=!1;return(0,_e.of)(nn).pipe(function(T,x){return(0,gr.zg)(y=>{const{targetSnapshot:R,guards:{canActivateChecks:W}}=y;if(!W.length)return(0,_e.of)(y);let le=0;return(0,de.D)(W).pipe((0,fr.b)(Ze=>function(T,x,y,R){return function(T,x,y,R){const W=Object.keys(T);if(0===W.length)return(0,_e.of)({});const le={};return(0,de.D)(W).pipe((0,gr.zg)(Ze=>function(T,x,y,R){const W=Ma(T,x,R);return Jt(W.resolve?W.resolve(x,y):W(x,y))}(T[Ze],x,y,R).pipe(pr(lt=>{le[Ze]=lt}))),Fr(1),(0,gr.zg)(()=>Object.keys(le).length===W.length?(0,_e.of)(le):xe.E))}(T._resolve,T,x,R).pipe((0,Se.U)(le=>(T._resolvedData=le,T.data=Object.assign(Object.assign({},T.data),Qa(T,y).resolve),null)))}(Ze.route,R,T,x)),pr(()=>le++),Fr(1),(0,gr.zg)(Ze=>le===W.length?(0,_e.of)(y):xe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),pr({next:()=>cr=!0,complete:()=>{cr||(this.restoreHistory(nn),this.cancelNavigationTransition(nn,"At least one route resolver didn't emit any value."))}}))}),pr(nn=>{const cr=new jn(nn.id,this.serializeUrl(nn.extractedUrl),this.serializeUrl(nn.urlAfterRedirects),nn.targetSnapshot);this.triggerEvent(cr)}))}),gc(lt=>{const{targetSnapshot:nn,id:cr,extractedUrl:Ii,rawUrl:Dr,extras:{skipLocationChange:Zi,replaceUrl:$r}}=lt;return this.hooks.afterPreactivation(nn,{navigationId:cr,appliedUrlTree:Ii,rawUrlTree:Dr,skipLocationChange:!!Zi,replaceUrl:!!$r})}),(0,Se.U)(lt=>{const nn=function(T,x,y){const R=Us(T,x._root,y?y._root:void 0);return new zi(R,x)}(this.routeReuseStrategy,lt.targetSnapshot,lt.currentRouterState);return Object.assign(Object.assign({},lt),{targetRouterState:nn})}),pr(lt=>{this.currentUrlTree=lt.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(lt.urlAfterRedirects,lt.rawUrl),this.routerState=lt.targetRouterState,"deferred"===this.urlUpdateStrategy&&(lt.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,lt),this.browserUrlTree=lt.urlAfterRedirects)}),((T,x,y)=>(0,Se.U)(R=>(new cs(x,R.targetRouterState,R.currentRouterState,y).activate(T),R)))(this.rootContexts,this.routeReuseStrategy,lt=>this.triggerEvent(lt)),pr({next(){le=!0},complete(){le=!0}}),function(T){return x=>x.lift(new nr(T))}(()=>{var lt;if(!le&&!Ze){const nn=`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(W),this.cancelNavigationTransition(W,nn)):this.cancelNavigationTransition(W,nn)}(null===(lt=this.currentNavigation)||void 0===lt?void 0:lt.id)===W.id&&(this.currentNavigation=null)}),mn(lt=>{if(Ze=!0,function(T){return T&&T[ne]}(lt)){const nn=mt(lt.url);nn||(this.navigated=!0,this.restoreHistory(W,!0));const cr=new ir(W.id,this.serializeUrl(W.extractedUrl),lt.message);R.next(cr),nn?setTimeout(()=>{const Ii=this.urlHandlingStrategy.merge(lt.url,this.rawUrlTree),Dr={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ws(W.source)};this.scheduleNavigation(Ii,"imperative",null,Dr,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const nn=new Pt(W.id,this.serializeUrl(W.extractedUrl),lt);R.next(nn);try{W.resolve(this.errorHandler(lt))}catch(cr){W.reject(cr)}}return xe.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}getTransition(){const y=this.transitions.value;return y.urlAfterRedirects=this.browserUrlTree,y}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const R=this.extractLocationChangeInfoFromEvent(y);this.shouldScheduleNavigation(this.lastLocationChangeInfo,R)&&setTimeout(()=>{const{source:W,state:le,urlTree:Ze}=R,lt={replaceUrl:!0};if(le){const nn=Object.assign({},le);delete nn.navigationId,delete nn.\u0275routerPageId,0!==Object.keys(nn).length&&(lt.state=nn)}this.scheduleNavigation(Ze,W,le,lt)},0),this.lastLocationChangeInfo=R}))}extractLocationChangeInfoFromEvent(y){var R;return{source:"popstate"===y.type?"popstate":"hashchange",urlTree:this.parseUrl(y.url),state:(null===(R=y.state)||void 0===R?void 0:R.navigationId)?y.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(y,R){if(!y)return!0;const W=R.urlTree.toString()===y.urlTree.toString();return R.transitionId!==y.transitionId||!W||!("hashchange"===R.source&&"popstate"===y.source||"popstate"===R.source&&"hashchange"===y.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){no(y),this.config=y.map(Ps),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,R={}){const{relativeTo:W,queryParams:le,fragment:Ze,queryParamsHandling:lt,preserveFragment:nn}=R,cr=W||this.routerState.root,Ii=nn?this.currentUrlTree.fragment:Ze;let Dr=null;switch(lt){case"merge":Dr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":Dr=this.currentUrlTree.queryParams;break;default:Dr=le||null}return null!==Dr&&(Dr=this.removeEmptyProps(Dr)),function(T,x,y,R,W){if(0===y.length)return Xi(x.root,x.root,x,R,W);const le=function(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Rc(!0,0,T);let x=0,y=!1;const R=T.reduce((W,le,Ze)=>{if("object"==typeof le&&null!=le){if(le.outlets){const lt={};return wn(le.outlets,(nn,cr)=>{lt[cr]="string"==typeof nn?nn.split("/"):nn}),[...W,{outlets:lt}]}if(le.segmentPath)return[...W,le.segmentPath]}return"string"!=typeof le?[...W,le]:0===Ze?(le.split("/").forEach((lt,nn)=>{0==nn&&"."===lt||(0==nn&&""===lt?y=!0:".."===lt?x++:""!=lt&&W.push(lt))}),W):[...W,le]},[]);return new Rc(y,x,R)}(y);if(le.toRoot())return Xi(x.root,new Bn([],{}),x,R,W);const Ze=function(T,x,y){if(T.isAbsolute)return new wa(x.root,!0,0);if(-1===y.snapshot._lastPathIndex){const le=y.snapshot._urlSegment;return new wa(le,le===x.root,0)}const R=As(T.commands[0])?0:1;return function(T,x,y){let R=T,W=x,le=y;for(;le>W;){if(le-=W,R=R.parent,!R)throw new Error("Invalid number of '../'");W=R.segments.length}return new wa(R,!1,W-le)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+R,T.numberOfDoubleDots)}(le,x,T),lt=Ze.processChildren?Lc(Ze.segmentGroup,Ze.index,le.commands):hc(Ze.segmentGroup,Ze.index,le.commands);return Xi(Ze.segmentGroup,lt,x,R,W)}(cr,this.currentUrlTree,y,Dr,null!=Ii?Ii:null)}navigateByUrl(y,R={skipLocationChange:!1}){const W=mt(y)?y:this.parseUrl(y),le=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,R)}navigate(y,R={skipLocationChange:!1}){return function(T){for(let x=0;x<T.length;x++){const y=T[x];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${x}`)}}(y),this.navigateByUrl(this.createUrlTree(y,R),R)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let R;try{R=this.urlSerializer.parse(y)}catch(W){R=this.malformedUriErrorHandler(W,this.urlSerializer,y)}return R}isActive(y,R){let W;if(W=!0===R?Object.assign({},Un):!1===R?Object.assign({},Rs):R,mt(y))return Xn(this.currentUrlTree,y,W);const le=this.parseUrl(y);return Xn(this.currentUrlTree,le,W)}removeEmptyProps(y){return Object.keys(y).reduce((R,W)=>{const le=y[W];return null!=le&&(R[W]=le),R},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new lr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,R,W,le,Ze){var lt,nn;if(this.disposed)return Promise.resolve(!1);const cr=this.getTransition(),Ii=Ws(R)&&cr&&!Ws(cr.source),$r=(this.lastSuccessfulId===cr.id||this.currentNavigation?cr.rawUrl:cr.urlAfterRedirects).toString()===y.toString();if(Ii&&$r)return Promise.resolve(!0);let Ga,Js,is;Ze?(Ga=Ze.resolve,Js=Ze.reject,is=Ze.promise):is=new Promise((Go,su)=>{Ga=Go,Js=su});const kl=++this.navigationId;let io;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),io=W&&W.\u0275routerPageId?W.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(lt=this.browserPageId)&&void 0!==lt?lt:0:(null!==(nn=this.browserPageId)&&void 0!==nn?nn:0)+1):io=0,this.setTransition({id:kl,targetPageId:io,source:R,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:le,resolve:Ga,reject:Js,promise:is,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),is.catch(Go=>Promise.reject(Go))}setBrowserUrl(y,R){const W=this.urlSerializer.serialize(y),le=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(W)||R.extras.replaceUrl?this.location.replaceState(W,"",le):this.location.go(W,"",le)}restoreHistory(y,R=!1){var W,le;if("computed"===this.canceledNavigationResolution){const Ze=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Ze?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===Ze&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ze)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,R){const W=new ir(y.id,this.serializeUrl(y.extractedUrl),R);this.triggerEvent(W),y.resolve(!1)}generateNgRouterState(y,R){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:R}:{navigationId:y}}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275inject(d.Type),d.\u0275\u0275inject(dt),d.\u0275\u0275inject(ia),d.\u0275\u0275inject(J.Location),d.\u0275\u0275inject(d.Injector),d.\u0275\u0275inject(d.NgModuleFactoryLoader),d.\u0275\u0275inject(d.Compiler),d.\u0275\u0275inject(void 0))},T.\u0275prov=d.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();function Ws(T){return"imperative"!==T}let Oo=(()=>{class T{constructor(y,R,W,le,Ze){this.router=y,this.route=R,this.commands=[],this.onChanges=new Ye.xQ,null==W&&le.setAttribute(Ze.nativeElement,"tabindex","0")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:[]}onClick(){const y={skipLocationChange:sa(this.skipLocationChange),replaceUrl:sa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sa(this.preserveFragment)})}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(gs),d.\u0275\u0275directiveInject(va),d.\u0275\u0275injectAttribute("tabindex"),d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,R){1&y&&d.\u0275\u0275listener("click",function(){return R.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[d.\u0275\u0275NgOnChangesFeature]}),T})(),_s=(()=>{class T{constructor(y,R,W){this.router=y,this.route=R,this.locationStrategy=W,this.commands=[],this.onChanges=new Ye.xQ,this.subscription=y.events.subscribe(le=>{le instanceof lr&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:[]}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,R,W,le,Ze){if(0!==y||R||W||le||Ze||"string"==typeof this.target&&"_self"!=this.target)return!0;const lt={skipLocationChange:sa(this.skipLocationChange),replaceUrl:sa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,lt),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sa(this.preserveFragment)})}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(gs),d.\u0275\u0275directiveInject(va),d.\u0275\u0275directiveInject(J.LocationStrategy))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,R){1&y&&d.\u0275\u0275listener("click",function(le){return R.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&y&&(d.\u0275\u0275hostProperty("href",R.href,d.\u0275\u0275sanitizeUrl),d.\u0275\u0275attribute("target",R.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[d.\u0275\u0275NgOnChangesFeature]}),T})();function sa(T){return""===T||!!T}let Tl=(()=>{class T{constructor(y,R,W,le,Ze,lt){this.router=y,this.element=R,this.renderer=W,this.cdr=le,this.link=Ze,this.linkWithHref=lt,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=y.events.subscribe(nn=>{nn instanceof lr&&this.update()})}ngAfterContentInit(){(0,_e.of)(this.links.changes,this.linksWithHrefs.changes,(0,_e.of)(null)).pipe((0,Gr.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var y;null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe();const R=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(W=>!!W).map(W=>W.onChanges);this.linkInputChangesSubscription=(0,de.D)(R).pipe((0,Gr.J)()).subscribe(W=>{this.isActive!==this.isLinkActive(this.router)(W)&&this.update()})}set routerLinkActive(y){const R=Array.isArray(y)?y:y.split(" ");this.classes=R.filter(W=>!!W)}ngOnChanges(y){this.update()}ngOnDestroy(){var y;this.routerEventsSubscription.unsubscribe(),null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this.isActive!==y&&(this.isActive=y,this.cdr.markForCheck(),this.classes.forEach(R=>{y?this.renderer.addClass(this.element.nativeElement,R):this.renderer.removeClass(this.element.nativeElement,R)}))})}isLinkActive(y){const R=function(T){return!!T.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return W=>y.isActive(W.urlTree,R)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.linkWithHref&&y(this.linkWithHref)||this.links.some(y)||this.linksWithHrefs.some(y)}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(gs),d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ChangeDetectorRef),d.\u0275\u0275directiveInject(Oo,8),d.\u0275\u0275directiveInject(_s,8))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["","routerLinkActive",""]],contentQueries:function(y,R,W){if(1&y&&(d.\u0275\u0275contentQuery(W,Oo,5),d.\u0275\u0275contentQuery(W,_s,5)),2&y){let le;d.\u0275\u0275queryRefresh(le=d.\u0275\u0275loadQuery())&&(R.links=le),d.\u0275\u0275queryRefresh(le=d.\u0275\u0275loadQuery())&&(R.linksWithHrefs=le)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[d.\u0275\u0275NgOnChangesFeature]}),T})(),Cu=(()=>{class T{constructor(y,R,W,le,Ze){this.parentContexts=y,this.location=R,this.resolver=W,this.changeDetector=Ze,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.EventEmitter,this.deactivateEvents=new d.EventEmitter,this.name=le||Nn,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,y}attach(y,R){this.activated=y,this._activatedRoute=R,this.location.insert(y.hostView)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const Ze=(R=R||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),lt=this.parentContexts.getOrCreateContext(this.name).children,nn=new Yl(y,lt,this.location.injector);this.activated=this.location.createComponent(Ze,this.location.length,nn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(ia),d.\u0275\u0275directiveInject(d.ViewContainerRef),d.\u0275\u0275directiveInject(d.ComponentFactoryResolver),d.\u0275\u0275injectAttribute("name"),d.\u0275\u0275directiveInject(d.ChangeDetectorRef))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),T})();class Yl{constructor(x,y,R){this.route=x,this.childContexts=y,this.parent=R}get(x,y){return x===va?this.route:x===ia?this.childContexts:this.parent.get(x,y)}}class il{}class Xu{preload(x,y){return(0,_e.of)(null)}}let Uc=(()=>{class T{constructor(y,R,W,le,Ze){this.router=y,this.injector=le,this.preloadingStrategy=Ze,this.loader=new _c(R,W,cr=>y.triggerEvent(new Wt(cr)),cr=>y.triggerEvent(new On(cr)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,cn.h)(y=>y instanceof lr),(0,fr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(d.NgModuleRef);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,R){const W=[];for(const le of R)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const Ze=le._loadedConfig;W.push(this.processRoutes(Ze.module,Ze.routes))}else le.loadChildren&&!le.canLoad?W.push(this.preloadConfig(y,le)):le.children&&W.push(this.processRoutes(y,le.children));return(0,de.D)(W).pipe((0,Gr.J)(),(0,Se.U)(le=>{}))}preloadConfig(y,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,_e.of)(R._loadedConfig):this.loader.load(y.injector,R)).pipe((0,gr.zg)(le=>(R._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275inject(gs),d.\u0275\u0275inject(d.NgModuleFactoryLoader),d.\u0275\u0275inject(d.Compiler),d.\u0275\u0275inject(d.Injector),d.\u0275\u0275inject(il))},T.\u0275prov=d.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})(),Tu=(()=>{class T{constructor(y,R,W={}){this.router=y,this.viewportScroller=R,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Cr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof lr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Tr&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,R){this.router.triggerEvent(new Tr(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275inject(gs),d.\u0275\u0275inject(J.ViewportScroller),d.\u0275\u0275inject(void 0))},T.\u0275prov=d.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();const aa=new d.InjectionToken("ROUTER_CONFIGURATION"),Fa=new d.InjectionToken("ROUTER_FORROOT_GUARD"),Zs=[J.Location,{provide:dt,useClass:Ne},{provide:gs,useFactory:function(T,x,y,R,W,le,Ze,lt={},nn,cr){const Ii=new gs(null,T,x,y,R,W,le,at(Ze));return nn&&(Ii.urlHandlingStrategy=nn),cr&&(Ii.routeReuseStrategy=cr),function(T,x){T.errorHandler&&(x.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(x.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(x.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(x.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(x.urlUpdateStrategy=T.urlUpdateStrategy)}(lt,Ii),lt.enableTracing&&Ii.events.subscribe(Dr=>{var Zi,$r;null===(Zi=console.group)||void 0===Zi||Zi.call(console,`Router Event: ${Dr.constructor.name}`),console.log(Dr.toString()),console.log(Dr),null===($r=console.groupEnd)||void 0===$r||$r.call(console)}),Ii},deps:[dt,ia,J.Location,d.Injector,d.NgModuleFactoryLoader,d.Compiler,ks,aa,[class{},new d.Optional],[class{},new d.Optional]]},ia,{provide:va,useFactory:function(T){return T.routerState.root},deps:[gs]},{provide:d.NgModuleFactoryLoader,useClass:d.SystemJsNgModuleLoader},Uc,Xu,class{preload(x,y){return y().pipe(mn(()=>(0,_e.of)(null)))}},{provide:aa,useValue:{enableTracing:!1}}];function Ql(){return new d.NgProbeToken("Router",gs)}let vc=(()=>{class T{constructor(y,R){}static forRoot(y,R){return{ngModule:T,providers:[Zs,Dl(y),{provide:Fa,useFactory:$c,deps:[[gs,new d.Optional,new d.SkipSelf]]},{provide:aa,useValue:R||{}},{provide:J.LocationStrategy,useFactory:bc,deps:[J.PlatformLocation,[new d.Inject(J.APP_BASE_HREF),new d.Optional],aa]},{provide:Tu,useFactory:Hc,deps:[gs,J.ViewportScroller,aa]},{provide:il,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:Xu},{provide:d.NgProbeToken,multi:!0,useFactory:Ql},[us,{provide:d.APP_INITIALIZER,multi:!0,useFactory:Ah,deps:[us]},{provide:Ro,useFactory:Wc,deps:[us]},{provide:d.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:Ro}]]}}static forChild(y){return{ngModule:T,providers:[Dl(y)]}}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275inject(Fa,8),d.\u0275\u0275inject(gs,8))},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=d.\u0275\u0275defineInjector({}),T})();function Hc(T,x,y){return y.scrollOffset&&x.setOffset(y.scrollOffset),new Tu(T,x,y)}function bc(T,x,y={}){return y.useHash?new J.HashLocationStrategy(T,x):new J.PathLocationStrategy(T,x)}function $c(T){return"guarded"}function Dl(T){return[{provide:d.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:T},{provide:ks,multi:!0,useValue:T}]}let us=(()=>{class T{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ye.xQ}appInitializer(){return this.injector.get(J.LOCATION_INITIALIZED,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const W=new Promise(lt=>R=lt),le=this.injector.get(gs),Ze=this.injector.get(aa);return"disabled"===Ze.initialNavigation?(le.setUpLocationChangeListener(),R(!0)):"enabled"===Ze.initialNavigation||"enabledBlocking"===Ze.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?(0,_e.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),le.initialNavigation()):R(!0),W})}bootstrapListener(y){const R=this.injector.get(aa),W=this.injector.get(Uc),le=this.injector.get(Tu),Ze=this.injector.get(gs),lt=this.injector.get(d.ApplicationRef);y===lt.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&Ze.initialNavigation(),W.setUpPreloading(),le.init(),Ze.resetRootComponentType(lt.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275inject(d.Injector))},T.\u0275prov=d.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();function Ah(T){return T.appInitializer.bind(T)}function Wc(T){return T.bootstrapListener.bind(T)}const Ro=new d.InjectionToken("Router Initializer");v(5142);const wc=function(){return["/servicios/montajes"]};let Na=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-mega-menu"]],decls:65,vars:2,consts:[[1,"nav-item","dropdown","static"],["href","#","data-mdb-ripple","true","data-mdb-ripple-color","light","type","button","id","dropdownMenuButtonU","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","block","pr-2","lg:px-2","py-2","text-white","hover:text-yellow-400","focus:text-yellow-400","transition","duration-150","ease-in-out","dropdown-toggle","flex","items-center","whitespace-nowrap"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","caret-down","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512",1,"w-2","ml-2"],["fill","currentColor","d","M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"],["aria-labelledby","dropdownMenuButtonU",1,"dropdown-menu","w-full","mt-0","hidden","shadow-lg","bg-gray-200","absolute","left-0","top-full"],[1,"px-6","lg:px-8","py-5"],[1,"grid","md:grid-cols-6","gap-6"],[1,"bg-gray-200"],[1,"block","pt-2","w-full","uppercase","font-semibold","text-gray-700"],["data-mdb-ripple","true","data-mdb-ripple-color","light",1,"relative","overflow-hidden","bg-no-repeat","bg-cover","py-4"],["src","/assets/img/servicios/s1.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["routerLinkActive","",3,"routerLink"],[1,"absolute","top-0","right-0","bottom-0","left-0","w-full","h-full","overflow-hidden","bg-fixed","opacity-0","hover:opacity-100","transition","duration-300","ease-in-out",2,"background-color","rgba(251, 251, 251, 0.2)"],[1,"flex","items-center","justify-between","mt-1","mb-3"],[1,"text-gray-700"],["src","/assets/img/servicios/s3.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["href","#!"],["src","/assets/img/servicios/s4.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["src","/assets/img/servicios/s5.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["src","/assets/img/servicios/s6.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["src","/assets/img/servicios/s2.png","alt","Louvre",1,"w-full","rounded-md","shadow-lg"],["href","https://api.whatsapp.com/send?phone=573112231139"],["src","https://assets9.lottiefiles.com/packages/lf20_rrh7flmb.json","background","transparent","speed","1","loop","","autoplay",""]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"li",0),d.\u0275\u0275elementStart(1,"a",1),d.\u0275\u0275text(2,"Servicios "),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(3,"svg",2),d.\u0275\u0275element(4,"path",3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(5,"div",4),d.\u0275\u0275elementStart(6,"div",5),d.\u0275\u0275elementStart(7,"div",6),d.\u0275\u0275elementStart(8,"div",7),d.\u0275\u0275elementStart(9,"p",8),d.\u0275\u0275text(10,"Montajes Mencanicos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(11,"div",9),d.\u0275\u0275element(12,"img",10),d.\u0275\u0275elementStart(13,"a",11),d.\u0275\u0275element(14,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"div",13),d.\u0275\u0275elementStart(16,"p",14),d.\u0275\u0275text(17," Somos especialistas en montajes mec\xe1nicos de equipos rotativos y est\xe1ticos, tanto verticales como horizontales, as\xed como tambi\xe9n nos encargamos de realizar procesos de alineaci\xf3n y ajuste, dejando las m\xe1quinas listas para precomisionamiento y comisionamiento. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(18,"div",7),d.\u0275\u0275elementStart(19,"p",8),d.\u0275\u0275text(20,"Sistemas "),d.\u0275\u0275element(21,"br"),d.\u0275\u0275text(22,"de gesti\xf3n"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"div",9),d.\u0275\u0275element(24,"img",15),d.\u0275\u0275elementStart(25,"a",16),d.\u0275\u0275element(26,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(27,"div",7),d.\u0275\u0275elementStart(28,"p",8),d.\u0275\u0275text(29,"Control y aseguramiento"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(30,"div",9),d.\u0275\u0275element(31,"img",17),d.\u0275\u0275elementStart(32,"a",16),d.\u0275\u0275element(33,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(34,"div",7),d.\u0275\u0275elementStart(35,"p",8),d.\u0275\u0275text(36,"Soporte "),d.\u0275\u0275element(37,"br"),d.\u0275\u0275text(38,"Tecnico"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(39,"div",9),d.\u0275\u0275element(40,"img",18),d.\u0275\u0275elementStart(41,"a",16),d.\u0275\u0275element(42,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(43,"div",7),d.\u0275\u0275elementStart(44,"p",8),d.\u0275\u0275text(45,"Pruebas "),d.\u0275\u0275element(46,"br"),d.\u0275\u0275text(47," de seguridad"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(48,"div",9),d.\u0275\u0275element(49,"img",19),d.\u0275\u0275elementStart(50,"a",16),d.\u0275\u0275element(51,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(52,"div",7),d.\u0275\u0275elementStart(53,"p",8),d.\u0275\u0275text(54,"Alquiler"),d.\u0275\u0275element(55,"br"),d.\u0275\u0275text(56," de equipos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(57,"div",9),d.\u0275\u0275element(58,"img",20),d.\u0275\u0275elementStart(59,"a",16),d.\u0275\u0275element(60,"div",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(61,"div",13),d.\u0275\u0275elementStart(62,"div"),d.\u0275\u0275elementStart(63,"a",21),d.\u0275\u0275element(64,"lottie-player",22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(13),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(1,wc)))},directives:[_s,Tl],styles:[""]}),T})(),Sl=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-navbar-index"]],decls:28,vars:0,consts:[[1,"relative","w-full","flex","flex-wrap","items-center","justify-between","py-4","bg-gray-800","text-gray-100","hover:text-gray-100","focus:text-gray-100","shadow-lg","navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid","w-full","flex","flex-wrap","items-center","justify-between","px-6"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","text-gray-500","border-0","hover:shadow-none","hover:no-underline","py-2","px-2.5","bg-transparent","focus:outline-none","focus:ring-0","focus:shadow-none","focus:no-underline"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","bars","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-6"],["fill","currentColor","d","M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","flex-grow","items-center"],["src","/assets/lottie/lf30_editor_wrvtiaeh.json","background","transparent","speed","1","loop","","autoplay","",2,"width","40px","height","40px","padding","5px"],["routerLink","/","href","",1,"text-xl","text-white","pr-2","font-semibold"],[1,"navbar-nav","flex","flex-col","pl-0","list-style-none","mr-auto"],[1,"nav-item","p-2"],["routerLink","/nosotros","href","",1,"nav-link","text-white","hover:text-yellow-400","focus:text-yellow-400","p-0"],["routerLink","/proyectos","href","",1,"nav-link","text-white","hover:text-yellow-400","focus:text-yellow-400","p-0"],[1,"flex","items-center","relative"],[1,"flex","items-center"],["href","https://api.whatsapp.com/send?phone=573112231139"],["src","https://assets9.lottiefiles.com/packages/lf20_rrh7flmb.json","background","transparent","speed","1","loop","","autoplay","",2,"height","50px"],["type","button","download","","href","assets/doc/BrochureServiciosN&SV2.pdf",1,"bg-red-600","text-white","active:bg-red-700","text-xs","font-bold","uppercase","px-4","py-2","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","lg:mr-1","lg:mb-0","ml-3","mb-3","ease-linear","transition-all","duration-150"],[1,"fas","fa-arrow-alt-circle-down"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"nav",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"button",2),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(3,"svg",3),d.\u0275\u0275element(4,"path",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275element(6,"lottie-player",6),d.\u0275\u0275elementStart(7,"a",7),d.\u0275\u0275text(8,"Home"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"ul",8),d.\u0275\u0275element(10,"app-mega-menu"),d.\u0275\u0275elementStart(11,"li",9),d.\u0275\u0275elementStart(12,"a",10),d.\u0275\u0275text(13,"Quienes Somos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"li",9),d.\u0275\u0275elementStart(15,"a",11),d.\u0275\u0275text(16,"Proyectos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"div",12),d.\u0275\u0275elementStart(18,"ul"),d.\u0275\u0275elementStart(19,"li",13),d.\u0275\u0275elementStart(20,"div"),d.\u0275\u0275elementStart(21,"a",14),d.\u0275\u0275element(22,"lottie-player",15),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"ul"),d.\u0275\u0275elementStart(24,"li",13),d.\u0275\u0275elementStart(25,"a",16),d.\u0275\u0275element(26,"i",17),d.\u0275\u0275text(27," Descargar Brochure "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},directives:[_s,Na],styles:[""]}),T})(),Il=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-carusel"]],decls:20,vars:0,consts:[["id","carouselDarkVariant","data-bs-ride","carousel",1,"carousel","slide","carousel-fade","carousel-dark","relative"],[1,"carousel-indicators","absolute","right-0","bottom-0","left-0","flex","justify-center","p-0","mb-4"],["data-bs-target","#carouselDarkVariant","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["data-bs-target","#carouselDarkVariant","data-bs-slide-to","1","aria-label","Slide 1"],["data-bs-target","#carouselDarkVariant","data-bs-slide-to","2","aria-label","Slide 1"],[1,"carousel-inner","relative","w-full","overflow-hidden"],[1,"carousel-item","active","relative","float-left","w-full"],["src","/assets/img/s1.jpg","alt","Montajes mec\xe1nicos",1,"block","w-full"],[1,"carousel-item","relative","float-left","w-full"],["src","/assets/img/s2.jpg","alt","Pruebas Hidrostaticas",1,"block","w-full"],["src","/assets/img/s3.jpg","alt","Aliniaci\xf3n por Trasmici\xf3n",1,"block","w-full"],["type","button","data-bs-target","#carouselDarkVariant","data-bs-slide","prev",1,"carousel-control-prev","absolute","top-0","bottom-0","flex","items-center","justify-center","p-0","text-center","border-0","hover:outline-none","hover:no-underline","focus:outline-none","focus:no-underline","left-0"],["aria-hidden","true",1,"carousel-control-prev-icon","inline-block","bg-no-repeat"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselDarkVariant","data-bs-slide","next",1,"carousel-control-next","absolute","top-0","bottom-0","flex","items-center","justify-center","p-0","text-center","border-0","hover:outline-none","hover:no-underline","focus:outline-none","focus:no-underline","right-0"],["aria-hidden","true",1,"carousel-control-next-icon","inline-block","bg-no-repeat"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275element(2,"button",2),d.\u0275\u0275element(3,"button",3),d.\u0275\u0275element(4,"button",4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275elementStart(6,"div",6),d.\u0275\u0275element(7,"img",7),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",8),d.\u0275\u0275element(9,"img",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",8),d.\u0275\u0275element(11,"img",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(12,"button",11),d.\u0275\u0275element(13,"span",12),d.\u0275\u0275elementStart(14,"span",13),d.\u0275\u0275text(15,"Previous"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(16,"button",14),d.\u0275\u0275element(17,"span",15),d.\u0275\u0275elementStart(18,"span",13),d.\u0275\u0275text(19,"Next"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[""]}),T})(),hs=(()=>{class T{constructor(){}btnFacebook(){window.open("https://www.facebook.com/profile.php?id=100082006130733")}btnInstagram(){window.open("https://www.instagram.com/nyssolucionesintegrales/")}btnLinkeing(){window.open("https://www.linkedin.com/company/nys-soluciones-integrales/")}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-social-media"]],decls:10,vars:0,consts:[[1,"flex","justify-center","items-center","align-bottom","flex-wrap","space-x-2"],["type","button","data-mdb-ripple","true","data-mdb-ripple-color","light",1,"inline-block","px-6","py-2.5","mb-2","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:shadow-lg","focus:shadow-lg","focus:outline-none","focus:ring-0","active:shadow-lg","transition","duration-150","ease-in-out",2,"background-color","#1877f2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512",1,"w-4","h-4"],["fill","currentColor","d","M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"],["type","button","data-mdb-ripple","true","data-mdb-ripple-color","light",1,"inline-block","px-6","py-2.5","mb-2","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:shadow-lg","focus:shadow-lg","focus:outline-none","focus:ring-0","active:shadow-lg","transition","duration-150","ease-in-out",2,"background-color","#c13584",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-4","h-4"],["fill","currentColor","d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"],["type","button","data-mdb-ripple","true","data-mdb-ripple-color","light",1,"inline-block","px-6","py-2.5","mb-2","text-white","font-medium","text-xs","leading-tight","uppercase","rounded","shadow-md","hover:shadow-lg","focus:shadow-lg","focus:outline-none","focus:ring-0","active:shadow-lg","transition","duration-150","ease-in-out",2,"background-color","#0077b5",3,"click"],["fill","currentColor","d","M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"button",1),d.\u0275\u0275listener("click",function(){return R.btnFacebook()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(2,"svg",2),d.\u0275\u0275element(3,"path",3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(4,"button",4),d.\u0275\u0275listener("click",function(){return R.btnInstagram()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(5,"svg",5),d.\u0275\u0275element(6,"path",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(7,"button",7),d.\u0275\u0275listener("click",function(){return R.btnLinkeing()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(8,"svg",5),d.\u0275\u0275element(9,"path",8),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[""]}),T})(),ol=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-intro"]],decls:12,vars:0,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800"],[1,"container","mx-auto","xl:px-32","text-center","lg:text-left"],[1,"grid","lg:grid-cols-2","flex","items-center"],[1,"mb-12","lg:mb-0"],[1,"block","rounded-lg","shadow-lg","px-6","py-12","md:px-12","lg:-mr-14",2,"background","hsla(0, 0%, 100%, 0.55)","backdrop-filter","blur(30px)"],[1,"text-3xl","font-bold","mb-6"],[1,"text-gray-500","mb-0"],["src","https://firebasestorage.googleapis.com/v0/b/nyssolucionesintegrales-46858.appspot.com/o/imagenes%2Fempresa.jpg?alt=media&token=db63418e-beb2-4a12-8175-c7faa6bd0917","alt","",1,"w-full","rounded-lg","shadow-lg"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275elementStart(6,"h2",6),d.\u0275\u0275text(7,"Nuestra Empresa"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"p",7),d.\u0275\u0275text(9," Somos una empresa colombiana que ofrece servicios de excelente calidad para la industria, ofrecemos soluciones integrales mediante aplicaci\xf3n de las normas que rigen los procesos, entregando proyectos a satisfacci\xf3n total de nuestros clientes. Contamos con personal calificado, comprometido y con calidad humana, para la prestaci\xf3n de servicios con la mejor calidad posible. Nos caracterizamos por nuestros altos niveles de calidad en los procesos, por la calidad del personal con el que contamos, y por la calidad de nuestros equipos tecnol\xf3gicos usados para desempe\xf1ar las diferentes actividades. Estamos comprometidos con el cuidado ambiental, capacitando al personal sobre manejo de residuos as\xed como tambi\xe9n el cuidado de la fauna y flora de nuestra regi\xf3n y pa\xeds. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div"),d.\u0275\u0275element(11,"img",8),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[""]}),T})();var $n=v(5758);let sl=(()=>{class T{constructor(y,R){this._renderer=y,this._elementRef=R,this.onChange=W=>{},this.onTouched=()=>{}}setProperty(y,R){this._renderer.setProperty(this._elementRef.nativeElement,y,R)}registerOnTouched(y){this.onTouched=y}registerOnChange(y){this.onChange=y}setDisabledState(y){this.setProperty("disabled",y)}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T}),T})(),Ls=(()=>{class T extends sl{}return T.\u0275fac=function(){let x;return function(R){return(x||(x=d.\u0275\u0275getInheritedFactory(T)))(R||T)}}(),T.\u0275dir=d.\u0275\u0275defineDirective({type:T,features:[d.\u0275\u0275InheritDefinitionFeature]}),T})();const To=new d.InjectionToken("NgValueAccessor"),Ph={provide:To,useExisting:(0,d.forwardRef)(()=>Ki),multi:!0},Ku=new d.InjectionToken("CompositionEventMode");let Ki=(()=>{class T extends sl{constructor(y,R,W){super(y,R),this._compositionMode=W,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const T=(0,J.\u0275getDOM)()?(0,J.\u0275getDOM)().getUserAgent():"";return/android (\d+)/.test(T.toLowerCase())}())}writeValue(y){this.setProperty("value",null==y?"":y)}_handleInput(y){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(y)}_compositionStart(){this._composing=!0}_compositionEnd(y){this._composing=!1,this._compositionMode&&this.onChange(y)}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(d.Renderer2),d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(Ku,8))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(y,R){1&y&&d.\u0275\u0275listener("input",function(le){return R._handleInput(le.target.value)})("blur",function(){return R.onTouched()})("compositionstart",function(){return R._compositionStart()})("compositionend",function(le){return R._compositionEnd(le.target.value)})},features:[d.\u0275\u0275ProvidersFeature([Ph]),d.\u0275\u0275InheritDefinitionFeature]}),T})();const go=new d.InjectionToken("NgValidators"),Ba=new d.InjectionToken("NgAsyncValidators");function Zc(T){return null!=T}function Au(T){const x=(0,d.\u0275isPromise)(T)?(0,de.D)(T):T;return(0,d.\u0275isObservable)(x),x}function ll(T){let x={};return T.forEach(y=>{x=null!=y?Object.assign(Object.assign({},x),y):x}),0===Object.keys(x).length?null:x}function ns(T,x){return x.map(y=>y(T))}function Ec(T){return T.map(x=>function(T){return!T.validate}(x)?x:y=>x.validate(y))}function ys(T){return null!=T?function(T){if(!T)return null;const x=T.filter(Zc);return 0==x.length?null:function(y){return ll(ns(y,x))}}(Ec(T)):null}function qc(T){return null!=T?function(T){if(!T)return null;const x=T.filter(Zc);return 0==x.length?null:function(y){const R=ns(y,x).map(Au);return(0,$n.D)(R).pipe((0,Se.U)(ll))}}(Ec(T)):null}function Oh(T,x){return null===T?[x]:Array.isArray(T)?[...T,x]:[T,x]}function p(T){return T?Array.isArray(T)?T:[T]:[]}function o(T,x){return Array.isArray(T)?T.includes(x):T===x}function u(T,x){const y=p(x);return p(T).forEach(W=>{o(y,W)||y.push(W)}),y}function g(T,x){return p(x).filter(y=>!o(T,y))}let E=(()=>{class T{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(y){this._rawValidators=y||[],this._composedValidatorFn=ys(this._rawValidators)}_setAsyncValidators(y){this._rawAsyncValidators=y||[],this._composedAsyncValidatorFn=qc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(y){this._onDestroyCallbacks.push(y)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(y=>y()),this._onDestroyCallbacks=[]}reset(y){this.control&&this.control.reset(y)}hasError(y,R){return!!this.control&&this.control.hasError(y,R)}getError(y,R){return this.control?this.control.getError(y,R):null}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275dir=d.\u0275\u0275defineDirective({type:T}),T})(),I=(()=>{class T extends E{get formDirective(){return null}get path(){return null}}return T.\u0275fac=function(){let x;return function(R){return(x||(x=d.\u0275\u0275getInheritedFactory(T)))(R||T)}}(),T.\u0275dir=d.\u0275\u0275defineDirective({type:T,features:[d.\u0275\u0275InheritDefinitionFeature]}),T})();class B extends E{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let X=(()=>{class T extends class{constructor(x){this._cd=x}is(x){var y,R,W;return"submitted"===x?!!(null===(y=this._cd)||void 0===y?void 0:y.submitted):!!(null===(W=null===(R=this._cd)||void 0===R?void 0:R.control)||void 0===W?void 0:W[x])}}{constructor(y){super(y)}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(B,2))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(y,R){2&y&&d.\u0275\u0275classProp("ng-untouched",R.is("untouched"))("ng-touched",R.is("touched"))("ng-pristine",R.is("pristine"))("ng-dirty",R.is("dirty"))("ng-valid",R.is("valid"))("ng-invalid",R.is("invalid"))("ng-pending",R.is("pending"))},features:[d.\u0275\u0275InheritDefinitionFeature]}),T})();function gt(T,x){(function(T,x){const y=function(T){return T._rawValidators}(T);null!==x.validator?T.setValidators(Oh(y,x.validator)):"function"==typeof y&&T.setValidators([y]);const R=function(T){return T._rawAsyncValidators}(T);null!==x.asyncValidator?T.setAsyncValidators(Oh(R,x.asyncValidator)):"function"==typeof R&&T.setAsyncValidators([R]);const W=()=>T.updateValueAndValidity();ln(x._rawValidators,W),ln(x._rawAsyncValidators,W)})(T,x),x.valueAccessor.writeValue(T.value),function(T,x){x.valueAccessor.registerOnChange(y=>{T._pendingValue=y,T._pendingChange=!0,T._pendingDirty=!0,"change"===T.updateOn&&_n(T,x)})}(T,x),function(T,x){const y=(R,W)=>{x.valueAccessor.writeValue(R),W&&x.viewToModelUpdate(R)};T.registerOnChange(y),x._registerOnDestroy(()=>{T._unregisterOnChange(y)})}(T,x),function(T,x){x.valueAccessor.registerOnTouched(()=>{T._pendingTouched=!0,"blur"===T.updateOn&&T._pendingChange&&_n(T,x),"submit"!==T.updateOn&&T.markAsTouched()})}(T,x),function(T,x){if(x.valueAccessor.setDisabledState){const y=R=>{x.valueAccessor.setDisabledState(R)};T.registerOnDisabledChange(y),x._registerOnDestroy(()=>{T._unregisterOnDisabledChange(y)})}}(T,x)}function ln(T,x){T.forEach(y=>{y.registerOnValidatorChange&&y.registerOnValidatorChange(x)})}function _n(T,x){T._pendingDirty&&T.markAsDirty(),T.setValue(T._pendingValue,{emitModelToViewChange:!1}),x.viewToModelUpdate(T._pendingValue),T._pendingChange=!1}function Xr(T,x){const y=T.indexOf(x);y>-1&&T.splice(y,1)}const Qi="VALID",ki="INVALID",ro="PENDING",Qo="DISABLED";function Ji(T){return(So(T)?T.validators:T)||null}function Gi(T){return Array.isArray(T)?ys(T):T||null}function jr(T,x){return(So(x)?x.asyncValidators:T)||null}function Ho(T){return Array.isArray(T)?qc(T):T||null}function So(T){return null!=T&&!Array.isArray(T)&&"object"==typeof T}class Ni{constructor(x,y){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=x,this._rawAsyncValidators=y,this._composedValidatorFn=Gi(this._rawValidators),this._composedAsyncValidatorFn=Ho(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(x){this._rawValidators=this._composedValidatorFn=x}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(x){this._rawAsyncValidators=this._composedAsyncValidatorFn=x}get parent(){return this._parent}get valid(){return this.status===Qi}get invalid(){return this.status===ki}get pending(){return this.status==ro}get disabled(){return this.status===Qo}get enabled(){return this.status!==Qo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(x){this._rawValidators=x,this._composedValidatorFn=Gi(x)}setAsyncValidators(x){this._rawAsyncValidators=x,this._composedAsyncValidatorFn=Ho(x)}addValidators(x){this.setValidators(u(x,this._rawValidators))}addAsyncValidators(x){this.setAsyncValidators(u(x,this._rawAsyncValidators))}removeValidators(x){this.setValidators(g(x,this._rawValidators))}removeAsyncValidators(x){this.setAsyncValidators(g(x,this._rawAsyncValidators))}hasValidator(x){return o(this._rawValidators,x)}hasAsyncValidator(x){return o(this._rawAsyncValidators,x)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(x={}){this.touched=!0,this._parent&&!x.onlySelf&&this._parent.markAsTouched(x)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(x=>x.markAllAsTouched())}markAsUntouched(x={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(y=>{y.markAsUntouched({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}markAsDirty(x={}){this.pristine=!1,this._parent&&!x.onlySelf&&this._parent.markAsDirty(x)}markAsPristine(x={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(y=>{y.markAsPristine({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}markAsPending(x={}){this.status=ro,!1!==x.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!x.onlySelf&&this._parent.markAsPending(x)}disable(x={}){const y=this._parentMarkedDirty(x.onlySelf);this.status=Qo,this.errors=null,this._forEachChild(R=>{R.disable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this._updateValue(),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:y})),this._onDisabledChange.forEach(R=>R(!0))}enable(x={}){const y=this._parentMarkedDirty(x.onlySelf);this.status=Qi,this._forEachChild(R=>{R.enable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:y})),this._onDisabledChange.forEach(R=>R(!1))}_updateAncestors(x){this._parent&&!x.onlySelf&&(this._parent.updateValueAndValidity(x),x.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(x){this._parent=x}updateValueAndValidity(x={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qi||this.status===ro)&&this._runAsyncValidator(x.emitEvent)),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!x.onlySelf&&this._parent.updateValueAndValidity(x)}_updateTreeValidity(x={emitEvent:!0}){this._forEachChild(y=>y._updateTreeValidity(x)),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qo:Qi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(x){if(this.asyncValidator){this.status=ro,this._hasOwnPendingAsyncValidator=!0;const y=Au(this.asyncValidator(this));this._asyncValidationSubscription=y.subscribe(R=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(R,{emitEvent:x})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(x,y={}){this.errors=x,this._updateControlsErrors(!1!==y.emitEvent)}get(x){return function(T,x,y){if(null==x||(Array.isArray(x)||(x=x.split(".")),Array.isArray(x)&&0===x.length))return null;let R=T;return x.forEach(W=>{R=R instanceof Io?R.controls.hasOwnProperty(W)?R.controls[W]:null:R instanceof ds&&R.at(W)||null}),R}(this,x)}getError(x,y){const R=y?this.get(y):this;return R&&R.errors?R.errors[x]:null}hasError(x,y){return!!this.getError(x,y)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(x){this.status=this._calculateStatus(),x&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(x)}_initObservables(){this.valueChanges=new d.EventEmitter,this.statusChanges=new d.EventEmitter}_calculateStatus(){return this._allControlsDisabled()?Qo:this.errors?ki:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ro)?ro:this._anyControlsHaveStatus(ki)?ki:Qi}_anyControlsHaveStatus(x){return this._anyControls(y=>y.status===x)}_anyControlsDirty(){return this._anyControls(x=>x.dirty)}_anyControlsTouched(){return this._anyControls(x=>x.touched)}_updatePristine(x={}){this.pristine=!this._anyControlsDirty(),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}_updateTouched(x={}){this.touched=this._anyControlsTouched(),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}_isBoxedValue(x){return"object"==typeof x&&null!==x&&2===Object.keys(x).length&&"value"in x&&"disabled"in x}_registerOnCollectionChange(x){this._onCollectionChange=x}_setUpdateStrategy(x){So(x)&&null!=x.updateOn&&(this._updateOn=x.updateOn)}_parentMarkedDirty(x){return!x&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $o extends Ni{constructor(x=null,y,R){super(Ji(y),jr(R,y)),this._onChange=[],this._applyFormState(x),this._setUpdateStrategy(y),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(x,y={}){this.value=this._pendingValue=x,this._onChange.length&&!1!==y.emitModelToViewChange&&this._onChange.forEach(R=>R(this.value,!1!==y.emitViewToModelChange)),this.updateValueAndValidity(y)}patchValue(x,y={}){this.setValue(x,y)}reset(x=null,y={}){this._applyFormState(x),this.markAsPristine(y),this.markAsUntouched(y),this.setValue(this.value,y),this._pendingChange=!1}_updateValue(){}_anyControls(x){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(x){this._onChange.push(x)}_unregisterOnChange(x){Xr(this._onChange,x)}registerOnDisabledChange(x){this._onDisabledChange.push(x)}_unregisterOnDisabledChange(x){Xr(this._onDisabledChange,x)}_forEachChild(x){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(x){this._isBoxedValue(x)?(this.value=this._pendingValue=x.value,x.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=x}}class Io extends Ni{constructor(x,y,R){super(Ji(y),jr(R,y)),this.controls=x,this._initObservables(),this._setUpdateStrategy(y),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(x,y){return this.controls[x]?this.controls[x]:(this.controls[x]=y,y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange),y)}addControl(x,y,R={}){this.registerControl(x,y),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}removeControl(x,y={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],this.updateValueAndValidity({emitEvent:y.emitEvent}),this._onCollectionChange()}setControl(x,y,R={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],y&&this.registerControl(x,y),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}contains(x){return this.controls.hasOwnProperty(x)&&this.controls[x].enabled}setValue(x,y={}){this._checkAllValuesPresent(x),Object.keys(x).forEach(R=>{this._throwIfControlMissing(R),this.controls[R].setValue(x[R],{onlySelf:!0,emitEvent:y.emitEvent})}),this.updateValueAndValidity(y)}patchValue(x,y={}){null!=x&&(Object.keys(x).forEach(R=>{this.controls[R]&&this.controls[R].patchValue(x[R],{onlySelf:!0,emitEvent:y.emitEvent})}),this.updateValueAndValidity(y))}reset(x={},y={}){this._forEachChild((R,W)=>{R.reset(x[W],{onlySelf:!0,emitEvent:y.emitEvent})}),this._updatePristine(y),this._updateTouched(y),this.updateValueAndValidity(y)}getRawValue(){return this._reduceChildren({},(x,y,R)=>(x[R]=y instanceof $o?y.value:y.getRawValue(),x))}_syncPendingControls(){let x=this._reduceChildren(!1,(y,R)=>!!R._syncPendingControls()||y);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[x])throw new Error(`Cannot find form control with name: ${x}.`)}_forEachChild(x){Object.keys(this.controls).forEach(y=>{const R=this.controls[y];R&&x(R,y)})}_setUpControls(){this._forEachChild(x=>{x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(x){for(const y of Object.keys(this.controls)){const R=this.controls[y];if(this.contains(y)&&x(R))return!0}return!1}_reduceValue(){return this._reduceChildren({},(x,y,R)=>((y.enabled||this.disabled)&&(x[R]=y.value),x))}_reduceChildren(x,y){let R=x;return this._forEachChild((W,le)=>{R=y(R,W,le)}),R}_allControlsDisabled(){for(const x of Object.keys(this.controls))if(this.controls[x].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(x){this._forEachChild((y,R)=>{if(void 0===x[R])throw new Error(`Must supply a value for form control with name: '${R}'.`)})}}class ds extends Ni{constructor(x,y,R){super(Ji(y),jr(R,y)),this.controls=x,this._initObservables(),this._setUpdateStrategy(y),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(x){return this.controls[x]}push(x,y={}){this.controls.push(x),this._registerControl(x),this.updateValueAndValidity({emitEvent:y.emitEvent}),this._onCollectionChange()}insert(x,y,R={}){this.controls.splice(x,0,y),this._registerControl(y),this.updateValueAndValidity({emitEvent:R.emitEvent})}removeAt(x,y={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),this.updateValueAndValidity({emitEvent:y.emitEvent})}setControl(x,y,R={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),y&&(this.controls.splice(x,0,y),this._registerControl(y)),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(x,y={}){this._checkAllValuesPresent(x),x.forEach((R,W)=>{this._throwIfControlMissing(W),this.at(W).setValue(R,{onlySelf:!0,emitEvent:y.emitEvent})}),this.updateValueAndValidity(y)}patchValue(x,y={}){null!=x&&(x.forEach((R,W)=>{this.at(W)&&this.at(W).patchValue(R,{onlySelf:!0,emitEvent:y.emitEvent})}),this.updateValueAndValidity(y))}reset(x=[],y={}){this._forEachChild((R,W)=>{R.reset(x[W],{onlySelf:!0,emitEvent:y.emitEvent})}),this._updatePristine(y),this._updateTouched(y),this.updateValueAndValidity(y)}getRawValue(){return this.controls.map(x=>x instanceof $o?x.value:x.getRawValue())}clear(x={}){this.controls.length<1||(this._forEachChild(y=>y._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:x.emitEvent}))}_syncPendingControls(){let x=this.controls.reduce((y,R)=>!!R._syncPendingControls()||y,!1);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(x))throw new Error(`Cannot find form control at index ${x}`)}_forEachChild(x){this.controls.forEach((y,R)=>{x(y,R)})}_updateValue(){this.value=this.controls.filter(x=>x.enabled||this.disabled).map(x=>x.value)}_anyControls(x){return this.controls.some(y=>y.enabled&&x(y))}_setUpControls(){this._forEachChild(x=>this._registerControl(x))}_checkAllValuesPresent(x){this._forEachChild((y,R)=>{if(void 0===x[R])throw new Error(`Must supply a value for form control at index: ${R}.`)})}_allControlsDisabled(){for(const x of this.controls)if(x.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(x){x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)}}const ff={provide:B,useExisting:(0,d.forwardRef)(()=>Rh)},Ys=(()=>Promise.resolve(null))();let Rh=(()=>{class T extends B{constructor(y,R,W,le){super(),this.control=new $o,this._registered=!1,this.update=new d.EventEmitter,this._parent=y,this._setValidators(R),this._setAsyncValidators(W),this.valueAccessor=function(T,x){if(!x)return null;let y,R,W;return Array.isArray(x),x.forEach(le=>{le.constructor===Ki?y=le:function(T){return Object.getPrototypeOf(T.constructor)===Ls}(le)?R=le:W=le}),W||R||y||null}(0,le)}ngOnChanges(y){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in y&&this._updateDisabled(y),function(T,x){if(!T.hasOwnProperty("model"))return!1;const y=T.model;return!!y.isFirstChange()||!Object.is(x,y.currentValue)}(y,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(T,x){return[...x.path,T]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(y){this.viewModel=y,this.update.emit(y)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(y){Ys.then(()=>{this.control.setValue(y,{emitViewToModelChange:!1})})}_updateDisabled(y){const R=y.isDisabled.currentValue,W=""===R||R&&"false"!==R;Ys.then(()=>{W&&!this.control.disabled?this.control.disable():!W&&this.control.disabled&&this.control.enable()})}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(I,9),d.\u0275\u0275directiveInject(go,10),d.\u0275\u0275directiveInject(Ba,10),d.\u0275\u0275directiveInject(To,10))},T.\u0275dir=d.\u0275\u0275defineDirective({type:T,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d.\u0275\u0275ProvidersFeature([ff]),d.\u0275\u0275InheritDefinitionFeature,d.\u0275\u0275NgOnChangesFeature]}),T})(),Lh=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=d.\u0275\u0275defineInjector({}),T})(),fa=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=d.\u0275\u0275defineInjector({imports:[[Lh]]}),T})(),zh=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=d.\u0275\u0275defineInjector({imports:[fa]}),T})();function cl(T,x){1&T&&(d.\u0275\u0275elementStart(0,"div",15),d.\u0275\u0275text(1," Incluye un signo '@' en la direccion de correo electr\xf3nico "),d.\u0275\u0275elementEnd())}function oc(T,x){1&T&&(d.\u0275\u0275elementStart(0,"div",16),d.\u0275\u0275text(1," Completa este campo. "),d.\u0275\u0275elementEnd())}let tu=(()=>{class T{constructor(){this.inputText="",this.alertTextoVacio="",this.alertFormatoIncorrecto=""}ngOnInit(){}btnEnviarCorreo(){""!=this.inputText?!0===this.esEmailValido(this.inputText)?(this.alertFormatoIncorrecto="false",location.href="mailto:suscripciones@solucionesintegralesnys.com?subject=Activar suscripcion para "+this.inputText):(this.alertTextoVacio="false",this.alertFormatoIncorrecto="true"):(this.alertTextoVacio="true",this.alertFormatoIncorrecto="false")}esEmailValido(y){let R=!1;return y.match(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)&&(R=!0),R}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-calltoactions"]],decls:19,vars:3,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800","text-center","lg:text-left"],[1,"block","rounded-lg","shadow-lg","bg-white"],[1,"flex","flex-wrap","items-center"],[1,"grow-0","shrink-0","basis-auto","hidden","lg:flex","lg:w-6/12","xl:w-4/12"],["src","https://firebasestorage.googleapis.com/v0/b/nyssolucionesintegrales-46858.appspot.com/o/imagenes%2Fsus.jpg?alt=media&token=dd743d49-d890-4e57-a604-6e0610b76d9b","alt","Pruebas Hidrost\xe1ticas",1,"w-full","rounded-t-lg","lg:rounded-tr-none","lg:rounded-bl-lg"],[1,"grow-0","shrink-0","basis-auto","w-full","lg:w-6/12","xl:w-8/12"],[1,"px-6","py-12","md:px-12"],[1,"text-3xl","font-bold","mb-6"],[1,"text-pink-600"],[1,"md:flex","flex-row"],["type","text","placeholder","Ingrese su email",1,"form-control","block","w-full","px-4","py-2","mb-2","md:mb-0","md:mr-2","text-xl","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","border-gray-300","rounded","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"ngModel","ngModelChange"],["type","submit","data-mdb-ripple","true","data-mdb-ripple-color","light",1,"inline-block","px-7","py-3","bg-pink-600","text-white","font-medium","text-sm","leading-snug","uppercase","rounded","shadow-md","hover:bg-yellow-500","hover:shadow-lg","focus:bg-blue-700","focus:shadow-lg","focus:outline-none","focus:ring-0","active:bg-blue-800","active:shadow-lg","transition","duration-150","ease-in-out",3,"click"],["class","bg-red-100 rounded-lg py-5 px-6 mb-4 text-base text-red-700 mb-3","role","alert",4,"ngIf"],["class","bg-yellow-100 rounded-lg py-5 px-6 mb-4 text-base text-yellow-700 mb-3","role","alert",4,"ngIf"],["role","alert",1,"bg-red-100","rounded-lg","py-5","px-6","mb-4","text-base","text-red-700","mb-3"],["role","alert",1,"bg-yellow-100","rounded-lg","py-5","px-6","mb-4","text-base","text-yellow-700","mb-3"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275element(5,"img",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div",6),d.\u0275\u0275elementStart(7,"div",7),d.\u0275\u0275elementStart(8,"h2",8),d.\u0275\u0275text(9," Nos caracterizamos en servir a la comunidad para realizar obras de calidad, implementando mejora continua en nuestros procesos. "),d.\u0275\u0275element(10,"br"),d.\u0275\u0275elementStart(11,"span",9),d.\u0275\u0275text(12,"Suscr\xedbete al bolet\xedn"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(13,"div",10),d.\u0275\u0275elementStart(14,"input",11),d.\u0275\u0275listener("ngModelChange",function(le){return R.inputText=le}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"button",12),d.\u0275\u0275listener("click",function(){return R.btnEnviarCorreo()}),d.\u0275\u0275text(16," Subscribe "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(17,cl,2,0,"div",13),d.\u0275\u0275template(18,oc,2,0,"div",14),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(14),d.\u0275\u0275property("ngModel",R.inputText),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngIf","true"===R.alertFormatoIncorrecto),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","true"===R.alertTextoVacio))},directives:[Ki,X,Rh,J.NgIf],styles:[""]}),T})();const jh=["mapDiv"];let Vh=(()=>{class T{constructor(){}ngAfterViewInit(){this.cargarMapa()}cargarMapa(){const y=new te.Map({container:this.mapDivElelement.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:[-73.77153350120048,3.9864402037157625],zoom:13,cooperativeGestures:!0});y.addControl(new(l().NavigationControl)),(new(l().Marker)).setLngLat([-73.77153350120048,3.9864402037157625]).addTo(y)}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-contactus"]],viewQuery:function(y,R){if(1&y&&d.\u0275\u0275viewQuery(jh,5),2&y){let W;d.\u0275\u0275queryRefresh(W=d.\u0275\u0275loadQuery())&&(R.mapDivElelement=W.first)}},decls:62,vars:0,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800"],[1,"block","rounded-lg","shadow-lg","bg-white"],[1,"flex","flex-wrap","items-center"],[1,"grow-0","shrink-0","basis-auto","block","w-full","lg:flex","lg:w-6/12","xl:w-4/12"],[1,"map-container-2","w-full"],["frameborder","0","allowfullscreen","",1,"left-0","top-0","h-full","w-full","rounded-t-lg","lg:rounded-tr-none","lg:rounded-bl-lg"],["mapDiv",""],[1,"grow-0","shrink-0","basis-auto","w-full","lg:w-6/12","xl:w-8/12"],[1,"flex","flex-wrap","pt-12","lg:pt-0"],[1,"mb-12","grow-0","shrink-0","basis-auto","w-full","md:w-6/12","lg:w-full","xl:w-6/12","px-3","md:px-6","xl:px-12"],[1,"flex","items-start"],[1,"shrink-0"],[1,"p-4","bg-yellow-500","rounded-md","shadow-md","w-14","h-14","flex","items-center","justify-center"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","headset","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-5","text-white"],["fill","currentColor","d","M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"],[1,"grow","ml-6"],[1,"font-bold","mb-1"],[1,"text-gray-500"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","dollar-sign","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 288 512",1,"w-3","text-white"],["fill","currentColor","d","M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"],[1,"flex","align-start"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","newspaper","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"w-5","text-white"],["fill","currentColor","d","M552 64H88c-13.255 0-24 10.745-24 24v8H24c-13.255 0-24 10.745-24 24v272c0 30.928 25.072 56 56 56h472c26.51 0 48-21.49 48-48V88c0-13.255-10.745-24-24-24zM56 400a8 8 0 0 1-8-8V144h16v248a8 8 0 0 1-8 8zm236-16H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm-208-96H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm0-96H140c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h360c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12z"],[1,"mb-12","lg:mb-0","grow-0","shrink-0","basis-auto","w-full","md:w-6/12","lg:w-full","xl:w-6/12","px-3","md:px-6","xl:px-12"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","bug","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-5","text-white"],["fill","currentColor","d","M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275element(6,"div",6,7),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",8),d.\u0275\u0275elementStart(9,"div",9),d.\u0275\u0275elementStart(10,"div",10),d.\u0275\u0275elementStart(11,"div",11),d.\u0275\u0275elementStart(12,"div",12),d.\u0275\u0275elementStart(13,"div",13),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(14,"svg",14),d.\u0275\u0275element(15,"path",15),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(16,"div",16),d.\u0275\u0275elementStart(17,"p",17),d.\u0275\u0275text(18,"Administracion"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(19,"p",18),d.\u0275\u0275text(20,"administracion.ln"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(21,"p",18),d.\u0275\u0275text(22,"@solucionesintegralesnys.com"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"div",10),d.\u0275\u0275elementStart(24,"div",11),d.\u0275\u0275elementStart(25,"div",12),d.\u0275\u0275elementStart(26,"div",13),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(27,"svg",19),d.\u0275\u0275element(28,"path",20),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(29,"div",16),d.\u0275\u0275elementStart(30,"p",17),d.\u0275\u0275text(31,"Contabillidad"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(32,"p",18),d.\u0275\u0275text(33,"contabillidad"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(34,"p",18),d.\u0275\u0275text(35,"@solucionesintegralesnys.com"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(36,"div",10),d.\u0275\u0275elementStart(37,"div",21),d.\u0275\u0275elementStart(38,"div",12),d.\u0275\u0275elementStart(39,"div",13),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(40,"svg",22),d.\u0275\u0275element(41,"path",23),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(42,"div",16),d.\u0275\u0275elementStart(43,"p",17),d.\u0275\u0275text(44,"Coordinacion hseq"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(45,"p",18),d.\u0275\u0275text(46,"coordinacionhseq"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(47,"p",18),d.\u0275\u0275text(48,"@solucionesintegralesnys.com"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(49,"div",24),d.\u0275\u0275elementStart(50,"div",21),d.\u0275\u0275elementStart(51,"div",12),d.\u0275\u0275elementStart(52,"div",13),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(53,"svg",25),d.\u0275\u0275element(54,"path",26),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(55,"div",16),d.\u0275\u0275elementStart(56,"p",17),d.\u0275\u0275text(57,"Gerencia operativa"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(58,"p",18),d.\u0275\u0275text(59,"gerenciaoperativa"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(60,"p",18),d.\u0275\u0275text(61,"@solucionesintegralesnys.com"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[".map-container[_ngcontent-%COMP%]{position:center;width:500px;height:500px;background-color:#ff0}",".map-container-2[_ngcontent-%COMP%] {\n        height: 500px;\n      }"]}),T})(),wd=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-clients"]],decls:43,vars:0,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800","text-center"],[1,"grid","md:grid-cols-2","lg:grid-cols-4","gap-x-6","lg:gap-xl-12"],[1,"mb-12","lg:mb-0"],["src","/assets/img/clientes/ecopetrol.png","alt","avatar",1,"rounded-lg","shadow-lg","mb-6","mx-auto",2,"width","150px"],[1,"text-lg","font-bold","mb-4"],[1,"mb-6"],[1,"list-inside","flex","mx-auto","justify-center"],["href","#!",1,"px-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-4","h-4","text-yellow-500"],["fill","currentColor","d","M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"],["src","/assets/img/clientes/concremack.png","alt","avatar",1,"rounded-lg","shadow-lg","mb-6","mx-auto",2,"width","150px"],[1,"mb-12","md:mb-0"],["src","/assets/img/clientes/kroil.png","alt","avatar",1,"rounded-lg","shadow-lg","mb-6","mx-auto",2,"width","150px"],["src","/assets/img/clientes/pegsa.png","alt","avatar",1,"rounded-lg","shadow-lg","mb-6","mx-auto",2,"width","150px"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275element(4,"img",4),d.\u0275\u0275elementStart(5,"h5",5),d.\u0275\u0275text(6,"Ecopetrol"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(7,"p",6),d.\u0275\u0275text(8,"Compa\xf1\xeda de petr\xf3leo de Colombia"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"ul",7),d.\u0275\u0275elementStart(10,"a",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(11,"svg",9),d.\u0275\u0275element(12,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"div",3),d.\u0275\u0275element(14,"img",11),d.\u0275\u0275elementStart(15,"h5",5),d.\u0275\u0275text(16,"Concremack"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"p",6),d.\u0275\u0275text(18,"Ingenier\xeda y construcci\xf3n de proyectos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(19,"ul",7),d.\u0275\u0275elementStart(20,"a",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(21,"svg",9),d.\u0275\u0275element(22,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(23,"div",12),d.\u0275\u0275element(24,"img",13),d.\u0275\u0275elementStart(25,"h5",5),d.\u0275\u0275text(26,"Croil"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(27,"p",6),d.\u0275\u0275text(28," Servicios e Ingenier\xeda"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(29,"ul",7),d.\u0275\u0275elementStart(30,"a",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(31,"svg",9),d.\u0275\u0275element(32,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(33,"div",12),d.\u0275\u0275element(34,"img",14),d.\u0275\u0275elementStart(35,"h5",5),d.\u0275\u0275text(36,"PEGSALTDA"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(37,"p",6),d.\u0275\u0275text(38,"Generando energia limpia"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(39,"ul",7),d.\u0275\u0275elementStart(40,"a",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(41,"svg",9),d.\u0275\u0275element(42,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[""]}),T})();const qd=function(){return["/servicios/montajes"]};let ih=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-footer"]],decls:78,vars:2,consts:[[1,"text-center","lg:text-left","bg-gray-100","text-gray-600"],[1,"flex","justify-center","items-center","lg:justify-between","p-6","border-b","border-gray-300"],[1,"mr-12","hidden","lg:block"],[1,"flex","justify-center"],["href","https://www.facebook.com/profile.php?id=100082006130733","target","_blank",1,"mr-6","text-gray-600"],["aria-hidden","true","focusable","false","data-prefix","fab","data-icon","facebook-f","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512",1,"w-2.5"],["fill","currentColor","d","M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"],["href","https://www.instagram.com/nyssolucionesintegrales/","target","_blank",1,"mr-6","text-gray-600"],["aria-hidden","true","focusable","false","data-prefix","fab","data-icon","instagram","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-3.5"],["fill","currentColor","d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"],["href","https://www.linkedin.com/company/nys-soluciones-integrales/","target","_blank",1,"mr-6","text-gray-600"],["aria-hidden","true","focusable","false","data-prefix","fab","data-icon","linkedin-in","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"w-3.5"],["fill","currentColor","d","M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"],[1,"mx-6","py-10","text-center","md:text-left"],[1,"grid","grid-1","md:grid-cols-2","lg:grid-cols-4","gap-8"],[1,""],[1,"uppercase","font-semibold","mb-4","flex","items-center","justify-center","md:justify-start"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","cubes","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-4","mr-3"],["fill","currentColor","d","M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z"],["src","/assets/lottie/95852-contact.json","background","transparent","speed","1","loop","","autoplay","",2,"width","120px","height","120px"],[1,"uppercase","font-semibold","mb-4","flex","justify-center","md:justify-start"],[1,"mb-4"],[1,"text-gray-600",3,"routerLink"],["href","#!",1,"text-gray-600"],["routerLink","proyectos",1,"text-gray-600"],["routerLink","nosotros",1,"text-gray-600"],[1,"flex","items-center","justify-center","md:justify-start","mb-4"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","home","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"w-4","mr-4"],["fill","currentColor","d","M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","envelope","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-4","mr-4"],["fill","currentColor","d","M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"],["aria-hidden","true","focusable","false","data-prefix","fas","data-icon","phone","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"w-4","mr-4"],["fill","currentColor","d","M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"],[1,"text-center","p-6","bg-gray-200"],["href","https://art-business-tecnology.web.app/home","target","_blank",1,"text-gray-600","font-semibold"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"footer",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"span"),d.\u0275\u0275text(4,"Con\xe9ctate con nosotros en las redes sociales:"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",3),d.\u0275\u0275elementStart(6,"a",4),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(7,"svg",5),d.\u0275\u0275element(8,"path",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(9,"a",7),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",8),d.\u0275\u0275element(11,"path",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(12,"a",10),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(13,"svg",11),d.\u0275\u0275element(14,"path",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(15,"div",13),d.\u0275\u0275elementStart(16,"div",14),d.\u0275\u0275elementStart(17,"div",15),d.\u0275\u0275elementStart(18,"h6",16),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(19,"svg",17),d.\u0275\u0275element(20,"path",18),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(21," \xa1Manteng\xe1monos en contacto! "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(22,"p"),d.\u0275\u0275text(23," Encu\xe9ntranos en cualquiera de estas plataformas, respondemos 1-2 d\xedas h\xe1biles. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(24,"div"),d.\u0275\u0275element(25,"lottie-player",19),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(26,"div",15),d.\u0275\u0275elementStart(27,"h6",20),d.\u0275\u0275text(28," Servicios "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(29,"p",21),d.\u0275\u0275elementStart(30,"a",22),d.\u0275\u0275text(31,"Montajes Mencanicos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(32,"p",21),d.\u0275\u0275elementStart(33,"a",23),d.\u0275\u0275text(34,"Sistemas de gesti\xf3n"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(35,"p",21),d.\u0275\u0275elementStart(36,"a",23),d.\u0275\u0275text(37,"Control y aseguramiento"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(38,"p"),d.\u0275\u0275elementStart(39,"a",23),d.\u0275\u0275text(40,"Soporte Tecnico"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(41,"p"),d.\u0275\u0275elementStart(42,"a",23),d.\u0275\u0275text(43,"Pruebas"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(44,"p"),d.\u0275\u0275elementStart(45,"a",23),d.\u0275\u0275text(46,"Alquiler de Equipos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(47,"div",15),d.\u0275\u0275elementStart(48,"h6",20),d.\u0275\u0275text(49," Useful links "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(50,"p",21),d.\u0275\u0275elementStart(51,"a",24),d.\u0275\u0275text(52,"Proyectos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(53,"p",21),d.\u0275\u0275elementStart(54,"a",25),d.\u0275\u0275text(55,"Quienes Somos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(56,"div",15),d.\u0275\u0275elementStart(57,"h6",20),d.\u0275\u0275text(58," Contactenos "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(59,"p",26),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(60,"svg",27),d.\u0275\u0275element(61,"path",28),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(62," Calle 12A #28-46, Acacias Meta "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(63,"p",26),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(64,"svg",29),d.\u0275\u0275element(65,"path",30),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(66," gerenciaoperativa"),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275element(67,"br"),d.\u0275\u0275text(68," @solucionesintegralesnys.com "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(69,"p",26),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(70,"svg",31),d.\u0275\u0275element(71,"path",32),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(72," +57 3112231139 "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(73,"div",33),d.\u0275\u0275elementStart(74,"span"),d.\u0275\u0275text(75,"\xa9 2022 Copyright:"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(76,"a",34),d.\u0275\u0275text(77,"Art Business Technology"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(30),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(1,qd)))},directives:[_s],styles:[""]}),T})(),Ed=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-index"]],decls:21,vars:0,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"flex","space-x-2","justify-center"],[1,"text-4xl","font-medium","leading-tight","text-gray-800"],[1,"inline-block","py-1.5","px-2.5","leading-none","text-center","whitespace-nowrap","align-baseline","font-bold","bg-yellow-500","text-white","rounded"]],template:function(y,R){1&y&&(d.\u0275\u0275element(0,"app-navbar-index"),d.\u0275\u0275element(1,"app-carusel"),d.\u0275\u0275element(2,"br"),d.\u0275\u0275element(3,"app-social-media"),d.\u0275\u0275element(4,"app-intro"),d.\u0275\u0275element(5,"app-calltoactions"),d.\u0275\u0275elementStart(6,"div",0),d.\u0275\u0275elementStart(7,"div",1),d.\u0275\u0275elementStart(8,"h2",2),d.\u0275\u0275text(9," \xbfDonde "),d.\u0275\u0275elementStart(10,"span",3),d.\u0275\u0275text(11,"Estamos?"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(12,"app-contactus"),d.\u0275\u0275elementStart(13,"div",0),d.\u0275\u0275elementStart(14,"div",1),d.\u0275\u0275elementStart(15,"h2",2),d.\u0275\u0275text(16," Nuestros "),d.\u0275\u0275elementStart(17,"span",3),d.\u0275\u0275text(18,"Clientes"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(19,"app-clients"),d.\u0275\u0275element(20,"app-footer"))},directives:[Sl,Il,hs,ol,tu,Vh,wd,ih],styles:[""]}),T})(),nu=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-breadcrumb"]],decls:13,vars:0,consts:[[1,"relative","w-full","flex","flex-wrap","items-center","justify-between","py-3","bg-gray-100","text-gray-500","hover:text-gray-700","focus:text-gray-700","shadow-lg","navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid","w-full","flex","flex-wrap","items-center","justify-between","px-6"],["aria-label","breadcrumb",1,"bg-grey-light","rounded-md","w-full"],[1,"list-reset","flex"],["routerLink","/","href","",1,"text-gray-500","hover:text-gray-600"],[1,"text-gray-500","mx-2"],["href","",1,"text-gray-500","hover:text-gray-600"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"nav",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"nav",2),d.\u0275\u0275elementStart(3,"ol",3),d.\u0275\u0275elementStart(4,"li"),d.\u0275\u0275elementStart(5,"a",4),d.\u0275\u0275text(6,"Home"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(7,"li"),d.\u0275\u0275elementStart(8,"span",5),d.\u0275\u0275text(9,"/"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"li"),d.\u0275\u0275elementStart(11,"a",6),d.\u0275\u0275text(12,"Quienes somos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},directives:[_s],styles:[""]}),T})(),bf=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-faqsections"]],decls:24,vars:0,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800"],[1,"container","mx-auto","xl:px-32","text-center","lg:text-left"],[1,"grid","lg:grid-cols-2","flex","items-center"],[1,"mb-12","lg:mb-0"],[1,"block","rounded-lg","shadow-lg","px-6","py-12","lg:py-6","xl:py-12","md:px-12","lg:-mr-14",2,"background","hsla(0, 0%, 100%, 0.55)","backdrop-filter","blur(30px)"],[1,"text-2xl","font-bold","mb-3"],[1,"text-lg","text-yellow-500","font-bold","mb-12","lg:mb-10","xl:mb-12"],[1,"font-bold","mb-4"],[1,"text-gra-500","mb-6"],[1,"text-gra-500"],["src","/assets/img/FOTOSFAMILIAN&S.jpg","alt","",1,"w-full","rounded-lg","shadow-lg"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"div",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275elementStart(5,"div",5),d.\u0275\u0275elementStart(6,"h3",6),d.\u0275\u0275text(7,"Sabemos lo valioso que es su tiempo"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"h5",7),d.\u0275\u0275text(9,"Queremos que nos conozcas mejor"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"p",8),d.\u0275\u0275text(11,"VISI\xd3N"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(12,"p",9),d.\u0275\u0275text(13," Crecer como organizaci\xf3n, accediendo al mercado regional y nacional, con nuestro equipo de profesionales y t\xe9cnicos, de excelente desempe\xf1o, proporcionando estabilidad a la organizaci\xf3n con precios competitivos puntualidad y cumplimiento, logrando un balance positivo para clientes, proveedores, aliados y colaboradores. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"p",8),d.\u0275\u0275text(15,"MISI\xd3N"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(16,"p",9),d.\u0275\u0275text(17," Nuestra misi\xf3n es brindar servicios de excelente calidad, ofrecemos a nuestros clientes la satisfacci\xf3n total de sus necesidades, mediante la adecuada prestaci\xf3n de servicios de ingenier\xeda en los campos de, nivelaci\xf3n y alineaci\xf3n de equipos rotativos, control y aseguramiento de procesos de calidad y Precomisionamiento, con la participaci\xf3n de colaboradores y aliados id\xf3neos, calificados y certificados, garantizando continuamente calidad, seguridad, rentabilidad y equidad entre los actores del proceso, desarrollando un medio ambiente sostenible y sustentable. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(18,"p",8),d.\u0275\u0275text(19," VALORES "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(20,"p",10),d.\u0275\u0275text(21," La eficiencia y la eficacia se logran, compartiendo principios \xe9ticos y morales, como el respeto, la gratitud, la honestidad y la lealtad, hacia nuestros clientes, aliados, colaboradores, sociedad en general y medio ambiente las cuales fortalecen, otorgan y hacen de esta una organizaci\xf3nestable. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(22,"div"),d.\u0275\u0275element(23,"img",11),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd())},styles:[""]}),T})(),Uh=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-nosotros"]],decls:4,vars:0,template:function(y,R){1&y&&(d.\u0275\u0275element(0,"app-navbar-index"),d.\u0275\u0275element(1,"app-breadcrumb"),d.\u0275\u0275element(2,"app-faqsections"),d.\u0275\u0275element(3,"app-footer"))},directives:[Sl,nu,bf,ih],styles:[""]}),T})();var Fu=v(629);function Hh(T,x){if(1&T){const y=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",13),d.\u0275\u0275elementStart(1,"div",14),d.\u0275\u0275elementStart(2,"img",15),d.\u0275\u0275listener("click",function(){const le=d.\u0275\u0275restoreView(y).index;return d.\u0275\u0275nextContext().open(le)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&T){const y=x.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275property("src",y.thumb,d.\u0275\u0275sanitizeUrl)}}let oh=(()=>{class T{constructor(y){this._lightbox=y,this._albumsone=[];for(let R=1;R<=4;R++)this._albumsone.push({src:"assets/proyectos/two/img"+R+".jpg",caption:"Image "+R+" caption here",thumb:"assets/proyectos/two/img"+R+".jpg"})}open(y){this._lightbox.open(this._albumsone,y)}close(){this._lightbox.close()}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(Fu.ey))},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-proyecto2"]],decls:20,vars:1,consts:[[1,"grid","md:grid-cols-2","gap-x-6","xl:gap-x-12","items-center","mb-12"],[1,"mb-6","md:mb-0","md:order-2"],[1,"overflow-hidden","text-gray-700"],[1,"container","px-5","py-2","mx-auto","lg:pt-12","lg:px-12"],[1,"flex","flex-wrap","-m-1","md:-m-2"],["class","flex flex-wrap w-1/2",4,"ngFor","ngForOf"],[1,"mb-6","md:mb-0","md:order-1"],[1,"text-2xl","font-bold","mb-3"],[1,"mb-3","text-blue-600","font-medium","text-sm","flex","items-center","justify-center","md:justify-start"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 496 512",1,"w-4","h-4","mr-2"],["fill","currentColor","d","M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"],[1,"text-gray-500","mb-6"],[1,"text-gray-500"],[1,"flex","flex-wrap","w-1/2"],[1,"w-full","p-1","md:p-2"],["alt","gallery",1,"block","object-cover","object-center","w-full","h-full","rounded-lg",3,"src","click"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"section",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275template(5,Hh,3,1,"div",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div",6),d.\u0275\u0275elementStart(7,"h3",7),d.\u0275\u0275text(8,"MORENO VARGAS"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"div",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",9),d.\u0275\u0275element(11,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(12," UBICACI\xd3N CA\xd1O SUR, RUBIALES PUERTO GAITAN META "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"p",11),d.\u0275\u0275elementStart(14,"small"),d.\u0275\u0275text(15,"Published "),d.\u0275\u0275elementStart(16,"u"),d.\u0275\u0275text(17,"12.01.2022"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(18,"p",12),d.\u0275\u0275text(19," Se realiza montaje nivelaci\xf3n y alineaci\xf3n en frio sin tuber\xeda de ejes motor bomba y alineaci\xf3n con tuber\xeda y liberaci\xf3n de esfuerzos de tuber\xeda, a bombas centrifugas horizontales a todos los procesos de filtraci\xf3n y tratamiento de agua, en el EP1 CA\xd1O SUR. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",R._albumsone))},directives:[J.NgForOf],styles:[""]}),T})();function Xd(T,x){if(1&T){const y=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",12),d.\u0275\u0275elementStart(1,"div",13),d.\u0275\u0275elementStart(2,"img",14),d.\u0275\u0275listener("click",function(){const le=d.\u0275\u0275restoreView(y).index;return d.\u0275\u0275nextContext().open(le)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&T){const y=x.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275property("src",y.thumb,d.\u0275\u0275sanitizeUrl)}}let sh=(()=>{class T{constructor(y){this._lightbox=y,this._albumsone=[];for(let R=1;R<=4;R++)this._albumsone.push({src:"assets/proyectos/three/img"+R+".jpg",caption:"Image "+R+" caption here",thumb:"assets/proyectos/three/img"+R+".jpg"})}open(y){this._lightbox.open(this._albumsone,y)}close(){this._lightbox.close()}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(Fu.ey))},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-proyecto3"]],decls:20,vars:1,consts:[[1,"grid","md:grid-cols-2","gap-x-6","xl:gap-x-12","items-center","mb-12"],[1,"mb-6","md:mb-0"],[1,"overflow-hidden","text-gray-700"],[1,"container","px-5","py-2","mx-auto","lg:pt-12","lg:px-20"],[1,"flex","flex-wrap","-m-1","md:-m-2"],["class","flex flex-wrap w-1/2",4,"ngFor","ngForOf"],[1,"text-2xl","font-bold","mb-3"],[1,"mb-3","text-yellow-500","font-medium","text-sm","flex","items-center","justify-center","md:justify-start"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 496 512",1,"w-4","h-4","mr-2"],["fill","currentColor","d","M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"],[1,"text-gray-500","mb-6"],[1,"text-gray-500"],[1,"flex","flex-wrap","w-1/2"],[1,"w-full","p-1","md:p-2"],["alt","gallery",1,"block","object-cover","object-center","w-full","h-full","rounded-lg",3,"src","click"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"section",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275template(5,Xd,3,1,"div",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div",1),d.\u0275\u0275elementStart(7,"h3",6),d.\u0275\u0275text(8,"CONSORCIO CONSTRULLANOS"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"div",7),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",8),d.\u0275\u0275element(11,"path",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(12," UBICACI\xd3N CA\xd1O SUR, RUBIALES PUERTO GAITAN META "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"p",10),d.\u0275\u0275elementStart(14,"small"),d.\u0275\u0275text(15,"Published "),d.\u0275\u0275elementStart(16,"u"),d.\u0275\u0275text(17,"10.01.2022"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(18,"p",11),d.\u0275\u0275text(19," Se realiza montaje nivelaci\xf3n y alineaci\xf3n en frio sin tuber\xeda de ejes motor bomba y alineaci\xf3n con tuber\xeda y liberaci\xf3n de esfuerzos de tuber\xeda, a 9 bombas horizontales de inyecci\xf3n de agua en el PAD 2 y 2 bombas verticales para el proceso de recolecci\xf3n e inyecci\xf3n de agua. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",R._albumsone))},directives:[J.NgForOf],styles:[""]}),T})();function ah(T,x){if(1&T){const y=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",13),d.\u0275\u0275elementStart(1,"div",14),d.\u0275\u0275elementStart(2,"img",15),d.\u0275\u0275listener("click",function(){const le=d.\u0275\u0275restoreView(y).index;return d.\u0275\u0275nextContext().open(le)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&T){const y=x.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275property("src",y.thumb,d.\u0275\u0275sanitizeUrl)}}let $h=(()=>{class T{constructor(y){this._lightbox=y,this._albumsone=[];for(let R=1;R<=4;R++)this._albumsone.push({src:"assets/proyectos/four/img"+R+".jpg",caption:"Image "+R+" caption here",thumb:"assets/proyectos/four/img"+R+".jpg"})}open(y){this._lightbox.open(this._albumsone,y)}close(){this._lightbox.close()}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(Fu.ey))},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-proyecto4"]],decls:20,vars:1,consts:[[1,"grid","md:grid-cols-2","gap-x-6","xl:gap-x-12","items-center","mb-12"],[1,"mb-6","md:mb-0","md:order-2"],[1,"overflow-hidden","text-gray-700"],[1,"container","px-5","py-2","mx-auto","lg:pt-12","lg:px-14"],[1,"flex","flex-wrap","-m-1","md:-m-2"],["class","flex flex-wrap w-1/2",4,"ngFor","ngForOf"],[1,"mb-6","md:mb-0","md:order-1"],[1,"text-2xl","font-bold","mb-3"],[1,"mb-3","text-blue-600","font-medium","text-sm","flex","items-center","justify-center","md:justify-start"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 496 512",1,"w-4","h-4","mr-2"],["fill","currentColor","d","M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"],[1,"text-gray-500","mb-6"],[1,"text-gray-500"],[1,"flex","flex-wrap","w-1/2"],[1,"w-full","p-1","md:p-2"],["alt","gallery",1,"block","object-cover","object-center","w-full","h-full","rounded-lg",3,"src","click"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"section",2),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275template(5,ah,3,1,"div",5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div",6),d.\u0275\u0275elementStart(7,"h3",7),d.\u0275\u0275text(8,"OTACC SA"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"div",8),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",9),d.\u0275\u0275element(11,"path",10),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(12," UBICACI\xd3N CPF 1 RUBIALES PUERTO GAITAN META "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"p",11),d.\u0275\u0275elementStart(14,"small"),d.\u0275\u0275text(15,"Published "),d.\u0275\u0275elementStart(16,"u"),d.\u0275\u0275text(17,"12.01.2022"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(18,"p",12),d.\u0275\u0275text(19," Se realiza desmote, mantenimiento preservaci\xf3n, montaje nivelaci\xf3n y alineaci\xf3n en frio sin tuber\xeda de ejes motor bomba y alineaci\xf3n con tuber\xeda y liberaci\xf3n de esfuerzos de tuber\xeda, a 6 bombas verticales, para el proceso de aspersi\xf3n en la ampliaci\xf3n del tratamiento de fluidos en campo Rubiales SUR. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",R._albumsone))},directives:[J.NgForOf],styles:[""]}),T})();function ru(T,x){if(1&T){const y=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",15),d.\u0275\u0275elementStart(1,"div",16),d.\u0275\u0275elementStart(2,"img",17),d.\u0275\u0275listener("click",function(){const le=d.\u0275\u0275restoreView(y).index;return d.\u0275\u0275nextContext().open(le)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&T){const y=x.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275property("src",y.thumb,d.\u0275\u0275sanitizeUrl)}}let iu=(()=>{class T{constructor(y){this._lightbox=y,this._albumsone=[];for(let R=1;R<=4;R++)this._albumsone.push({src:"assets/proyectos/one/img"+R+".jpg",caption:"Image "+R+" caption here",thumb:"assets/proyectos/one/img"+R+".jpg"})}open(y){this._lightbox.open(this._albumsone,y)}close(){this._lightbox.close()}}return T.\u0275fac=function(y){return new(y||T)(d.\u0275\u0275directiveInject(Fu.ey))},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-gallery"]],decls:28,vars:1,consts:[[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800","text-center","md:text-left"],[1,"text-3xl","font-bold","mb-12","text-center"],[1,"grid","md:grid-cols-2","gap-x-6","xl:gap-x-12","items-center","mb-12"],[1,"mb-6","md:mb-0"],[1,"overflow-hidden","text-gray-700"],[1,"container","px-5","py-2","mx-auto","lg:pt-12","lg:px-20"],[1,"flex","flex-wrap","-m-1","md:-m-2"],["class","flex flex-wrap w-1/2",4,"ngFor","ngForOf"],[1,"text-2xl","font-bold","mb-3"],[1,"mb-3","text-red-600","font-medium","text-sm","flex","items-center","justify-center","md:justify-start"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 496 512",1,"w-4","h-4","mr-2"],["fill","currentColor","d","M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"],[1,"text-gray-500","mb-6"],[1,"text-gray-500"],[1,"flex","flex-wrap","w-1/2"],[1,"w-full","p-1","md:p-2"],["alt","gallery",1,"block","object-cover","object-center","w-full","h-full","rounded-lg",3,"src","click"]],template:function(y,R){1&y&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"section",1),d.\u0275\u0275elementStart(2,"h2",2),d.\u0275\u0275text(3,"Nuestros Proyectos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",3),d.\u0275\u0275elementStart(5,"div",4),d.\u0275\u0275elementStart(6,"section",5),d.\u0275\u0275elementStart(7,"div",6),d.\u0275\u0275elementStart(8,"div",7),d.\u0275\u0275template(9,ru,3,1,"div",8),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",4),d.\u0275\u0275elementStart(11,"h3",9),d.\u0275\u0275text(12,"GEOCIVILES"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(13,"div",10),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(14,"svg",11),d.\u0275\u0275element(15,"path",12),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(16," UBICACI\xd3N CPF CUSIANA, TAURAMENA CASANARE "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(17,"p",13),d.\u0275\u0275elementStart(18,"small"),d.\u0275\u0275text(19,"Acompa\xf1amiento en la nivelaci\xf3n, alineaci\xf3n y liberaci\xf3n de esfuerzos de tuber\xeda de tres turbocompresores solar TAUROS 70"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(20,"ul",14),d.\u0275\u0275elementStart(21,"li"),d.\u0275\u0275text(22," se realiza nivelaci\xf3n de los skid del compresor y de la turbina, para aplicaci\xf3n de grout epoxico, dentro de las actividades se realiza alineaci\xf3n en frio de compresor- turbina por el m\xe9todo de comparador de caratula. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"li"),d.\u0275\u0275text(24," se realiza correcci\xf3n y liberaci\xf3n de esfuerzos de tuber\xedas de succi\xf3n y descarga del compresor y se revisa nuevamente la alineaci\xf3n de compresor -turbina. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(25,"app-proyecto2"),d.\u0275\u0275element(26,"app-proyecto3"),d.\u0275\u0275element(27,"app-proyecto4"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&y&&(d.\u0275\u0275advance(9),d.\u0275\u0275property("ngForOf",R._albumsone))},directives:[J.NgForOf,oh,sh,$h],styles:[""]}),T})(),xf=(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-proyectos"]],decls:16,vars:0,consts:[[1,"relative","w-full","flex","flex-wrap","items-center","justify-between","py-3","bg-gray-100","text-gray-500","hover:text-gray-700","focus:text-gray-700","shadow-lg","navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid","w-full","flex","flex-wrap","items-center","justify-between","px-6"],["aria-label","breadcrumb",1,"bg-grey-light","rounded-md","w-full"],[1,"list-reset","flex"],["routerLink","/","href","",1,"text-gray-500","hover:text-gray-600"],[1,"text-gray-500","mx-2"],["href","",1,"text-gray-500","hover:text-gray-600"]],template:function(y,R){1&y&&(d.\u0275\u0275element(0,"app-navbar-index"),d.\u0275\u0275elementStart(1,"nav",0),d.\u0275\u0275elementStart(2,"div",1),d.\u0275\u0275elementStart(3,"nav",2),d.\u0275\u0275elementStart(4,"ol",3),d.\u0275\u0275elementStart(5,"li"),d.\u0275\u0275elementStart(6,"a",4),d.\u0275\u0275text(7,"Home"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"li"),d.\u0275\u0275elementStart(9,"span",5),d.\u0275\u0275text(10,"/"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(11,"li"),d.\u0275\u0275elementStart(12,"a",6),d.\u0275\u0275text(13,"Proyectos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(14,"app-gallery"),d.\u0275\u0275element(15,"app-footer"))},directives:[Sl,_s,iu,ih],styles:[""]}),T})();const $a=function(){return["/servicios/montajes"]},Qs=[{path:"servicios",children:[{path:"montajes",component:(()=>{class T{constructor(){}ngOnInit(){}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-montajes-mecanicos"]],decls:33,vars:2,consts:[[1,"relative","w-full","flex","flex-wrap","items-center","justify-between","py-3","bg-gray-100","text-gray-500","hover:text-gray-700","focus:text-gray-700","shadow-lg","navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid","w-full","flex","flex-wrap","items-center","justify-between","px-6"],["aria-label","breadcrumb",1,"bg-grey-light","rounded-md","w-full"],[1,"list-reset","flex"],["routerLink","/","href","",1,"text-gray-500","hover:text-gray-600"],[1,"text-gray-500","mx-2"],[1,"text-gray-500","hover:text-gray-600"],[1,"text-gray-500","hover:text-gray-600",3,"routerLink"],[1,"container","my-24","px-6","mx-auto"],[1,"mb-32","text-gray-800"],[1,"block","rounded-lg","shadow-lg","bg-white"],[1,"flex","flex-wrap","items-center"],[1,"hidden","lg:flex","grow-0","shrink-0","basis-auto","lg:w-6/12","xl:w-4/12"],["src","assets/img/servicios/s1.png","alt","Trendy Pants and Shoes",1,"w-full","rounded-t-lg","lg:rounded-tr-none","lg:rounded-bl-lg"],[1,"grow-0","shrink-0","basis-auto","w-full","lg:w-6/12","xl:w-8/12"],[1,"px-6","py-12","md:px-12"],[1,"text-2xl","font-bold","mb-4"],[1,"text-gray-500","mb-6"]],template:function(y,R){1&y&&(d.\u0275\u0275element(0,"app-navbar-index"),d.\u0275\u0275elementStart(1,"nav",0),d.\u0275\u0275elementStart(2,"div",1),d.\u0275\u0275elementStart(3,"nav",2),d.\u0275\u0275elementStart(4,"ol",3),d.\u0275\u0275elementStart(5,"li"),d.\u0275\u0275elementStart(6,"a",4),d.\u0275\u0275text(7,"Home"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"li"),d.\u0275\u0275elementStart(9,"span",5),d.\u0275\u0275text(10,"/"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(11,"li"),d.\u0275\u0275elementStart(12,"a",6),d.\u0275\u0275text(13,"Servicios"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"li"),d.\u0275\u0275elementStart(15,"span",5),d.\u0275\u0275text(16,"/"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"li"),d.\u0275\u0275elementStart(18,"a",7),d.\u0275\u0275text(19,"Montajes mec\xe1nicos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(20,"div",8),d.\u0275\u0275elementStart(21,"section",9),d.\u0275\u0275elementStart(22,"div",10),d.\u0275\u0275elementStart(23,"div",11),d.\u0275\u0275elementStart(24,"div",12),d.\u0275\u0275element(25,"img",13),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(26,"div",14),d.\u0275\u0275elementStart(27,"div",15),d.\u0275\u0275elementStart(28,"h2",16),d.\u0275\u0275text(29,"Montajes Mec\xe1nicos"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(30,"p",17),d.\u0275\u0275text(31," Somos especialistas en montajes mec\xe1nicos de equipos rotativos y est\xe1ticos, tanto verticales como horizontales, as\xed como tambi\xe9n nos encargamos de realizar procesos de alineaci\xf3n y ajuste, dejando las m\xe1quinas listas para precomisionamiento y comisionamiento, adicionalmente brindamos asesor\xeda y soluciones en cuanto a todo el proceso constructivo de montaje de equipos. Contamos con instrumentos de medici\xf3n de alta precisi\xf3n tanto para nivelaci\xf3n de equipos como para alineaci\xf3n y tambi\xe9n disponemos de personal capacitado en el manejo de dichos equipos. Ofrecemos servicios de asesor\xeda en aplicaci\xf3n de grout y preparaci\xf3n de la placa para el proceso de montaje de las m\xe1quinas seg\xfan corresponda. Finalmente nos encargamos del proceso de liberaci\xf3n de esfuerzos para asegurar el correcto funcionamiento de la m\xe1quina. "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(32,"app-footer")),2&y&&(d.\u0275\u0275advance(18),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(1,$a)))},directives:[Sl,_s,ih],styles:[""]}),T})()}]},{path:"nosotros",component:Uh},{path:"proyectos",component:xf},{path:"",component:Ed},{path:"**",redirectTo:"",pathMatch:"full"}];let Nu=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=d.\u0275\u0275defineInjector({imports:[[vc.forRoot(Qs)],vc]}),T})(),No=(()=>{class T{constructor(){this.title="nysAv12"}}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=d.\u0275\u0275defineComponent({type:T,selectors:[["app-root"]],decls:1,vars:0,template:function(y,R){1&y&&d.\u0275\u0275element(0,"router-outlet")},directives:[Cu],styles:[""]}),T})(),Gh=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275mod=d.\u0275\u0275defineNgModule({type:T,bootstrap:[No]}),T.\u0275inj=d.\u0275\u0275defineInjector({providers:[],imports:[[O.BrowserModule,Nu,zh,Fu.QM]]}),T})();l().accessToken="pk.eyJ1IjoiY205NTAiLCJhIjoiY2w0enVweTU4MzV0YzNkczh6bWNra3k0eiJ9.kWobE-AhSHEZHjg1KIsIug",(0,d.enableProdMode)(),O.platformBrowser().bootstrapModule(Gh).catch(T=>console.error(T))}},me=>{me(me.s=3562)}]);